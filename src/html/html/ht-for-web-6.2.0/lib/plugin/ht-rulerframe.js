!function(T,A){"use strict";var W="position",v="absolute",y="relative",G="px",n="left",q="right",r="top",f="bottom",L="display",O="none",p="block",_=ht.Default,o=_.getInternal(),i=Math.floor,F=Math.ceil,d=Math.PI,w=null,l=T.parseInt,u=function(x){return x.getContext("2d")},Y=function(){return document},c=function(c){return Y().createElement(c)},z=function(){return c("canvas")},M=function(q,j,z){q.style.setProperty(j,z,w)},N=function(J,i,V){_.def(ht.widget[J],i,V)},X=function(m,_){m.appendChild(_)},J=function(r,L){r.removeChild(L)},Z=function(r,V,K,Y){r.addEventListener(V,K,!!Y)},C=function(X,s,F,u){X.removeEventListener(s,F,!!u)};ht.widget.RulerFrame=function(U){var i=this,h=i._view=o.createView(null,i),N=i.$1k=z(),A=i.$2k=z(),Q=i.$3k=z(),n=i.$4k=z();i._defaultRulerConfig={size:20,borderWidth:1,borderStyle:"solid",borderColor:"#888",defaultMajorTickSpacing:50,minMajorTickSpacing:10,minPhysicalMajorTickSpacing:40,maxPhysicalMajorTickSpacing:100,tickSpacingAdaptable:!0,majorTickTextFont:"12px Arial",majorTickTextColor:"#666",majorTickColor:"#888",minorTickColor:"#ccc",background:"rgba(0,0,0,0)",guideColor:"rgb(0, 173, 239)",guideWidth:2,guideVisible:!1,guideTipVisible:!1,guideTipBorderColor:"#666",guideTipTextColor:"#666",guideTipTextFont:"12px Arial",guideTipBackground:"#fff"},i._topRulerConfig={visible:!0},i._rightRulerConfig={visible:!1},i._bottomRulerConfig={visible:!1},i._leftRulerConfig={visible:!0},X(h,N),X(h,Q),X(h,A),X(h,n),M(h,W,y),M(h,"box-sizing","border-box"),M(h,"-moz-box-sizing","border-box"),M(N,W,v),M(A,W,v),M(Q,W,v),M(n,W,v),i.$14k=function(){i.$13k=1,i.iv()},i.$15k=function(t){if(i._topRulerConfig.guideVisible||i._rightRulerConfig.guideVisible||i._bottomRulerConfig.guideVisible||i._leftRulerConfig.guideVisible||i._defaultRulerConfig.guideVisible||(i._topRulerConfig.guideTipVisible||i._rightRulerConfig.guideTipVisible||i._bottomRulerConfig.guideTipVisible||i._leftRulerConfig.guideTipVisible||i._defaultRulerConfig.guideTipVisible)&&i._component){var D=h.getBoundingClientRect();i.$16k={x:t.clientX-D.left,y:t.clientY-D.top},i.$5k()}},i.setComponent(U)},N("RulerFrame",A,{ms_v:1,ms_fire:1,ms_ac:["defaultRulerConfig","topRulerConfig","rightRulerConfig","bottomRulerConfig","leftRulerConfig","component"],setComponent:function(z){var q=this,r=q._component,K=q.getView();if(K){if(q._component=z,q.fp("component",r,z),r){var L=q.getComponentView(r);J(K,L),C(K,"mousemove",q.$15k),q.removeComponentPropertyChangeListener(r,q.$14k)}if(z){var P=q.getComponentView(z);X(K,P),M(P,W,v),Z(K,"mousemove",q.$15k),q.addComponentPropertyChangeListener(z,q.$14k)}}},addComponentPropertyChangeListener:function(P,_){P&&P.mp&&P.mp(_)},removeComponentPropertyChangeListener:function(X,Z){X&&X.ump&&X.ump(Z)},getComponentHZoom:function(M){return M&&M.getZoom?M.getZoom():1},getComponentVZoom:function(E){return E&&E.getZoom?E.getZoom():1},getComponentViewRect:function(Z){return Z&&Z.getViewRect?Z.getViewRect():void 0},getComponentView:function(I){return I&&I.getView?I.getView():I},invalidateComponent:function(g){g&&g.iv&&g.iv()},validateComponent:function(w){w&&w.validate&&w.validate()},$7k:function(T,n,c,r,$,I,A,B,W,Y,K,N){if(n.visible){var k=this._defaultRulerConfig,b="borderStyle",U="borderColor",Z="borderWidth",e="background",g=n[b]||k[b],H=n[U]||k[U],v=n[Z]||k[Z],s=n.size!=w?n.size:k.size,R=n[e]||k[e],F=s+v,j=this.$6k(v,g,H,T,c,$,F,A,B,W,Y,K,N);M(T,$,"0px"),I?o.setCanvas(T,r-j,s):o.setCanvas(T,s,r-j),M(T,"background",R),M(T,L,p)}else M(T,L,O),M(this.getComponentView(this._component),$,"0px")},$6k:function(j,m,t,J,B,r,L,H,a,U,d,c,V){var b=0;return M(J,B,j+"px "+m+" "+t),M(this.getComponentView(this._component),r,L+G),H?(M(J,a,U+G),b+=U):M(J,a,"0px"),d?(M(J,c,V+G),b+=V):M(J,c,"0px"),b},validateImpl:function(){var p=this,Q=p._component,M=p.$1k,B=p.$2k,$=p.$3k,E=p.$4k,i=p._view,h=p._defaultRulerConfig,b=p._topRulerConfig,v=p._rightRulerConfig,A=p._bottomRulerConfig,C=p._leftRulerConfig,o=h.size;if(i&&Q){var m=b.size!=w?b.size:o,V=v.size!=w?v.size:o,O=A.size!=w?A.size:o,D=C.size!=w?C.size:o;p.$7k(M,b,"border-bottom",i.offsetWidth,r,!0,C.visible,n,D,v.visible,q,V),p.$7k(B,v,"border-left",i.offsetHeight,q,!1,b.visible,r,m,A.visible,f,O),p.$7k($,A,"border-top",i.offsetWidth,f,!0,C.visible,n,D,v.visible,q,V),p.$7k(E,C,"border-right",i.offsetHeight,n,!1,b.visible,r,m,A.visible,f,O),p.$13k?delete p.$13k:p.invalidateComponent(Q),p.validateComponent(Q),p.$5k()}},$5k:function(){function z(V,z,E,L,K,f){if(z.visible){var h=u(V),C=z[R]||N,t=z[g]!=w?z[g]:A,O=z[v]||b,H=z[M]||I,n=z.size!=w?z.size:o,Do=z[e]||G,qn=z[S]||Q,wl=z[i]||a,wp=z[Y]!=w?z[Y]:X,nm=z[_]!=w?z[_]:y,Vl=z[l]!=w?z[l]:J,_d=z[r]!=w?z[r]:D,Gk=z[s]!=w?z[s]:U,Vc=z[c]!=w?z[c]:T,Ao=z[B]||lr,Sc=z[j]||Ve;t&&(C=Z[f]=Z.$8k(Z[f]||C,z[p]||F,z[k]||W,L?x:q,qn)),E.call(Z,h,P,m,d,$,n,L?x:q,C,O,H,K,Do,wl);var ti=Z.$16k;(wp||nm)&&ti&&(L?Z.$9k(h,ti.x,n,Ao,Sc,wp,nm,Vl,_d,Gk,Vc):Z.$10k(h,ti.y,n,Ao,Sc,wp,nm,Vl,_d,Gk,Vc,K))}}var Z=this,H=Z.$1k,K=Z.$2k,h=Z.$3k,f=Z.$4k,n=Z._topRulerConfig,E=Z._rightRulerConfig,L=Z._bottomRulerConfig,O=Z._leftRulerConfig,t=Z._defaultRulerConfig,C=Z._component,V=Z.getComponentViewRect(C),x=Z.getComponentHZoom(C),q=Z.getComponentVZoom(C),P=V.x*x,d=P+V.width*x,m=V.y*q,$=m+V.height*q,o=Z._defaultRulerConfig.size,R="defaultMajorTickSpacing",p="maxPhysicalMajorTickSpacing",k="minPhysicalMajorTickSpacing",g="tickSpacingAdaptable",v="majorTickTextFont",M="majorTickTextColor",e="majorTickColor",i="minorTickColor",Y="guideVisible",_="guideTipVisible",l="guideTipBorderColor",r="guideTipTextColor",s="guideTipTextFont",c="guideTipBackground",B="guideColor",j="guideWidth",S="minMajorTickSpacing",N=t[R],F=t[p],W=t[k],A=t[g],b=t[v],I=t[M],G=t[e],Q=t[S],a=t[i],X=t[Y],y=t[_],J=t[l],D=t[r],U=t[s],T=t[c],lr=t[B],Ve=t[j];Z._view&&C&&(z(H,n,Z.$11k,!0,!1,"_currentTopMajorTickSpacing"),z(K,E,Z.$12k,!1,!0,"_currentRightMajorTickSpacing"),z(h,L,Z.$11k,!0,!0,"_currentBottomMajorTickSpacing"),z(f,O,Z.$12k,!1,!1,"_currenLeftMajorTickSpacing"))},$8k:function(h,U,E,q,A){return E>h*q?h=i(U/q/A)*A:h*q>U&&(h=F(E/q/A)*A),h},getHTipText:function(d){var w=this,a=w._component,p=0,O=w._view.getBoundingClientRect();return a.lp?p=l(a.lp({x:d.x+O.left,y:d.y}).x):p-=l(this.getComponentView(a).style.left)||0,p},$9k:function(g,R,X,Z,n,C,K,H,e,U,V){var u=this,a=u._component;g.save(),o.translateAndScale(g,0,0,1);var O=R-(l(this.getComponentView(a).style.left)||0),T=0;if(R=u.getHTipText(u.$16k),C&&(g.beginPath(),g.fillStyle=Z,g.rect(O,T,n,X),g.fill()),K){g.beginPath(),g.textAlign="center",g.textBaseline="middle",g.font=U;var y=g.measureText(R).width+6;g.fillStyle=V,g.rect(O-y/2,T,y,X),g.fill(),g.strokeStyle=H,g.stroke(),g.beginPath(),g.fillStyle=e,g.fillText(R,O,T+X/2)}g.restore()},getVTipText:function(b){var j=this,m=j._component,x=0,o=j._view.getBoundingClientRect();return m.lp?x=l(m.lp({x:b.x,y:b.y+o.top}).y):x-=l(this.getComponentView(m).style.top)||0,x},formatScaleText:function(y){return Math.round(y)},$10k:function(t,r,a,j,s,f,$,W,p,y,O,J){var w=this,k=w._component;t.save(),o.translateAndScale(t,0,0,1);var D=a/2,v=r-(l(this.getComponentView(k).style.top)||0);if(r=w.getVTipText(w.$16k),f&&(t.beginPath(),t.fillStyle=j,t.rect(D-a/2,v,a,s),t.fill()),$){t.translate(D,v),t.rotate((J?90:-90)*d/180),t.translate(-D,-v),t.beginPath(),t.textAlign="center",t.textBaseline="middle",t.font=y;var M=t.measureText(r).width+6;t.fillStyle=O,t.rect(D-M/2,v-a/2,M,a),t.fill(),t.strokeStyle=W,t.stroke(),t.fillStyle=p,t.fillText(r,D,v)}t.restore()},$11k:function(w,C,q,g,W,z,M,n,I,y,Y,b,e){w.save(),q=0;var d=C,H=g,m=(d+H)/2;C=0,g=H-d,o.translateAndScale(w,0,0,1);var $=0,A=0,S=l(z/2),j=z-S,K=Y?0:S,X=n*M,N=X/10;C-=X,g+=X,w.clearRect(C,0,g-C,z),w.beginPath(),w.fillStyle=e;var Z=i(m/N)*N-d;for($=Z;g>$;$+=N)w.rect($,q+K,1,j);for($=Z;$>C;$-=N)w.rect($,q+K,1,j);for(w.fill(),K=Y?0:1,w.beginPath(),w.fillStyle=b,Z=i(m/X)*X-d,$=Z;g>$;$+=X)w.rect($,q+K,1,z-1);for($=Z;$>C;$-=X)w.rect($,q+K,1,z-1);w.fill();var L=l(/\d+px/.exec(I)[0]),p=(L||10)/2;w.textBaseline="middle",K=Y?z-p-2:p+2,w.beginPath(),w.fillStyle=y,w.font=I;var O=i(m/X)*X/M;for($=Z,A=O;g>$;$+=X,A+=n){var s=this.getHScaleText?this.getHScaleText($):A;w.fillText(this.formatScaleText(s),$+2,q+K)}for($=Z,A=O;$>C;$-=X,A-=n){var s=this.getHScaleText?this.getHScaleText($):A;w.fillText(this.formatScaleText(s),$+2,q+K)}w.restore()},$12k:function(P,m,s,F,$,Y,U,w,C,c,H,a,T){function X(k,Q,y,I,$,d){$=p.getVScaleText?p.getVScaleText(y):$,$=p.formatScaleText($),P.translate(k+Q,y),P.rotate(-I),P.translate(-k-Q,-y),P.fillText($,k+Q+(d?2:1),y),P.translate(k+Q,y),P.rotate(I),P.translate(-k-Q,-y)}P.save(),m=0;var y=s,k=$,N=(y+k)/2;s=0,$=k-y,o.translateAndScale(P,0,0,1);var z=0,p=this,E=0,M=l(Y/2),A=Y-M,t=H?0:M,e=w*U,x=e/10;s-=e,$+=e,P.clearRect(m,0,Y,$-s),P.beginPath(),P.fillStyle=T;var v=i(N/x)*x-y;for(z=v;$>z;z+=x)P.rect(m+t,z,A,1);for(z=v;z>s;z-=x)P.rect(m+t,z,A,1);for(P.fill(),t=H?0:1,P.beginPath(),P.fillStyle=a,v=i(N/e)*e-y,z=v;$>z;z+=e)P.rect(m+t,z,Y-1,1);for(z=v;z>s;z-=e)P.rect(m+t,z,Y-1,1);P.fill();var O=l(/\d+px/.exec(C)[0]),_=(O||10)/2,h=90*d/180;P.textBaseline="middle",t=H?Y-_:_+2,h=H?-h:h,P.beginPath(),P.fillStyle=c,P.font=C;var j=i(N/e)*e/U;for(z=v,E=j;$>z;z+=e,E+=w)X(m,t,z,h,E,H);for(z=v,E=j;z>s;z-=e,E-=w)X(m,t,z,h,E,H);P.restore()},onPropertyChanged:function(){this.iv()},dispose:function(){var e=this,X=e._component,c=e._view;X&&e.removeComponentPropertyChangeListener(X,e.$14k),c&&(C(c,"mousemove",e.$15k),J(c.parentNode,c),e._view=null)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);