!function(W){"use strict";var H="ht",d=W[H],l=Math,A=l.max,E=l.min,S=l.abs,Q=l.atan2,q=(l.cos,l.sin,l.ceil),K=d.Default,M=K.getInternal(),B=d.List,i=M.Mat,$=M.getNodeRect,U=M.intersectionLineRect,p=K.getDistance,t=K.setEdgeType,L="left",n="right",J="top",_="bottom",m="edge.type",I="edge.gap",g="edge.center",e="edge.extend",X=function(p,S){return $(p,S).width},f=function(n,Y){return $(n,Y).height},N=function(O,R){return M.getEdgeAgentPosition(O,R._40I,R.s("edge.source.position"),R.s("edge.source.offset.x"),R.s("edge.source.offset.y"),R.s("edge.source.anchor.x"),R.s("edge.source.anchor.y"))},w=function(Q,p){return M.getEdgeAgentPosition(Q,p._41I,p.s("edge.target.position"),p.s("edge.target.offset.x"),p.s("edge.target.offset.y"),p.s("edge.target.anchor.x"),p.s("edge.target.anchor.y"))},P=function(V,P){var O=V.s(m),Q=V.getEdgeGroup();if(Q){var q=0;if(Q.eachSiblingEdge(function(t){P.isVisible(t)&&t.s(m)==O&&q++}),q>1)return V.s(I)*(q-1)/2}return 0},x=function(g,a){var M=g.s(m),t=g.isLooped();if(!g.getEdgeGroup())return t?g.s(I):0;var U,J=0,F=0,h=0;return g.getEdgeGroup().getSiblings().each(function($){$.each(function(z){if(z._40I===g._40I&&z.s(m)==M&&a.isVisible(z)){var _=z.s(I);U?(F+=h/2+_/2,h=_):(U=z,h=_),z===g&&(J=F)}})}),t?F-J+h:J-F/2},r=function(T,a){var W=a.s("edge.corner.radius");return K.toRoundedCorner(T,W)};M.addMethod(d.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),t("boundary",function(E,x,f,D){D||(x=-x);var m,a=N(f,E),X=w(f,E),z=$(f,E._40I),h=$(f,E._41I),t=new i(Q(X.y-a.y,X.x-a.x)),L=p(a,X),u=a.x,K=a.y;return m=t.tf(0,x),a={x:m.x+u,y:m.y+K},m=t.tf(L,x),X={x:m.x+u,y:m.y+K},m=U(a,X,z),m&&(a={x:m[0],y:m[1]}),m=U(a,X,h),m&&(X={x:m[0],y:m[1]}),{points:new B([a,X])}}),t("ripple",function(I,Y,M,W){W||(Y=-Y);var C=N(M,I),L=w(M,I),k=p(C,L),Z=E(I.s("edge.offset"),k/2),r=I.s("edge.ripple.size"),z=I.s("edge.ripple.length"),n=I.s("edge.ripple.both"),O=I.s(g),m=I.s("edge.ripple.elevation"),S=new B,X=I.s("edge.ripple.straight")?null:new B,d=new i(Q(L.y-C.y,L.x-C.x));W||(m=-m),k-=2*Z,z>0&&(r=q(k/z));var l=k/r;X&&X.add(1);for(var j=0;r>j;j++)X&&X.add(3),0===j?S.add({x:Z+l*j,y:O?0:Y}):S.add({x:Z+l*j,y:Y}),S.add({x:Z+l*j+l/2,y:m+Y}),n&&(m=-m);for(S.add({x:Z+k,y:O?0:Y}),j=0;j<S.size();j++){var D=d.tf(S.get(j));D.x+=C.x,D.y+=C.y,S.set(j,D)}return{points:S,segments:X}}),t("h.v",function(J,W,C){W=x(J,C);var M=new B,o=J.s(g),_=N(C,J),c=_.x,z=_.y,v=w(C,J),k=v.x,D=v.y,j=0,E=0,A=k-c,$=D-z;return o||(j=X(C,J._40I)/2,E=f(C,J._41I)/2),A>=0&&0>=$?(M.add({x:c+j,y:z+W}),M.add({x:k+W,y:z+W}),M.add({x:k+W,y:D+E})):0>=A&&$>=0?(M.add({x:c-j,y:z+W}),M.add({x:k+W,y:z+W}),M.add({x:k+W,y:D-E})):A>=0&&$>=0?(M.add({x:c+j,y:z+W}),M.add({x:k-W,y:z+W}),M.add({x:k-W,y:D-E})):(M.add({x:c-j,y:z+W}),M.add({x:k-W,y:z+W}),M.add({x:k-W,y:D+E})),r(M,J)}),t("v.h",function(y,j,I){j=x(y,I);var n=new B,z=y.s(g),e=N(I,y),d=e.x,i=e.y,o=w(I,y),Q=o.x,u=o.y,k=0,l=0,s=Q-d,D=u-i;return z||(k=X(I,y._41I)/2,l=f(I,y._40I)/2),s>=0&&0>=D?(n.add({x:d+j,y:i-l}),n.add({x:d+j,y:u+j}),n.add({x:Q-k,y:u+j})):0>=s&&D>=0?(n.add({x:d+j,y:i+l}),n.add({x:d+j,y:u+j}),n.add({x:Q+k,y:u+j})):s>=0&&D>=0?(n.add({x:d-j,y:i+l}),n.add({x:d-j,y:u+j}),n.add({x:Q-k,y:u+j})):(n.add({x:d-j,y:i-l}),n.add({x:d-j,y:u+j}),n.add({x:Q+k,y:u+j})),r(n,y)}),t("ortho",function(b,U,d){var M=new B,o=b.s(g),i=b.s("edge.ortho"),R=b._40I,c=b._41I,P=N(d,b),e=P.x,C=P.y,u=w(d,b),K=u.x,E=u.y,v=K-e,j=E-C,k=o?0:X(d,R)/2,h=o?0:f(d,R)/2,V=o?0:X(d,c)/2,m=o?0:f(d,c)/2,H=(v-(k+V)*(v>0?1:-1))*i,l=(j-(h+m)*(j>0?1:-1))*i;return S(v)<S(j)?v>=0&&0>=j?(M.add({x:e+U,y:C-h}),M.add({x:e+U,y:C+l+U-h}),M.add({x:K+U,y:C+l+U-h}),M.add({x:K+U,y:E+m})):0>=v&&j>=0?(M.add({x:e+U,y:C+h}),M.add({x:e+U,y:C+l+U+h}),M.add({x:K+U,y:C+l+U+h}),M.add({x:K+U,y:E-m})):v>=0&&j>=0?(M.add({x:e+U,y:C+h}),M.add({x:e+U,y:C+l-U+h}),M.add({x:K+U,y:C+l-U+h}),M.add({x:K+U,y:E-m})):(M.add({x:e+U,y:C-h}),M.add({x:e+U,y:C+l-U-h}),M.add({x:K+U,y:C+l-U-h}),M.add({x:K+U,y:E+m})):v>=0&&0>=j?(M.add({x:e+k,y:C+U}),M.add({x:e+H+U+k,y:C+U}),M.add({x:e+H+U+k,y:E+U}),M.add({x:K-V,y:E+U})):0>=v&&j>=0?(M.add({x:e-k,y:C+U}),M.add({x:e+H+U-k,y:C+U}),M.add({x:e+H+U-k,y:E+U}),M.add({x:K+V,y:E+U})):v>=0&&j>=0?(M.add({x:e+k,y:C+U}),M.add({x:e+H-U+k,y:C+U}),M.add({x:e+H-U+k,y:E+U}),M.add({x:K-V,y:E+U})):(M.add({x:e-k,y:C+U}),M.add({x:e+H-U-k,y:C+U}),M.add({x:e+H-U-k,y:E+U}),M.add({x:K+V,y:E+U})),r(M,b)}),t("flex",function(I,j,R){var O=new B,T=I.s("edge.flex")+P(I,R),h=I.s(g),y=I._40I,$=I._41I,t=N(R,I),b=t.x,H=t.y,F=w(R,I),e=F.x,L=F.y,u=e-b,c=L-H,D=h?0:X(R,y)/2,E=h?0:f(R,y)/2,m=h?0:X(R,$)/2,k=h?0:f(R,$)/2,l=u>0?T:-T,J=c>0?T:-T;return S(u)<S(c)?u>=0&&0>=c?(O.add({x:b+j,y:H-E}),O.add({x:b+j,y:H+J+j-E}),O.add({x:e+j,y:L-J+j+k}),O.add({x:e+j,y:L+k})):0>=u&&c>=0?(O.add({x:b+j,y:H+E}),O.add({x:b+j,y:H+J+j+E}),O.add({x:e+j,y:L-J+j-k}),O.add({x:e+j,y:L-k})):u>=0&&c>=0?(O.add({x:b+j,y:H+E}),O.add({x:b+j,y:H+J-j+E}),O.add({x:e+j,y:L-J-j-k}),O.add({x:e+j,y:L-k})):(O.add({x:b+j,y:H-E}),O.add({x:b+j,y:H+J-j-E}),O.add({x:e+j,y:L-J-j+k}),O.add({x:e+j,y:L+k})):u>=0&&0>=c?(O.add({x:b+D,y:H+j}),O.add({x:b+l+j+D,y:H+j}),O.add({x:e-l+j-m,y:L+j}),O.add({x:e-m,y:L+j})):0>=u&&c>=0?(O.add({x:b-D,y:H+j}),O.add({x:b+l+j-D,y:H+j}),O.add({x:e-l+j+m,y:L+j}),O.add({x:e+m,y:L+j})):u>=0&&c>=0?(O.add({x:b+D,y:H+j}),O.add({x:b+l-j+D,y:H+j}),O.add({x:e-l-j-m,y:L+j}),O.add({x:e-m,y:L+j})):(O.add({x:b-D,y:H+j}),O.add({x:b+l-j-D,y:H+j}),O.add({x:e-l-j+m,y:L+j}),O.add({x:e+m,y:L+j})),r(O,I)}),t("extend.east",function(Z,n,k){var t=new B,J=Z.s(e)+P(Z,k),H=Z.s(g),K=N(k,Z),f=K.x+(H?0:X(k,Z._40I)/2),c=K.y,_=w(k,Z),M=_.x+(H?0:X(k,Z._41I)/2),R=_.y,b=A(f,M)+J;return c>R?(t.add({x:f,y:c+n}),t.add({x:b+n,y:c+n}),t.add({x:b+n,y:R-n}),t.add({x:M,y:R-n})):(t.add({x:f,y:c-n}),t.add({x:b+n,y:c-n}),t.add({x:b+n,y:R+n}),t.add({x:M,y:R+n})),r(t,Z)}),t("extend.west",function(v,S,h){var $=new B,D=v.s(e)+P(v,h),_=v.s(g),n=N(h,v),j=n.x-(_?0:X(h,v._40I)/2),u=n.y,m=w(h,v),c=m.x-(_?0:X(h,v._41I)/2),k=m.y,M=E(j,c)-D;return u>k?($.add({x:j,y:u+S}),$.add({x:M-S,y:u+S}),$.add({x:M-S,y:k-S}),$.add({x:c,y:k-S})):($.add({x:j,y:u-S}),$.add({x:M-S,y:u-S}),$.add({x:M-S,y:k+S}),$.add({x:c,y:k+S})),r($,v)}),t("extend.north",function(Q,v,I){var i=new B,W=Q.s(e)+P(Q,I),M=Q.s(g),j=N(I,Q),A=j.x,c=j.y-(M?0:f(I,Q._40I)/2),O=w(I,Q),u=O.x,$=O.y-(M?0:f(I,Q._41I)/2),D=E(c,$)-W;return A>u?(i.add({y:c,x:A+v}),i.add({y:D-v,x:A+v}),i.add({y:D-v,x:u-v}),i.add({y:$,x:u-v})):(i.add({y:c,x:A-v}),i.add({y:D-v,x:A-v}),i.add({y:D-v,x:u+v}),i.add({y:$,x:u+v})),r(i,Q)}),t("extend.south",function(t,V,k){var R=new B,o=t.s(e)+P(t,k),l=t.s(g),p=N(k,t),H=p.x,j=p.y+(l?0:f(k,t._40I)/2),W=w(k,t),O=W.x,J=W.y+(l?0:f(k,t._41I)/2),$=A(j,J)+o;return H>O?(R.add({y:j,x:H+V}),R.add({y:$+V,x:H+V}),R.add({y:$+V,x:O-V}),R.add({y:J,x:O-V})):(R.add({y:j,x:H-V}),R.add({y:$+V,x:H-V}),R.add({y:$+V,x:O+V}),R.add({y:J,x:O+V})),r(R,t)});var C=function(r,z,W,U,c){if(U.sort(function(v,Y){var H=v.getSourceAgent()===z?v.getTargetAgent():v.getSourceAgent(),h=Y.getSourceAgent()===z?Y.getTargetAgent():Y.getSourceAgent(),j=H.p(),X=h.p();if(W===L||W===n){if(j.y>X.y)return 1;if(j.y<X.y)return-1}else{if(j.x>X.x)return 1;if(j.x<X.x)return-1}return K.sortFunc(v.getId(),Y.getId())}),c){for(var q,h,J,t=r.getSourceAgent(),E=r.getTargetAgent(),M=0;M<U.size();M++){var e=U.get(M);e.getSourceAgent()===t&&e.getTargetAgent()===E||e.getTargetAgent()===t&&e.getSourceAgent()===E?(h||(h=new B),h.add(e,0)):h?(J||(J=new B),J.add(e)):(q||(q=new B),q.add(e))}U.clear(),q&&U.addAll(q),h&&U.addAll(h),J&&U.addAll(J)}var N=U.indexOf(r),T=U.size(),j=r.s(I);return{side:W,index:N,size:T,offset:-j*(T-1)/2+j*N}},b=function(s,Y,e,A,D){var o=Y.s(m);return C(Y,e,A,e.getAgentEdges().toList(function(H){return s.isVisible(H)&&H.s(m)===o}),D)},y=function(Q,o){var c=Q.getSourceAgent()===o?Q.getTargetAgent():Q.getSourceAgent(),X=o.p(),e=c.p(),y=e.x-X.x,f=e.y-X.y;return y>0&&S(f)<=y?n:0>y&&S(f)<=-y?L:f>0&&S(y)<=f?_:J},z=function(K,D,M){var d=D.s(m),k=y(D,M);return C(D,M,k,M.getAgentEdges().toList(function(_){return K.isVisible(_)&&_.s(m)===d&&y(_,M)===k}))},s=function(M,K){var o=M.getSourceAgent()===K,d=o?M.getTargetAgent():M.getSourceAgent(),g=K.p(),R=d.p();return o?g.y>R.y?J:_:g.x<R.x?n:L},k=function(Y,P,g){var r=P.s(m),t=s(P,g);return C(P,g,t,g.getAgentEdges().toList(function(R){return Y.isVisible(R)&&R.s(m)===r&&s(R,g)===t}),t===n||t===_)},Y=function(v,b){var E=v.getSourceAgent()===b,y=E?v.getTargetAgent():v.getSourceAgent(),q=b.p(),c=y.p();return E?q.x<c.x?n:L:q.y>c.y?J:_},G=function(B,U,M){var F=U.s(m),L=Y(U,M);return C(U,M,L,M.getAgentEdges().toList(function(y){return B.isVisible(y)&&y.s(m)===F&&Y(y,M)===L}),L===n||L===_)},v=function(V,d,m){var h=V.getSourceAgent(),s=V.getTargetAgent(),e=h.getId()>s.getId(),K=e?s:h,j=e?h:s,I=K.p(),U=j.p(),q=m(d,V,K),E=m(d,V,j),F=V.s(g),Y=F?0:X(d,K)/2,M=F?0:X(d,j)/2,P=F?0:f(d,K)/2,N=F?0:f(d,j)/2,y=q.offset,c=E.offset,u=q.side,H=E.side,D=new B;return u===J?(D.add({x:I.x+y,y:I.y-P}),D.add({x:I.x+y,y:U.y+c}),H===L?D.add({x:U.x-M,y:U.y+c}):D.add({x:U.x+M,y:U.y+c})):u===_?(D.add({x:I.x+y,y:I.y+P}),D.add({x:I.x+y,y:U.y+c}),H===L?D.add({x:U.x-M,y:U.y+c}):D.add({x:U.x+M,y:U.y+c})):u===L?(D.add({x:I.x-Y,y:I.y+y}),D.add({x:U.x+c,y:I.y+y}),H===_?D.add({x:U.x+c,y:U.y+N}):D.add({x:U.x+c,y:U.y-N})):u===n&&(D.add({x:I.x+Y,y:I.y+y}),D.add({x:U.x+c,y:I.y+y}),H===_?D.add({x:U.x+c,y:U.y+N}):D.add({x:U.x+c,y:U.y-N})),e&&D.reverse(),r(D,V)};t("ortho2",function(W,o,T){var s,u,t=W.s(g),S=W.s("edge.ortho"),C=W.getSourceAgent(),y=W.getTargetAgent(),Z=C.getId()>y.getId(),F=Z?y:C,h=Z?C:y,i=F.p(),w=h.p(),K=z(T,W,F),b=z(T,W,h),U=t?0:X(T,F)/2,V=t?0:f(T,F)/2,P=t?0:X(T,h)/2,E=t?0:f(T,h)/2,H=new B,d=K.offset,q=b.offset,k=K.side;return k===n?(s=w.y>i.y?-d:d,u=i.x+U+(w.x-P-i.x-U)*S,H.add({x:i.x+U,y:i.y+d}),H.add({x:u+s,y:i.y+d}),H.add({x:u+s,y:w.y+q}),H.add({x:w.x-P,y:w.y+q})):k===L?(s=w.y>i.y?-d:d,u=i.x-U-(i.x-U-w.x-P)*S,H.add({x:i.x-U,y:i.y+d}),H.add({x:u-s,y:i.y+d}),H.add({x:u-s,y:w.y+q}),H.add({x:w.x+P,y:w.y+q})):k===_?(s=w.x>i.x?-d:d,u=i.y+V+(w.y-E-i.y-V)*S,H.add({x:i.x+d,y:i.y+V}),H.add({x:i.x+d,y:u+s}),H.add({x:w.x+q,y:u+s}),H.add({x:w.x+q,y:w.y-E})):k===J&&(s=w.x>i.x?-d:d,u=i.y-V-(i.y-V-w.y-E)*S,H.add({x:i.x+d,y:i.y-V}),H.add({x:i.x+d,y:u-s}),H.add({x:w.x+q,y:u-s}),H.add({x:w.x+q,y:w.y+E})),Z&&H.reverse(),r(H,W)},!0),t("flex2",function(o,u,U){var y,p=o.getSourceAgent(),x=o.getTargetAgent(),M=p.getId()>x.getId(),F=M?x:p,N=M?p:x,j=F.p(),k=N.p(),W=z(U,o,F),Q=z(U,o,N),v=o.s(g),C=o.s("edge.flex")+(W.size-1)/2*o.s(I),q=v?0:X(U,F)/2,O=v?0:f(U,F)/2,m=v?0:X(U,N)/2,D=v?0:f(U,N)/2,b=new B,l=W.offset,A=Q.offset,h=W.side;return h===n?(y=k.y>j.y?-l:l,b.add({x:j.x+q,y:j.y+l}),b.add({x:j.x+q+C+y,y:j.y+l}),b.add({x:k.x-m-C+y,y:k.y+A}),b.add({x:k.x-m,y:k.y+A})):h===L?(y=k.y>j.y?-l:l,b.add({x:j.x-q,y:j.y+l}),b.add({x:j.x-q-C-y,y:j.y+l}),b.add({x:k.x+m+C-y,y:k.y+A}),b.add({x:k.x+m,y:k.y+A})):h===_?(y=k.x>j.x?-l:l,b.add({x:j.x+l,y:j.y+O}),b.add({x:j.x+l,y:j.y+O+C+y}),b.add({x:k.x+A,y:k.y-D-C+y}),b.add({x:k.x+A,y:k.y-D})):h===J&&(y=k.x>j.x?-l:l,b.add({x:j.x+l,y:j.y-O}),b.add({x:j.x+l,y:j.y-O-C-y}),b.add({x:k.x+A,y:k.y+D+C-y}),b.add({x:k.x+A,y:k.y+D})),M&&b.reverse(),r(b,o)},!0),t("extend.north2",function(H,L,w){var h=H.getSourceAgent(),l=H.getTargetAgent(),Z=h.getId()>l.getId(),z=Z?l:h,X=Z?h:l,D=z.p(),S=X.p(),A=b(w,H,z,J),P=b(w,H,X,J,!0),U=H.s(g),F=U?0:f(w,z)/2,x=U?0:f(w,X)/2,j=A.offset,d=P.offset,Y=H.s(e)+(A.size-1)/2*H.s(I),M=E(D.y-F,S.y-x)-Y+(D.x<S.x?j:-j),_=new B;return _.add({x:D.x+j,y:D.y-F}),_.add({x:D.x+j,y:M}),_.add({x:S.x+d,y:M}),_.add({x:S.x+d,y:S.y-x}),Z&&_.reverse(),r(_,H)},!0),t("extend.south2",function(o,l,M){var Y=o.getSourceAgent(),P=o.getTargetAgent(),s=Y.getId()>P.getId(),t=s?P:Y,z=s?Y:P,n=t.p(),O=z.p(),X=b(M,o,t,_),d=b(M,o,z,_,!0),p=o.s(g),U=p?0:f(M,t)/2,S=p?0:f(M,z)/2,q=X.offset,W=d.offset,R=o.s(e)+(X.size-1)/2*o.s(I),F=A(n.y+U,O.y+S)+R+(n.x>O.x?q:-q),m=new B;return m.add({x:n.x+q,y:n.y+U}),m.add({x:n.x+q,y:F}),m.add({x:O.x+W,y:F}),m.add({x:O.x+W,y:O.y+S}),s&&m.reverse(),r(m,o)},!0),t("extend.west2",function(m,p,O){var y=m.getSourceAgent(),H=m.getTargetAgent(),D=y.getId()>H.getId(),q=D?H:y,K=D?y:H,N=q.p(),T=K.p(),z=b(O,m,q,J),i=b(O,m,K,J,!0),G=m.s(g),s=G?0:X(O,q)/2,f=G?0:X(O,K)/2,o=z.offset,w=i.offset,Q=m.s(e)+(z.size-1)/2*m.s(I),A=E(N.x-s,T.x-f)-Q+(N.y<T.y?o:-o),u=new B;return u.add({x:N.x-s,y:N.y+o}),u.add({x:A,y:N.y+o}),u.add({x:A,y:T.y+w}),u.add({x:T.x-f,y:T.y+w}),D&&u.reverse(),r(u,m)},!0),t("extend.east2",function(Z,c,y){var u=Z.getSourceAgent(),E=Z.getTargetAgent(),W=u.getId()>E.getId(),f=W?E:u,C=W?u:E,t=f.p(),v=C.p(),R=b(y,Z,f,J),w=b(y,Z,C,J,!0),P=Z.s(g),d=P?0:X(y,f)/2,p=P?0:X(y,C)/2,s=R.offset,M=w.offset,S=Z.s(e)+(R.size-1)/2*Z.s(I),j=A(t.x+d,v.x+p)+S+(t.y>v.y?s:-s),U=new B;return U.add({x:t.x+d,y:t.y+s}),U.add({x:j,y:t.y+s}),U.add({x:j,y:v.y+M}),U.add({x:v.x+p,y:v.y+M}),W&&U.reverse(),r(U,Z)},!0),t("v.h2",function(I,e,T){return v(I,T,k)},!0),t("h.v2",function(f,Z,E){return v(f,E,G)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);