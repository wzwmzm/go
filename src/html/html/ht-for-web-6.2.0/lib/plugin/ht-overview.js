!function(S,Q){"use strict";var T="ht",Z=T+".graph.",n=S[T],z=n.graph,t=n.Default,g=n.Color,N=null,p="px",A=t.getInternal(),X=A.getPinchDist,m=t.preventDefault,Y=t.getTouchCount,J=t.startDragging;A.addMethod(t,{overviewBackground:g.widgetBackground,overviewMaskBackground:g.transparent,overviewContentBorderColor:g.widgetBorder,overviewContentBackground:g.background},!0),z.Overview=function(J){var d=this,Z=d._view=A.createView(1,d);d._canvas=A.createCanvas(Z),Z.style.background=t.overviewBackground,Z.appendChild(d._mask=A.createDiv()),d.setGraphView(J),d.addListeners()},t.def(Z+"Overview",Q,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate"],_autoUpdate:!0,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:t.overviewMaskBackground,_contentBorderColor:t.overviewContentBorderColor,_contentBackground:t.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(x){var b=this;if(b.gv!==x){var C=b.gv;b.gv=x,C&&(C.removeViewListener(b.handleGraphViewChanged,b),C.ump(b.handleGraphViewPropertyChanged,b)),x&&(x.addViewListener(b.handleGraphViewChanged,b),x.mp(b.handleGraphViewPropertyChanged,b)),b.fp("graphView",C,x),b.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(w){this._autoUpdate&&"validate"===w.kind&&this.redraw()},handleGraphViewPropertyChanged:function(T){"canvasBackground"===T.property&&this.redraw()},redraw:function(){var y=this;y._redraw||(y._redraw=1,y.iv(50))},validateImpl:function(){var g=this,q=g.gv,d=g._canvas,C=g.getWidth(),J=g.getHeight(),f=g._redraw;if(q){var j=g._mask,Z=j.style,x=q.getViewRect(),Y=q.getScrollRect(),i=Y.x,V=Y.y,s=Y.width,X=Y.height,W=g._rate=Math.max(s/C,X/J),O=g._x=(C-s/W)/2,Q=g._y=(J-X/W)/2;if(0!==x.width&&0!==x.height||g.hasRetry||(t.callLater(g.iv,g,N),g.hasRetry=!0),(C!==d.clientWidth||J!==d.clientHeight)&&(A.setCanvas(d,C,J),f=1),A.isSameRect(Y,g._scrollRect)||(g._scrollRect=Y,f=1),f){var z=A.initContext(d),h=q.getDataModel().getBackground()||g._contentBackground,E=g._contentBorderColor,L=t.devicePixelRatio;z.clearRect(0,0,C*L,J*L),h&&A.fillRect(z,O*L,Q*L,s/W*L,X/W*L,h),A.translateAndScale(z,-i/W+O,-V/W+Q,1/W),q._42(z),z.restore(),E&&A.drawBorder(z,E,O*L,Q*L,s/W*L,X/W*L)}Z.background=g._maskBackground,Z.left=O+(x.x-i)/W+p,Z.top=Q+(x.y-V)/W+p,Z.width=x.width/W+p,Z.height=x.height/W+p,g._redraw=null}else if(f){var z=A.initContext(d);z.clearRect(0,0,C,J),z.restore(),g._redraw=null}},center:function(e){var S=this,j=S.gv;if(j){var x=j._zoom,G=j._29I,l=S._rate,W=S._scrollRect,O=t.getLogicalPoint(e,S._canvas),w=W.x+(O.x-S._x)*l,v=W.y+(O.y-S._y)*l;j.setTranslate((G.width/2-w)*x,(G.height/2-v)*x)}},handle_mousedown:function(f){this.handle_touchstart(f)},handleWindowMouseUp:function(L){this.handleWindowTouchEnd(L)},handleWindowMouseMove:function(b){this.handleWindowTouchMove(b)},handle_mousewheel:function(f){this.handleScroll(f,f.wheelDelta)},handle_DOMMouseScroll:function(w){2===w.axis&&this.handleScroll(w,-w.detail)},handleScroll:function(r,c){if(m(r),this.gv){var T=this.gv;c>0?T.scrollZoomIn():0>c&&T.scrollZoomOut()}},handle_touchstart:function(p){if(m(p),this.gv&&t.isLeftButton(p)){var L=this,w=L.gv,v=Y(p);1===v?t.isDoubleClick(p)&&w.isResettable()?w.reset():(L.center(p),J(L,p)):2===v&&(L._dist=X(p),J(L,p))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(u){if(this.gv){var m=this,C=m._dist,j=Y(u);1===j?m.center(u):2===j&&C!=N&&m.gv.handlePinch(N,X(u),C)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);