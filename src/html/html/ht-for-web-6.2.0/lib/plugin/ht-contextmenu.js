!function(p,T){"use strict";var I="ht",c=p[I],$="position",g="absolute",f="px",h="left",M="top",v="innerHTML",O="className",G="width",a="height",E="0",S="display",Q="none",X="visibility",V="user-select",P="margin",A="padding",J=null,q=c.Color,R=c.Default,B=R.getInternal(),K=p.setTimeout,N=p.setInterval,e=p.clearTimeout,n=p.clearInterval,x=p.parseInt,U=R.isLeftButton,_=R.isDragging,z=R.startDragging,H=R.getDistance,o=R.isTouchable,L=q.widgetIconHighlight,r=q.widgetIconBorder,t=q.widgetIconGradient,j=function(){return document},C=function(O,P){return O.querySelectorAll(P)},Y=function(v){var W=j().createElement(v);return"ul"===v&&(w(W,$,"relative"),w(W,P,E),w(W,A,E),w(W,"list-style",Q),w(W,"box-sizing","border-box"),w(W,"-moz-box-sizing","border-box"),w(W,S,"inline-block"),w(W,"vertical-align","text-bottom"),w(W,"border","1px solid "+R.contextMenuBorderColor),w(W,"box-shadow","0 0 16px 1px "+R.contextMenuShadowColor),w(W,"overflow","hidden"),R.contextMenuBorderRadius&&w(W,"border-radius",R.contextMenuBorderRadius+f)),W},m=function(O){var S=O.touches[0];return S?S:O.changedTouches[0]},k=function(){return Y("div")},d=function(){return Y("canvas")},w=function($,k,L){$.style.setProperty(k,L,J)},F=function(v,E,O){R.def(c.widget[v],E,O)},u=function(m,F){m.appendChild(F)},l=function(U,L){U.removeChild(L)},i=function(H,l,m,x){H.addEventListener(l,m,!!x)},Z=function(D,E,M,k){D.removeEventListener(E,M,!!k)};B.addMethod(R,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:r},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:L}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:r},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:L,gradient:R.imageGradient,gradientColor:t,background:L}]},contextMenuLabelFont:(o?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"â–¶"},!0);var D=function(B){var E=this,c=B._view;if(E.$11b=B,E.addListeners(),i(c,"contextmenu",function(D){D.preventDefault()}),!o){var M=E.$37b=E.$36b.bind(E);i(c,"mouseover",M),i(c,"mouseout",M)}};R.def(D,T,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(p){if(R.preventDefault(p),U(p)){for(var t=this,b=t.$11b,l=t.getView(),G=l.children,O=0;O<G.length;O++){var L=G[O],T=L.$24b,d=L.$25b;if(T&&T.contains(p.target))return b.scrollUp(L),t.$28b=K(function(){t.$29b=N(function(){b.scrollUp(L)},100)},500),z(t,p),void 0;if(d&&d.contains(p.target))return b.scrollDown(L),t.$28b=K(function(){t.$29b=N(function(){b.scrollDown(L)},100)},500),z(t,p),void 0}o&&(p=m(p)),t.$30b={x:p.pageX,y:p.pageY}}},handle_mousedown:function(z){this.handle_touchstart(z)},handle_touchend:function(q){if(U(q)){var X=this,T=X.$30b,K=o?{x:m(q).pageX,y:m(q).pageY}:{x:q.pageX,y:q.pageY};if(!T||H(T,K)>1)return delete X.$30b,void 0;for(var S=X.getView(),M=X.$11b,$=q.target,b=J,E=J,f=M._items,g=S.$26b,i=0;i<g.length;i++)if(E=g[i],E.contains($)){b=E.getAttribute("data-id");break}if(b&&f){var O=M.$17b(f,function(Z){return Z._id===b});if(O){var y=!1;O.disabled instanceof Function?y=O.disabled.call(M,O):O.disabled===!0&&(y=!0),y||(O.items?o&&X.$36b(E,!0):M.$1b(O,q))}}delete X.$30b}},$36b:function(g,L){if(!_()){var E,n=this,l=n.$11b,S=n.getView(),x=l.$20b||S.children[0],z=l.$19b,D=S.$26b,o=S.children,j=g.target,u=S.getBoundingClientRect(),m=R.getWindowInfo(),K=m.width,e=m.height,J=function(k){for(var L=0;L<o.length;L++){var t=o[L],B=new RegExp(k+"$"),a=t[O];if(a&&(B.test(a)||a.indexOf(k+" ")>=0))return t}},W=function(H){for(var $=0;$<D.length;$++){var Q=D[$],v=new RegExp(H+"$"),N=Q[O];if(N&&(v.test(N)||N.indexOf(H+" ")>=0))return Q}},Y=function(p){var C=W("menu-item"+p.$45b),n=C.getBoundingClientRect(),r=n.top-u.top,s=n.left-u.left;w(p,M,r+f),w(p,h,s+n.width+f);var b=p.getBoundingClientRect(),T=b.top,L=b.left,_=b.height,S=b.width,Y=T+_+2,x=L+S+2;Y>e&&w(p,M,r+e-Y+f),x>K&&w(p,h,s-S+f)};if(L)E=g;else{if("mouseover"===g.type){for(var b=0;b<D.length;b++){var B=D[b];if(B.contains(j)){E=B;break}}if(!E&&z){var r=z.parentNode,C=J("submenu"+z.getAttribute("data-id"));(C&&C.contains(j)||r&&r.contains(j))&&(E=z)}}else if("mouseout"===g.type){for(var t=!1,Q=g.relatedTarget,b=0;b<o.length;b++){var N=o[b];if("hidden"!==N.style.visibility&&N.contains(Q)){t=!0;break}}if(t)return}!E&&x&&(E=W("menu-item"+(x.$45b||"NaN")))}if(E!=z){if(z)for(var c=z;c;){if(c[O]=c[O].replace(" menu-item-hover",""),c[O].indexOf("disabled")<0){var y=l.getItemByProperty("_id",c.getAttribute("data-id"));null!=y.background?y.background instanceof Function?w(c,"background-color",y.background.call(l,y)):w(c,"background-color",y.background):w(c,"background-color",R.contextMenuBackground),w(c,"color",R.contextMenuLabelColor)}var I=J("submenu"+c.getAttribute("data-id"));I&&w(I,X,"hidden");var q=c.parentNode;c=W("menu-item"+(q.$45b||"NaN"))}if(E){for(var $=E,V=[];$;){$[O]+=" menu-item-hover",$[O].indexOf("disabled")<0&&(w($,"background-color",R.contextMenuHoverBackground),w($,"color",R.contextMenuHoverLabelColor));var d=J("submenu"+$.getAttribute("data-id"));d&&(w(d,X,"visible"),V.push(d));var q=$.parentNode;$=W("menu-item"+(q.$45b||"NaN"))}V.reverse(),V.forEach(function(V){Y(V)})}}l.$19b=E,l.$20b=E?E.parentNode:S.children[0]}},handle_mouseup:function(j){this.handle_touchend(j)},handleWindowTouchEnd:function(){var i=this;i.$28b!=J&&(e(i.$28b),delete i.$28b),i.$29b!=J&&(n(i.$29b),delete i.$29b),delete i.$34b,delete i.$30b,delete i.$35b},handleWindowMouseUp:function(d){this.handleWindowTouchEnd(d)},handle_mousemove:function(X){this.handle_touchmove(X)},handle_touchmove:function(r){if(!_()&&U(r)){for(var l=this,q=l.getView().children,f=J,N=0;N<q.length;N++){var D=q[N];if(D.contains(r.target)){f=D;break}}var d=l.$30b,E=o?{x:m(r).pageX,y:m(r).pageY}:{x:r.pageX,y:r.pageY};f&&d&&H(d,E)>2&&(z(l,r),l.$34b=f,l.$35b=f.$18b)}},handleWindowTouchMove:function(P){P.preventDefault();var f=this,s=f.$11b,H=f.$34b,h=f.$35b,X=f.$30b;if(X&&H){var E=o?{x:m(P).pageX,y:m(P).pageY}:{x:P.pageX,y:P.pageY},w=E.y-X.y;w>0?s.scrollUp(H,H.$18b-(h-w)):s.scrollDown(H,h-w-H.$18b)}},handleWindowMouseMove:function(O){this.handleWindowTouchMove(O)},$10b:function(r,f){r.preventDefault();for(var H=this,U=H.getView().children,F=J,v=0;v<U.length;v++){var O=U[v];if(O.contains(r.target)){F=O;break}}if(F){var A=this.$11b,V=A.getRowHeight();Math.abs(f)>.05&&(f>0?A.scrollUp(F,f*V):0>f&&A.scrollDown(F,-f*V))}},handle_mousewheel:function(q){this.$10b(q,q.wheelDelta/40)},handle_DOMMouseScroll:function(S){this.$10b(S,-S.detail)},$44b:function($){this.getView().contains($.target)||this.$11b.hide()},$41b:function(k){this.$11b.show(k)},$4b:function(Z,X){var b=this.$11b;if(X=X||b._items,X&&X.length&&Z.keyCode){var A=[Z.keyCode];Z.shiftKey&&A.push(16),Z.ctrlKey&&A.push(17),Z.altKey&&A.push(18),/mac/.test(p.navigator?p.navigator.userAgent.toLowerCase():"")?Z.metaKey&&A.push(17):Z.metaKey&&A.push(91),A.sort();var Q=A.join(),f=b.$17b(X,function(b){if(b.key){var k=b.key.slice(0);return k.sort(),Q===k.join()}});if(f){f.preventDefault!==!1&&Z.preventDefault();var M=!1;f.disabled instanceof Function?M=f.disabled.call(b,f):f.disabled===!0&&(M=!0),M||b.$1b(f,Z)}}},$39b:function(D){var Z=this,V=m(D);Z.$32b={x:V.pageX,y:V.pageY}},$38b:function(t){var C=this,Z=m(t);C.$31b={x:Z.pageX,y:Z.pageY},C.$33b=K(function(){C.$31b&&(C.$32b?H(C.$31b,C.$32b)<10&&C.$11b.show(t):C.$11b.show(t)),delete C.$33b,delete C.$31b,delete C.$32b},600)},$40b:function(){var K=this;K.$33b!=J&&(e(K.$33b),delete K.$33b,delete K.$31b,delete K.$32b)}}),c.widget.ContextMenu=function(E){var M=this,v=M._view=B.createView(null,M);v[O]="ht-widget-contextmenu",M.setItems(E),M.$13b=new D(M),w(v,"font",R.contextMenuLabelFont),w(v,$,g),w(v,"cursor","default"),w(v,"-webkit-"+V,Q),w(v,"-moz-"+V,Q),w(v,"-ms-"+V,Q),w(v,V,Q),w(v,"box-sizing","border-box"),w(v,"-moz-box-sizing","border-box"),R.baseZIndex!=J&&w(v,"z-index",x(R.baseZIndex)+2+""),M.$3b=function(S){M.$13b.$4b(S)}},F("ContextMenu",T,{$5b:0,_items:J,$21b:J,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var U=this,u=U._enableGlobalKey;u===!1&&(i(j(),"keydown",U.$3b),U._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,Z(j(),"keydown",this.$3b)},setItems:function(B){this._items=B},getItems:function(){return this._items},setVisibleFunc:function(a){this.$16b=a},setLabelMaxWidth:function(f){this.$43b=f},$1b:function(J,C){var s=this;if("check"===J.type)J.selected=!J.selected;else if("radio"===J.type){var l=J.groupId;s.$17b(s._items,function(h){h.groupId===l&&(h.selected=!1)}),J.selected=!0}if(s.hide(),J.action)J.action.apply(J.scope||s,[J,C]);else if(J.href){var N=J.linkTarget||"_self";p.open(J.href,N)}},getItemById:function(a){return this.getItemByProperty("id",a)},setItemVisible:function(k,P){var g=this.getItemById(k);g&&(g.visible=P)},getItemByProperty:function(h,m,b){var k=this;if(b=b||k._items,!b||0===b.length)return J;var x=k.$17b(b,function(U){return U[h]===m});return x||J},scrollUp:function(i,U){var T=this;if(U=U==J?20:U,U=x(U),0!==U){var R=0;i.$18b>U&&(R=i.$18b-U),T.$42b(i,R),i.scrollTop=R,i.$18b=R}},scrollDown:function(A,u){var Q=this;if(u=u==J?20:u,u=x(u),0!==u){var m=A.$22b,H=A.$23b,t=m-H;H+A.$18b+u<m&&(t=A.$18b+u),Q.$42b(A,t),A.scrollTop=t,A.$18b=t}},$42b:function(M,P){P=P==J?M.$18b:P;var l=M.$24b,z=M.$25b;l&&(w(l,"top",P+f),0==P?w(l,S,Q):w(l,S,"block")),z&&(w(z,"bottom",-P+f),P==M.$22b-M.$23b?w(z,S,Q):w(z,S,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(Y,V){for(var F=0;F<Y.length;F++){var w=Y[F];if(V(w))return w;if(w.items){var g=this.$17b(w.items,V);if(g)return g}}},$2b:function(U,o){for(var L=this,W=0;W<U.length;W++){L.$5b++;var z=U[W];if(z.visible!==!1&&!(R.isFunction(z.visible)&&z.visible()===!1||L.$16b&&!L.$16b.call(L,z))){var Q=Y("li"),T=L.$5b+"";if(w(Q,"white-space","nowrap"),w(Q,S,"block"),"separator"===z||z.separator===!0){var n=k();n[O]="separator",w(n,a,R.contextMenuSeparatorWidth+f),w(n,"background",R.contextMenuSeparatorColor),u(Q,n)}else{z._id=T,Q.setAttribute("data-id",T);var I=Y("span"),i=Y("span"),N=d(),C=k();if(w(I,S,"inline-block"),w(I,a,"1.2em"),w(i,S,"inline-block"),w(i,a,"1.2em"),w(i,"line-height","1.2em"),N[O]="prefix",w(N,S,"inline-block"),w(N,G,"1em"),w(N,a,"1em"),w(N,"vertical-align","middle"),w(N,P,"0 0.2em"),"check"===z.type&&z.selected?N[O]+=" check-prefix":"radio"===z.type&&z.selected&&(N[O]+=" radio-prefix"),u(Q,N),z.icon){var M=d();M[O]="contextmenu-item-icon",w(M,S,"inline-block"),w(M,a,"1.2em"),w(M,G,"1.2em"),w(M,"margin-right","0.2em"),w(M,"float","left"),M.$50b=z.icon,M._item=z,u(I,M)}if(i[v]=z.label,u(I,i),u(Q,I),C[O]="suffix",w(C,S,"inline-block"),w(C,"margin-left","1em"),w(C,"margin-right","0.4em"),w(C,"text-align","right"),w(C,"font-size","75%"),z.items&&(C[v]=R.contextMenuSubmenuMark),z.suffix&&(C[v]=z.suffix),u(Q,C),Q[O]="menu-item menu-item"+T,null!=z.background?z.background instanceof Function?w(Q,"background-color",z.background.call(L,z)):w(Q,"background-color",z.background):w(Q,"background-color",R.contextMenuBackground),w(Q,"color",R.contextMenuLabelColor),w(Q,A,"3px 0"),z.disabled instanceof Function){var D=z.disabled.call(L,z);D&&(Q[O]+=" disabled",w(Q,"color",R.contextMenuDisabledLabelColor))}else z.disabled&&(Q[O]+=" disabled",w(Q,"color",R.contextMenuDisabledLabelColor));if(z.items){L.$21b||(L.$21b=new c.List);var h=Y("ul");h[O]="submenu"+T,h.$45b=T,w(h,X,"hidden"),w(h,$,g),u(L._view,h),L.$21b.add(h),L.$2b(z.items,h)}}u(o,Q)}}},rebuild:function(){var p=this,L=p._items,w=p._view;if(w&&(w[v]="",p.$21b=J,p.$5b=0,p.$19b=J,p.$20b=J,w.$26b=J,L&&0!==L.length)){var Q=Y("ul",p._r);u(w,Q),p.$2b(L,Q)}},addTo:function(u){if(u){var M=this,g=M.$13b;if(M.$12b=u,M.$9b=function(Z){g.$44b(Z)},M.$27b=function(P){g.$41b(P)},o){var _=M.$6b=function(r){g.$38b(r)},E=M.$7b=function(J){g.$39b(J)},w=M.$8b=function(b){g.$40b(b)};i(u,"touchstart",_,!0),i(u,"touchmove",E),i(u,"touchend",w)}else i(u,"contextmenu",M.$27b)}},showOnView:function(h,_,L){h=h.getView?h.getView():h;var r=R.getWindowInfo(),m=h.getBoundingClientRect();this.show(m.left+r.left+_,m.top+r.top+L)},show:function(D,p,U){var F=this,U=U==J?!0:!1,c=F._view;if(c){if(F.invalidate(),1===arguments.length){var H=D;if(o){var L=m(H);D=L.pageX,p=L.pageY}else D=H.pageX,p=H.pageY}var b=R.getWindowInfo(),s=b.width,B=b.height,T=b.left,d=b.top,Z={pageX:D,pageY:p,clientX:D-T,clientY:p-d,target:1,originEvent:H},t=Z.clientX,n=Z.clientY,X=function(z){z.style.height=B-6+f;var W=k(),N=k(),P=function(s){w(s,$,g),w(s,"text-align","center"),w(s,G,"100%"),w(s,"font-size",10+f),w(s,"padding","2px 0"),w(s,"border","0px solid "+R.contextMenuScrollerBorderColor),w(s,"background-color",R.contextMenuScrollerColor1),s.style.backgroundImage="-webkit-linear-gradient(top, "+R.contextMenuScrollerColor1+", "+R.contextMenuScrollerColor2+")",s.style.backgroundImage="linear-gradient(to bottom, "+R.contextMenuScrollerColor1+", "+R.contextMenuScrollerColor2+")"};W[O]="menu-arrow-item menu-arrow-item-top",N[O]="menu-arrow-item menu-arrow-item-bottom",P(W),w(W,"top",E),w(W,"left",E),w(W,"border-bottom-width",1+f),W[v]="â–²",P(N),w(N,"bottom",E),w(N,"left",E),w(N,"border-top-width",1+f),N[v]="â–¼",z.$24b=W,z.$25b=N,z.$18b=z.scrollTop,z.$22b=z.scrollHeight,z.$23b=z.clientHeight,u(z,W),u(z,N),F.$42b(z)};F.beforeShow&&F.beforeShow(Z);var x=F._items;if(x&&(H&&H.preventDefault(),x.length)){F.rebuild(),R.appendToScreen(c),c.$26b=C(c,".menu-item");var y=c.children[0];y.offsetHeight>B&&X(y);var a=n+(U?1:0),P=t+(U?1:0),Q=function(x){for(var Y=0,I=0,Q=0,e=F.$43b;Q<x.children.length;Q++){var W=x.children[Q];if(W.getAttribute("data-id")){var B=W.children[1],$=W.children[2],h=B.children;if(e){var s=h[0];h.length>1&&(s=h[1]),s.offsetWidth>e&&(s[v]="<marquee scrollamount='3'>"+s[v]+"</marquee>",s.children[0].style.verticalAlign="text-bottom",w(s,G,e+f),w(s,S,"inline-block"))}var r=B.offsetWidth,t=$.offsetWidth;r>Y&&(Y=r),t>I&&(I=t)}}for(Q=0;Q<x.children.length;Q++){var W=x.children[Q];if(W.getAttribute("data-id")){var B=W.children[1],$=W.children[2],M=B.children[0],A=B.children[1];!A&&M.style.width&&w(M,G,Y+f),w(B,G,Y+f),w($,G,I+f)}}};Q(y);var _=n+3+c.offsetHeight,I=t+3+c.offsetWidth;_>B?w(c,M,a-(_-B)+d+f):w(c,M,a+d+f),I>s?w(c,h,P-(I-s)+T+f):w(c,h,P+T+f);var q=F.$21b;q&&q.each(function(W){Q(W),W.offsetHeight>B&&X(W)}),F.$9b&&i(j(),o?"touchstart":"mousedown",F.$9b,!0),F.afterShow&&F.afterShow(Z),F.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=J:!1},getRelatedView:function(){return this.$12b},hide:function(){var z=this,R=z._view;R&&R.parentNode&&(l(R.parentNode,R),Z(j(),o?"touchstart":"mousedown",z.$9b,!0),z.afterHide&&z.afterHide())},dispose:function(){var q=this,x=q.$12b,R=q._view;R&&(R.parentNode&&l(R.parentNode,R),q.disableGlobalKey(),x&&(o?(Z(x,"touchstart",q.$6b,!0),Z(x,"touchmove",q.$7b),Z(x,"touchend",q.$8b)):Z(x,"contextmenu",q.$27b)),q._view=q._items=q.$21b=q.$19b=q.$12b=q.beforeShow=q.afterShow=q.afterHide=q.$9b=q.$3b=q.$6b=q.$7b=q.$8b=q.$27b=J)},$46b:function(p,T,Q,f,M){var H=B.initContext(p);B.translateAndScale(H,0,0,1),H.clearRect(0,0,Q,f),R.drawStretchImage(H,R.getImage(T),"fill",0,0,Q,f,M,this),H.restore()},$47b:function(){var J,G,h,v=this,r=v._view;if(v.isShowing()){var c=C(r,".check-prefix");for(h=0;h<c.length;h++){var P=c[h];J=P.clientWidth,G=P.clientHeight,P.$48b=J,P.$49b=G,B.setCanvas(P,J,G)}var j=C(r,".radio-prefix");for(h=0;h<j.length;h++){var Q=j[h];J=Q.clientWidth,G=Q.clientHeight,Q.$48b=J,Q.$49b=G,B.setCanvas(Q,J,G)}var n=C(r,".contextmenu-item-icon");for(h=0;h<n.length;h++){var d=n[h];J=d.clientWidth,G=d.clientHeight,d.$48b=J,d.$49b=G,B.setCanvas(d,J,G)}}},validateImpl:function(){var H,V,w,G=this,U=G._view;if(G.isShowing()){var t=C(U,".check-prefix");for(w=0;w<t.length;w++){var s=t[w];H=s.$48b,V=s.$49b,H&&V&&G.$46b(s,R.contextMenuCheckIcon,H,V)}var y=C(U,".radio-prefix");for(w=0;w<y.length;w++){var o=y[w];H=o.$48b,V=o.$49b,H&&V&&G.$46b(o,R.contextMenuRadioIcon,H,V)}var N=C(U,".contextmenu-item-icon");for(w=0;w<N.length;w++){var k=N[w];H=k.$48b,V=k.$49b,H&&V&&G.$46b(k,R.getImage(k.$50b),H,V,k._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);