!function(L,p,X){"use strict";var N="ht",V=L[N],h=null,n=Math,r=n.PI,C=n.cos,U=n.sin,T=n.abs,z=n.max,l=n.sqrt,d=1e-5,b=V.Default,u=b.def,$=b.startAnim,c=b.createMatrix,o=b.transformVec,S=b.getInternal(),K=S.addMethod,g=S.superCall,_=S.toPointsArray,E=S.createNormals,A=S.toFloatArray,Y=S.glMV,j=S.batchShape,O=S.createNodeMatrix,e=S.getFaceInfo,D=S.transformAppend,P=S.drawFaceInfo,k=S.createAnim,G=S.cube(),a=G.is,v=G.vs,I=G.uv,B=S.ui(),i=V.Node,W=V.Shape,s="h",t="v",x="front",f="back",Q="left",F="right",w="top",q="bottom",M="dw.expanded",R=".expanded",J="dw.angle",y=".angle",Z=function(X,m,l){u(N+"."+X,m,l)},H=function(B,u,w){w?B.push(u.x,u.y):B.push(u.x,u.y,u.z)},m=[1,0,0],ef=function(e,D,X,M){var _,x,E,b,r=0,t=[];if(M)for(_=M.length;_>r;r+=3)x=M[r],E=M[r+1],b=M[r+2],t.push(new hg([new wr([D[3*x],D[3*x+1],D[3*x+2]],m,X?[X[2*x],X[2*x+1],0]:h),new wr([D[3*E],D[3*E+1],D[3*E+2]],m,X?[X[2*E],X[2*E+1],0]:h),new wr([D[3*b],D[3*b+1],D[3*b+2]],m,X?[X[2*b],X[2*b+1],0]:h)],e));else for(_=D.length;_>r;r+=3)x=r,E=r+1,b=r+2,t.push(new hg([new wr([D[3*x],D[3*x+1],D[3*x+2]],m,X?[X[2*x],X[2*x+1],0]:h),new wr([D[3*E],D[3*E+1],D[3*E+2]],m,X?[X[2*E],X[2*E+1],0]:h),new wr([D[3*b],D[3*b+1],D[3*b+2]],m,X?[X[2*b],X[2*b+1],0]:h)],e));return t},oq=[Q,x,F,f,w,q],pl=oq.concat("csg"),Lr=[0,6,12,18,24,30],Aj=function(d,B,Q){for(var r=O(d),Y=[],p=0;6>p;p++)for(var t=oq[p],b=Lr[p],A=Q?B.getFaceUv(d,t):h,l=Q?B.getFaceUvScale(d,t):h,z=Q?B.getFaceUvOffset(d,t):h,G=0;2>G;G++){var V,w,M,_=a[b+3*G],y=a[b+3*G+1],f=a[b+3*G+2];if(Q){if(A){var L=8*p;V=[A[2*_-L],A[2*_+1-L],0],w=[A[2*y-L],A[2*y+1-L],0],M=[A[2*f-L],A[2*f+1-L],0]}else V=[I[2*_],I[2*_+1],0],w=[I[2*y],I[2*y+1],0],M=[I[2*f],I[2*f+1],0];l&&(V[0]*=l[0],V[1]*=l[1],w[0]*=l[0],w[1]*=l[1],M[0]*=l[0],M[1]*=l[1]),z&&(V[0]+=z[0],V[1]+=z[1],w[0]+=z[0],w[1]+=z[1],M[0]+=z[0],M[1]+=z[1])}Y.push(new hg([new wr(o([v[3*_],v[3*_+1],v[3*_+2]],r),m,V),new wr(o([v[3*y],v[3*y+1],v[3*y+2]],r),m,w),new wr(o([v[3*f],v[3*f+1],v[3*f+2]],r),m,M)],d))}return Hq.$15n(Y)},rp=function(M,v){var K,o=M.data.getAttaches();if(o&&o.each(function(_){_ instanceof je&&_.s("attach.operation")&&(K||(K=[]),K.push(_))}),K){var F;oq.forEach(function(A){var I=ef(A,M[A].vs,M[A].tuv);F=F?F.concat(I):I}),F=Hq.$15n(F),K.forEach(function(V){var H=V.s("attach.operation");F[H]&&(F=F[H](Aj(V,M.gv,M.csg.tuv)))}),oq.forEach(function(g){g=M[g],g.vs=[],g.tuv&&(g.tuv=[])}),F.$19n().forEach(function(m){var B=m.$10n;if(B instanceof je){if(B.s("attach.cull"))return;B="csg"}for(var K=M[B],y=K.vs,F=K.tuv,f=m.$9n,G=2;G<f.length;G++)H(y,f[0].$24n),H(y,f[G-1].$24n),H(y,f[G].$24n),F&&(H(F,f[0].uv,!0),H(F,f[G-1].uv,!0),H(F,f[G].uv,!0))})}pl.forEach(function(a){var e=M[a];e.visible&&e.vs.length?(e.ns=E(e.vs),A(e,"vs"),A(e,"tuv")):delete M[a]}),v&&(j(M,h,v),M.clear())};K(b,{createFrameModel:function(v,J,L,N){v=v==h?.07:v,J=J==h?v:J,L=L==h?v:L,N=N?N:{};var A=N.top,e=N.bottom,d=N.left,F=N.right,f=N.front,y=N.back,l=[],T=[];return f===!0?(l.push(-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5),T.push(0,0,0,1,1,1,1,1,1,0,0,0)):f===!1||(l.push(-.5,.5,.5,-.5,-.5,.5,-.5+v,-.5,.5,-.5+v,-.5,.5,-.5+v,.5,.5,-.5,.5,.5,.5-v,.5,.5,.5-v,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5-v,.5,.5,-.5+v,.5,.5,-.5+v,.5-J,.5,.5-v,.5-J,.5,.5-v,.5-J,.5,.5-v,.5,.5,-.5+v,.5,.5,-.5+v,-.5+J,.5,-.5+v,-.5,.5,.5-v,-.5,.5,.5-v,-.5,.5,.5-v,-.5+J,.5,-.5+v,-.5+J,.5),T.push(0,0,0,1,v,1,v,1,v,0,0,0,1-v,0,1-v,1,1,1,1,1,1,0,1-v,0,v,0,v,J,1-v,J,1-v,J,1-v,0,v,0,v,1-J,v,1,1-v,1,1-v,1,1-v,1-J,v,1-J)),y===!0?(l.push(-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5),T.push(1,0,0,1,1,1,0,1,1,0,0,0)):y===!1||(l.push(-.5,.5,-.5,-.5+v,-.5,-.5,-.5,-.5,-.5,-.5+v,-.5,-.5,-.5,.5,-.5,-.5+v,.5,-.5,.5-v,.5,-.5,.5,-.5,-.5,.5-v,-.5,-.5,.5,-.5,-.5,.5-v,.5,-.5,.5,.5,-.5,-.5+v,.5,-.5,.5-v,.5-J,-.5,-.5+v,.5-J,-.5,.5-v,.5-J,-.5,-.5+v,.5,-.5,.5-v,.5,-.5,-.5+v,-.5+J,-.5,.5-v,-.5,-.5,-.5+v,-.5,-.5,.5-v,-.5,-.5,-.5+v,-.5+J,-.5,.5-v,-.5+J,-.5),T.push(1,0,1-v,1,1,1,1-v,1,1,0,1-v,0,v,0,0,1,v,1,0,1,v,0,0,0,1-v,0,v,J,1-v,J,v,J,1-v,0,v,0,1-v,1-J,v,1,1-v,1,v,1,1-v,1-J,v,1-J)),d===!0?(l.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5),T.push(0,0,0,1,1,1,1,1,1,0,0,0)):d===!1||(l.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5+L,-.5,-.5,-.5+L,-.5,.5,-.5+L,-.5,.5,-.5,-.5,.5,.5-L,-.5,-.5,.5-L,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5-L,-.5,.5,-.5+L,-.5,.5-J,-.5+L,-.5,.5-J,.5-L,-.5,.5-J,.5-L,-.5,.5,.5-L,-.5,.5,-.5+L,-.5,-.5+J,-.5+L,-.5,-.5,-.5+L,-.5,-.5,.5-L,-.5,-.5,.5-L,-.5,-.5+J,.5-L,-.5,-.5+J,-.5+L),T.push(0,0,0,1,L,1,L,1,L,0,0,0,1-L,0,1-L,1,1,1,1,1,1,0,1-L,0,L,0,L,J,1-L,J,1-L,J,1-L,0,L,0,L,1-J,L,1,1-L,1,1-L,1,1-L,1-J,L,1-J)),F===!0?(l.push(.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5),T.push(1,0,0,1,1,1,0,1,1,0,0,0)):F===!1||(l.push(.5,.5,-.5,.5,-.5,-.5+L,.5,-.5,-.5,.5,-.5,-.5+L,.5,.5,-.5,.5,.5,-.5+L,.5,.5,.5-L,.5,-.5,.5,.5,-.5,.5-L,.5,-.5,.5,.5,.5,.5-L,.5,.5,.5,.5,.5,-.5+L,.5,.5-J,.5-L,.5,.5-J,-.5+L,.5,.5-J,.5-L,.5,.5,-.5+L,.5,.5,.5-L,.5,-.5+J,-.5+L,.5,-.5,.5-L,.5,-.5,-.5+L,.5,-.5,.5-L,.5,-.5+J,-.5+L,.5,-.5+J,.5-L),T.push(1,0,1-L,1,1,1,1-L,1,1,0,1-L,0,L,0,0,1,L,1,0,1,L,0,0,0,1-L,0,L,J,1-L,J,L,J,1-L,0,L,0,1-L,1-J,L,1,1-L,1,L,1,1-L,1-J,L,1-J)),A===!0?(l.push(.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5),T.push(1,1,1,0,0,0,0,0,0,1,1,1)):A===!1||(l.push(.5,.5,.5,.5,.5,-.5,.5-v,.5,-.5,.5-v,.5,-.5,.5-v,.5,.5,.5,.5,.5,-.5+v,.5,.5,-.5+v,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5+v,.5,.5,.5-v,.5,.5,.5-v,.5,.5-L,-.5+v,.5,.5-L,-.5+v,.5,.5-L,-.5+v,.5,.5,.5-v,.5,.5,.5-v,.5,-.5+L,.5-v,.5,-.5,-.5+v,.5,-.5,-.5+v,.5,-.5,-.5+v,.5,-.5+L,.5-v,.5,-.5+L),T.push(1,1,1,0,1-v,0,1-v,0,1-v,1,1,1,v,1,v,0,0,0,0,0,0,1,v,1,1-v,1,1-v,1-L,v,1-L,v,1-L,v,1,1-v,1,1-v,L,1-v,0,v,0,v,0,v,L,1-v,L)),e===!0?(l.push(.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5),T.push(1,0,0,1,1,1,0,1,1,0,0,0)):e===!1||(l.push(.5,-.5,.5,.5-v,-.5,-.5,.5,-.5,-.5,.5-v,-.5,-.5,.5,-.5,.5,.5-v,-.5,.5,-.5+v,-.5,.5,-.5,-.5,-.5,-.5+v,-.5,-.5,-.5,-.5,-.5,-.5+v,-.5,.5,-.5,-.5,.5,.5-v,-.5,.5,-.5+v,-.5,.5-L,.5-v,-.5,.5-L,-.5+v,-.5,.5-L,.5-v,-.5,.5,-.5+v,-.5,.5,.5-v,-.5,-.5+L,-.5+v,-.5,-.5,.5-v,-.5,-.5,-.5+v,-.5,-.5,.5-v,-.5,-.5+L,-.5+v,-.5,-.5+L),T.push(1,0,1-v,1,1,1,1-v,1,1,0,1-v,0,v,0,0,1,v,1,0,1,v,0,0,0,1-v,0,v,L,1-v,L,v,L,1-v,0,v,0,1-v,1-L,v,1,1-v,1,v,1,1-v,1-L,v,1-L)),{vs:l,uv:T}}}),K(V.Style,{"dw.flip":!1,"dw.s3":[.999,.999,.5],"dw.t3":X,"dw.expanded":!1,"dw.toggleable":!0,"dw.axis":"left","dw.start":0,"dw.end":r/2,"dw.angle":0,"attach.cull":!1,"attach.operation":"subtract"},!0),oq.forEach(function(v){var X={};X[v+R]=!1,X[v+".toggleable"]=!1,X[v+".axis"]=Q,X[v+".start"]=0,X[v+".end"]=r/2,X[v+y]=0,K(V.Style,X,!0)});var Hq=function(){this.$4n=[]};Hq.$15n=function(x){var s=new Hq;return s.$4n=x,s},Hq.prototype={clone:function(){var J=new Hq;return J.$4n=this.$4n.map(function(T){return T.clone()}),J},$19n:function(){return this.$4n},union:function(g){var P=new fk(this.clone().$4n),X=new fk(g.clone().$4n);return P.$3n(X),X.$3n(P),X.$6n(),X.$3n(P),X.$6n(),P.$7n(X.$2n()),Hq.$15n(P.$2n())},subtract:function(r){var d=new fk(this.clone().$4n),z=new fk(r.clone().$4n);return d.$6n(),d.$3n(z),z.$3n(d),z.$6n(),z.$3n(d),z.$6n(),d.$7n(z.$2n()),d.$6n(),Hq.$15n(d.$2n())},intersect:function(A){var u=new fk(this.clone().$4n),g=new fk(A.clone().$4n);return u.$6n(),g.$3n(u),g.$6n(),u.$3n(g),g.$3n(u),u.$7n(g.$2n()),u.$6n(),Hq.$15n(u.$2n())},inverse:function(){var U=this.clone();return U.$4n.map(function(C){C.flip()}),U}},Hq.cube=function(a){a=a||{};var m=new or(a.center||[0,0,0]),s=a.radius?a.radius.length?a.radius:[a.radius,a.radius,a.radius]:[1,1,1];return Hq.$15n([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(i){return new hg(i[0].map(function(U){var x=new or(m.x+s[0]*(2*!!(1&U)-1),m.y+s[1]*(2*!!(2&U)-1),m.z+s[2]*(2*!!(4&U)-1));return new wr(x,new or(i[1]))}))}))},Hq.sphere=function(X){function m(E,s){E*=2*r,s*=r;var h=new or(C(E)*U(s),C(s),U(E)*U(s));j.push(new wr(A.$20n(h.$21n(H)),h))}X=X||{};for(var j,A=new or(X.center||[0,0,0]),H=X.radius||1,b=X.slices||16,Z=X.stacks||8,O=[],G=0;b>G;G++)for(var h=0;Z>h;h++)j=[],m(G/b,h/Z),h>0&&m((G+1)/b,h/Z),Z-1>h&&m((G+1)/b,(h+1)/Z),m(G/b,(h+1)/Z),O.push(new hg(j));return Hq.$15n(O)},Hq.cylinder=function(K){function q(p,J,O){var s=2*J*r,g=R.$21n(C(s)).$20n(j.$21n(U(s))),v=B.$20n(Z.$21n(p)).$20n(g.$21n(u)),K=g.$21n(1-T(O)).$20n(h.$21n(O));return new wr(v,K)}K=K||{};for(var B=new or(K.start||[0,-1,0]),c=new or(K.end||[0,1,0]),Z=c.$13n(B),u=K.radius||1,k=K.slices||16,h=Z.$14n(),G=T(h.y)>.5,R=new or(G,!G,0).$12n(h).$14n(),j=R.$12n(h).$14n(),J=new wr(B,h.$11n()),A=new wr(c,h.$14n()),Y=[],w=0;k>w;w++){var g=w/k,y=(w+1)/k;Y.push(new hg([J,q(0,g,-1),q(0,y,-1)])),Y.push(new hg([q(0,y,0),q(0,g,0),q(1,g,0),q(1,y,0)])),Y.push(new hg([A,q(1,y,1),q(1,g,1)]))}return Hq.$15n(Y)};var or=function(J,m,U){var _=this;3==arguments.length?(_.x=J,_.y=m,_.z=U):"x"in J?(_.x=J.x,_.y=J.y,_.z=J.z):(_.x=J[0],_.y=J[1],_.z=J[2])};or.prototype={clone:function(){return new or(this.x,this.y,this.z)},$11n:function(){return new or(-this.x,-this.y,-this.z)},$20n:function(u){return new or(this.x+u.x,this.y+u.y,this.z+u.z)},$13n:function(H){return new or(this.x-H.x,this.y-H.y,this.z-H.z)},$21n:function(q){return new or(this.x*q,this.y*q,this.z*q)},$16n:function(X){return new or(this.x/X,this.y/X,this.z/X)},$23n:function(v){return this.x*v.x+this.y*v.y+this.z*v.z},lerp:function(O,W){return this.$20n(O.$13n(this).$21n(W))},length:function(){return l(this.$23n(this))},$14n:function(){return this.$16n(this.length())},$12n:function(y){var O=this;return new or(O.y*y.z-O.z*y.y,O.z*y.x-O.x*y.z,O.x*y.y-O.y*y.x)}};var wr=function(F,P,U){var u=this;u.$24n=new or(F),u.$22n=new or(P),u.uv=U?new or(U):null};wr.prototype={clone:function(){var I=this;return new wr(I.$24n.clone(),I.$22n.clone(),I.uv?I.uv.clone():null)},flip:function(){this.$22n=this.$22n.$11n()},$18n:function(w,u){var q=this;return new wr(q.$24n.lerp(w.$24n,u),q.$22n.lerp(w.$22n,u),q.uv?q.uv.lerp(w.uv,u):null)}};var Ph=function(B,W){this.$22n=B,this.w=W};Ph.$17n=function(A,F,G){var n=F.$13n(A).$12n(G.$13n(A)).$14n();return new Ph(n,n.$23n(A))},Ph.prototype={clone:function(){return new Ph(this.$22n.clone(),this.w)},flip:function(){var x=this;x.$22n=x.$22n.$11n(),x.w=-x.w},$5n:function(n,g,r,j,z){for(var W=this,B=0,q=1,C=2,v=3,T=0,t=[],P=0;P<n.$9n.length;P++){var N=W.$22n.$23n(n.$9n[P].$24n)-W.w,y=-d>N?C:N>d?q:B;T|=y,t.push(y)}switch(T){case B:(W.$22n.$23n(n.$8n.$22n)>0?g:r).push(n);break;case q:j.push(n);break;case C:z.push(n);break;case v:for(var p=[],e=[],P=0;P<n.$9n.length;P++){var Z=(P+1)%n.$9n.length,G=t[P],J=t[Z],i=n.$9n[P],K=n.$9n[Z];if(G!=C&&p.push(i),G!=q&&e.push(G!=C?i.clone():i),(G|J)==v){var N=(W.w-this.$22n.$23n(i.$24n))/W.$22n.$23n(K.$24n.$13n(i.$24n)),I=i.$18n(K,N);p.push(I),e.push(I.clone())}}p.length>=3&&j.push(new hg(p,n.$10n)),e.length>=3&&z.push(new hg(e,n.$10n))}}};var hg=function(T,n){var N=this;N.$9n=T,N.$10n=n,N.$8n=Ph.$17n(T[0].$24n,T[1].$24n,T[2].$24n)};hg.prototype={clone:function(){var o=this.$9n.map(function(u){return u.clone()});return new hg(o,this.$10n)},flip:function(){this.$9n.reverse().map(function(h){h.flip()}),this.$8n.flip()}};var fk=function(f){var v=this;v.$8n=null,v.front=null,v.back=null,v.$4n=[],f&&v.$7n(f)};fk.prototype={clone:function(){var o=this,F=new fk;return F.$8n=o.$8n&&o.$8n.clone(),F.front=o.front&&o.front.clone(),F.back=o.back&&o.back.clone(),F.$4n=o.$4n.map(function(m){return m.clone()}),F},$6n:function(){for(var n=this,j=0;j<n.$4n.length;j++)n.$4n[j].flip();n.$8n.flip(),n.front&&n.front.$6n(),n.back&&n.back.$6n();var p=n.front;n.front=n.back,n.back=p},$1n:function(P){var W=this;if(!W.$8n)return P.slice();for(var o=[],p=[],D=0;D<P.length;D++)W.$8n.$5n(P[D],o,p,o,p);return W.front&&(o=W.front.$1n(o)),p=W.back?W.back.$1n(p):[],o.concat(p)},$3n:function(y){var $=this;$.$4n=y.$1n($.$4n),$.front&&$.front.$3n(y),$.back&&$.back.$3n(y)},$2n:function(){var Y=this,f=Y.$4n.slice();return Y.front&&(f=f.concat(Y.front.$2n())),Y.back&&(f=f.concat(Y.back.$2n())),f},$7n:function(S){var N=this;if(S.length){N.$8n||(N.$8n=S[0].$8n.clone());for(var f=[],y=[],C=0;C<S.length;C++)this.$8n.$5n(S[C],N.$4n,N.$4n,f,y);f.length&&(N.front||(N.front=new fk),this.front.$7n(f)),y.length&&(N.back||(N.back=new fk),N.back.$7n(y))}}};var Yb="symbol",Ie=V.Symbol=function(h,G,W){var c=this;g(Ie,c),c.s3(20,20,20),c.s({"all.visible":!1,shape:"rect"}),c.setIcon(h,G,W)};Z("Symbol",i,{setIcon:function(r,u,i){var H,v=this;return Ie.superClass.setIcon.call(v,r),r?(H={for3d:!0,face:"center",position:44,names:[r]},i&&(H.transaprent=!0),u&&(H.autorotate=u),v.addStyleIcon(Yb,H)):v.removeStyleIcon(Yb),v.setWidth(S.getImageWidth(b.getImage(r),v)||20),H}});var je=V.CSGNode=function(){g(je,this),this.s({shape:"rect","attach.thickness":1.001})},mo={position:1,width:1,height:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,tall:1,elevation:1,"s:attach.cull":1,"s:attach.operation":1};Z("CSGNode",i,{_22Q:function(){return kf},onPropertyChanged:function(Y){var G=this,V=G.getHost();je.superClass.onPropertyChanged.call(G,Y),mo[Y.property]&&(V instanceof ke||V instanceof je)&&V.fp("csgNodeChange",!0,!1)}});var kf=function(q,l){g(kf,this,[q,l])};u(kf,B.Node3dUI,{_80o:function(W,b,j){var w=this;w._shape3d?kf.superClass._80o.call(w,W,b,j):(Y(w.gv),pl.forEach(function(O){P(w,W,b,w[O],j)}))},validate:function(f,V){var j=this,$=j.gv,A=j.data;if(A.s("shape3d"))return kf.superClass.validate.call(j,f,V),j._shape3d=!0,void 0;j._shape3d=!1;var L=O(A,$.getMat(A)),c=f&&f.uv;j.vf2("csg",c);for(var z=0;6>z;z++)for(var T=oq[z],o=Lr[z],X=j.vf2(T,c,V),x=X.mat||L,l=X.vs,n=X.uv,M=X.tuv,E=0;2>E;E++){var U=a[o+3*E],p=a[o+3*E+1],C=a[o+3*E+2];if(D(l,x,[v[3*U],v[3*U+1],v[3*U+2]]),D(l,x,[v[3*p],v[3*p+1],v[3*p+2]]),D(l,x,[v[3*C],v[3*C+1],v[3*C+2]]),M)if(n){var q=8*z;M.push(n[2*U-q],n[2*U+1-q],n[2*p-q],n[2*p+1-q],n[2*C-q],n[2*C+1-q])}else M.push(I[2*U],I[2*U+1],I[2*p],I[2*p+1],I[2*C],I[2*C+1])}rp(j,f,V)},vf2:function(I,r,X){var d,p=this,O=p.gv.getFaceVisible(p.data,I);return d=e(p,I,X),d.vs=[],d.tuv=O&&(d.texture||r)?[]:h,d.visible=O,d}});var ke=V.CSGShape=function(){var d=this;g(ke,d),d.s({"shape.background":h,"shape.border.width":8}),d.setTall(240),d.setElevation(120),d.setThickness(14)};Z("CSGShape",W,{IRotatable:!1,_22Q:function(){return Ih},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setSegments:function(){}});var Ih=function(G,P){g(Ih,this,[G,P])};u(Ih,B.Shape3dUI,{_80o:function(V,q,b){var E=this;E.undrawable||(Y(E.gv),pl.forEach(function(u){P(E,V,q,E[u],b)}))},validate:function(e,c){var F=this,y=F.data,w=y.getPoints();if(F.undrawable=w.size()<2)return F.clear(),void 0;var v=y.isClosePath(),q=z(y._thickness/2,d),G=_(w,h,h,v);pl.forEach(function(q){F.vf(q,e&&e.uv,!0,c)}),v&&(F.left.visible=!1,F.right.visible=!1),F._12O(G,q),F._20Q(G),rp(F,e,c)}});var _g=V.DoorWindow=function(){var y=this;g(_g,y),y.setElevation(100),y.s3(100,200,14)};Z("DoorWindow",je,{IDoorWindow:!0,toggle:function(O){this.setExpanded(!this.s(M),O)},isExpanded:function(){return this.s(M)},setExpanded:function(f,b){var _=this,V=_.$25n,Y=_.getDataModel(),I=_.s(M);if(V&&(V.stop(!0),delete _.$25n),I!==f){Y&&Y.beginTransaction();var H=f?_.s("dw.end"):_.s("dw.start");_.s(M,f),b=k(b),b?(I=_.s(J),b.action=function(F){_.s(J,I+(H-I)*F)},b.finishFunc=function(){Y&&Y.endTransaction()},_.$25n=$(b)):(_.s(J,H),Y&&Y.endTransaction())}},getMat:function(){var K=this,i=K.s("dw.s3"),O=K.s("dw.t3"),W=K.s("dw.flip"),X=K.s(J);if(i||X||O||W){var j=[];if(W&&j.push({r3:[0,r,0]}),i&&j.push({s3:i}),X){i=K.s3();var U=K.s("dw.axis"),e=i[0]/2,Z=i[1]/2;i[2]/2,U===Q?j.push({t3:[e,0,0]},{r3:[0,-X,0]},{t3:[-e,0,0]}):U===F?j.push({t3:[-e,0,0]},{r3:[0,X,0]},{t3:[e,0,0]}):U===w?j.push({t3:[0,-Z,0]},{r3:[-X,0,0]},{t3:[0,Z,0]}):U===q?j.push({t3:[0,Z,0]},{r3:[X,0,0]},{t3:[0,-Z,0]}):U===t?j.push({r3:[0,X,0]}):U===s&&j.push({r3:[X,0,0]})}return O&&j.push({t3:O}),c(j)}return h}});var Ei=V.CSGBox=function(){var P=this;g(Ei,P),P.setElevation(100),P.s3(100,200,100)};Z("CSGBox",je,{ICSGBox:!0,toggleFace:function(I,q){this.setFaceExpanded(I,!this.s(I+R),q)},isFaceExpanded:function(m){return this.s(m+R)},setFaceExpanded:function(Q,T,S){var O=this,j=O.$25n,r=O.s(Q+R);if(j&&(j.stop(!0),delete O.$25n),r!==T){var p=T?O.s(Q+".end"):O.s(Q+".start");O.s(Q+R,T),S=k(S),S?(r=O.s(Q+y),S.action=function($){O.s(Q+y,r+(p-r)*$)},O.$25n=$(S)):O.s(Q+y,p)}},getFaceMat:function(V){var R=this,S=R.s(V+y);if(!S)return h;var I=R.s(V+".axis"),H=R.s3(),r=H[0]/2,B=H[1]/2,p=H[2]/2,O=[];return V===x&&(I===Q?O.push({t3:[r,0,-p]},{r3:[0,-S,0]},{t3:[-r,0,p]}):I===F?O.push({t3:[-r,0,-p]},{r3:[0,S,0]},{t3:[r,0,p]}):I===w?O.push({t3:[0,-B,-p]},{r3:[-S,0,0]},{t3:[0,B,p]}):I===q?O.push({t3:[0,B,-p]},{r3:[S,0,0]},{t3:[0,-B,p]}):I===t?O.push({t3:[0,0,-p]},{r3:[0,S,0]},{t3:[0,0,p]}):I===s&&O.push({t3:[0,0,-p]},{r3:[S,0,0]},{t3:[0,0,p]})),V===f&&(I===Q?O.push({t3:[-r,0,p]},{r3:[0,-S,0]},{t3:[r,0,-p]}):I===F?O.push({t3:[r,0,p]},{r3:[0,S,0]},{t3:[-r,0,-p]}):I===w?O.push({t3:[0,-B,p]},{r3:[S,0,0]},{t3:[0,B,-p]}):I===q?O.push({t3:[0,B,p]},{r3:[-S,0,0]},{t3:[0,-B,-p]}):I===t?O.push({t3:[0,0,p]},{r3:[0,S,0]},{t3:[0,0,-p]}):I===s&&O.push({t3:[0,0,p]},{r3:[S,0,0]},{t3:[0,0,-p]})),V===Q&&(I===Q?O.push({t3:[r,0,p]},{r3:[0,-S,0]},{t3:[-r,0,-p]}):I===F?O.push({t3:[r,0,-p]},{r3:[0,S,0]},{t3:[-r,0,p]}):I===w?O.push({t3:[r,-B,0]},{r3:[0,0,-S]},{t3:[-r,B,0]}):I===q?O.push({t3:[r,B,0]},{r3:[0,0,S]},{t3:[-r,-B,0]}):I===t?O.push({t3:[r,0,0]},{r3:[0,S,0]},{t3:[-r,0,0]}):I===s&&O.push({t3:[r,0,0]},{r3:[0,0,S]},{t3:[-r,0,0]})),V===F&&(I===Q?O.push({t3:[-r,0,-p]},{r3:[0,-S,0]},{t3:[r,0,p]}):I===F?O.push({t3:[-r,0,p]},{r3:[0,S,0]},{t3:[r,0,-p]}):I===w?O.push({t3:[-r,-B,0]},{r3:[0,0,S]},{t3:[r,B,0]}):I===q?O.push({t3:[-r,B,0]},{r3:[0,0,-S]},{t3:[r,-B,0]}):I===t?O.push({t3:[-r,0,0]},{r3:[0,S,0]},{t3:[r,0,0]}):I===s&&O.push({t3:[-r,0,0]},{r3:[0,0,S]},{t3:[r,0,0]})),V===w&&(I===Q?O.push({t3:[r,-B,0]},{r3:[0,0,S]},{t3:[-r,B,0]}):I===F?O.push({t3:[-r,-B,0]},{r3:[0,0,-S]},{t3:[r,B,0]}):I===w?O.push({t3:[0,-B,p]},{r3:[-S,0,0]},{t3:[0,B,-p]}):I===q?O.push({t3:[0,-B,-p]},{r3:[S,0,0]},{t3:[0,B,p]}):I===t?O.push({t3:[0,-B,0]},{r3:[0,0,S]},{t3:[0,B,0]}):I===s&&O.push({t3:[0,-B,0]},{r3:[S,0,0]},{t3:[0,B,0]})),V===q&&(I===Q?O.push({t3:[r,B,0]},{r3:[0,0,-S]},{t3:[-r,-B,0]}):I===F?O.push({t3:[-r,B,0]},{r3:[0,0,S]},{t3:[r,-B,0]}):I===w?O.push({t3:[0,B,-p]},{r3:[-S,0,0]},{t3:[0,-B,p]}):I===q?O.push({t3:[0,B,p]},{r3:[S,0,0]},{t3:[0,-B,-p]}):I===t?O.push({t3:[0,B,0]},{r3:[0,0,S]},{t3:[0,-B,0]}):I===s&&O.push({t3:[0,B,0]},{r3:[S,0,0]},{t3:[0,-B,0]})),c(O)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);