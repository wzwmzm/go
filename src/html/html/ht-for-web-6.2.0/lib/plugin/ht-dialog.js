!function(f,O){"use strict";var $="ht",K=f[$],o="px",I="left",x="top",Q="bottom",L="right",F="innerHTML",t="className",z="",y="width",P="height",q="string",w="position",E="absolute",e="0",J="opacity",N="background",S=K.Default,D=S.getInternal(),c=K.Color,W=S.animate,h=S.isTouchable,p=null,k=(Math.sqrt,f.parseInt),i=f.setTimeout,U=(Math.round,c.titleIconBackground),n=function(X){return typeof X===q||X instanceof String},a=function(){return document},R=function(B){return a().createElement(B)},b=function(){var T=R("div");return T.tabIndex=-1,T.style.outline="none",T},u=function(){return R("canvas")},l=function(s,B){g(s,"-webkit-transform",B),g(s,"-ms-transform",B),g(s,"transform",B)},g=function(T,u,I){T.style.setProperty(u,I,p)},j=function(C,q,t){S.def(K.widget[C],q,t)},d=function(R,s){R.appendChild(s)},G=function(){return a().documentElement},A=function(){return G().clientWidth},m=function(){return G().clientHeight},s=function(F,P,B,m){F.addEventListener(P,B,!!m)},M=function(W){var q=W.touches[0];return q?q:W.changedTouches[0]};D.addMethod(S,{dialogCloseIcon:{width:100,height:100,comps:[{type:"shape",points:[10,10,90,90],segments:[1,2],borderWidth:8,borderColor:U},{type:"shape",points:[90,10,10,90],segments:[1,2],borderWidth:8,borderColor:U}]},dialogMaximizeIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,15,80,75],borderWidth:6,borderColor:U},{type:"rect",rect:[10,10,80,20],background:U}]},dialogRestoreIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,34,56,56],borderWidth:8,borderColor:U},{type:"rect",rect:[10,34,56,14],background:U},{type:"rect",rect:[34,10,56,14],background:U},{type:"rect",rect:[82,10,8,56],background:U},{type:"rect",rect:[66,62,24,8],background:U}]},dialogTitleLabelColor:S.labelSelectColor,dialogTitleLabelFont:(h?"18":"14")+"px arial, sans-serif",dialogContentLabelFont:S.labelFont,dialogTitleBackground:c.titleBackground,dialogHeaderBackground:c.headerBackground,dialogButtonBackground:"#1ABC9C",dialogButtonSelectBackground:"#16A085",dialogButtonLabelColor:"#fff"},!0);var T=function(z){var M=this;M.$1d=z,M.addListeners()};S.def(T,O,{ms_listener:1,getView:function(){return this.$1d.getView()},clear:function(){delete this.$2d,delete this.$3d,delete this.$4d,delete this.$5d},handle_touchstart:function(D){var H=this,A=H.$1d,K=A.$6d,Y=A._config,G=A.$7d,V=D,v=D.target;if(G.contains(v)||S.preventDefault(D),S.isLeftButton(D)){h&&(V=M(D));var n=H.$8d={x:V.pageX,y:V.pageY};H.$9d={x:n.x,y:n.y},!Y.maximized&&Y.draggable&&K.contains(v)&&(H.$4d=!0,S.startDragging(H,D)),H.handle_mousemove(D)&&(H.$2d=!0,S.startDragging(H,D)),G.contains(D.target)||A.$41d.focus()}},handle_mousedown:function(e){this.handle_touchstart(e)},handle_touchend:function(L){if(S.isLeftButton(L)&&!this.$5d&&!this.$3d){var l=this,R=l.$1d,H=L.target,F=R._config,B=R.$18d,h=R.$16d;for(F.closable&&B.contains(H)&&R.hide(),F.maximizable&&h.contains(H)&&(F.maximized?R.restore():R.maximize());H&&(H.className||"").indexOf("dialog-button")<0;)H=H.parentNode;H&&H.buttonItem&&R.action&&R.action(H.buttonItem,L),delete l.$8d,delete l.$9d}},handle_mouseup:function(P){this.handle_touchend(P)},handleWindowTouchEnd:function(O){var n=this,N=n.$1d,u=N.$10d;n.$2d&&n.$3d?u.fire({kind:"endResize",target:N,originEvent:O}):n.$4d&&n.$5d&&u.fire({kind:"endMove",target:N,originEvent:O}),this.clear()},handleWindowMouseUp:function(W){this.handleWindowTouchEnd(W)},handle_mousemove:function(O){var Q=this.$1d._config;if(Q.maximized)return!1;if("w"!==Q.resizeMode&&"h"!==Q.resizeMode&&"wh"!==Q.resizeMode)return!1;var I=this,u=I.getView(),L=u.querySelector(".resize-area"),x=L.getBoundingClientRect(),D={x:x.left,y:x.top,width:x.width,height:x.height};O=h?M(O):O;var Z=O.clientX,s=O.clientY,N={x:Z,y:s};return S.containsPoint(D,N)?(g(u,"cursor","nwse-resize"),!0):(g(u,"cursor",z),void 0)},handleWindowTouchMove:function(_){_.preventDefault();var V=_;h&&(V=M(_));var w=this,r=w.$8d,e=w.$9d;if(!(e.x==r.x&&e.y==r.y&&S.getDistance(e,{x:V.pageX,y:V.pageY})<=1)){var Q=w.$1d,a=Q._config,q=Q.$21d,s=a.resizeMode||"wh",Y=V.pageX-r.x,v=V.pageY-r.y;if(w.$2d){var j=q.offsetWidth,U=q.offsetHeight,X=j+Y,J=U+v;if(X=Math.max(X,50),J=Math.max(J,50),"center"===a.position||a.position==p){var n={},t=q.getBoundingClientRect();n.x=t.left,n.y=t.top,a.position=n}"w"===s?(Q.setSize(X,U),r.x+=X-j):"h"===s?(Q.setSize(j,J),r.y+=J-U):"wh"===s&&(Q.setSize(X,J),r.x+=X-j,r.y+=J-U),w.$3d?Q.$10d.fire({kind:"betweenResize",target:Q,originEvent:_}):(w.$3d=!0,Q.$10d.fire({kind:"beginResize",target:Q,originEvent:_}))}else if(w.$4d){var l=q.getBoundingClientRect(),y=l.width,D=l.height,z=A(),B=m(),K=k(q.style.left)||0,T=k(q.style.top)||0,i=K+Y,R=T+v,G=Q.adjustPosition({x:i,y:R},{width:y,height:D},{width:z,height:B});G&&(i=G.x,R=G.y);var P=i-K,C=R-T;g(q,I,i+o),g(q,x,R+o),r.x+=P,r.y+=C,a.position={x:i,y:R},w.$5d?Q.$10d.fire({kind:"betweenMove",target:Q,originEvent:_}):(w.$5d=!0,Q.$10d.fire({kind:"beginMove",target:Q,originEvent:_}))}}},handleWindowMouseMove:function(b){this.handleWindowTouchMove(b)},handleWindowResize:function(){var r=this,S=r,l=S._config,G=S.$21d,n=A(),B=m(),u=l.width,M=l.height,H=l.position||"center";l.maximized?(g(G,y,n+o),g(G,P,B+o),g(G,x,e),g(G,I,e)):(g(G,y,u+o),g(G,P,M+o),"center"===H?(g(G,I,(n-u)/2+o),g(G,x,(B-M)/2+o)):(g(G,I,H.x+o),g(G,x,H.y+o))),S.iv()},handle_mousewheel:function(Y){Y.stopPropagation()},handle_DOMMouseScroll:function(W){W.stopPropagation()}}),K.widget.Dialog=function(b){var Q=this,d=Q._view=D.createView(null,Q);d[t]="ht-widget-dialog",g(d,w,E),S.baseZIndex!=p&&g(d,"z-index",S.baseZIndex+"");var M=Q.$11d=new T(Q);Q.bindingHandleWindowResize=M.handleWindowResize.bind(Q),Q.$10d=new K.Notifier,b&&Q.setConfig(b)},j("Dialog",O,{ms_v:1,setTitle:function(C){this._config.title=C,this.getView().querySelector(".dialog-container-title span").innerHTML=C},$31d:function(){var Y=this,C=Y.$6d=b(),e=Y._config,i=Y.$12d=Y.$13d();C[t]="dialog-container-title",g(C,"cursor","default"),g(C,"white-space","nowrap"),g(C,"overflow","hidden"),g(C,"font",S.dialogTitleLabelFont),g(C,N,e.titleBackground||S.dialogTitleBackground),g(C,"color",e.titleColor||S.dialogTitleLabelColor);var P=R("span"),M=Y.$25d();if(e.titleAlign&&g(C,"text-align",e.titleAlign),e.titleIcon){var w=Y.$14d=Y.$15d();d(C,w)}if(e.title&&e.title.trim&&(e.title=e.title.trim()),P[F]=e.title||"&nbsp;",d(C,P),e.maximizable){var Z=Y.$16d=Y.$17d();d(i,Z)}if(e.closable){var j=Y.$18d=Y.$19d();d(i,j)}return d(C,i),g(C,"display","block"),g(C,"line-height",M+o),C},$13d:function(){var _=b();return g(_,w,E),g(_,I,e),g(_,L,5+o),g(_,x,e),g(_,Q,e),g(_,"text-align",L),g(_,"white-space","nowrap"),_[t]="dialog-title-controls",_},$20d:function(){var u=this.$21d=b(),Z=this._config,L=Z.borderWidth;return g(u,w,"fixed"),g(u,"box-shadow","rgba(0, 0, 0, 0.2) 0px 5px 10px 0px"),g(u,"padding",e+" "+L+o+" "+L+o+" "+L+o),g(u,"box-sizing","border-box"),g(u,"-moz-box-sizing","border-box"),u[t]="dialog-container",g(u,N,Z.titleBackground||S.dialogTitleBackground),u},$22d:function(){var N,H=this,Y=H._config,i=H.$7d=b(),G=Y.content,m=0,R=Y.contentPadding||0;Y.buttons!=p&&Y.buttons.length>0&&(m=32),n(G)?i[F]=G:G.getView?(N=G.getView(),d(i,N)):(N=G,d(i,N)),g(i,w,E),g(i,"font",S.dialogContentLabelFont),K.Default.appendToScreen(i);var h=i.offsetWidth+1,l=i.offsetHeight,j=H.$25d();return Y.width==p&&(Y.width=h+10+2*R),Y.height==p&&(Y.height=l+j+m+5+2*R),K.Default.removeHTML(i),N&&(g(N,"box-sizing","border-box"),g(N,"-moz-box-sizing","border-box"),g(N,y,"100%"),g(N,P,"100%")),i[t]="dialog-content",g(i,x,j+R+o),g(i,Q,m+R+o),g(i,I,R+o),g(i,L,R+o),g(i,"overflow","hidden"),i},getOverlayDiv:function(){return this.$41d},$23d:function(){var q=this.$41d=b();return q[t]="dialog-overlay",g(q,y,"100%"),g(q,P,"100%"),g(q,w,"fixed"),g(q,x,e),g(q,I,e),g(q,N,"rgba(235, 235, 235, 0.7)"),q},_config:p,setSize:function(s,a){var u=this,g=u._config;g&&(g.width=s,g.height=a,u.isShowing()&&(u.bindingHandleWindowResize(),u.iv()))},getConfig:function(){return this._config},$24d:function(){var $=this._config,l=$.titleIconSize||16;return h&&(l*=1.2),l},$25d:function(){var Y=this._config,f=Y.titleHeight||S.widgetTitleHeight;return f},$26d:function(u){g(u,"cursor","pointer"),g(u,"display","inline-block"),g(u,"margin-right",(h?8:4)+o),g(u,"vertical-align",x)},$27d:function(){var $=this.$30d=b(),F=10;return h&&(F=20),g($,y,F+o),g($,P,F+o),g($,w,E),g($,Q,e),g($,L,e),$[t]="resize-area",$},$15d:function(){var w=this,M=u();M[t]="dialog-title-control dialog-title-control-icon";var f=w.$25d(),p=w.$24d();return w.$26d(M),D.setCanvas(M,p,f),M},$17d:function(){var K=u();K[t]="dialog-title-control dialog-title-control-maximize";var V=this.$25d(),d=this.$24d();return this.$26d(K),D.setCanvas(K,d,V),K},$19d:function(){var g=u();g[t]="dialog-title-control dialog-title-control-close";var i=this.$25d(),P=this.$24d();return this.$26d(g),D.setCanvas(g,P,i),g},$28d:function(){var K=b();return g(K,N,"white"),g(K,y,"100%"),g(K,P,"100%"),g(K,w,"relative"),K},$29d:function(){var m=this,J=b();g(J,"line-height",32+o),g(J,w,E),g(J,Q,e),g(J,I,e),g(J,"white-space","nowrap"),g(J,"overflow","hidden"),g(J,L,e),g(J,N,S.dialogHeaderBackground),J[t]="dialog-container-buttons";var Z=this._config,r=Z.buttonsAlign||L,l=0;return g(J,"text-align",r),m.$42d=[],Z.buttons.forEach(function(u){var E=new K.widget.Button,C=E.getView();C[t]="dialog-button "+u.className,C.buttonItem=u,m.$42d.push(E),E.setBorderColor(p),E.setBackground(S.dialogButtonBackground),E.setSelectBackground(S.dialogButtonSelectBackground),E.setLabelColor(S.dialogButtonLabelColor),g(C,w,"static"),g(C,"display","inline-block"),g(C,"text-align",I),g(C,"height",24+o);var O=h?10:5;r===I||r===L?g(C,"margin-"+r,O+o):0===l||g(C,"margin-"+I,O+o),g(C,"vertical-align","middle");var A=S.getTextSize(E.getLabelFont(),u.label).width+10;E.onClicked=function(x){u.action&&u.action.call(m,u,x)},E.setLabel(u.label),g(C,y,A+o),d(J,E.getView()),l++}),J},setConfig:function(c){if(c){var I=this,t=I._view;I._config=c,I.action=c.action,t[F]=z,c.borderWidth==p&&(c.borderWidth=5);var T=I.$23d(),X=I.$28d(),$=I.$31d(),h=I.$22d(),Z=I.$20d(),b=I.$30d=I.$27d();if(d(t,T),d(t,Z),d(Z,X),d(X,$),d(X,h),c.buttons!=p&&c.buttons.length>0){var S=I.$29d();d(X,S)}d(Z,b),c.maximized?(c.maximized=!1,I.bindingHandleWindowResize(),I.maximize(!0)):I.bindingHandleWindowResize(),I.isShowing()&&I.iv()}},hide:function(){var A=this,X=A.$21d,y=A.$41d,Z=A._view;Z[t]="ht-widget-dialog",W(X).duration(200).scale(.7).set(J,e).end(function(){A.onHidden&&A.onHidden(),K.Default.removeHTML(Z),A.$10d.fire({kind:"hide",target:A})}),W(y).duration(200).set(J,e).end(),f.removeEventListener("resize",A.bindingHandleWindowResize)},isShowing:function(){return!!this._view.parentNode},setModal:function(C){this.$41d.style.display=C?"block":"none"},isModal:function(){return"none"!==this.$41d.style.display},$32d:function(){var h=this,M=h._config,r=h.$21d;l(r,z),h.iv(),M.maximized?h.$10d.fire({kind:"maximize",target:h}):h.$10d.fire({kind:"restore",target:h})},maximize:function(c){var K=this,J=K.$21d,Z=K._config;if(!Z.maximized){Z.maximized=!0,K.$33d(),K.$16d[t]="dialog-title-control dialog-title-control-minimize";var d=A(),u=m(),G=Z.width,C=Z.height,n=k(J.style.left)||0,h=k(J.style.top)||0;K.$36d=G,K.$37d=C,K.$34d=n,K.$35d=h;var X=c?0:200;W(J).duration(X).set(I,e).set(x,e).set(y,d+o).set(P,u+o).end(function(){K.$32d()})}},restore:function(){var n=this,u=n.$34d,D=n.$35d,_=n.$36d,e=n.$37d,g=n._config;if(g.maximized&&(g.maximized=!1,n.$33d(),n.$16d[t]="dialog-title-control dialog-title-control-maximize",n.isShowing()&&u!=p&&D!=p&&_!=p&&e!=p)){var L=n.$21d;W(L).duration(200).set(I,u+o).set(x,D+o).set(y,_+o).set(P,e+o).end(function(){n.$32d()})}delete n.$34d,delete n.$35d,delete n.$36d,delete n.$37d},show:function(){var S=this,n=S._view,v=S._config,r=S.$21d,Y=S.$41d;v&&v.zIndex!=p&&g(n,"z-index",v.zIndex+z),K.Default.appendToScreen(n),l(r,"scale(0.7)"),g(r,J,e),S.iv(),S.validate(),S._view[t]+=" dialog-show",i(function(){W(r).duration(200).scale(1).set(J,"1").end(function(){g(r,y,r.clientWidth+o),g(r,P,r.clientHeight+o),S.onShown&&S.onShown(),S.$10d.fire({kind:"show",target:S})}),W(Y).duration(200).set(J,"1").end(),s(f,"resize",S.bindingHandleWindowResize)},30)},setPosition:function(v){var l=this.$21d;l.style.left=v.x+"px",l.style.top=v.y+"px"},addEventListener:function(V,$,Q){this.$10d.add(V,$,Q)},removeEventListener:function(z,O){this.$10d.remove(z,O)},$38d:function(l,G,L,s){var X=D.initContext(l);D.translateAndScale(X,0,0,1),X.clearRect(0,0,L,L);var g=(L-s)/2;S.drawStretchImage(X,S.getImage(G),"fill",0,g,s,s),X.restore()},$33d:function(){var B=this,u=B._config,E=B.$16d,F=u.maximized?S.dialogRestoreIcon:S.dialogMaximizeIcon;if(E&&F){var O=B.$25d(),G=B.$24d();B.$38d(E,S.getImage(F),O,G)}},$39d:function(){var Z=this,h=Z._config,W=Z.$14d,l=h.titleIcon;if(W&&l){var G=Z.$25d(),D=Z.$24d();Z.$38d(W,S.getImage(l),G,D)}},$40d:function(){var g=this,O=g.$18d,W=S.dialogCloseIcon;if(O&&W){var K=g.$25d(),U=g.$24d();g.$38d(O,S.getImage(W),K,U)}},invalidate:function(M){var o=this,b=o.$42d;o._68I||(o._68I=1,S.callLater(o.validate,o,p,M),o.onInvalidated&&o.onInvalidated(),o.fireViewEvent("invalidate"));var n=o._config.content;n.invalidate&&n.invalidate(),b&&b.forEach(function(s){s.iv()})},validateImpl:function(){var j=this;j.$40d(),j.$33d(),j.$39d();var J=j._config.content;J.initView&&(J.setX(0),J.setY(0),J.setWidth(j.$7d.clientWidth),J.setHeight(j.$7d.clientHeight))},adjustPosition:function(A,l,O){var K=l.width,e=l.height,B=O.width,Q=O.height,b=A.x,c=A.y,C=this._config,k=C.minDragSize||20;return"inside"===C.dragMode?(b+K>B&&(b=B-K),c+e>Q&&(c=Q-e),0>b&&(b=0),0>c&&(c=0)):(null==C.dragMode||"none"===C.dragMode)&&(-K+k>b&&(b=-K+k),b>B-k&&(b=B-k),c>Q-k&&(c=Q-k),0>c&&(c=0)),{x:b,y:c}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);