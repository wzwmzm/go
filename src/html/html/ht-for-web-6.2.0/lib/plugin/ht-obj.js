!function(w,x,h){"use strict";var W="ht",a=w[W],l=null,P=Math,r=P.abs,d=P.max,S=Number.MAX_VALUE,K=a.Default,c=K.getInternal(),i=K.clone,N=c.vec3TransformMat4,B=c.appendArray,y=function(){var X=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,Z=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,t=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,G=function(D,e){return e=parseInt(e),e>=0?D[e-1]:D[e+D.length]},$=function(b,d,p,k,J,h){if(b.vs){var C=G(d,k),E=G(d,J),w=G(d,h),e=p.matrix,z=b.vs;if(p.flipFace){var t=E;E=w,w=t}e?(B(z,N(i(C),e)),B(z,N(i(E),e)),B(z,N(i(w),e))):(B(z,C),B(z,E),B(z,w))}},b=function(L,Z,F,I,g,M){if(L.vs){var q=G(Z,I),h=G(Z,g),p=G(Z,M),U=F.flipY;if(F.flipFace){var m=h;h=p,p=m}L.uv.push(q[0],U?1-q[1]:q[1],h[0],U?1-h[1]:h[1],p[0],U?1-p[1]:p[1])}},y=function(L,Y,a,V,n,e){if(L.vs){var h=G(Y,V),o=G(Y,n),y=G(Y,e),S=a.normalMatrix,f=L.ns;if(a.flipFace){var X=o;o=y,y=X}S?(B(f,N(i(h),S)),B(f,N(i(o),S)),B(f,N(i(y),S))):(B(f,h),B(f,o),B(f,y))}},L=function(F,Q,N,u,p,j,r,d){var D=u&&u.length&&d;j[3]===h?($(F,Q,p,j[0],j[1],j[2]),r&&b(F,N,p,r[0],r[1],r[2]),D&&y(F,u,p,d[0],d[1],d[2])):($(F,Q,p,j[0],j[1],j[3]),$(F,Q,p,j[1],j[2],j[3]),r&&(b(F,N,p,r[0],r[1],r[3]),b(F,N,p,r[1],r[2],r[3])),D&&(y(F,u,p,d[0],d[1],d[3]),y(F,u,p,d[1],d[2],d[3])))},J=function(y,_,H,l){var L,J,m,n,f,$,D,j=S,P=S,q=S,Q=-S,x=-S,T=-S;for(L in y)for($=y[L].vs,D=$.length,J=0;D>J;J+=3)m=$[J+0],n=$[J+1],f=$[J+2],j>m&&(j=m),P>n&&(P=n),q>f&&(q=f),m>Q&&(Q=m),n>x&&(x=n),f>T&&(T=f);if(H){var B=j+(Q-j)/2,u=P+(x-P)/2,C=q+(T-q)/2;for(L in y)for($=y[L].vs,D=$.length,J=0;D>J;J+=3)$[J+0]-=B,$[J+1]-=u,$[J+2]-=C}var h,R,w;H?(h=Q-j,R=x-P,w=T-q):(h=2*d(r(j),r(Q)),R=2*d(r(P),r(x)),w=2*d(r(q),r(T))),l.rawS3=[h,R,w];for(L in y){if($=y[L].vs,_)for(D=$.length,J=0;D>J;J+=3)h&&($[J+0]/=h),R&&($[J+1]/=R),w&&($[J+2]/=w);y[L].rawS3=l.rawS3}};return function(Y,B,m){if(!Y)return l;c.isString(B)&&(B=g(B)),m||(m={}),m.flipY==l&&(m.flipY=!0),(m.s3||m.r3||m.t3||m.mat)&&(m.matrix=c.createWorldMatrix(m.mat,m.s3,m.r3,m.rotationMode,m.t3));var C,a,I,V,h,d,H=[],O=[],b=m.ignoreNormal?l:[],D=m.reverseFlipMtls,u={vs:[],uv:[],ns:b?[]:l},P={htdefault:u},F=Y.split("\n"),e=0;for(b&&m.matrix&&(m.normalMatrix=c.createNormalMatrix(m.matrix));e<F.length;e++)if(a=F[e].trim(),0!==a.length&&"#"!==a.charAt(0))if(I=X.exec(a))H.push([parseFloat(I[1]),parseFloat(I[2]),parseFloat(I[3])]);else if(I=Z.exec(a))O.push([parseFloat(I[1]),parseFloat(I[2])]);else if(b&&(I=t.exec(a)))m.flipFace?b.push([parseFloat(-I[1]),parseFloat(-I[2]),parseFloat(-I[3])]):b.push([parseFloat(I[1]),parseFloat(I[2]),parseFloat(I[3])]);else if("f"===a[0]){var p=a.split(/\s+/);if(p.length<4)continue;var G,C,_,v=[],r=[],R=[];for(C=1,_=p.length;_>C;C++)G=p[C].split("/"),v.push(parseInt(G[0],10)),G.length>1&&G[1].length>0&&R.push(parseInt(G[1],10)),G.length>2&&G[2].length>0&&r.push(parseInt(G[2],10));for(C=0,_=v.length-2;_>C;C++)L(u,H,O,b,m,[v[0],v[C+1],v[C+2]],R.length?[R[0],R[C+1],R[C+2]]:l,r.length?[r[0],r[C+1],r[C+2]]:l)}else if(/^usemtl /.test(a)&&(V=a.substring(7).trim(),!(u=P[V]))){if(u={name:V,vs:[],uv:[],ns:b?[]:l},m.ignoreMtls&&m.ignoreMtls.indexOf(V)>=0&&delete u.vs,(m.reverseFlip||"*"===D||D&&D.indexOf(V)>=0)&&(u.reverseFlip=!0),B&&(h=B[V],h&&(m.ignoreColor||(u.color=h.kd),!m.ignoreTransparent&&h.d>0&&h.d<1&&(u.transparent=!0,u.opacity=h.d),!m.ignoreImage&&(d=h.map_kd)))){d=d.split(" ");var T=-1;for(C=0;C<d.length;C++)"-o"===d[C]?(u.uvOffset=[parseFloat(d[C+1]),parseFloat(d[C+2])],C+=2,T=C):"-s"===d[C]&&(u.uvScale=[parseFloat(d[C+1]),parseFloat(d[C+2])],C+=2,T=C);u.image=(m.prefix||"")+d.splice(T+1).join(" ")}P[V]=u}var E=[];for(var o in P){var f=P[o].vs;f&&0!==f.length||E.push(o)}E.forEach(function(J){delete P[J]}),J(P,m.cube,m.center,m);var k=m.shape3d;if(k){var W=[];for(var V in P){var u=P[V];W.rawS3=u.rawS3,W.push(u)}K.setShape3dModel(k,W)}return P}}(),g=function(T){var o={};if(T)for(var U,r,Q,S,Z,f,M=T.split("\n"),D=/\s+/,W=0;W<M.length;W++)r=M[W].trim(),0!==r.length&&"#"!==r.charAt(0)&&(Q=r.indexOf(" "),S=(Q?r.substring(0,Q):r).toLowerCase(),Z=(Q?r.substring(Q+1):"").trim(),"newmtl"===S?o[Z]=U={name:Z}:U&&("ka"===S||"kd"===S||"ks"===S?(f=Z.split(D,3),U[S]=[parseFloat(f[0]),parseFloat(f[1]),parseFloat(f[2]),1]):U[S]="ns"===S||"d"===S?parseFloat(Z):Z));return o};c.addMethod(K,{loadObj:function(o,F,a){a=a||{},K.xhrLoad(F?[o,F]:[o],function(V){var E,D=a.finishFunc,m=a.shape3d,e=V?y(V[0],V[1],a):null;if(e){if(m)E=K.getShape3dModel(m);else{E=[];for(var G in e){var p=e[G];E.rawS3=p.rawS3,E.push(p)}}D&&D(e,E,E.rawS3)}else D&&D(null)},a)},parseObj:function(t,g,T){return y(t,g,T)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);