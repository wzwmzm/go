!function(x,h,e){"use strict";var u="ht";if(!x[u]){!function(){Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),x.performance&&x.performance.now||function(){var r=Date.now();x.performance||(x.performance={}),x.performance.now=function(){return Date.now()-r}}();for(var j=Date.now(),b=16,F=["ms","moz","webkit","o"],C=0;C<F.length&&!x.requestAnimationFrame;++C)x.requestAnimationFrame=x[F[C]+"RequestAnimationFrame"],x.cancelAnimationFrame=x[F[C]+"CancelAnimationFrame"]||x[F[C]+"CancelRequestAnimationFrame"];x.requestAnimationFrame||(x.requestAnimationFrame=function(l){var Z=Date.now(),m=b+j-Z;return 0>m&&(m=0),j=Z,x.setTimeout(function(){j=Date.now(),l(performance.now())},m)}),x.cancelAnimationFrame||(x.cancelAnimationFrame=function(N){return x.clearTimeout(N)})}();var K,b,d,E,F=x.document,J=null,A=x[u]={},p=x[u+"config"],r=A.Default=p&&p.Default||{},P=A.Style=p&&p.Style||{},D=A.Attr=p&&p.Attr||{},T=A.Color=p&&p.Color||{},V=A.IsGetter=p&&p.IsGetter||{},i=Math,Q=i.round,N=i.floor,o=i.ceil,Z=i.sqrt,S=i.max,c=i.min,k=i.abs,C=i.cos,R=i.acos,j=i.sin,q=i.pow,t=i.asin,I=i.PI,l=2*I,$=I/2,n=i.tan,f=i.atan2,O=i.random,W=function(B,m,e){return Math.max(m,Math.min(e,B))},M=!0,_=!1,L=x.parseInt||global.parseInt,g="2018-10-01",a=x.navigator?x.navigator.platform.indexOf("Win")>-1:!1,z=function(T){return T*T},U=x.setTimeout,G=x.clearTimeout,v=x.location,B=x.navigator?x.navigator.userAgent.toLowerCase():"",H=function(i){return i.test(B)},y=H(/msie/)||H(/trident/),Y=H(/msie 10/),m=H(/edge/),X=H(/firefox/),w=H(/mac/),s=r.isTouchable===e?a?!1:F?"ontouchend"in F:!1:r.isTouchable,oq="default",ip="single",bk="multiple",Im="front",Id="back",fh="left",um="right",Wc="top",Wb="bottom",$i="center",tq="eye",Pj="middle",uj="east",Qb="west",xb="north",_m="none",dm="px",_n="absolute",qo="border",_i="triangle",Yf="rect",wn="circle",hr="cylinder",el="shape",Qq="items",Rj="normal",Jn="remove",Jb="clear",vs="width",sh="height",zr="ingroup",Dd="check",Xq="uncheck",bs="radio",ti="radioOn",Ok="radioOff",co="points",rb="values",jc="series",Eo="body",ld="label",rh="label2",Hb="note",Ar="note2",hc="icons",fi="labelFont",Cn="labelColor",pb="labelSelectColor",Vd="note.expanded",El="note2.expanded",Gr="edge.expanded",mg="edge.points",pk="edge.type",uq="rotation",Rm="getRotation",lk="setRotation",hg="hidden",xq="visible",Ni="tuv",Ej="no",Ee="draw",Hf="select",Kq="currentSubGraph",Od="selectBackground",Kn="autoMakeVisible",vb="autoHideScrollBar",Br="scrollBarColor",jl="scrollBarSize",oe="indent",us="rowHeight",jr="columnLineColor",Yl="rowLineColor",Qm="columnLineVisible",si="rowLineVisible",go="visibleFunc",ro="expandIcon",Gi="collapseIcon",yq="checkMode",th="sortFunc",Tp="editable",il="batchEditable",Dl="tristate",sf="asc",np="desc",wi="position",Dm="elevation",Hm="children",xj="translateX",Cf="translateY",Rc="dataModel",Fk="maxSize",qb="shape3d",Ki="shape3d.resolution",wo="shape3d.visible",No="shape3d.from.visible",sg="shape3d.to.visible",Cr="shape3d.top.visible",Mi="shape3d.bottom.visible",Pl="repeat.uv.length",ge="serializeValue",Zo="deserializeValue",Re="centerUniform",Qh="rgba(255,255,255,0)",kf="style",of="attr",Xm="field",lf="string",yr="boolean",Lf="color",ts="int",ug="number",Dn="ew-resize",Qi="ns-resize",oi="pointer",Zp="auto",ds="mousedown",Po="mousemove",Yi="mouseup",pf="mouseout",qc="touchstart",Nm="touchmove",Rp="touchend",Nn="keydown",lh="keyup",Qe=X?"DOMMouseScroll":"mousewheel",Nj=s?[qc,Nm,Rp,Nn,lh,"keypress","input","contextmenu"]:[Nn,lh,"keypress","input",ds,Po,Yi,pf,Qe,"wheel","contextmenu","mouseenter","mouseleave","mouseover"],Xh=J,gg=J,Mq=J,$n=Yi.length,Xd=function(){Mq&&(G(Mq.timeout),Mq=J)},Sk=function(){Mq&&yi(Mq.e,Mq.info)};x.addEventListener&&(s||(x.addEventListener(pf,function(){Xd()},!1),x.addEventListener(Qe,function(){ns()},!1)),x.addEventListener(lh,function(R){91===R.keyCode?rc={}:delete rc[R.keyCode]},!0),x.addEventListener(Nn,function(p){rc[p.keyCode]=!0},!0));var Xj,cq,Ql,$c=0,Yr=J,kq=function(v,s){var m=U(function(){delete Yr[m],Ep(Yr)&&(Yr=J),v()},s);return m},bq=J,Tb={},Up={},kg={},sj={},ag={},rc={},kk={},gj={},Ld={},yo={},Qg=/.json$/,Tf=/^data:image\/svg\+xml/,Lq={},Wd=[],fs={},Fd=J,mp=J,gi=function(){},nn=function(){throw"Oops!"},oc=[0,0,0],Bm=[0,0,0,0],Rd={x:0,y:0,width:0,height:0},fg=J,Dq=J,Ff=J,cs=function(o){Dq&&!o._72O&&(Ff||(Ff={}),Ff[o._72O=Vb()]=o),Xj!=J?tl()<.05&&E&&!cq&&(Gl=Xd):Gl=Kb},ck=function(q,V,t,O){Dq||(Dq={});var B=Dq[q];if(B){if(B.url===V)return;B.image?(B.image.onload=gi,B.image.onerror=gi):B.request&&(B.request.onload=gi,B.request.onerror=gi)}if(Qg.test(V)){var G=new XMLHttpRequest;if(Dq[q]={request:G,url:V},G.overrideMimeType&&G.overrideMimeType("text/plain"),V=r.beforeLoadURL(V),V.data){var N=r.parse(V.data);Or(q,N),r.handleImageLoaded(q,N)}else G.open("GET",encodeURI(V),!0),G.onload=function(O){if(200===this.status||0===this.status){var N=r.parse(O.target.response||O.target.responseText);Or(q,N),r.handleImageLoaded(q,N)}else Or(q,r.handleUnfoundImage(q,V)||J)},G.onerror=function(){Or(q,r.handleUnfoundImage(q,V)||J)},G.send(null)}else{var N=new Image;Dq[q]={image:N,url:V},y&&(V.toLowerCase().indexOf(".svg")>0||Tf.test(V))?(F.body.appendChild(N),N.style.visibility="hidden",N.onload=function(){U(function(){if(t&&(N.width=t),O&&(N.height=O),!N.width||!N.height){var g=N.width||N.clientWidth,x=N.height||N.clientHeight;N.width=g,N.height=x}r.handleImageLoaded(q,N),Or(q,N),F.body.removeChild(N),N.style.visibility=""},180)},N.onerror=function(){Or(q,r.handleUnfoundImage(q,V)||J),F.body.removeChild(N),N.style.visibility=""}):(N.onload=function(){t&&(N.width=t),O&&(N.height=O),r.handleImageLoaded(q,N),Or(q,N)},N.onerror=function(){Or(q,r.handleUnfoundImage(q,V)||J)}),/^data:image/.test(V)||(V=r.beforeLoadURL(V),/^data:image/.test(V)||(V=r.appendTimeStamp(V),V=encodeURI(V))),N.src=V}},Or=function(W,E){if(Up[W]=E,delete Dq[W],Ep(Dq)&&(Dq=J,Ff)){for(var M in Ff){var Q=Ff[M];Q._2O&&(Q._2O={}),Q.invalidateAll&&Q.invalidateAll(e,"imageLoaded",W),Q.redraw&&Q.redraw(),Q.iv(),delete Q._72O}Ff=J}if(E&&Ff)for(var M in Ff){var Q=Ff[M];Q.invalidateAll&&Q.invalidateAll(e,"imageLoading",W),Q.redraw&&Q.redraw(),Q.iv()}},mj=function(){return x.performance&&x.performance.now?x.performance.now():Date.now()},Lo=function(p,A){A?G(p):x.cancelAnimationFrame(p)},Ro=function(d,c,I){return{width:d,height:c,comps:Ji(I)?I:[I]}},Lb=function(q,A){return{type:wn,rect:[q,A,1.6,1.6],borderWidth:1,borderColor:Yb,gradient:lc,gradientColor:hi,background:Yb}},tn=function(s,C){return Ro(16,16,{type:_i,rect:[4,4,10,8],background:s,rotation:C?1.57:3.14})},re=function(Y,j){return Ro(16,16,{type:_i,rect:[4,4,8,7],background:Y,rotation:j?3.14:0})},Tq=function(o){var S=o._orientation;return"horizontal"===S||"h"===S},vi=function(p){var z=J||4,s=J||1,f=J||1;0>z?z=0:z>.25&&(z=.25);var e,u,q,K,t,Q,c,U=.5,$=[],i=[],P=[],W=l/f,Y=l/s,v=U-z;for(u=0;s>=u;u++)for(K=-I+u*Y,Q=C(K),t=j(K),e=0;f>=e;e++)q=e*W,c=v+z*Q,$.push(C(q)*c,t*z,-j(q)*c),(b=p)&&i.push(e/f,1-u/s);for(u=0;s>u;u++){var D=u*(f+1),A=(u+1)*(f+1);for(e=0;f>e;e++)P.push(D+e,A+e+1,A+e,D+e,D+e+1,A+e+1),ac.z=Kf.z=p}},rj=function(V){var f=2,K=0;for(var H in V)H.length===f&&L(H,32)===Qf&&(Fd=mp=V[H]),K++;return K},vk=function(o,H,R,P){return R||(R=s?5:3,R/=P||1),{x:o-R,y:H-R,width:2*R,height:2*R}},Jd=function(Z,_,g,p){var T=this;_||(_=s?5:3,g=20,p=20);var P={x:Z,y:_,width:g,height:p};if(g)for(var H=0;g>H;H++)if(3===g)p=20;else for(var W=0;p>W;W++)T=x?x:g;var K={x:I,y:2*I};if(Pm(P,K)){var o=sh[0]+Wc[0]+Jb[1];Bk[tq]=T[o],T[o]=nq[tq]}},Kp=function(F){return(/ble$/.test(F)||/ed$/.test(F)||V[F]?"is":"get")+F.charAt(0).toUpperCase()+F.slice(1)},nq=function(S){return"set"+S.charAt(0).toUpperCase()+S.slice(1)},se=function(t){return typeof t===lf||t instanceof String},On=function(i){return typeof i===ug},Kb=function(E){return typeof E===yr},Vc=function(M){return M&&"object"==typeof M},jo=function(U){return"function"==typeof U},Ji=function(m){return m instanceof Array},Mj=function(a){return a instanceof Cq},$b=function(v){return Ji(v)?new Cq(v):v},Yq=function(b){return b instanceof Xk},zj=function(x){return x instanceof lj},Mg=function(q){return q instanceof Gd},Fr=function(E,d){if(!(E instanceof A.Group))return!1;if(!d)return E.isExpanded();var f=d.getDataUI(E);return f&&f._88I?!0:!1},Fh=function(K){return K instanceof Ij},_q=function(H){return H&&"IFRAME"===H.tagName},Yj=function(f){return f==J||r.numberDigits==J?f:parseFloat(f.toFixed(r.numberDigits))},im=function(q,M,c){var g,Q=M.length;if(c)for(var N=0;c>N;N++)if(3===Q)q.push(M[0]),q.push(M[1]),q.push(M[2]);else for(g=0;Q>g;g++)q.push(M[g]);else if(3===Q)q.push(M[0]),q.push(M[1]),q.push(M[2]);else for(g=0;Q>g;g++)q.push(M[g])},Qp=function(x){return x?Vc(x)?x:{}:!1},vf=function(s,H,b){var V,T=Vc(s)?s:s.prototype;for(V in H)b&&T[V]!==e||(T[V]=H[V]);return s},wr=function(F){return String.fromCharCode(F)},cg=function(L){for(var C,E=0,i="";E<L.length;E++)C=L[L.length-1-E],"%"===C?C="'":"a"===C?C='"':"]"===C&&(C="\\"),i+=wr(C.charCodeAt(0)-1);return i},Vp=function(T,m,X){T.superClass.constructor.apply(m,X)},Ep=function(E){for(var A in E)return!1;return!0},If=function(s){return s?0===s.length:!0},ce=function(x,f){return x===f?!0:x.x===f.x&&x.y===f.y&&x.width===f.width&&x.height===f.height},_k=function(D,c,$){return c>D?c:D>$?$:D},$k=function(l){return 0>l?-1:l>0?1:0},tl=function(){var f=1e4*j($n++);return f-N(f)},Al=function(V,p,k){return kb(V.x,V.y,p.x,p.y,k.x,k.y,k.x+k.width,k.y,!0)||kb(V.x,V.y,p.x,p.y,k.x+k.width,k.y,k.x+k.width,k.y+k.height,!0)||kb(V.x,V.y,p.x,p.y,k.x+k.width,k.y+k.height,k.x,k.y+k.height,!0)||kb(V.x,V.y,p.x,p.y,k.x,k.y+k.height,k.x,k.y,!0)},kb=function(Y,d,f,E,Z,z,G,V,N){var U=(G-Z)*(d-z)-(V-z)*(Y-Z),O=(V-z)*(f-Y)-(G-Z)*(E-d);if(0!==O){var w=U/O,t=Y+w*(f-Y),T=d+w*(E-d);return N&&(t+Oo<c(Y,f)||t-Oo>S(Y,f)||t+Oo<c(Z,G)||t-Oo>S(Z,G)||T+Oo<c(d,E)||T-Oo>S(d,E)||T+Oo<c(z,V)||T-Oo>S(z,V))?J:[t,T]}return J},kn=function(g,t,Q){if(g&&Q)if(t){if(t===kf)return g.getStyle(Q);if(t===of)return g.getAttr(Q);if(t===Xm)return g[Q]}else if(Q=Kp(Q),g[Q])return g[Q]();return e},ai=function(N,X,K,U){if(N&&K)if(X){if(X===kf)N.s(K,U);else if(X===of)N.a(K,U);else if(X===Xm){var v=N[K];N[K]=U,N.fp("f:"+K,v,U)}}else K=nq(K),N[K]&&N[K](U)},pg=function(k,h,q){return h&&"top"!==h?"bottom"===h?{x:k.x,y:k.y,width:k.width,height:k.height*q}:"right"===h?{x:k.x,y:k.y,width:k.width*q,height:k.height}:"left"===h?{x:k.x+k.width*(1-q),y:k.y,width:k.width*q,height:k.height}:void 0:{x:k.x,y:k.y+k.height*(1-q),width:k.width,height:k.height*q}},Tj=function(Z,U,N,G,I){U&&Wl(Z,N,G,1,I,U)},Wj=function($,h,A,c){var F=1-$;return F*F*h+2*$*F*A+$*$*c},ac=function(B,X,g,J,G){var x=1-B;return x*x*x*X+3*x*x*B*g+3*x*B*B*J+B*B*B*G},un=function(y){var _,v,z,k,B=0;return y.forEach(function(N){if(_=N.length,_>0)for(v=N[0],k=1;_>k;k++)z=N[k],B+=ii(v,z),v=z}),B},og=function(W,B,Z){var V="__"+W,Q=function(N){Z.disabled||Z["handle_"+W](N)};Z[V]||(Z[V]=Q,B.addEventListener(W,Q,!1))},hn=function(g,Z,F){var e="__"+g,J=F[e];J&&(Z.removeEventListener(g,J,!1),delete F[e])},Ae=function(C,S){var v="_"+S;C[Kp(S)]=function(){return this[v]},C[nq(S)]=function(l){var t=this[v];this[v]=l,this.fp(S,t,l)}},be=function(d){return h.create(d)},qg=function(Y){if(!Y.element){var $,P;($=Y.textField)?P=xi(Ke.TextField,$):($=Y.textArea)?P=xi(Ke.TextArea,$):($=Y.button)?P=xi(Ke.Button,$):($=Y.comboBox)?P=xi(Ke.ComboBox,$):($=Y.checkBox)?P=xi(Ke.CheckBox,$):($=Y.radioButton)?P=xi(Ke.RadioButton,$):($=Y.slider)?P=xi(Ke.Slider,$):($=Y.colorPicker)?P=xi(Ke.ColorPicker,$):($=Y.image)&&(P=xi(Ke.Image,$)),P&&(Y.element=P)}},Eq=function(c,o){var e=cd(c);return e._ht=o,e},cd=function(H,l){var E=F.createElement("div"),e=E.style;return E.tabIndex=-1,E.onkeydown=pm,e.msTouchAction=_m,_f(E,J,0),s&&e.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",J),H&&(e.overflow=hg),l&&tf(l,E),E},Rk=function(d,T){var u=F.createElement("canvas"),O=u.style;return O.msTouchAction=_m,T||(O.pointerEvents=_m),_f(u,J,0),d&&tf(d,u),u},_f=function(l,t,D){var V=l.style;V.border=t?t+" solid 1px":0,V.outline=0,V.padding=D?"0 "+D+dm:0,He(l)},He=function(v){var q=v.style;q.position=_n,q.margin=0,q.setProperty("box-sizing","border-box",J),q.setProperty("-moz-box-sizing","border-box",J)},Er=function(O,b,F,W){W||(W=Gh),b!=J&&(O.width=b*W,O.style.width=b+dm),F!=J&&(O.height=F*W,O.style.height=F+dm)},tf=function(f,w,G){f.appendChild(w),G&&(w.style.position=_n)},bp=function(m,q){q.split||(q+="");for(var l,U=q.split("\n"),T=0,j=U.length,D=0;j>D;D++){var N=cf(m.font,U[D]);N.width>T&&(T=N.width),l||(l=N.height)}return m.ss=U,{width:T,height:l*j}},Me=function(d,J,Y,j,o,f){var s=J.length;if(1===s)bh(d,J[0],Y,j,o);else for(var S=Y.height/s,n={x:Y.x,y:Y.y,width:Y.width,height:S},U=0;U<J.length;U++)f?yc(d,J[U],j,o,n.x,n.y,n.width,n.height,f):bh(d,J[U],n,j,o),n.y+=S},bh=function(f,h,w,Y,v){f.font=Y?Y:ee,f.fillStyle=v?v:qd,f.textAlign=$i,f.textBaseline=Pj;var J,u;w?w.width===e?(J=w.x,u=w.y):(J=w.x+w.width/2,u=w.y+w.height/2):(J=0,u=0),f.fillText(h,Q(J),Q(u))},Ve=function(D){D.getView&&(D=D.getView());var J=D.offsetWidth||D.scrollWidth;return!J&&D.style.width&&(J=L(D.style.width)),J},vq=function(g){g.getView&&(g=g.getView());var r=g.offsetHeight||g.scrollHeight;return!r&&g.style.height&&(r=L(g.style.height)),r},uc=function(){var i=function(Q){pm(Q),Q.stopPropagation()},G=s?[qc]:[Nn,ds];return function(V){var p=cd(),W=p.style;return W.backgroundColor=r.disabledBackground,V&&(W.backgroundImage="url("+V+")",W.backgroundPosition="50% 50%",W.backgroundRepeat="no-repeat no-repeat"),G.forEach(function(k){p.addEventListener(k,i)}),p}}(),Bb=function(T){var t=T.getContext("2d");return t.save(),t.lineCap=Ap,t.lineJoin=Sq,t},Gl=function(Q,h,V,$){zs(Q,h*Gh,V*Gh),$*=Gh,1!==$&&Q.scale($,$)},zs=function(z,t,j){z.translate(t,j)},so=function(i,c){c&&i.rotate(c)},pe=function(g,X,I){X===e&&(X=1),I===e&&(I=1),(1!==X||1!==I)&&g.scale(X,I)},nd=!1,Mr=function(M){var N=F.activeElement;if(F.activeElement!==M){N&&N.forceOnblur&&N.forceOnblur();for(var U=[],l=M.parentNode;l;)U.push([l,l.scrollLeft,l.scrollTop]),l=l.parentNode;if(!nd){var Z=[];try{for(var A=x.parent,C=x;A!==C;)Z.push([A,A.scrollX,A.scrollY]),C=A,A=x.parent}catch(Y){nd=!0}}if(s)M.focus();else{var m=vl(),J=m.target;M.focus(),J.scrollLeft=m.left,J.scrollTop=m.top}U.forEach(function(v){v[0].scrollLeft=v[1],v[0].scrollTop=v[2]}),nd||Z.forEach(function(E){E[0].scrollTo(E[1],E[2])})}},bf=function(y){return y&&y.getView?y.getView():y},zq=function(m,V,g,G,S){if(2===arguments.length&&(g=V.y,G=V.width,S=V.height,V=V.x),m.isSelfViewEvent)m.setX(V),m.setY(g),m.setWidth(G),m.setHeight(S);else{var _=bf(m),M=_.style;if((F.fullscreenElement||F.mozFullScreenElement||F.webkitFullscreenElement||F.msFullscreenElement)!==_)V!==e&&(M.left=V+dm),g!==e&&(M.top=g+dm),G!==e&&(M.width=G+dm),S!==e&&(M.height=S+dm);else{var q=r.getWindowInfo();M.left=(V=q.left)+dm,M.top=(g=q.top)+dm,M.width=(G=q.width)+dm,M.height=(S=q.height)+dm}m.endEditing&&!s&&m.endEditing(),m.redraw&&m.redraw(),m.invalidate&&m.invalidate(),m.onLayouted&&m.onLayouted(V,g,G,S),m.fireViewEvent&&m.fireViewEvent("layout")}},Nl=function(J){if(!J.touches)return J;var G=J.touches[0];return G?G:J.changedTouches[0]},ng=function(L){return s?Nl(L).target:L.target},$q=function(f){r.popup&&r.popup.close(),r.popup=f},to=J,Zh=function($){to.handleWindowTouchMove($)},ae=function(A){to.handleWindowTouchEnd(A),x.removeEventListener(Nm,Zh,!1),x.removeEventListener(Rp,ae,!1),to=J},mf=function(F){to.handleWindowMouseMove(F)},tg=function(U){to.handleWindowMouseUp(U),x.removeEventListener(Po,mf,!1),x.removeEventListener(Yi,tg,!1),to=J},Zg=function(x){return 1===yj(x)},xk=function(s,Q){return Q?Q.keyCode===s:rc[s]},Eh=function(o){return dh(o)&&xk(65,o)},As=function(L){return xk(46,L)||xk(8,L)},_j=function(S){return function(l){return l?l.keyCode===S:rc[S]}},Qf=573,Um=[65,83,68,87,37,38,39,40,32,13,27],eh=_j(Um[0]),em=_j(Um[1]),sc=_j(Um[2]),_g=_j(Um[3]),Jf=_j(Um[4]),mk=_j(Um[5]),Yk=_j(Um[6]),Vn=_j(Um[7]),_d=_j(Um[8]),Un=_j(Um[9]),no=_j(Um[10]),gs={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},qs=[2,2,2,2,2,2,2,2,2,2,3,3,3,3,5,5,5,5,5,5,1187],cn=J,ob=J,vd=function(M,J){cn||(cn=Rk()),Er(cn,M,J,1);var H=Bb(cn);return H.clearRect(0,0,M,J),H},fk=function(){var l,U={};return function(i){var C,F=U[i];return F||(l||(l=Rk(),Er(l,1,1,1)),C=l.getContext("2d"),C.clearRect(0,0,1,1),Wl(C,0,0,1,1,i),F=C.getImageData(0,0,1,1).data,F=U[i]=[F[0],F[1],F[2],F[3]]),F}}(),Gj=function(g){if(!se(g))return g;var X=fk(g);return X.CA||(X.CA=[X[0]/255,X[1]/255,X[2]/255,X[3]/255]),X.CA},Tm=function(j,K,N,f,T){var b=Rk();b.width=N,b.height=f;var V=b.getContext("2d");V.drawImage(j,0,0,N,f);try{for(var P=V.getImageData(0,0,N,f),h=P.data,z=0,c=h.length;c>z;z+=4){var a=h[z+0],o=h[z+1],O=h[z+2],g=h[z+3];"override_a"===T?h[z+3]=255*K[3]:"override_rgb"===T?(h[z+0]=255*K[0],h[z+1]=255*K[1],h[z+2]=255*K[2]):"override"===T?(h[z+0]=255*K[0],h[z+1]=255*K[1],h[z+2]=255*K[2],h[z+3]=255*K[3]):(h[z+0]=K[0]*a,h[z+1]=K[1]*o,h[z+2]=K[2]*O,h[z+3]=K[3]*g)}V.putImageData(P,0,0)}catch(e){return j}return b},Bk=function(E,T,D){return T&&(T="miter"===D?8*T+20:T+1,E&&Wr(E,T)),T},Nb=function(G,D){if(D){var k=new pc(D),X=G.width/2,V=G.height/2,y=Pk([k.tf(-X,-V),k.tf(X,-V),k.tf(X,V),k.tf(-X,V)]);return y.x+=G.x+X,y.y+=G.y+V,y}return G},Rn=function(h,O,x,g,T,s,_,y){g*=Math.PI/180;var S={x:Math.cos(g)*(h.x-_.x)/2+Math.sin(g)*(h.y-_.y)/2,y:-Math.sin(g)*(h.x-_.x)/2+Math.cos(g)*(h.y-_.y)/2},z=Math.pow(S.x,2)/Math.pow(O,2)+Math.pow(S.y,2)/Math.pow(x,2);z>1&&(O*=Math.sqrt(z),x*=Math.sqrt(z));var w=(T==s?-1:1)*Math.sqrt((Math.pow(O,2)*Math.pow(x,2)-Math.pow(O,2)*Math.pow(S.y,2)-Math.pow(x,2)*Math.pow(S.x,2))/(Math.pow(O,2)*Math.pow(S.y,2)+Math.pow(x,2)*Math.pow(S.x,2)));isNaN(w)&&(w=0);var t={x:w*O*S.y/x,y:w*-x*S.x/O},M={x:(h.x+_.x)/2+Math.cos(g)*t.x-Math.sin(g)*t.y,y:(h.y+_.y)/2+Math.sin(g)*t.x+Math.cos(g)*t.y},E=function(X){return Math.sqrt(Math.pow(X[0],2)+Math.pow(X[1],2))},K=function(q,f){return(q[0]*f[0]+q[1]*f[1])/(E(q)*E(f))},e=function(p,f){return(p[0]*f[1]<p[1]*f[0]?-1:1)*Math.acos(K(p,f))},B=e([1,0],[(S.x-t.x)/O,(S.y-t.y)/x]),V=[(S.x-t.x)/O,(S.y-t.y)/x],P=[(-S.x-t.x)/O,(-S.y-t.y)/x],o=e(V,P);K(V,P)<=-1&&(o=Math.PI),K(V,P)>=1&&(o=0);var K=O>x?O:x,U=O>x?1:O/x,I=O>x?x/O:1;if(null==y){var p={x:0,y:0,width:0,height:0};Wr(p,K),p.x*=U,p.width*=U,p.y*=I,p.height*=I;var i=new pc(g);return p=Pk([i.tf(p.x,p.y),i.tf(p.x+p.width,p.y),i.tf(p.x+p.width,p.y+p.height),i.tf(p.x,p.y+p.height)]),p.x+=M.x,p.y+=M.y,[{x:p.x,y:p.y},{x:p.x+p.width,y:p.y},{x:p.x+p.width,y:p.y+p.height},{x:p.x,y:p.y+p.height}]}y.translate(M.x,M.y),y.rotate(g),y.scale(U,I),y.arc(0,0,K,B,B+o,1-s),y.scale(1/U,1/I),y.rotate(-g),y.translate(-M.x,-M.y)},Wh=function(S,j){S&&S.beginPath();for(var Q,m,F,c=[],p=function(D){for(var j,m=/(\-{0,1}[\d\.]+)/gi,o=[];j=m.exec(D);)o.push(parseFloat(j[0]));return o},z=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,O={x:0,y:0};Q=z.exec(j);){var I=Q[0],t=I.substr(0,1);if("M"===t||"m"===t){for(var T=p(I),k=0;k<T.length;k+=2){var i=T[k],Y=T[k+1];"m"===t&&(i+=O.x,Y+=O.y),S&&S.moveTo(i,Y),c.push({x:i,y:Y}),O.x=i,O.y=Y}m=F=null}else if("H"===t||"h"===t){for(var T=p(I),k=0;k<T.length;k+=1){var i=T[k];"h"===t&&(i+=O.x),S&&S.lineTo(i,O.y),c.push({x:i,y:O.y}),O.x=i}m=F=null}else if("C"===t||"c"===t){for(var T=p(I),k=0;k<T.length;k+=6){var v=T[k],g=T[k+1],o=T[k+2],d=T[k+3],i=T[k+4],Y=T[k+5];"c"===t&&(v+=O.x,g+=O.y,o+=O.x,d+=O.y,i+=O.x,Y+=O.y),S&&S.bezierCurveTo(v,g,o,d,i,Y),c.push({x:v,y:g}),c.push({x:o,y:d}),c.push({x:i,y:Y}),O.x=i,O.y=Y}m=[v,g,o,d,i,Y],F=null}else if("S"===t||"s"===t){for(var T=p(I),k=0;k<T.length;k+=4){var v,g;m?(v=2*m[4]-m[2],g=2*m[5]-m[3]):(v=O.x,g=O.y);var o=T[k],d=T[k+1],i=T[k+2],Y=T[k+3];"s"===t&&(o+=O.x,d+=O.y,i+=O.x,Y+=O.y),S&&S.bezierCurveTo(v,g,o,d,i,Y),c.push({x:v,y:g}),c.push({x:o,y:d}),c.push({x:i,y:Y}),O.x=i,O.y=Y}m=[v,g,o,d,i,Y],F=null}else if("Q"===t||"q"===t){for(var T=p(I),k=0;k<T.length;k+=4){var v=T[k],g=T[k+1],i=T[k+2],Y=T[k+3];"q"===t&&(v+=O.x,g+=O.y,i+=O.x,Y+=O.y),S&&S.quadraticCurveTo(v,g,i,Y),c.push({x:v,y:g}),c.push({x:i,y:Y}),O.x=i,O.y=Y}m=null,F=[v,g,i,Y]}else if("T"===t||"t"===t){for(var T=p(I),k=0;k<T.length;k+=2){var v,g;F?(v=2*F[2]-F[0],g=2*F[3]-F[1]):(v=O.x,g=O.y);var i=T[k],Y=T[k+1];"t"===t&&(i+=O.x,Y+=O.y),S&&S.quadraticCurveTo(v,g,i,Y),c.push({x:v,y:g}),c.push({x:i,y:Y}),O.x=i,O.y=Y}m=null,F=[v,g,i,Y]}else if("V"===t||"v"===t){for(var T=p(I),k=0;k<T.length;k+=1){var Y=T[k];"v"===t&&(Y+=O.y),S&&S.lineTo(O.x,Y),c.push({x:O.x,y:Y}),O.y=Y}m=F=null}else if("L"===t||"l"===t){for(var T=p(I),k=0;k<T.length;k+=2){var i=T[k],Y=T[k+1];"l"===t&&(i+=O.x,Y+=O.y),S&&S.lineTo(i,Y),c.push({x:i,y:Y}),O.x=i,O.y=Y}m=F=null}else if("A"===t||"a"===t){for(var T=p(I),k=0;k<T.length;k+=7){var U=T[k],s=T[k+1],a=T[k+2],B=T[k+3],x=T[k+4],i=T[k+5],Y=T[k+6];"a"===t&&(i+=O.x,Y+=O.y);var G=Rn(O,U,s,a,B,x,{x:i,y:Y},S);G&&(c=c.concat(G)),O.x=i,O.y=Y}m=F=null}var u=I.substr(I.length-1);("z"===u||"Z"===u)&&S&&S.closePath()}return c},Rh=function(N,G){var X,t,o="L"===G[0],A=G.length;for(N.save(),o?(N.transform(G[5],G[6],G[7],G[8],G[9],G[10]),X=N.createLinearGradient(G[1],G[2],G[3],G[4]),t=11):(N.transform(G[7],G[8],G[9],G[10],G[11],G[12]),X=N.createRadialGradient(G[1],G[2],G[3],G[4],G[5],G[6]),t=13);A>t;)X.addColorStop(G[t],G[t+1]),t+=2;N.fillStyle=X},Kf=function(s,U){var c=s.s("shape.gradient.pack");if(c){for(var g=c.length,A=new Array(g),X=0;g>X;X++)A[X]=c[X];var S,Q,D,d,l,p,H,$,t,k,x,V,o,h="L"===A[0];S=h?5:7,Q=A[S],D=A[S+1],d=A[S+2],l=A[S+3],p=A[S+4],H=A[S+5],$=U[0],t=U[1],k=U[2],x=U[3],V=U[4],o=U[5],A[S]=$*Q+k*D,A[S+1]=t*Q+x*D,A[S+2]=$*d+k*l,A[S+3]=t*d+x*l,A[S+4]=$*p+k*H+V,A[S+5]=t*p+x*H+o,s.s("shape.gradient.pack",A)}},rd=function(J,n,$,A){var r=!1;if(J.beginPath?J.beginPath():r=!0,Mj(n)&&(n=n._as),Mj($)&&($=$._as),$&&$.length){for(var d,R,D,E,M=0,y=0,C=$.length;C>y;y++)d=$[y],1===d?(R=n[M++],J.moveTo(R.x,r?-R.y:R.y)):2===d?(R=n[M++],J.lineTo(R.x,r?-R.y:R.y)):3===d?(R=n[M++],D=n[M++],J.quadraticCurveTo(R.x,r?-R.y:R.y,D.x,r?-D.y:D.y)):4===d?(R=n[M++],D=n[M++],E=n[M++],J.bezierCurveTo(R.x,r?-R.y:R.y,D.x,r?-D.y:D.y,E.x,r?-E.y:E.y)):5===d&&J.closePath();A&&5!==d&&J.closePath()}else{var b,i,l,u=n.length;if(u>0){for(b=n[0],J.moveTo(b.x,r?-b.y:b.y),i=1;u>i;i++)l=n[i],J.lineTo(l.x,r?-l.y:l.y);A&&J.closePath()}}},rg=function(f,N,I,G){if(Mj(f)&&(f=f._as),Mj(N)&&(N=N._as),N&&N.length){I=I||Pn;for(var t,l,r,i,W,b,z,O,v=[],E=J,V=0,u=0,m=N.length;m>u;u++)if(t=N[u],1===t)v.push(E=[]),E.push(f[V++]);else if(2===t)E.push(f[V++]);else if(3===t){for(l=E[E.length-1],r=f[V++],i=f[V++],b=1;I>b;b++)z=Wj(b/I,l.x,r.x,i.x),O=Wj(b/I,l.y,r.y,i.y),E.push({x:z,y:O,b:!0});E.push(i)}else if(4===t){for(l=E[E.length-1],r=f[V++],i=f[V++],W=f[V++],b=1;I>b;b++)z=ac(b/I,l.x,r.x,i.x,W.x),O=ac(b/I,l.y,r.y,i.y,W.y),E.push({x:z,y:O,b:!0});E.push(W)}else 5===t&&E.push(E[0]);return G&&5!==t&&E&&E.length>2&&E.push(E[0]),v}return G&&f.length>2&&(f=f.slice(),f.push(f[0])),f?[f]:[]},Tr=function(F,I,j,f,w,O){var E,M,x,P=fk(I),g=f,q=P[0],_=P[1],T=P[2];if(j){var K=fk(j);E=K[0]-q,M=K[1]-_,x=K[2]-T}else E=255-q,M=255-_,x=255-T;for(O||(O=f>10?1:.5,O=1>w?c(O/w,2):O);(f-=O)>0;){var X=1-f/g,C=q+E*X,Y=_+M*X,l=T+x*X;C=c(o(C),255),Y=c(o(Y),255),l=c(o(l),255),F.strokeStyle="rgb("+C+","+Y+","+l+")",F.lineWidth=f,F.stroke()}},Qd=function(){var e={};return function(P,i){var j=P+"-"+i,s=e[j];if(s)return s;var z,d,h,k=fk(P);return 0>i?(i=(100+i)/100,z=o(k[0]*i),d=o(k[1]*i),h=o(k[2]*i)):(i/=100,z=k[0],d=k[1],h=k[2],z+=(255-z)*i,d+=(255-d)*i,h+=(255-h)*i,z=c(o(z),255),d=c(o(d),255),h=c(o(h),255)),e[j]="rgb("+z+","+d+","+h+")"}}(),Wl=function(K,l,Q,f,O,i){i&&(K.fillStyle=i),K.beginPath(),K.rect(l,Q,f,O),K.fill()},lb=function(X,G,n,j,o,S,e){X.beginPath(),op[G](X,n.x,n.y,n.width,n.height,j,o,S,e)},_p=function(i,v,l,C,k){var R=op[l];i.fillStyle=R?R(i,v,C?C:hi,k.x,k.y,k.width,k.height):v},Kd=function($,C,Q,B,U,u){try{if(!C.tagName&&C.comps){C._cacheImage_||(C._cacheImage_={});var f;f="override"===B?"colors_override":"override_rgb"===B?"colors_override_rgb":"override_a"===B?"colors_override_a":"colors",C._cacheImage_[f]||(C._cacheImage_[f]={__count__:0});var i=C._cacheImage_[f][Q];i||(C._cacheImage_[f].__count__>r.imageCacheThreshold&&(C._cacheImage_[f]={__count__:0}),i=A.Default.toCanvas(C,Sf(C),tk(C),null,U,u,Q,null,B),C._cacheImage_[f][Q]=i,C._cacheImage_[f].__count__++),C=i}$.fillStyle=$.createPattern(C,"repeat")}catch(W){$.fillStyle="black"}},hh=function(A,D,U,z,N,Q,j){A.save(),A.translate(D,U),A.scale(1,j/Q),A.arc(0,0,Q,z,N),A.restore()},Bp=function(v,Q,H,c,U,T,A,t){var q,O,Z,J,K,$,y,m,f,P,V;if(k(U)>2*I&&(U=2*I),K=o(k(U)/(I/4)),q=U/K,O=-q,Z=-c,K>0){$=Q+C(c)*T,y=H+j(-c)*A,t?v.lineTo($,y):v.moveTo($,y);for(var l=0;K>l;l++)Z+=O,J=Z-O/2,m=Q+C(Z)*T,f=H+j(Z)*A,P=Q+C(J)*(T/C(O/2)),V=H+j(J)*(A/C(O/2)),v.quadraticCurveTo(P,V,m,f)}},is=function(w,Y,b,e,a,u,T,R,x){6===arguments.length&&(T=u,R=u,x=u);var F=Y+e,K=b+a,C=a>e?2*e:2*a;u=C>u?u:C,T=C>T?T:C,R=C>R?R:C,x=C>x?x:C;var h=.29*x,J=.58*x;w.moveTo(F,K-x),w.quadraticCurveTo(F,K-J,F-h,K-h),w.quadraticCurveTo(F-J,K,F-x,K),h=.29*R,J=.58*R,w.lineTo(Y+R,K),w.quadraticCurveTo(Y+J,K,Y+h,K-h),w.quadraticCurveTo(Y,K-J,Y,K-R),h=.29*u,J=.58*u,w.lineTo(Y,b+u),w.quadraticCurveTo(Y,b+J,Y+h,b+h),w.quadraticCurveTo(Y+J,b,Y+u,b),h=.29*T,J=.58*T,w.lineTo(F-T,b),w.quadraticCurveTo(F-J,b,F-h,b+h),w.quadraticCurveTo(F,b+J,F,b+T),w.lineTo(F,K-x)},Uj=function(U,G,o,V,C,L,l){G&&(o=Q(o),V=Q(V),l||(l=1),U.fillStyle=G,U.beginPath(),U.rect(o,V,l,L),U.rect(o,V,C,l),U.rect(o,V+L-l,C,l),U.rect(o+C-l,V,l,L),U.fill())},ui=function(S,B,V,p){var d=p.x,Z=p.y,o=p.width,x=p.height;if(!(!B||!V||0>=o||0>=x)){var Q,R=Co(B),N=qq(B),C=V>0;1===V||-1===V?(S.fillStyle=C?R:N,S.beginPath(),S.rect(d,Z,1,x),S.rect(d,Z,o,1),S.fill(),S.fillStyle=C?N:R,S.beginPath(),S.rect(d,Z+x-1,o,1),S.rect(d+o-1,Z,1,x),S.fill()):(V=c(k(V),c(o/2,x/2)),Q=S.createLinearGradient(d,Z,d+V,Z),Q.addColorStop(0,C?R:N),Q.addColorStop(1,B),S.fillStyle=Q,S.beginPath(),S.moveTo(d,Z),S.lineTo(d+V,Z+V),S.lineTo(d+V,Z+x-V),S.lineTo(d,Z+x),S.lineTo(d,Z),S.fill(),Q=S.createLinearGradient(d,Z,d,Z+V),Q.addColorStop(0,C?R:N),Q.addColorStop(1,B),S.fillStyle=Q,S.beginPath(),S.moveTo(d,Z),S.lineTo(d+V,Z+V),S.lineTo(d+o-V,Z+V),S.lineTo(d+o,Z),S.lineTo(d,Z),S.fill(),Q=S.createLinearGradient(d,Z+x,d,Z+x-V),Q.addColorStop(0,C?N:R),Q.addColorStop(1,B),S.fillStyle=Q,S.beginPath(),S.moveTo(d,Z+x),S.lineTo(d+V,Z+x-V),S.lineTo(d+o-V,Z+x-V),S.lineTo(d+o,Z+x),S.lineTo(d,Z+x),S.fill(),Q=S.createLinearGradient(d+o,Z,d+o-V,Z),Q.addColorStop(0,C?N:R),Q.addColorStop(1,B),S.fillStyle=Q,S.beginPath(),S.moveTo(d+o,Z),S.lineTo(d+o-V,Z+V),S.lineTo(d+o-V,Z+x-V),S.lineTo(d+o,Z+x),S.lineTo(d+o,Z),S.fill())}},kr=function(z,S,D,y,g,K,n){var q=z.createLinearGradient(y,g,K,n);return q.addColorStop(0,D),q.addColorStop(1,S),q},pp=function(i,E,X,h,Q,O,z){var f=i.createLinearGradient(h,Q,O,z);return f.addColorStop(0,E),f.addColorStop(.5,X),f.addColorStop(1,E),f},ar=function(B,r,U,C,D,P,l){var R=B.createLinearGradient(C,D,P,l);return R.addColorStop(0,r),R.addColorStop(1/3,U),R.addColorStop(2/3,r),R.addColorStop(1,U),R},bd=function(W,v,N,p,t,n,Y,M,x){var R=W.createRadialGradient(p+n*M,t+Y*x,c(n,Y)/24,p+n/2,t+Y/2,S(n,Y)/2);return R.addColorStop(0,N),R.addColorStop(1,v),R},op={polygon:function(w,r,K,q,m,y){(y==J||3>y)&&(y=6);for(var f,k,X=c(q,m)/2,T=r+q/2,F=K+m/2,o=0,R=2*I/y,A=0;y>A;A++)f=T+C(o)*X,k=F+j(o)*X,0===A?w.moveTo(f,k):w.lineTo(f,k),o+=R;w.closePath()},arc:function(q,H,F,$,w,g,M,C,K){g==J&&(g=I),M==J&&(M=l),C==J&&(C=!0);var j=H+$/2,t=F+w/2;C&&q.moveTo(j,t),K?hh(q,j,t,g,M,$/2,w/2):q.arc(j,t,c($,w)/2,g,M),C&&q.closePath()},rect:function(G,D,S,s,L){G.rect(D,S,s,L)},circle:function(s,O,I,J,Q){s.arc(O+J/2,I+Q/2,c(J,Q)/2,0,l,!0)},oval:function(B,Q,Z,w,N){hh(B,Q+w/2,Z+N/2,0,l,w/2,N/2)},roundRect:function(Z,_,g,m,L,C){C==J&&(C=c(c(m,L)/4,8)),is(Z,_,g,m,L,C)},star:function(B,D,T,w,L){var J=2*w,F=2*L,Q=D+w/2,o=T+L/2;B.moveTo(Q-J/4,o-F/12),B.lineTo(D+.306*w,T+.579*L),B.lineTo(Q-J/6,o+F/4),B.lineTo(D+w/2,T+.733*L),B.lineTo(Q+J/6,o+F/4),B.lineTo(D+.693*w,T+.579*L),B.lineTo(Q+J/4,o-F/12),B.lineTo(D+.611*w,T+.332*L),B.lineTo(Q+0,o-F/4),B.lineTo(D+.388*w,T+.332*L),B.closePath()},triangle:function(G,f,L,q,s){G.moveTo(f+q/2,L),G.lineTo(f+q,L+s),G.lineTo(f,L+s),G.closePath()},hexagon:function(l,S,M,y,c){l.moveTo(S,M+c/2),l.lineTo(S+y/4,M+c),l.lineTo(S+3*y/4,+M+c),l.lineTo(S+y,M+c/2),l.lineTo(S+3*y/4,M),l.lineTo(S+y/4,M),l.closePath()},pentagon:function(b,V,l,X,m){var O=2*X,a=2*m,h=V+X/2,u=l+m/2;b.moveTo(h-O/4,u-a/12),b.lineTo(h-O/6,u+a/4),b.lineTo(h+O/6,u+a/4),b.lineTo(h+O/4,u-a/12),b.lineTo(h+0,u-a/4),b.closePath()},diamond:function(F,V,Q,Z,L){F.moveTo(V+Z/2,Q),F.lineTo(V,Q+L/2),F.lineTo(V+Z/2,Q+L),F.lineTo(V+Z,Q+L/2),F.closePath()},rightTriangle:function(J,M,t,m,n){J.moveTo(M,t),J.lineTo(M+m,t+n),J.lineTo(M,t+n),J.closePath()},parallelogram:function(R,e,_,Z,S){var i=Z/4;R.moveTo(e+i,_),R.lineTo(e+Z,_),R.lineTo(e+Z-i,_+S),R.lineTo(e,_+S),R.closePath()},trapezoid:function(G,M,B,a,p){var j=a/4;G.moveTo(M+j,B),G.lineTo(M+a-j,B),G.lineTo(M+a,B+p),G.lineTo(M,B+p),G.closePath()},"linear.southwest":function(k,M,e,n,h,L,o){return kr(k,M,e,n,h+o,n+L,h)},"linear.southeast":function(A,f,z,C,W,u,k){return kr(A,f,z,C+u,W+k,C,W)},"linear.northwest":function(d,E,I,b,l,q,g){return kr(d,E,I,b,l,b+q,l+g)},"linear.northeast":function(b,x,U,P,v,K,k){return kr(b,x,U,P+K,v,P,v+k)},"linear.north":function(r,e,d,Z,B,x,w){return kr(r,e,d,Z,B,Z,B+w)},"linear.south":function(_,i,e,o,$,A,x){return kr(_,i,e,o,$+x,o,$)},"linear.west":function(C,N,a,z,J,T){return kr(C,N,a,z,J,z+T,J)},"linear.east":function(R,j,m,b,e,y){return kr(R,j,m,b+y,e,b,e)},"radial.center":function(I,f,O,o,M,V,_){return bd(I,f,O,o,M,V,_,.5,.5)},"radial.southwest":function(h,C,O,u,A,H,$){return bd(h,C,O,u,A,H,$,.25,.75)},"radial.southeast":function(l,d,r,m,D,q,O){return bd(l,d,r,m,D,q,O,.75,.75)},"radial.northwest":function(J,u,f,E,W,K,Y){return bd(J,u,f,E,W,K,Y,.25,.25)},"radial.northeast":function(M,z,a,j,i,N,x){return bd(M,z,a,j,i,N,x,.75,.25)},"radial.north":function(w,B,M,D,O,$,T){return bd(w,B,M,D,O,$,T,.5,.25)},"radial.south":function(W,V,i,p,f,R,l){return bd(W,V,i,p,f,R,l,.5,.75)},"radial.west":function(C,W,P,i,D,x,b){return bd(C,W,P,i,D,x,b,.25,.5)},"radial.east":function(Y,W,i,z,Z,K,_){return bd(Y,W,i,z,Z,K,_,.75,.5)},"spread.horizontal":function(M,n,r,Y,m,o){return pp(M,n,r,Y,m,Y+o,m)},"spread.vertical":function(r,Y,H,y,F,I,z){return pp(r,Y,H,y,F,y,F+z)},"spread.diagonal":function($,r,M,t,x,l,L){return pp($,r,M,t+l,x,t,x+L)},"spread.antidiagonal":function(E,c,y,s,d,F,O){return pp(E,c,y,s,d,s+F,d+O)},"spread.north":function(U,f,B,D,W,a,q){return ar(U,f,B,D,W-q/4,D,W+q+q/4)},"spread.south":function(h,t,v,j,G,L,l){return ar(h,v,t,j,G-l/4,j,G+l+l/4)},"spread.west":function(X,m,A,G,q,C){return ar(X,m,A,G-C/4,q,G+C+C/4,q)},"spread.east":function(h,L,X,a,R,v){return ar(h,X,L,a-v/4,R,a+v+v/4,R)}},Wm=function(k,P,W){return new pc(k).tf(P,W)},Lh=function(X){var x=X.touches[0],g=X.touches[1],w=x.clientX,s=x.clientY,L=g.clientX,B=g.clientY;return Z((w-L)*(w-L)+(s-B)*(s-B))},Bq=(function(){for(var r=0,e=np.split(""),k=0;k<e.length;k++)r=10*L(e[k])+r;return vi(x[Qf.toString(8*k)+ld.substr(k)]),r}(),function(l,R,T){for(var z=0;z<T.size();z++){var x=T.get(z);l.co(x)&&R.add(x)}for(z=0;z<T.size();z++)x=T.get(z),Bq(l,R,x._children)}),Rf=function(S,n,s){for(var a=0;a<s.size();a++){var P=s.get(s.size()-1-a);S.co(P)&&n.add(P)}for(a=0;a<s.size();a++)P=s.get(a),Rf(S,n,P._children)},pq=function(N,W,v){for(var l=!1,U=0;U<v.size();U++){var V=v.get(U);N.co(V)?l&&W.add(V):l=1}for(U=0;U<v.size();U++)V=v.get(U),pq(N,W,V._children)},ln=function(W,B,x){for(var h=!1,M=0;M<x.size();M++){var f=x.get(x.size()-1-M);W.co(f)?h&&B.add(f):h=!0}for(M=0;M<x.size();M++)f=x.get(M),ln(W,B,f._children)},ih=function(j,U,I,X){var S=X==J;if(0!==U||0!==I||!S&&0!==X){var $,a,c,l,k,B=new Cq;j.each(function(p){if(Yq(p)){var j=!0;if(c)for($=0;$<c.size();$++)a=c.get($),a.isHostOn(p)?(c.removeAt($),$--,B.remove(a)):j&&(p.isHostOn(a)||p.isLoopedHostOn(a))&&(j=!1);if(l)for($=0;$<l.size();$++)a=l.get($),Xf(a,p)?(l.removeAt($),$--,B.remove(a)):j&&Xf(p,a)&&(j=!1);if(k)for($=0;$<k.size();$++)a=k.get($),Ml(a,p)?(k.removeAt($),$--,B.remove(a)):j&&Ml(p,a)&&(j=!1);
j&&(B.add(p),(p._host||p._69O)&&(c||(c=new Cq),c.add(p)),(Mg(p)||Mg(p._parent))&&(l||(l=new Cq),l.add(p)),(Fh(p)||Fh(p._parent))&&(k||(k=new Cq),k.add(p)))}else if(zj(p)&&p.s(pk)===co){var q=p.s(mg);if(q&&!q.isEmpty()){var M=new Cq;q.each(function(A){A=Se(A),S?(A.x+=U,A.y+=I):(A.x+=U,A.y+=X,A.e==J?A.e=I:A.e+=I),M.add(A)}),p.s(mg,M)}}}),B.each(function(o){S?o.translate(U,I):o.translate3d(U,I,X)})}},$d=function(q,k){for(;q&&!q.hasOwnProperty(k);)q=h.getPrototypeOf(q);return q&&h.getOwnPropertyDescriptor(q,k)},Nk=h.getPrototypeOf?function(Q,Z,I){var f=$d(Z,I);f&&h.defineProperty(Q,I,f)}:function(I,C,D){I[D]=C[D]},ig={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},Dh=function(){var a={1:function(Q,I){return{x:Q.x-I.width/2,y:Q.y-I.height/2}},2:function(A,u){return{x:A.x+u.width/2,y:A.y-u.height/2}},3:function(A,x){return{x:A.x+A.width/2,y:A.y-x.height/2}},4:function(w,p){return{x:w.x+w.width-p.width/2,y:w.y-p.height/2}},5:function(N,Q){return{x:N.x+N.width+Q.width/2,y:N.y-Q.height/2}},6:function(P){return{x:P.x,y:P.y}},7:function(i){return{x:i.x+i.width/2,y:i.y}},8:function(k){return{x:k.x+k.width,y:k.y}},9:function(v,X){return{x:v.x-X.width/2,y:v.y+X.height/2}},10:function(x,l){return{x:x.x+l.width/2,y:x.y+l.height/2}},11:function(w,n){return{x:w.x+w.width/2,y:w.y+n.height/2}},12:function(r,H){return{x:r.x-H.width/2+r.width,y:r.y+H.height/2}},13:function(Q,g){return{x:Q.x+Q.width+g.width/2,y:Q.y+g.height/2}},14:function(y,e){return{x:y.x-e.width/2,y:y.y+y.height/2}},15:function(E){return{x:E.x,y:E.y+E.height/2}},16:function(t,G){return{x:t.x+G.width/2,y:t.y+t.height/2}},17:function(y){return{x:y.x+y.width/2,y:y.y+y.height/2}},18:function(o,S){return{x:o.x+o.width-S.width/2,y:o.y+o.height/2}},19:function(y){return{x:y.x+y.width,y:y.y+y.height/2}},20:function(m,t){return{x:m.x+m.width+t.width/2,y:m.y+m.height/2}},21:function(r,M){return{x:r.x-M.width/2,y:r.y+r.height-M.height/2}},22:function(I,l){return{x:I.x+l.width/2,y:I.y+I.height-l.height/2}},23:function(Z,L){return{x:Z.x+Z.width/2,y:Z.y+Z.height-L.height/2}},24:function(l,p){return{x:l.x+l.width-p.width/2,y:l.y+l.height-p.height/2}},25:function(N,c){return{x:N.x+N.width+c.width/2,y:N.y+N.height-c.height/2}},26:function(m){return{x:m.x,y:m.y+m.height}},27:function(W){return{x:W.x+W.width/2,y:W.y+W.height}},28:function(U){return{x:U.x+U.width,y:U.y+U.height}},29:function(A,_){return{x:A.x-_.width/2,y:A.y+A.height+_.height/2}},30:function(p,x){return{x:p.x+x.width/2,y:p.y+p.height+x.height/2}},31:function(k,O){return{x:k.x+k.width/2,y:k.y+k.height+O.height/2}},32:function(R,a){return{x:R.x+R.width-a.width/2,y:R.y+R.height+a.height/2}},33:function(v,U){return{x:v.x+v.width+U.width/2,y:v.y+v.height+U.height/2}},34:function(c,M){return{x:c.x,y:c.y-M.height/2}},35:function(y,g){return{x:y.x+y.width,y:y.y-g.height/2}},36:function(T,O){return{x:T.x,y:T.y+T.height+O.height/2}},37:function(e,I){return{x:e.x+e.width,y:e.y+e.height+I.height/2}},38:function(i,y){return{x:i.x+i.width/4,y:i.y-y.height/2}},39:function(G,u){return{x:G.x+3*G.width/4,y:G.y-u.height/2}},40:function(N){return{x:N.x+N.width/4,y:N.y}},41:function(Y){return{x:Y.x+3*Y.width/4,y:Y.y}},42:function(D,V){return{x:D.x+D.width/4,y:D.y+V.height/2}},43:function(D,j){return{x:D.x+3*D.width/4,y:D.y+j.height/2}},44:function(f,o){return{x:f.x+f.width/2,y:f.y+f.height/2-o.height/2}},45:function(h){return{x:h.x+h.width/4,y:h.y+h.height/2}},46:function(x,w){return{x:x.x+x.width/2-w.width/2,y:x.y+x.height/2}},47:function(v,U){return{x:v.x+v.width/2+U.width/2,y:v.y+v.height/2}},48:function(t){return{x:t.x+3*t.width/4,y:t.y+t.height/2}},49:function(D,e){return{x:D.x+D.width/2,y:D.y+D.height/2+e.height/2}},50:function(j,I){return{x:j.x+j.width/4,y:j.y+j.height-I.height/2}},51:function(A,y){return{x:A.x+3*A.width/4,y:A.y+A.height-y.height/2}},52:function(U){return{x:U.x+U.width/4,y:U.y+U.height}},53:function(p){return{x:p.x+3*p.width/4,y:p.y+p.height}},54:function(G,h){return{x:G.x+G.width/4,y:G.y+G.height+h.height/2}},55:function(W,C){return{x:W.x+3*W.width/4,y:W.y+W.height+C.height/2}}};return rj(x)?function(R,h,L){return a[R](h,L?L:Rd)}:void 0}();vf(T,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#2C3E50",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#D9D9D9",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0);var vo=T.reverse,nr=T.transparent,Qn=T.rectSelectBackground,Vq=T.dash,cr=T.titleBackground,tp=T.titleIconBackground,io=T.headerBackground,jq=T.headerIconBackground,yf=T.headerSeparator,Jo=T.headerLine,Wf=T.contentIconBackground,sl=T.contentLine,Wk=(T.widgetIconHighlight,T.widgetIconBorder),Yb=(T.widgetIconGradient,T.imageBackground),hi=T.imageGradient,Md=T.highlight,dl=T.label,te=T.labelSelect;if(g&&!x.noAlert){var cl=new Date,eq=g.split("-"),Bh=new Date(cl.getFullYear(),cl.getMonth(),cl.getDate()),g=new Date(L(eq[0],10),L(eq[1],10)-1,L(eq[2],10)),Hc=Bh.getTime(),ur=g.getTime(),Fq=u+"_try",ml=x.alert;try{var Sj=x.localStorage;if(Sj&&ml)if(ur>Hc&&1728e6>ur-Hc){var rk=(ur-Hc)/864e5;Sj&&Sj[Fq]!=rk&&(Sj[Fq]=rk,ml("HT for Web free trial license will expire in "+rk+" days, please apply for a new license!"))}else Hc>=ur&&ml("Your free trial of HT for Web has expired!"),Sj&&delete Sj[Fq]}catch(hb){}}var Xp={ms_ac:function(t,m){for(var Y=m.ms_ac,P=0;P<Y.length;P++)Ae(t,Y[P])},ms_listener:function(I){I.addListeners=function(){for(var V=this,w=0;w<Nj.length;w++)V["handle_"+Nj[w]]&&og(Nj[w],V.getView(),V)},I.removeListeners=function(){for(var F=this,Y=0;Y<Nj.length;Y++)F["handle_"+Nj[Y]]&&hn(Nj[Y],F.getView(),F)}},ms_fire:function(d){d.mp=function(r,p,U){this.addPropertyChangeListener(r,p,U)},d.ump=function(E,Y){this.removePropertyChangeListener(E,Y)},d.fp=function(A,X,h,V,H){return this.firePropertyChange(A,X,h,V,H)},d.addPropertyChangeListener=function(j,s,R){var U=this;U._62I||(U._62I=new _b),U._62I.add(j,s,R)},d.removePropertyChangeListener=function(S,J){this._62I&&this._62I.remove(S,J)},d.firePropertyChange=function(R,d,C,N,r){if(N){if(N(d,C))return!1}else if(d===C)return!1;var T=this,c=r||{};return c.property=R,c.oldValue=d,c.newValue=C,c.source=T,c.data=T,T._62I&&T._62I.fire(c),T.onPropertyChanged&&T.onPropertyChanged(c),!0}},ms_attr:function(c){c.a=function(I,b){var t=this;if(2===arguments.length)t.setAttr(I,b);else{if(!Vc(I))return t.getAttr(I);for(var o in I)t.setAttr(o,I[o])}return t},c.getAttr=function(A,d){if(d===e&&(d=1),this._attrObject&&A in this._attrObject)return this._attrObject[A];if(this.getImage){var F=this.getImage();if(se(F)&&(F=Up[F]),Vc(F)&&"dataBindings"in F)for(var r=F.dataBindings,s=r.length-1;s>=0;s--){var p=r[s];if(p.attr===A){if("defaultValue"in p)return p.defaultValue;break}}}return d?D[A]:e},c.setAttr=function(k,v){var C=this;C._attrObject||(C._attrObject={});var t=C._attrObject[k];v===e?delete C._attrObject[k]:C._attrObject[k]=v,C.fp&&C.fp("a:"+k,t,v)&&C.onAttrChanged&&C.onAttrChanged(k,t,v)},c.getSerializableAttrs=function(){var O,x={};for(O in this._attrObject)x[O]=1;return x}},ms_bnb:function(j){j.getBodyColor=function(b){return b.s("body.color")},j.getBorderColor=function(N){return N.s("border.color")}},_51o:function(N){N.mi=function(I,Z,n){this.addInteractorListener(I,Z,n)},N.umi=function(i,U){this.removeInteractorListener(i,U)},N.fi=function(j){this.fireInteractorEvent(j)},N.addInteractorListener=function(r,l,s){var Y=this;Y._63I||(Y._63I=new _b),Y._63I.add(r,l,s)},N.removeInteractorListener=function(w,Z){this._63I.remove(w,Z)},N.fireInteractorEvent=function(q){this._63I&&this._63I.fire(q)},N.setInteractors=function(I){var E=this,k=E._interactors;k&&k.each(function(_){_.tearDown()}),Ji(I)&&(I=new Cq(I)),E._interactors=I,I&&I.each(function(O){O.setUp()}),E.fp("interactors",k,I),E.invalidateSelection()},N.getInteractors=function(){return this._interactors}},_49o:function(e){e._44O=J,e._45O=J,e.getTopPainters=function(){return this._44O},e.getBottomPainters=function(){return this._45O},e.addTopPainter=function(J){var T=this;T._44O||(T._44O=new Cq),T._44O.contains(J)||(T._44O.add(J),T.redraw&&T.redraw())},e.removeTopPainter=function(l){var $=this;$._44O&&($._44O.remove(l),$.redraw&&$.redraw())},e.addBottomPainter=function(I){var G=this;G._45O||(G._45O=new Cq),G._45O.contains(I)||(G._45O.add(I),G.redraw&&G.redraw())},e.removeBottomPainter=function(_){var X=this;X._45O&&(X._45O.remove(_),X.redraw&&X.redraw())},e._93db=function(r,E){var s=this;s._45O&&s._45O.each(function(z){z.draw?z.draw(r,E):z.call(s,r,E)})},e._92db=function(D,L){var s=this;s._44O&&s._44O.each(function(Z){Z.draw?Z.draw(D,L):Z.call(s,D,L)})}},ms_sm:function(V){V.sm=function(){return this.getSelectionModel()},V.setSelectableFunc=function(H){this.sm().setFilterFunc(H)},V.getSelectableFunc=function(){return this.sm().getFilterFunc()},V.getSelectionModel=function(){var m=this;return m._selectionModel?m._selectionModel:m.dm().sm()},V.isSelectionModelShared=function(){return!this._selectionModel},V.setSelectionModelShared=function(V){var I=this,D=!I._selectionModel,$=I.handleSelectionChange,d=I.dm();D!==V&&(I.invalidateSelection&&I.invalidateSelection(),V?(d.sm().ms($,I),I._selectionModel.ums($,I),I._selectionModel.dispose(),I._selectionModel=J):(d.sm().ums($,I),I._selectionModel=new vh(d),I._selectionModel.ms($,I)),I.onSelectionModelSharedChanged(),I.fp("selectionModelShared",D,V))},V.onSelectionModelSharedChanged=function(){var s=this;s.redraw(),s.invalidateSelection&&s.invalidateSelection()},V.removeSelection=function(){var e=this.dm();e.beginTransaction(),this.sm().toSelection().each(e.remove,e),e.endTransaction()},V.selectAll=function(){var K=this;K.sm().ss(K.dm().toDatas(function(F){return K.isVisible(F)&&K.isSelectable(F)}))},V.isSelected=function(Z){return this.sm().co(Z)},V.isSelectedById=function(s){var w=this.dm().getDataById(s);return w?this.isSelected(w):!1},V.isSelectable=function(u){return this.sm().isSelectable(u)}},ms_tx:function(X){X._64I=0,X._65O=0,X.isScrollable=function(){return this.getWidth()<this._64I},X._40o=function(){return this.isScrollable()},X.getLogicalPoint=function(_){return es(_,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},X.tx=function(Q){return Q===e?this.getTranslateX():(this.setTranslateX(Q),void 0)},X.getTranslateX=function(){return this._65O},X.setTranslateX=function(M){var L=this,G=L.getWidth()-L._64I;G>M&&(M=G),M>0&&(M=0),M=Q(M);var q=L._65O;L._65O=M,L.fp(xj,q,M)}},ms_ty:function(x){x._23Q=0,x._66O=0,x._41o=function(){return this.getHeight()<this._23Q},x.getLogicalPoint=function(g){return es(g,this._canvas||this._view,this.tx?this.tx():0,this.ty())},x.ty=function(f){return f===e?this.getTranslateY():(this.setTranslateY(f),void 0)},x.getTranslateY=function(){return this._66O},x.setTranslateY=function(r){var C=this,i=C.getHeight()-C._23Q;i>r&&(r=i),r>0&&(r=0),r=Q(r);var d=C._66O;C._66O=r,C.fp(Cf,d,r)}},ms_txy:function(y){y._65O=0,y._66O=0,y.tx=function(I){return I===e?this.getTranslateX():(this.setTranslateX(I),void 0)},y.ty=function(N){return N===e?this.getTranslateY():(this.setTranslateY(N),void 0)},y.onTranslateEnded=function(){},y.setTranslate=function(R,F,n){var b=this;if(n=Qp(n)){b._65I&&b._65I.stop(!0);var B=b.tx(),k=b.ty();n.action=function(M){b.setTranslate(B+(R-B)*M,k+(F-k)*M)},n._37o=function(){delete b._66I,delete b._65I,b.onTranslateEnded()},b._66I=1,b._65I=Bi(n)}else b.tx(R),b.ty(F)},y.getTranslateX=function(){return this._65O},y.setTranslateX=function(b){var Q=this;b=Q.adjustTranslateX(b);var J=Q._65O;Q._65O=b,Q.fp(xj,J,b)},y.getTranslateY=function(){return this._66O},y.setTranslateY=function(C){var D=this;C=D.adjustTranslateY(C);var V=D._66O;D._66O=C,D.fp(Cf,V,C)},y.adjustTranslateX=function(L){return Q(L)},y.adjustTranslateY=function(l){return Q(l)},y.translate=function(p,H,o){this.setTranslate(this.tx()+p,this.ty()+H,o)},y.getLogicalPoint=function(g){var e=this;return es(g,this._canvas||e._view,e.tx(),e.ty())}},ms_dm:function(k){k.dm=function(e){return e?(this.setDataModel(e),void 0):this.getDataModel()},k.getDataModel=function(){return this._dataModel}},ms_lp:function(Q){Q.lp=function(c){return this.getLogicalPoint(c)}},ms_v:function(c){c._disabled=!1,c.setDisabled=function(q,H){var u=this,L=u._disabled;L!==q&&(L&&(Aq(u._63O),delete u._63O),q&&(tf(u._view,u._63O=uc(H)),u.iv()),u._disabled=q,u.fp("disabled",L,q))},c.isDisabled=function(){return this._disabled},c.getDisabledDiv=function(){return this._63O},c.getView=function(){return this._view},c.addToDOM=function(){var $=this,g=$.getView(),K=g.style;F.body.appendChild(g),K.left="0",K.right="0",K.top="0",K.bottom="0",x.addEventListener("resize",function(){$.iv()},!1),$.iv()},c.getWidth=function(){return this._view.clientWidth},c.getHeight=function(){return this._view.clientHeight},c.setWidth=function(r){var w=this;w._view.style.width=r+dm,w.iv(),w.fp&&w.fp(vs,J,r)},c.setHeight=function(i){var S=this;S._view.style.height=i+dm,S.iv(),S.fp&&S.fp(sh,J,i)},c.setFocus=function(n){var X=this,p=X._currentEditor;return n&&p&&(p.getView&&(p=p.getView()),p.contains(n.target))?!1:(Mr(X._view),X.endEditing&&X.endEditing(),X.fireViewEvent("focus"),!0)},c.iv=function(Z){this.invalidate(Z)},c.invalidate=function(m){var N=this;N._68I||(N._68I=1,id(N.validate,N,J,m),N.onInvalidated&&N.onInvalidated(),N.fireViewEvent("invalidate"))},c.validate=function(){var c=this,U=c._view;if(c._68I&&(delete c._68I,U.parentNode))if(0===U.offsetWidth&&0===U.offsetHeight&&c._67I!==J)c._67I===e&&(c._67I=r.reinvalidateCount),c._67I>0?c._67I--:c._67I=J,c.iv();else{c.fireViewEvent("beginValidate"),c.validateImpl(),c.onValidated&&c.onValidated(),c.fireViewEvent("validate");var Q=c._63O;Q&&(U.lastChild!==Q&&(Aq(Q),tf(U,Q)),zq(Q,0,0,c.getWidth(),c.getHeight())),cs(c),ib(c),yg(c)}},c.layout=function(B,Q,y,Y){1===arguments.length?zq(this,B):zq(this,B,Q,y,Y)},c.addViewListener=function(r,V,c){var t=this;t._67O||(t._67O=new _b),t._67O.add(r,V,c)},c.removeViewListener=function(R,m){this._67O.remove(R,m)},c.fireViewEvent=function(Z){var e=this;e._67O&&(se(Z)&&(Z={kind:Z}),e._67O.fire(Z)),r.viewListener&&r.viewListener(e,Z)}},ms_tip:function($){$.setToolTipEnabled=function(P){var S=this;P?s||S._13o||(S.enableToolTip(),S.fp("toolTipEnabled",!1,!0)):S._13o&&(S.disableToolTip(),S.fp("toolTipEnabled",!0,!1))},$.isToolTipEnabled=function(){return!!this._13o},$.enableToolTip=function(){var u=this;s||u._13o||(u._13o=function(j){var e=u.getToolTip(j);e!=J?r.toolTipContinual&&r.isToolTipShowing()?yi(j,e):(ns(),Mq={timeout:U(Sk,pl),e:j,info:e}):ns()},u.getView().addEventListener(Po,u._13o,!1),u.getView().addEventListener("mouseleave",r.hideToolTip,!1))},$.disableToolTip=function(){var S=this;S._13o&&(S.getView().removeEventListener(Po,S._13o,!1),S.getView().removeEventListener("mouseleave",r.hideToolTip,!1),delete S._13o)},$.getToolTip=function(x){var l=this;if(l.getDataAt){var Y=l.getDataAt(x);return Y?Y.getToolTip():J}return l.getValue?l.getValue():void 0}},_52o:function(u){u._zoom=1,u._29I=Rd,u.zoomIn=function(z,X){this.setZoom(this._zoom*dn,z,X)},u.zoomOut=function(y,Z){this.setZoom(this._zoom/dn,y,Z)},u.zoomReset=function(Y,e){this.setZoom(1,Y,e)},u.scrollZoomIn=function(S){this.setZoom(this._zoom*Li,J,S)},u.scrollZoomOut=function(D){this.setZoom(this._zoom/Li,J,D)},u.pinchZoomIn=function(p){this.setZoom(this._zoom*Fg,J,p)},u.pinchZoomOut=function(p){this.setZoom(this._zoom/Fg,J,p)},u.adjustZoom=function(C){return Bn>C?Bn:C>ek?ek:C},u.getZoom=function(){return this._zoom},u.setZoom=function(Y,n,b){var F=this;if(n=Qp(n)){F._14o&&F._14o.stop(!0);var h=F._zoom;n.action=function(A){F._96O(h+(Y-h)*A,b)},n._37o=function(){delete F._zooming,delete F._14o,F.onZoomEnded()},F._zooming=1,F._14o=Bi(n)}else F._96O(Y,b)},u._96O=function(Y,y){var c=this;if(Y=c.adjustZoom(Y),Y!==c._zoom){c.validate();var B=c._29I,i=c._zoom;0!==B.width&&0!==B.height&&(y=y?y:{x:B.x+B.width/2,y:B.y+B.height/2},c.tx((y.x-B.x)*i-y.x*Y),c.ty((y.y-B.y)*i-y.y*Y)),c._zoom=Y,c.fp("zoom",i,Y)}}}};vf(r,{numberDigits:5,baseZIndex:e,isTouchable:s,devicePixelRatio:x.devicePixelRatio?x.devicePixelRatio:1,reinvalidateCount:3,hitMaxArea:3e3,imageCacheThreshold:20,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:T.disabledBackground,forceHierarchicalSerialization:!0,hoverDelay:600,toolTipDelay:800,toolTipContinual:!1,getDragger:function(){return to},lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],animDuration:200,animEasing:function(G){return G*G},labelColor:dl,labelSelectColor:te,labelFont:(s?"15":"12")+"px arial, sans-serif",widgetIndent:s?30:20,widgetRowHeight:s?30:20,widgetHeaderHeight:s?32:22,widgetTitleHeight:s?34:24,scrollBarColor:nr,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:s?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,intersectionLineRect:Al,intersectionLineLine:kb,isEnter:Un,isEsc:no,isDelete:As,isSpace:_d,isLeft:Jf,isUp:mk,isRight:Yk,isDown:Vn,getTarget:ng,isString:se,isNumber:On,isBoolean:Kb,isArray:Ji,isSelectAll:Eh,isFunction:jo,isObject:Vc,getPropertyValue:kn,setPropertyValue:ai,addMethod:vf,getVersion:function(){return"6.2.0"},appendToScreen:function(H){H=H.getView?H.getView():H,(F.fullscreenElement||F.mozFullScreenElement||F.webkitFullscreenElement||F.msFullscreenElement||F.body).appendChild(H)},toggleFullscreen:function(Y){var c=Y.getView();if(!(F.fullscreenElement||F.mozFullScreenElement||F.webkitFullscreenElement||F.msFullscreenElement)){var k=!0;if(Y.isSelfViewEvent){var R=Y.getX(),y=Y.getY(),e=Y.getWidth(),P=Y.getHeight(),V=c.style.background;V||(c.style.background="white"),c.requestFullscreen?c.requestFullscreen():c.msRequestFullscreen?c.msRequestFullscreen():c.mozRequestFullScreen?c.mozRequestFullScreen():c.webkitRequestFullscreen&&c.webkitRequestFullscreen();var W=setInterval(function(){if(c!==(F.fullscreenElement||F.mozFullScreenElement||F.webkitFullscreenElement||F.msFullscreenElement))clearInterval(W),Y.setX(R),Y.setY(y),Y.setWidth(e),Y.setHeight(P),Y._fullscreen=!1,c.style.background=V,Y.iv();else{var b=A.Default.getWindowInfo();(k||b.width!==Y.getWidth()||b.height!==Y.getHeight())&&(Y.setX(b.left),Y.setY(b.top),Y.setWidth(b.width),Y.setHeight(b.height),Y._fullscreen=!0,Y.iv(),k=!1)}},500)}else{var h=c.style.left,l=c.style.top,e=c.style.width,P=c.style.height,V=c.style.background;V||(c.style.background="white"),c.requestFullscreen?c.requestFullscreen():c.msRequestFullscreen?c.msRequestFullscreen():c.mozRequestFullScreen?c.mozRequestFullScreen():c.webkitRequestFullscreen&&c.webkitRequestFullscreen();var W=setInterval(function(){if(c!==(F.fullscreenElement||F.mozFullScreenElement||F.webkitFullscreenElement||F.msFullscreenElement))clearInterval(W),c.style.left=h,c.style.top=l,c.style.width=e,c.style.height=P,c.style.background=V,Y.iv();else{var i=A.Default.getWindowInfo();(k||i.width!==Y.getWidth()||i.height!==Y.getHeight())&&(zq(Y),k=!1)}},500)}}},appendTimeStamp:function(O){return O},setCompType:function(T,K){jo(K)||Vc(K)?kk[T]=K:Db(T)},getCompType:function(L){var O=kk[L];return O===e&&Qg.test(L)&&Db(L),O},getCompTypeMap:function(){return kk},drawCompType:function(J,m,d,b,r,C){J(m,d,b,r,C)},numberListener:function(){var J={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1};return function(s){var T=s.keyCode;J[T]||65===T&&r.isCtrlDown(s)||86===T&&r.isCtrlDown(s)||67===T&&r.isCtrlDown(s)||88===T&&r.isCtrlDown(s)||T>=35&&40>=T||(s.shiftKey||48>T||T>57)&&(96>T||T>105)&&s.preventDefault()}}(),ignoreKeyCodes:[122,123],preventDefault:function(K){var c=K.target.tagName;("DIV"===c||"CANVAS"===c)&&!(r.ignoreKeyCodes.indexOf(K.keyCode)>=0)&&("keydown"!==K.type||Jf(K)||Yk(K)||mk(K)||Vn(K)||As(K)||65===K.keyCode&&(K.metaKey||K.ctrlKey))&&(K.preventDefault(),K.preventManipulation&&K.preventManipulation())},getWindowInfo:function(){var R=F.documentElement,r=R&&(R.scrollLeft||R.scrollTop)?R:F.body;return{target:r,left:r.scrollLeft,top:r.scrollTop,width:x.innerWidth||r.clientWidth,height:x.innerHeight||r.clientHeight}},isDragging:function(){return!!to},isLeftButton:function(A){return s?!0:0===A.button},isInput:function(Y){if(!Y)return!1;var U=Y.tagName;return"INPUT"===U||"TEXTAREA"===U||"SELECT"===U},getTouchCount:function(Z){return s?Z.touches.length:1},isDoubleClick:function(){function D(O){O.details=0,O.timeout=null,O.lastPoint=null}var m={};return function(P){var k=P.button==J?"":P.button,M=P.type+k,H=M+"_isDoubleClick",i=m[M];if(i||(i=m[M]={details:0,timeout:null,lastPoint:null}),P[H]===e){P[H]=!0;var t=Ao(P);i.timeout&&(G(i.timeout),i.timeout=null),i.lastPoint&&ii(i.lastPoint,t)>(s?20:1)&&D(i),i.lastPoint=t,i.details++,i.timeout=U(function(){D(this)}.bind(i),500)}return 2===i.details}}(),isShiftDown:function(y){return y?y.shiftKey:rc["16"]},isCtrlDown:function(y){return y?w?y.metaKey:y.ctrlKey:w?rc["91"]:rc["17"]},getClientPoint:function(U){return s&&(U=Nl(U)),{x:U.clientX,y:U.clientY}},isMouseEvent:function(x){return x instanceof MouseEvent||0===x.type.indexOf("mouse")},getTargetElement:function(C){if(r.isMouseEvent(C)||!F.elementFromPoint)return C.target;var E=fe(C);return F.elementFromPoint(E.x,E.y)},getPagePoint:function(A){return s&&(A=Nl(A)),{x:A.pageX,y:A.pageY}},createObject:function($,u){var J=new $;for(var T in u)if(0===T.indexOf("s:"))J.s(T.substr(2),u[T]);else if(0===T.indexOf("a:"))J.a(T.substr(2),u[T]);else{var v=nq(T),m=u[T];J[v]?(J[v](m),"setToolTip"===v&&J.enableToolTip&&J.enableToolTip()):J[T]=m}return J},setImage:function(n,V,e,P){var f=arguments.length;4===f?ck(n,P,V,e):2===f?se(V)?ck(n,V):Up[n]=V:1===f&&ck(n,n)},getImage:function(C,p,K){var Z;if(C==J)return J;if(Vc(C)?Z=C:(Z=Up[C],C&&Z===e&&(Dq&&Dq[C]||ck(C,C))),p&&Z&&Z.tagName){var U;U="override"===K?"colors_override":"override_rgb"===K?"colors_override_rgb":"override_a"===K?"colors_override_a":"colors",Z[U]||(Z[U]={__count__:0});var V=Z[U][p];return V||(Z[U].__count__>r.imageCacheThreshold&&(Z[U]={__count__:0}),V=Tm(Z,Gj(p),Z.width,Z.height,K),Z[U][p]=V,Z[U].__count__++),V}return Z},isImageComplete:function(E,Q,w){var m=Vc(E)?E:Up[E];if(!m)return!1;if(m.tagName)return m.complete;for(var V,E,q=m.comps,U=!0,y=0,L=q.length;L>y;y++)if(V=q[y],"image"===V.type){E=V.name,E&&E.func&&(E=dg(E,Q));var M=$f(E,Q,w);if(!M){U=!1;break}}return U},getId:function(){var z=1;return function(){return++z}}(),callLater:function(Y,W,P,t){var X=function(){Y.apply(W,P)};return t?U(X,t):x.requestAnimationFrame(X)},clone:function(L){if(null==L||"object"!=typeof L)return L;if(L instanceof Date){var B=new Date;return B.setTime(L.getTime()),B}if(L instanceof Array){for(var B=[],W=0,c=L.length;c>W;W++)B[W]=Se(L[W]);return B}if(L instanceof Cq){for(var B=new Cq,W=0,c=L.length;c>W;W++)B.set(W,Se(L.get(W)));return B}if(L instanceof Nd)return L;if(L instanceof h){var B={};for(var b in L)L.hasOwnProperty(b)&&(B[b]=Se(L[b]));return B}return L},callWhenLoaded:function(t,C){C=C||100;var s=kq(t,C);Yr||(Yr={}),Yr[s]={tick:s,cb:t,delay:C}},beforeLoadURL:function($){if(Yr){var q={};for(var b in Yr){var i=Yr[b];G(i.tick);var j=kq(i.cb,i.delay);q[j]={tick:j,delay:i.delay,cb:i.cb}}Yr=q}return r.convertURL?r.convertURL($):$},convertURL:function(f){return f},handleRefGraphLoaded:function(){},handleCompTypeLoaded:function(){},handleImageLoaded:function(){},handleUnfoundImage:function(){},sortFunc:function(q,D){if(q===D)return 0;if(q==J&&D!=J)return 1;if(q!=J&&D==J)return-1;if(q==J&&D==J)return 0;var L,g=typeof q,d=typeof D;return g===lf&&d===lf?L=q.localeCompare(D):g===ug&&d===ug&&(L=q-D),L===e&&(L=(""+q).localeCompare(""+D)),L>0?1:0>L?-1:0},getClassMap:function(){return Tb},getClass:function(N){if(se(N)){var M,K=Tb[N];if(!K){M=N.split("."),K=x;for(var p=0;p<M.length;p++)K=K[M[p]];Tb[N]=K}return K}return N},def:function(p,n,q){var C,V,G,K=function(){};if(K.prototype=n.prototype,C=new K,se(p)){if(Tb[p])throw"'"+p+"' already defined";G=tr(p),C.getClassName=function(){return p}}else G=p;if(C.constructor=G,C.getClass=function(){return G},C.getSuperClass=function(){return n},q)for(V in q)Xp[V]&&Xp.hasOwnProperty(V)?Xp[V](C,q):Nk(C,q,V);G.prototype=C,G.superClass=n.prototype},startAnim:function(){var O=function(H){H.duration&&(H.startTime=mj()),H.timeId=id(H.tick,J,J,H.interval)};return function(W){return W=Se(W),W.easing=W.easing||r.animEasing,W.duration||W.frames||(W.duration=r.animDuration),W.t=0,W.duration?W.interval=0:(W.frame=0,W.interval=W.interval||10),W.tick=function(){if(W.duration){var l=(mj()-W.startTime)/W.duration;l>1&&(l=1),W.t=l,W.action(W.easing(l),l),1===l?W.stop():W._isPaused||(W.timeId=id(W.tick))}else W.frame++,l=W.t=W.frame/W.frames,W.action(W.easing(l),l),W.frame<W.frames?W._isPaused||(W.timeId=id(W.tick,J,J,W.interval)):W.stop()},W.resume=function(){W._isPaused&&(delete W._isPaused,W.duration?W.t<1&&(W.startTime=mj()-W.duration*W.t,W.timeId=id(W.tick)):W.frame<W.frames&&(W.timeId=id(W.tick,J,J,W.interval)))},W.pause=function(){W._isPaused=!0},W.stop=function(P){W.isRunning()&&(W.duration?W.t<1&&P&&(W.t=1,W.action(W.easing(1),1)):W.frame<W.frames&&P&&(W.frame=W.frames,W.action(W.easing(1),1)),W._37o&&W._37o(),W.finishFunc&&W.finishFunc(),Lo(W.timeId,!W.duration),delete W.timeId)},W.isRunning=function(){return W.timeId!=J},W.delay?id(O,J,[W],W.delay):O(W),W}}(),getTextSize:function(){var A={},L=F?Rk().getContext("2d"):J;return function(h,$){L.font=h?h:ee;var U=A[L.font];return U||(U=2*L.measureText("e").width+4,A[L.font]=U),{width:L.measureText($).width+4,height:U}}}(),drawText:function(X,O,W,R,i,s,Y,Q,G,S){if(O!=J){var K=cf(W,O),A={};A.y=S&&S!==Pj?S===Wc?s+K.height/2:s+Q-K.height/2:s+Q/2,A.x=G&&G!==fh?G===um?i+Y-K.width/2:i+Y/2:i+K.width/2,bh(X,O,A,W,R)}},getDistance:function(T,w){var I=T.length;return w?3===I?Z(z(T[0]-w[0])+z(T[1]-w[1])+z(T[2]-w[2])):2===I?Z(z(T[0]-w[0])+z(T[1]-w[1])):T.z===e?Z(z(w.x-T.x)+z(w.y-T.y)):Z(z(w.x-T.x)+z(w.y-T.y)+z(w.z-T.z)):3===I?Z(z(T[0])+z(T[1])+z(T[2])):2===I?Z(z(T[0])+z(T[1])):void 0},brighter:function(q,n){return 0>n&&(n=-n),Qd(q,n?n:40)},darker:function(F,e){return e>0&&(e=-e),Qd(F,e?e:-40)},unionPoint:function(Y,$){if(!Y)return J;if(2===arguments.length)return Y&&$?{x:c(Y.x,$.x),y:c(Y.y,$.y),width:k(Y.x-$.x),height:k(Y.y-$.y)}:J;var P=Y;if(P._as&&(P=P._as),P.length===e)return J;var Q=P.length;if(0>=Q)return J;for(var T=1,A=P[0],j={x:A.x,y:A.y,width:0,height:0};Q>T;T++){A=P[T];var g=c(j.x,A.x),h=S(j.x+j.width,A.x),Z=c(j.y,A.y),N=S(j.y+j.height,A.y);j.x=g,j.y=Z,j.width=h-g,j.height=N-Z}return j},unionRect:function(I,z){if(I&&!z)return Se(I);if(!I&&z)return Se(z);if(I&&z){var l={x:c(I.x,z.x),y:c(I.y,z.y)};return l.width=S(I.x+I.width,z.x+z.width)-l.x,l.height=S(I.y+I.height,z.y+z.height)-l.y,l}return J},containsPoint:function(G,p,i,L){if(L!=J&&1!==L){var Z=G.x+G.width/2,t=G.y+G.height/2;G={x:Z-G.width/2*L,y:t-G.height/2*L,width:G.width*L,height:G.height*L}}if(i){var l=G.width/2,D=G.height/2,B=j(-i),c=C(-i),W=p.x-G.x-l,w=p.y-G.y-D;return p={x:c*W-B*w,y:B*W+c*w},Pm({x:-l,y:-D,width:G.width,height:G.height},p)}return!(!G||p.x<G.x||p.y<G.y||p.x>G.x+G.width||p.y>G.y+G.height)},containsRect:function(g,B){if(!g||!B)return!1;var p=B.x,D=B.y,S=B.width,w=B.height,u=g.width,k=g.height;if(0>(u|k|S|w))return!1;var b=g.x,c=g.y;if(b>p||c>D)return!1;if(u+=b,S+=p,p>=S){if(u>=b||S>u)return!1}else if(u>=b&&S>u)return!1;if(k+=c,w+=D,D>=w){if(k>=c||w>k)return!1}else if(k>=c&&w>k)return!1;return!0},intersectsRect:function(S,Z){if(!S||!Z)return!1;var C=Z.width,I=Z.height,P=S.width,Y=S.height;if(0>=P||0>=Y||0>=C||0>=I)return!1;var V=Z.x,c=Z.y,f=S.x,i=S.y;return P+=f,Y+=i,C+=V,I+=c,P>V&&Y>c&&C>f&&I>i},intersection:function(F,L){if(!F||!L)return J;var W=L.x,I=L.y,O=F.x,e=F.y,X=W,N=I,r=O,l=e;return X+=L.width,N+=L.height,r+=F.width,l+=F.height,O>W&&(W=O),e>I&&(I=e),X>r&&(X=r),N>l&&(N=l),X-=W,N-=I,0>=X||0>=N?J:{x:W,y:I,width:X,height:N}},grow:function(R,L,z){z===e&&(z=L),R.x-=L,R.y-=z,R.width=R.width+2*L,R.height=R.height+2*z},getLogicalPoint:function(I,R,Z,r,W,i){var t,u,v=R.getBoundingClientRect();return I.target?(dh(I)?w?rc["91"]=!0:rc["17"]=!0:w?rc["91"]=!1:rc["17"]=!1,rc["16"]=Cm(I)?!0:!1,I=s?Nl(I):I,t=I.clientX,u=I.clientY):(t=I.x,u=I.y),{x:(t-v.left+R.scrollLeft-(Z||0))/(W||1),y:(u-v.top+R.scrollTop-(r||0))/(i||1)}},removeHTML:function(){var i;return function(M){return M&&M.parentNode?i===M?!0:(i=M,M.parentNode.removeChild(M),i=J,!0):!1}}(),getToolTipDiv:function(){if(!Xh){Xh=cd(),gg=cd();var g=Xh.style;r.baseZIndex!=J&&(g.zIndex=L(r.baseZIndex)+3+""),g.whiteSpace="nowrap",g.color=r.toolTipLabelColor,g.background=r.toolTipBackground,g.font=r.toolTipLabelFont,g.padding="5px",g.boxShadow="0px 0px 3px "+r.toolTipShadowColor}return Xh},isToolTipShowing:function(){return Xh&&Xh.parentNode?!0:gg&&gg.parentNode?!0:!1},hideToolTip:function(){Aq(Xh),Aq(gg),Xd()},showToolTip:function(M,t){if(!M||t==J)return ns(),void 0;r.getToolTipDiv();var y,V;if(t.html?(t=t.html,y=gg,Aq(Xh)):(y=Xh,Aq(gg)),V=y.style,y.innerHTML=t,y.parentNode||A.Default.appendToScreen(y),M.target){M=fe(M);var P=vl(),h=M.x,D=M.y,_=s?60:12;if(s){var x=y.getBoundingClientRect();V.left=h-x.width/2+dm,V.top=D-x.height-_<P.top?D+_+dm:D-x.height-_+dm}else{V.left=h+_+dm,V.top=D+_+dm;var x=y.getBoundingClientRect();x.left+x.width>P.width&&(V.left=h-_-x.width+dm),x.top+x.height>P.height&&(V.top=D-_-x.height+dm),x.left<0&&(V.left=h+_+dm),x.top<0&&(V.top=D+_+dm)}}else V.left=M.x+dm,V.top=M.y+dm;Xd()},startDragging:function(F,Y){F!==to&&(to?s?to.handleWindowTouchEnd(Y):to.handleWindowMouseUp(Y):s?(x.addEventListener(Nm,Zh,!1),x.addEventListener(Rp,ae,!1)):(x.addEventListener(Po,mf,!1),x.addEventListener(Yi,tg,!1)),to=F)},getImageMap:function(){return Up},toBoundaries:function(c,K,a,I){var $=[];return rg(c,K,a,I).forEach(function(w){var H=[];w.forEach(function(d){H.push(d.x,d.y)}),$.push(H)}),$},getCurrentKeyCodeMap:function(){return rc},drawCenterImage:function(f,b,q,L,o,E,B,i){var v=Sf(b,o,E),A=tk(b,o,E);nk(f,b,Q(q-v/2),Q(L-A/2),v,A,o,E,B,i)},drawStretchImage:function(G,e,I,f,R,j,C,O,H,h,y,z){var U,K=Sf(e,O,H,j),B=tk(e,O,H,C);"uniform"===I?(U=c(j/K,C/B),K*=U,B*=U,f+=Q((j-K)/2),R+=Q((C-B)/2),j=K,C=B):"centerUniform"===I&&((K>j||B>C)&&(U=c(j/K,C/B),K*=U,B*=U),f+=Q((j-K)/2),R+=Q((C-B)/2),j=K,C=B);var V=G.interactiveInfo;if(V){var q;q="center"===I?{x:f+j/2-K/2,y:R+C/2-B/2,width:K,height:B}:{x:f,y:R,width:j,height:C},V.rect?(V.compInfos[V.compInfos.length-1].rect=q,q.image=e):V.rect=q}if("center"===I){var X=y!==!1&&(K>j||B>C);X&&(G.save(),G.beginPath(),G.rect(f,R,j,C),G.clip()),nk(G,e,f+j/2-K/2,R+C/2-B/2,K,B,O,H,h,z),X&&G.restore()}else nk(G,e,f,R,j,C,O,H,h,z)},toCanvas:function(b,S,g,$,d,i,O,p,y){b=$l(b,O),S=S||Sf(b,d),g=g||tk(b,d);var H=Rk(),I=Bb(H);return p?(Er(H,S,g,p),I.scale(p,p)):Er(H,S,g,1),Ck(I,b,$,0,0,S,g,d,i,O,y),b&&b.clampToEdge&&(H.clampToEdge=b.clampToEdge),I.restore(),H},createGradientImage:function(Y,v,$,f){for(var V=["L",0,0,Y,0,1,0,0,1,0,0],N=0,B=Math.min(v.length,$.length);B>N;N++)V.push($[N],v[N]);var Q=A.Default.toCanvas({width:Y,height:Y,clampToEdge:!0,comps:[{type:"shape",rotation:f||0,points:[0,0,Y,0,Y,Y,0,Y],background:"#ffffff",gradientPack:V}]});return Q},createElement:function(e,c,x,R){var P=F.createElement(e);
return _f(P,c||T.widgetBorder,2),P.style.font=x?x:ee,R!=J&&(P.value=R),r.onElementCreated&&r.onElementCreated(P),P},containedInView:function(B,C){var b=bf(C).getBoundingClientRect();return Pm({x:b.left,y:b.top,width:b.width,height:b.height},Ao(B))},isIsolating:function(){return $c>0},setIsolating:function(v){v?$c++:$c--},getMSMap:function(){return Xp},stringify:function(X,D){var b=Date.prototype.toJSON;Date.prototype.toJSON=function(){return"__ht__date"+this.getTime()};var r=JSON.stringify(X,function(A,I){return"function"==typeof I?"__ht__"+(I.__ht__||I.toString()):On(I)?Yj(I):I},D==J?2:D);return Date.prototype.toJSON=b,r},parse:function(m){return se(m)?JSON.parse(m,function(c,X){if(se(X)){if("__ht__function"==X.substr(0,14)){var R=X.indexOf("{")+1,S=X.lastIndexOf("}"),k=X.indexOf("(")+1,Y=X.indexOf(")");if(R&&S&&k&&Y){var n=new Function(X.substring(k,Y),X.substring(R,S));return n.__ht__=X.substr(6),n}}if("__ht__date"==X.substr(0,10))return new Date(L(X.substr(10)))}return X}):m},loadJS:function(b,c){c&&b.push(c);var V=b.shift();if(Ji(V))b=V.contact(b),r.loadJS(b);else if(jo(V))V(),r.loadJS(b);else if(se(V)){var W=F.createElement("script");W.onload=function(){r.loadJS(b)},W.setAttribute("src",V),F.getElementsByTagName("head")[0].appendChild(W)}else b.length&&r.loadJS(b)},toRoundedCorner:function(q,w){var I=q.size();if(0>=w)return{points:q};var E,u=new Cq,X=new Cq,$=q.get(0);u.add($),X.add(1);for(var l=1;I>l;l++)if(I>l+1){var H=q.get(l),i=q.get(l+1),Z=$.x,d=$.y,Q=H.x,n=H.y,y=n-d,S=Q-Z,A=f(y,S);E=c(.99*ii($,H),w),u.add({x:Q-E*C(A),y:n-E*j(A)}),u.add(H),Z=H.x,d=H.y,Q=i.x,n=i.y,y=n-d,S=Q-Z,A=f(y,S),E=c(.99*ii(H,i),w),$={x:Z+E*C(A),y:d+E*j(A)},u.add($),X.addAll([2,3])}else u.add(q.get(l)),X.add(2);return{points:u,segments:X}},toColorData:fk,setCanvas:Er,createDiv:cd,createDisabledDiv:uc,createView:Eq,createCanvas:Rk,appendChild:tf,initContext:Bb,checkLoadingImage:cs,translateAndScale:Gl,layout:zq,getPosition:Dh,drawPoints:rd,drawRoundRect:is,drawBorder:Uj,setFocus:Mr,getter:Kp,setter:nq,isEmptyObject:Ep},!0),vf(V,{autoAdjustIndex:1,hierarchicalRendering:1,adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1,doubleClickToToggle:1,continuousLayout:1,syncSize:1},!0);var Vi=r.disabledOpacity,pl=r.toolTipDelay,Gh=r.devicePixelRatio,lq=r.autoMakeVisible,dd=r.autoHideScrollBar,lc=r.imageGradient,yi=r.showToolTip,ns=r.hideToolTip,hf=r.dashPattern,Ap=r.lineCap,Sq=r.lineJoin,qd=r.labelColor,Lp=r.labelSelectColor,ee=r.labelFont,Tn=r.widgetIndent,Nr=r.widgetRowHeight,af=r.widgetHeaderHeight,Uk=r.widgetTitleHeight,ql=r.scrollBarColor,sp=r.scrollBarSize,iq=r.scrollBarTimeout,Lc=r.scrollBarMinLength,Hq=r.scrollBarInteractiveSize,dn=r.zoomIncrement,Li=r.scrollZoomIncrement,Fg=r.pinchZoomIncrement,ek=r.zoomMax,Bn=r.zoomMin,xi=r.createObject,pm=r.preventDefault,yp=r.setImage,$l=r.getImage,$f=r.isImageComplete,Mf=r.drawCenterImage,Ck=r.drawStretchImage,Vb=r.getId,id=r.callLater,Vj=r.sortFunc,Se=r.clone,tr=r.getClass,Bi=r.startAnim,Co=r.brighter,qq=r.darker,yc=r.drawText,cf=r.getTextSize,Dp=r.isLeftButton,yj=r.getTouchCount,qi=r.isDoubleClick,Cm=r.isShiftDown,dh=r.isCtrlDown,Ao=r.getClientPoint,fe=r.getPagePoint,ii=r.getDistance,Pk=r.unionPoint,Wn=r.unionRect,Pm=r.containsPoint,qh=r.containsRect,db=r.intersectsRect,Eb=r.intersection,vl=r.getWindowInfo,Wr=r.grow,es=r.getLogicalPoint,Vk=r.startDragging,Aq=r.removeHTML,vm=r.createElement,Pn=r.segmentResolution,Zd=r.shapeResolution,ap=r.shapeSide,js=r.def,bi=function(s,m,a){js(u+"."+s,m,a)},eo=function(l,E){l.childNodes.forEach(function(M){E(M),eo(M,E)})};vf(r,{toolTipLabelColor:qd,toolTipLabelFont:ee,toolTipBackground:T.toolTipBackground,toolTipShadowColor:nr,drawBreakableText:Me,setDevicePixelRatio:function(e){Gh=r.devicePixelRatio="number"==typeof e?e:x.devicePixelRatio,eo(F.body,function(J){var L=J._ht;L&&L._canvas&&(Er(L._canvas,L.getWidth(),L.getHeight()),L.redraw?L.redraw():L.iv())})}},!0);var Oo=1e-6,rm="undefined"!=typeof Uint16Array?Uint16Array:Array,Jg="undefined"!=typeof Float32Array?Float32Array:Array,$r=function(v,K,h){var T=[v[0]-K[0],v[1]-K[1],v[2]-K[2]];if(h){var l=ii(T);l>0&&(T[0]/=l,T[1]/=l,T[2]/=l)}return T},Ak=function(n){return[-n[0],-n[1],-n[2]]},hl=function(w,c){return 3===w.length?w[0]*c[0]+w[1]*c[1]+w[2]*c[2]:w[0]*c[0]+w[1]*c[1]},Ln=function(){var U=new Jg(16);return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=1,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=1,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U},od=Ln(),Gp=function(k){var x=new Jg(16);return x[0]=k[0],x[1]=k[1],x[2]=k[2],x[3]=k[3],x[4]=k[4],x[5]=k[5],x[6]=k[6],x[7]=k[7],x[8]=k[8],x[9]=k[9],x[10]=k[10],x[11]=k[11],x[12]=k[12],x[13]=k[13],x[14]=k[14],x[15]=k[15],x},ok=function(Y,C){return Y[0]=C[0],Y[1]=C[1],Y[2]=C[2],Y[3]=C[3],Y[4]=C[4],Y[5]=C[5],Y[6]=C[6],Y[7]=C[7],Y[8]=C[8],Y[9]=C[9],Y[10]=C[10],Y[11]=C[11],Y[12]=C[12],Y[13]=C[13],Y[14]=C[14],Y[15]=C[15],Y},Kr=function(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},Nq=function(h,I){var q=h[0],U=h[1],w=h[2];return h[0]=I[0]*q+I[4]*U+I[8]*w+I[12],h[1]=I[1]*q+I[5]*U+I[9]*w+I[13],h[2]=I[2]*q+I[6]*U+I[10]*w+I[14],h},cp=function(S,s){var w=S[0],V=S[1],g=S[2],l=S[3];return S[0]=s[0]*w+s[4]*V+s[8]*g+s[12]*l,S[1]=s[1]*w+s[5]*V+s[9]*g+s[13]*l,S[2]=s[2]*w+s[6]*V+s[10]*g+s[14]*l,S[3]=s[3]*w+s[7]*V+s[11]*g+s[15]*l,S},eb=function(){var j,R,M,w,e=wr(Um[1]+Um[7]),h=wr(Um[0]+Um[3]-Um[10]),Y=wr(Um[8]+2),Z=function(){return R=M.charAt(j),j+=1,R},H=function(){var $="";if(R===Y)for(;Z();){if(R===Y)return Z(),$;$+=R}else Z()},Q=function(){for(;R&&" ">=R;)Z()},q=function(){var C,W={};if(R===e){if(Z(),Q(),R===h)return Z(),W;for(;R;){if(C=H(),Q(),Z(),W[C]=w(),Q(),R===h)return Z(),W;Z(),Q()}}};return w=function(){switch(Q(),R){case e:return q();default:return H()}},function(X){if(E={},X){var f;if(M=X,j=0,R=" ",f=w(),Q(),!R)return f}}}(),Kl=function(N,Q){if(Q){var $=j(Q),y=C(Q),w=N[4],S=N[5],X=N[6],x=N[7],t=N[8],b=N[9],z=N[10],L=N[11];N[4]=w*y+t*$,N[5]=S*y+b*$,N[6]=X*y+z*$,N[7]=x*y+L*$,N[8]=t*y-w*$,N[9]=b*y-S*$,N[10]=z*y-X*$,N[11]=L*y-x*$}},Qc=function(c,k){if(k){var o=j(k),i=C(k),W=c[0],L=c[1],Z=c[2],U=c[3],u=c[8],x=c[9],M=c[10],G=c[11];c[0]=W*i-u*o,c[1]=L*i-x*o,c[2]=Z*i-M*o,c[3]=U*i-G*o,c[8]=W*o+u*i,c[9]=L*o+x*i,c[10]=Z*o+M*i,c[11]=U*o+G*i}},Op=function(T,K){if(K){var u=j(K),S=C(K),P=T[0],g=T[1],R=T[2],D=T[3],L=T[4],h=T[5],W=T[6],w=T[7];T[0]=P*S+L*u,T[1]=g*S+h*u,T[2]=R*S+W*u,T[3]=D*S+w*u,T[4]=L*S-P*u,T[5]=h*S-g*u,T[6]=W*S-R*u,T[7]=w*S-D*u}},ao=function(x,V,e){return fj(J,e===!1?J:x.getFinalScale3d(),x.r3(),x.getRotationMode(),x.p3(),J,V)},fj=function(j,b,V,B,I,x,L){return x||(x=Ln()),I&&_o(x,I),Oq(x,V,B),L&&ho(x,x,L),b&&up(x,b),j&&ho(x,x,j),x},le=function(o,x,d){x=L(x),d=L(d);var D=this;D.g=o,D._84O=x,D._85O=d,D._70I=!0,D.F=0,D._83O=x+d,D.pen={x:0,y:0}},Of="lineDashOffset",Fj="setLineDash",vn=function($){for(var W in $)1===W.length&&(Of=$[W]);return W?1:0},gb=function(i,C,k){return If(C)?i:i[Fj]?(i[Fj](C),k&&(i.lineDashOffset=k),i):new le(i,C[0],C.length>1?C[1]:C[0])},Xn=function(Y,m){!If(m)&&Y[Fj]&&(Y[Fj](Wd),Y.lineDashOffset=0)};if(js(le,h,{_69I:6,moveTo:function(T,A){var o=this,i=o.pen;i.x=T,i.y=A,o.g.moveTo(T,A),o.start||(o.start={x:T,y:A})},lineTo:function(X,F){var b=this,c=b.pen,i=X-c.x,L=F-c.y,k=f(L,i),o=C(k),A=j(k),E=b._23O(c.x,c.y,X,F),t=b._85O,p=b._84O,h=b._83O;if(b.F){if(b.F>E)return b._70I?b._72I(X,F):b.moveTo(X,F),b.F-=E,void 0;if(b._70I?b._72I(c.x+o*b.F,c.y+A*b.F):b.moveTo(c.x+o*b.F,c.y+A*b.F),E-=b.F,b.F=0,b._70I=!b._70I,!E)return}var w=N(E/h);if(w){for(var Z=o*p,K=A*p,u=o*t,W=A*t,I=0;w>I;I++)b._70I?(b._72I(c.x+Z,c.y+K),b.moveTo(c.x+u,c.y+W)):(b.moveTo(c.x+u,c.y+W),b._72I(c.x+Z,c.y+K));E-=h*w}b._70I?E>p?(b._72I(c.x+o*p,c.y+A*p),b.moveTo(X,F),b.F=t-(E-p),b._70I=!1):(b._72I(X,F),E===p?(b.F=0,b._70I=!b._70I):(b.F=p-E,b.moveTo(X,F))):E>t?(b.moveTo(c.x+o*t,c.y+A*t),b._72I(X,F),b.F=p-(E-t),b._70I=!0):(b.moveTo(X,F),E===t?(b.F=0,b._70I=!b._70I):b.F=t-E)},quadraticCurveTo:function(d,j,V,n){var P,W=this,g=W.pen,s=g.x,m=g.y,I=W._22O(s,m,d,j,V,n),R=0,f=0,p=W._85O,h=W._84O;if(W.F){if(W.F>I)return W._70I?W._71I(d,j,V,n):W.moveTo(V,n),W.F-=I,void 0;if(R=W.F/I,P=W._20O(s,m,d,j,V,n,R),W._70I?W._71I(P[2],P[3],P[4],P[5]):W.moveTo(P[4],P[5]),W.F=0,W._70I=!W._70I,!I)return}var D=I-I*R,H=N(D/W._83O),Q=h/I,T=p/I;if(H)for(var C=0;H>C;C++)W._70I?(f=R+Q,P=W._21O(s,m,d,j,V,n,R,f),W._71I(P[2],P[3],P[4],P[5]),R=f,f=R+T,P=W._21O(s,m,d,j,V,n,R,f),W.moveTo(P[4],P[5])):(f=R+T,P=W._21O(s,m,d,j,V,n,R,f),W.moveTo(P[4],P[5]),R=f,f=R+Q,P=W._21O(s,m,d,j,V,n,R,f),W._71I(P[2],P[3],P[4],P[5])),R=f;D=I-I*R,W._70I?D>h?(f=R+Q,P=W._21O(s,m,d,j,V,n,R,f),W._71I(P[2],P[3],P[4],P[5]),W.moveTo(V,n),W.F=p-(D-h),W._70I=!1):(P=W._19O(s,m,d,j,V,n,R),W._71I(P[2],P[3],P[4],P[5]),I===h?(W.F=0,W._70I=!W._70I):(W.F=h-D,W.moveTo(V,n))):D>p?(f=R+T,P=W._21O(s,m,d,j,V,n,R,f),W.moveTo(P[4],P[5]),P=W._19O(s,m,d,j,V,n,f),W._71I(P[2],P[3],P[4],P[5]),W.F=h-(D-p),W._70I=!0):(W.moveTo(V,n),D===p?(W.F=0,W._70I=!W._70I):W.F=p-D)},bezierCurveTo:function(){var Y=arguments;this.pen={x:Y[4],y:Y[5]},this.g.bezierCurveTo(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5])},arc:function(P,d,Y,$,a,q){q||($=-$,a=-a),Bp(this,P,d,$,a-$,Y,Y,!1)},rect:function(h,Y,U,L){var y=this;y.pen={x:h,y:Y},y.moveTo(h,Y),y.lineTo(h,Y+L),y.lineTo(h+U,Y+L),y.lineTo(h+U,Y),y.lineTo(h,Y)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(w,i,Q,c){var S=Q-w,t=c-i;return Z(S*S+t*t)},_22O:function(i,N,P,n,b,D,t){for(var z,T,J,M,Y,I,R,o=0,K=i,v=N,C=t>0?t:this._69I,u=1;C>=u;u++)J=u/C,M=1-J,Y=M*M,I=2*J*M,R=J*J,z=Y*i+I*P+R*b,T=Y*N+I*n+R*D,o+=this._23O(K,v,z,T),K=z,v=T;return o},_21O:function(E,e,Q,r,c,a,K,f){var t=this;if(0===K)return t._20O(E,e,Q,r,c,a,f);if(1===f)return t._19O(E,e,Q,r,c,a,K);var B=t._20O(E,e,Q,r,c,a,f);return B.push(K/f),t._19O.apply(t,B)},_20O:function(N,O,s,Y,X,$,l){if(1!==l){var v=s+(X-s)*l,_=Y+($-Y)*l;s=N+(s-N)*l,Y=O+(Y-O)*l,X=s+(v-s)*l,$=Y+(_-Y)*l}return[N,O,s,Y,X,$]},_19O:function(t,z,h,C,$,H,U){if(1!==U){var q=t+(h-t)*U,W=z+(C-z)*U;h+=($-h)*U,C+=(H-C)*U,t=q+(h-q)*U,z=W+(C-W)*U}return[t,z,h,C,$,H]},_72I:function(M,C){var c=this.pen;(M!==c.x||C!==c.y)&&(c.x=M,c.y=C,this.g.lineTo(M,C))},_71I:function(i,W,w,V){var Q=this.pen;(i!==w||W!==V||w!==Q.x||V!==Q.y)&&(Q.x=w,Q.y=V,this.g.quadraticCurveTo(i,W,w,V))}}),M&&v){var Ed=v.toString();_=Ed.indexOf(hg.substr(0,2))>0&&Ed.indexOf(Wc+Wc.substr(1,1))>1?!0:!1}var sk=J,_h=J,ib=function(f){sk&&!f._72O&&(_h||(_h={}),_h[f._72O=Vb()]=f)},Db=function(w,C){if(C||(C=w),C&&(sk||(sk={}),!sk[w])){var _=new XMLHttpRequest;if(sk[C]={request:_,url:C},_.overrideMimeType&&_.overrideMimeType("text/plain"),C=r.beforeLoadURL(C),C.data){var M=r.parse(C.data);Kg(w,M),r.handleCompTypeLoaded(w,M)}else _.open("GET",encodeURI(C),!0),_.onload=function(o){if(200===this.status||0===this.status){var q=r.parse(o.target.response||o.target.responseText);Kg(w,q),r.handleCompTypeLoaded(w,q)}else Kg(w,J)},_.onerror=function(){Kg(w,J)},_.send(null)}},Kg=function(m,g){if(kk[m]=g,delete sk[m],Ep(sk)&&(sk=J,_h)){for(var M in _h){var Q=_h[M];Q.invalidateAll&&Q.invalidateAll(e,"compTypeLoaded",m),Q.redraw&&Q.redraw(),Q.iv(),delete Q._72O}_h=J}if(g&&_h)for(var M in _h){var Q=_h[M];Q.invalidateAll&&Q.invalidateAll(e,"compTypeLoading",m),Q.redraw&&Q.redraw(),Q.iv()}},Ko=T.chart,Vl=r.compStack=[],hp=/^style@/,ie=/^attr@/,jh=/^field@/,mh={x:.5,y:.5},Sf=function(R,c,A,r){if(!R)return 0;if(dg(R.fitSize,c,A)&&r)return r;var J=dg(R.width,c,A);return null==J?20:J},tk=function(W,Y,C,F){if(!W)return 0;if(dg(W.fitSize,Y,C)&&F)return F;var w=dg(W.height,Y,C);return null==w?20:w},dg=function(H,X,q){if(!H||!H.func)return H;var n,R=H.func,E=H.value;return n=jo(R)?q&&q.vectorDataBindingDisabled&&!H.isSafeFunc?E:R(X,q):X instanceof Nd?ie.test(R)?X.a(R.slice(5)):hp.test(R)?X.s(R.slice(6)):jh.test(R)?X[R.slice(6)]:X[R]?X[R](q):E:E,E!==e&&n==J?E:n},nk=r.drawImage=function(){var b,x,y,i,A,m,q=function(z,A){z.getValue&&z.getValue.compType===A||(z.getValue=function($){var u=U(z,$);if(u===e&&A.properties){var l=A.properties[$];l&&(u=l.defaultValue)}return u},z.getValue.compType=A)},U=function(k,d,H){var g=k[d];return g&&g.func?(g=dg(g,x,y),H&&(g=H(g))):H&&(g=k[d]=H(g)),g},k=function(t,o){var j;if(j=o?U(t,o):t,A&&j){if("override"===m)return A;if("override_rgb"===m){var T=Gj(A);return j=fk(j),"rgba("+N(255*T[0])+","+N(255*T[1])+","+N(255*T[2])+","+j[3]/255+")"}if("override_a"===m){var T=Gj(A);return j=fk(j),"rgba("+j[0]+","+j[1]+","+j[2]+","+T[3]+")"}var T=Gj(A);return j=fk(j),"rgba("+N(j[0]*T[0])+","+N(j[1]*T[1])+","+N(j[2]*T[2])+","+j[3]/255*T[3]+")"}return j},g=function(E){if(Ji(E)){for(var X=new Cq,Z=E.length,Y=0;Z>Y;Y+=2)X.add({x:E[Y],y:E[Y+1]});E=X}return E},L=function(W){var x=U(W,"anchorX"),h=U(W,"anchorY");if(x!==e||h!==e)return{x:x===e?mh.x:x,y:h===e?mh.y:h};var M=U(W,"type"),j=U(W,"name");if("image"!==M||!j)return mh;var c=$l(j);return c&&c.anchorX&&c.anchorY?{x:c.anchorX,y:c.anchorY}:mh},a=function(t,h){var l=U(t,Yf),r=L(t);if(Ji(l)){var i=l.length,q=U(t,"relative"),d=h.width,O=h.height;if(4===i)l={x:l[0],y:l[1],width:l[2],height:l[3]},q?(l.x*=d,l.y*=O,l.width*=d,l.height*=O):h.fitSize&&(l.x*=h.widthScale,l.width*=h.widthScale,l.y*=h.heightScale,l.height*=h.heightScale);else if(3===i){var k=l[0];l={width:l[1],height:l[2]},q?(l.width*=d,l.height*=O):h.fitSize&&(l.width*=h.widthScale,l.height*=h.heightScale),"object"==typeof k?k.length&&(k={x:k[0],y:k[1]}):k=Dh(k,h,l),l.x=k.x-l.width*r.x,l.y=k.y-l.height*r.y}var X=U(t,"offsetX");X&&(h.fitSize&&(X*=h.widthScale),l.x+=X),X=U(t,"offsetY"),X&&(h.fitSize&&(X*=h.heightScale),l.y+=X)}return l},F=function(y){return Ji(y)?new Cq(y):y},H=function(f,T,O,t,E,G,B){var m=b.interactiveInfo;E===e&&(E=1),G===e&&(G=1);var p=U(f,"clipPercentage"),h=ce(O,T);if(h&&!t&&1===E&&1===G&&!(1>p))return m&&m.compInfos.push({comp:f,rect:T,stacks:m.stacks.slice()}),!1;B=B||mh;var Q=T.x+T.width*B.x,y=T.y+T.height*B.y,s=O.x+O.width*B.x,W=O.y+O.height*B.y,D=O.width?E*(T.width/O.width):1,J=O.height?G*(T.height/O.height):1;if(b.save(),m&&(m.stacks.push({t:[Q,y]}),m.stacks.push({r:t}),m.stacks.push({s:[D,J]}),m.stacks.push({t:[-s,-W]}),m.compInfos.push({comp:f,rect:T,stacks:m.stacks.slice()})),zs(b,Q,y),so(b,t||0),pe(b,D,J),zs(b,-s,-W),1>p){0>p&&(p=0);var N=pg(O,U(f,"clipDirection"),p);b.beginPath(),b.rect(N.x,N.y,N.width,N.height),b.clip()}return!0},Q=function(){b.interactiveInfo&&(b.interactiveInfo.stacks.pop(),b.interactiveInfo.stacks.pop(),b.interactiveInfo.stacks.pop(),b.interactiveInfo.stacks.pop()),b.restore()},V=function(Z,_,O){var M=U(Z,"path"),x=U(Z,uq),K=U(Z,"scaleX"),f=U(Z,"scaleY"),Y=L(Z),A=J,P=Wh(null,M);if(O||(O=Z.unionRect,O||(O=Pk(P),Z.path.func||(Z.unionRect=O)),A=O),O){A||(A=Z.unionRect,A||(A=Pk(P),Z.path.func||(Z.unionRect=A)));var z=H(Z,O,A,x,K,f,Y),g=U(Z,"borderPattern"),e=gb(b,g),m=k(Z,"background"),q=k(Z,"borderColor"),W=U(Z,"borderWidth"),d=U(Z,"gradient"),r=k(Z,"gradientColor"),t=U(Z,"border3d"),F=U(Z,"border3dColor"),C=U(Z,"border3dAccuracy"),v=b.lineJoin,u=b.lineCap;if(b.lineJoin=U(Z,"borderJoin")||Sq,b.lineCap=U(Z,"borderCap")||Ap,m?(_p(b,m,d,r,A),Wh(b,M),b.fill(),e!==b&&Wh(b,M)):Wh(b,M),W&&q){var R=U(Z,"borderWidthAbsolute");R&&(b.save(),b.setTransform(1,0,0,1,0,0)),b.lineWidth=W,b.strokeStyle=q,b.stroke(),R&&b.restore(),t&&Tr(b,q,F,W,i,C)}if(Xn(b,g),U(Z,"dash")){var I=U(Z,"dashWidth")||W;if(I>0){g=U(Z,"dashPattern")||hf;var e=gb(b,g,U(Z,"dashOffset")),S=k(Z,"dashColor")||k(Vq);e!==b&&Wh(b,M),b.strokeStyle=S,b.lineWidth=I,b.stroke(),U(Z,"dash3d")&&Tr(b,S,k(Z,"dash3dColor"),I,i,U(Z,"dash3dAccuracy")),Xn(b,g)}}_===Yf&&ui(b,m,U(Z,"depth"),A),b.lineJoin=v,b.lineCap=u,z&&Q()}},$=function($,q,r,G){var z=U($,co,g),u=U($,uq),C=L($);if(z&&G.fitSize){var K=Math.abs(Math.cos(u))<.001,X=new Cq,Y=Pk(z),Z=G.widthScale,S=G.heightScale,O=Y.x+C.x*Y.width,s=Y.y+C.y*Y.height,T=O*Z,j=s*S;z.each(function(t){var R=t.x-O,E=t.y-s;X.add({x:T+R*(K?S:Z),y:j+E*(K?Z:S)})}),z=X,$.unionRect=null}var M=U($,"scaleX"),_=U($,"scaleY"),R=q===el,D=J;if(!r&&R&&(r=$.unionRect,r||(r=Pk(z),$.points.func||($.unionRect=r)),D=r),r){R?D||(D=$.unionRect,D||(D=Pk(z),$.points.func||($.unionRect=D))):D=r;var c,t,n,f,d=H($,r,D,u,M,_,C),h=U($,"borderPattern"),P=gb(b,h),V=k($,"background"),a=$l(U($,"repeatImage"),A,m),o=U($,"gradientPack"),N=k($,"borderColor"),p=U($,"borderWidth"),E=U($,"segments",F),W=U($,"gradient"),v=k($,"gradientColor"),l=U($,"border3d"),I=U($,"border3dColor"),B=U($,"border3dAccuracy"),e=U($,"closePath"),w=U($,"fillRule")||"nonzero",xs=b.lineJoin,$q=b.lineCap;if(b.lineJoin=U($,"borderJoin")||Sq,b.lineCap=U($,"borderCap")||Ap,R)if(V||a||o){var Mr=U($,"fillClipPercentage");if(1>Mr){0>Mr&&(Mr=0);var tp=pg(D,U($,"fillClipDirection"),Mr);b.save(),b.beginPath(),b.rect(tp.x,tp.y,tp.width,tp.height),b.clip()}if(rd(b,z,E,e),o)Rh(b,o);else if(a){var ko=b,vo=A,Og=m;Kd(b,a,A,m,x,y),b=ko,A=vo,m=Og}else{var ko=b;_p(b,V,W,v,D),b=ko}b.fill(w),1>Mr&&b.restore(),o&&b.restore(),P!==b&&rd(P,z,E,e)}else rd(P,z,E,e);else if("roundRect"===q?c=U($,"cornerRadius"):"polygon"===q?c=U($,"polygonSide"):"arc"===q&&(c=U($,"arcFrom"),t=U($,"arcTo"),n=U($,"arcClose"),f=U($,"arcOval")),V||a||o){var Mr=U($,"fillClipPercentage");if(1>Mr){0>Mr&&(Mr=0);var tp=pg(D,U($,"fillClipDirection"),Mr);b.save(),b.beginPath(),b.rect(tp.x,tp.y,tp.width,tp.height),b.clip()}if(lb(b,q,D,c,t,n,f),o)Rh(b,o);else if(a){var ko=b,vo=A,Og=m;Kd(b,a,A,m,x,y),b=ko,A=vo,m=Og}else _p(b,V,W,v,D);b.fill(w),1>Mr&&b.restore(),o&&b.restore(),b!==P&&lb(P,q,D,c,t,n,f)}else lb(P,q,D,c,t,n,f);if(p&&N){var Dl=U($,"borderWidthAbsolute");Dl&&(b.save(),b.setTransform(1,0,0,1,0,0)),b.lineWidth=p,b.strokeStyle=N,b.stroke(),Dl&&b.restore(),l&&Tr(b,N,I,p,i,B)}if(Xn(b,h),U($,"dash")){var cn=U($,"dashWidth")||p;if(cn>0){h=U($,"dashPattern")||hf;var P=gb(b,h,U($,"dashOffset")),pr=k($,"dashColor")||k(Vq);P!==b&&(R?rd(P,z,E,e):lb(P,q,D,c,t,n,f)),b.strokeStyle=pr,b.lineWidth=cn,b.stroke(),U($,"dash3d")&&Tr(b,pr,k($,"dash3dColor"),cn,i,U($,"dash3dAccuracy")),Xn(b,h)}}q===Yf&&ui(b,V,U($,"depth"),D),b.lineJoin=xs,b.lineCap=$q,d&&Q()}},z=function(Q,O){var g=A,r=m,i=A||U(Q,Lf),p=m||U(Q,"blendMode"),T=$l(U(Q,"name"),i,p);T&&(Ck(b,T,U(Q,"stretch"),O.x,O.y,O.width,O.height,x,y,i,null,p),A=g,m=r)},B=function(B,S){var P=U(B,"text");P!=J&&yc(b,P,U(B,"font"),k(B,Lf),S.x,S.y,S.width,S.height,U(B,"align"),U(B,"vAlign"))},R=function(D,C){Uj(b,k(D,Lf),C.x,C.y,C.width,C.height,U(D,"width"))},d=function(D,r){var L=U(D,rb),m=0;if(L&&(L.forEach(function(V){m+=V}),m>0)){for(var y=U(D,"colors")||Ko,O=U(D,"startAngle")||0,X=U(D,"hollow"),u=U(D,ld),n=U(D,fi),W=U(D,Cn),Y=u?new Cq:J,f=r.x,V=r.y,B=r.width,d=r.height,v=f+B/2,Q=V+d/2,T=c(B,d)/2,h=0,G=0;G<L.length;G++){var t=L[G],s=l*t/m,K=O+s;if(b.fillStyle=y[h++],h===y.length&&(h=0),b.beginPath(),X){var i=v+C(O)*T/2,Z=Q+j(O)*T/2,q=v+C(K)*T,z=Q+j(K)*T;b.moveTo(i,Z),b.arc(v,Q,T/2,O,K,!1),b.lineTo(q,z),b.arc(v,Q,T,K,O,!0)}else b.moveTo(v,Q),b.arc(v,Q,T,K,O,!0);Y&&(s=(O+K)/2,Y.add({text:jo(u)?u(t,G,m,x):t,x:v+.75*C(s)*T,y:Q+.75*j(s)*T})),b.closePath(),b.fill(),O=K}Y&&Y.each(function(Z){yc(b,Z.text,n,W,Z.x,Z.y,0,0,$i)})}},T=function(Z,c){var p=U(Z,jc);if(p&&p.length>0){var w=p.length,K=U(Z,ld),X=U(Z,fi),g=U(Z,Cn),i=K?new Cq:J,m=U(Z,"minValue")||0,A=U(Z,"maxValue");if(A==J&&(A=0,p.forEach(function(j){j.values.forEach(function(t){A=S(A,t)})})),m===A)return;for(var T=c.height/(A-m),s=c.y+A*T,Q=U(p[0],rb).length,l=c.width/(3*Q+1),C=2*l/w,a=0,z=0;w>z;z++)for(var G=p[z],k=U(G,Lf),B=U(G,"colors"),N=U(G,rb),Y=0;Q>Y;Y++){B?b.fillStyle=B[Y]:k?b.fillStyle=k:(b.fillStyle=Ko[a++],a===Ko.length&&(a=0));var R=N[Y],_=R*T,I=c.x+(1+3*Y)*l+z*C;if(Wl(b,I,s-_,C,_),i){var W=jo(K)?K(R,Y,G,x):R,h=cf(X,W).height;i.add({x:I,y:s-_-h,width:C,height:h,text:W})}}i&&i.each(function(A){yc(b,A.text,X,g,A.x,A.y,A.width,A.height,$i)})}},u=function(h,X){var l=U(h,jc);if(l&&l.length>0){var f=l.length,T=U(l[0],rb).length,F=X.width/(3*T+1),r=0,V=U(h,"maxValue"),G=U(h,ld),O=U(h,fi),u=U(h,Cn),E=G?new Cq:J;if(V==J){V=0;for(var c=0;T>c;c++){for(var p=0,z=0;f>z;z++)p+=U(l[z],rb)[c];V=S(V,p)}}if(V>0){for(var c=0;T>c;c++)for(var e=X.y+X.height,z=0;f>z;z++){var a=l[z],j=U(a,Lf),B=U(a,rb)[c],i=B/V*X.height;j?b.fillStyle=j:(b.fillStyle=Ko[r++],r===Ko.length&&(r=0)),e-=i;var Y={x:X.x+(1+3*c)*F,y:e,width:2*F,height:i};Wl(b,Y.x,Y.y,Y.width,Y.height),E&&(Y.text=jo(G)?G(B,c,a,x):B,E.add(Y))}E&&E.each(function(H){yc(b,H.text,O,u,H.x,H.y,H.width,H.height,$i)})}}},I=function(F,p){var d=U(F,jc);if(d&&d.length>0){for(var g=d.length,Z=U(d[0],rb).length,R=p.width/(3*Z+1),a=0,I=U(F,ld),q=U(F,fi),W=U(F,Cn),E=I?new Cq:J,A=0;Z>A;A++){for(var V=0,$=0;g>$;$++)V+=U(d[$],rb)[A];if(V>0){var G=p.y+p.height;for($=0;g>$;$++){var _=d[$],z=U(_,Lf),X=U(_,rb)[A],O=X/V*p.height;z?b.fillStyle=z:(b.fillStyle=Ko[a++],a===Ko.length&&(a=0)),G-=O;var B={x:p.x+(1+3*A)*R,y:G,width:2*R,height:O};Wl(b,B.x,B.y,B.width,B.height),E&&(B.text=jo(I)?I(X,A,_,x):X,E.add(B))}}}E&&E.each(function(j){yc(b,j.text,q,W,j.x,j.y,j.width,j.height,$i)})}},f=function(N,H){var j=U(N,jc);if(j&&j.length>0){var Z=j.length,M=U(N,"minValue")||0,h=U(N,"maxValue");if(h==J&&(h=0,j.forEach(function(Q){Q.values.forEach(function(z){h=S(h,z)})})),M===h)return;for(var w=H.height/(h-M),g=H.y+h*w,y=U(j[0],rb).length,V=H.width/(3*y+1),v=0,L=U(N,"lineWidth")||2,o=U(N,"line3d"),F=U(N,"linePoint"),s=U(N,ld),C=U(N,fi),Y=U(N,Cn),z=0;Z>z;z++){var Q=j[z],P=U(Q,Lf),a=U(Q,rb);P?b.strokeStyle=P:(P=b.strokeStyle=Ko[v++],v===Ko.length&&(v=0)),b.beginPath();for(var p=0;y>p;p++){var n=H.x+(2+3*p)*V,B=g-a[p]*w;0===p?b.moveTo(n,B):b.lineTo(n,B)}if(b.lineWidth=L,b.stroke(),o&&Tr(b,P,J,L,i),F||s){var e,q=L/2+2;for(p=0;y>p;p++){var d=a[p];if(n=H.x+(2+3*p)*V,B=g-d*w,jo(F)?F(b,n,B,P,p,Q,x):F&&(b.fillStyle=P,b.beginPath(),b.arc(n,B,q,0,l,!0),b.fill()),jo(s)?e=s(d,p,Q,x):s&&(e=d),e){var r=cf(C,e).height,k=b.shadowBlur;if(k){var $=b.shadowOffsetX,G=b.shadowOffsetY,E=b.shadowColor;b.shadowOffsetX=0,b.shadowOffsetY=0,b.shadowBlur=0,b.shadowColor=J}yc(b,e,C,Y,n,B-r-q+2,0,r,$i),k&&(b.shadowOffsetX=$,b.shadowOffsetY=G,b.shadowBlur=k,b.shadowColor=E)}}}}}},t={border:R,image:z,text:B,pieChart:d,columnChart:T,stackedColumnChart:u,percentageColumnChart:I,lineChart:f};return function(D,X,O,P,v,h,C,d,S,f){if(X&&v&&h){b=D,x=C,y=d,i=y?y._zoom?y._zoom:1:1,A=S,m=f;var K=v,R=h;if(zc()){var M,B,n;0===b[Fk]?zc[0]&&(M=!0):M=!0,b.texureImage2D?zc[1]&&(B=!0):B=!0,b.texureImage3D?zc[2]&&(n=!0):n=!0,M&&B&&n&&(K=O,R=P)}if(X.tagName)return b.drawImage(X,K,R,v,h),void 0;if(U(X,"visible")!==!1){A||(A=dg(X.color,x,y)),f||(m=dg(X.blendMode,x,y));var p=Sf(X,x,y,v),Z=tk(X,x,y,h),l={x:0,y:0,width:p,height:Z,fitSize:U(X,"fitSize")},u=U(X,"clip"),E=U(X,"opacity");l.fitSize&&(l.widthScale=p/dg(X.width,x,y),l.heightScale=Z/dg(X.height,x,y)),b.save(),b.interactiveInfo&&(b.interactiveInfo.stacks.push({t:[K,R]}),b.interactiveInfo.stacks.push({s:[v/p,h/Z]})),zs(b,K,R),(p!==v||Z!==h)&&b.scale(v/p,h/Z),u&&(jo(u)?u(b,p,Z,x,y,X):(b.beginPath(),b.rect(0,0,p,Z),b.clip())),E!=J&&(b.globalAlpha*=E),U(X,"comps").forEach(function(o){if(U(o,xq)!==!1){Vl.splice(0,0,o);var O=U(o,"opacity"),P=U(o,"shadow"),S=U(o,"type"),s=a(o,l);if(O!=J){var u=b.globalAlpha;b.globalAlpha*=O}if(P){var m=b.shadowOffsetX,E=b.shadowOffsetY,j=b.shadowBlur,c=b.shadowColor,n=U(o,"shadowOffsetX"),D=U(o,"shadowOffsetY"),I=U(o,"shadowBlur"),f=k(o,"shadowColor");b.shadowOffsetX=(n==J?3:n)*i,b.shadowOffsetY=(D==J?3:D)*i,b.shadowBlur=(I==J?6:I)*i,b.shadowColor=f||k(nr)}if("save"===S)b.save();else if("endClip"===S||"restore"===S)b.restore();else if("clip"===S)b.save(),rd(b,U(o,"points",g),U(o,"segments",F),!0),b.clip();else if(op[S])s=s||{x:0,y:0,width:l.width,height:l.height},$(o,S,s,l);else if(S===el)$(o,S,s,l);else if("SVGPath"===S)V(o,S,s);else{s=s||{x:0,y:0,width:l.width,height:l.height};var z=U(o,uq),W=U(o,"scaleX"),T=U(o,"scaleY"),M=L(o),X=H(o,s,s,z,W,T,M);if(jo(S))q(o,S),r.drawCompType(S,b,s,o,x,y);else if(r.getCompType(S)){var B=r.getCompType(S),C=B.func||B;q(o,B),r.drawCompType(C,b,s,o,x,y)}else t[S]?t[S](o,s):r.getCompType(S)===e&&Qg.test(S)&&Db(S);X&&Q()}P&&(b.shadowOffsetX=m,b.shadowOffsetY=E,b.shadowBlur=j,b.shadowColor=c),O!=J&&(b.globalAlpha=u),Vl.splice(0,1)}}),b.interactiveInfo&&(b.interactiveInfo.stacks.pop(),b.interactiveInfo.stacks.pop()),b.restore()}}}}();r.getCurrentComp=function(){return Vl[0]},r.getParentComp=function(){return Vl[1]},r.getInternal=function(){return{isEnter:Un,isEsc:no,isSpace:_d,isLeft:Jf,isUp:mk,isRight:Yk,isDown:Vn,addMethod:vf,superCall:Vp,toPointsArray:rg,translateAndScale:Gl,appendArray:im,createWorldMatrix:fj,vec3TransformMat4:Nq,setCanvas:Er,createDiv:cd,createView:Eq,createCanvas:Rk,createImage:Ro,initContext:Bb,layout:zq,fillRect:Wl,Mat:pc,drawBorder:Uj,isString:se,setBorder:_f,getPropertyValue:kn,setPropertyValue:ai,drawVerticalLine:Tj,draw3DRect:ui,getPinchDist:Lh,isSameRect:ce,getPosition:Dh,intersectionLineRect:Al,getNodeRect:yd,getEdgeAgentPosition:uo,getImageWidth:Sf,getImageHeight:tk,initItemElement:qg,drawPoints:rd,createG2:gb,closePopup:$q,isH:Tq,createAnim:Qp,createNormalMatrix:Kk,createNormals:Ac,toFloatArray:Ib,glMV:Zk,batchShape:sd,createNodeMatrix:ao,getFaceInfo:Hr,transformAppend:ub,drawFaceInfo:Sl,to3dPointsArray:Ih,setGLDebugMode:function(v){Oh=v},cube:function(){return{vs:yb,is:Xo,uv:ul}},ui:function(){return{DataUI:Sp,NodeUI:ue,EdgeUI:Wi,GroupUI:Vr,ShapeUI:Sb,GridUI:Zn,Data3dUI:Mc,Node3dUI:_e,Shape3dUI:Wp}},getInternalVersion:function(){return"U2FsdGVkX19XNhpF8v6BAfinP9elXnnDzVaH9bV6gf8="},getDragger:function(){return to},addMSMap:function(f){vf(Xp,f)},k:K}},function(B){function X(L,M){L!=J&&(M==J&&lf!=typeof L?this._54O(L,256):this._54O(L,M))}function f(){return new X(J)}function F(e,k,x,G,M,b){for(;--b>=0;){var h=k*this[e++]+x[G]+M;M=N(h/67108864),x[G++]=67108863&h}return M}function Y(p,j,k,w,G,l){for(var R=32767&j,Y=j>>15;--l>=0;){var Q=32767&this[p],c=this[p++]>>15,D=Y*Q+c*R;Q=R*Q+((32767&D)<<15)+k[w]+(1073741823&G),G=(Q>>>30)+(D>>>15)+Y*c+(G>>>30),k[w++]=1073741823&Q}return G}function U(x,P,_,y,F,M){for(var b=16383&P,W=P>>14;--M>=0;){var d=16383&this[x],E=this[x++]>>14,f=W*d+E*b;d=b*d+((16383&f)<<14)+_[y]+F,F=(d>>28)+(f>>14)+W*E,_[y++]=268435455&d}return F}function E(T){return Ll.charAt(T)}function D(K,k){var z=$p[K.charCodeAt(k)];return z==J?-1:z}function b(C){for(var w=this.t-1;w>=0;--w)C[w]=this[w];C.t=this.t,C.s=this.s}function y($){this.t=1,this.s=0>$?-1:0,$>0?this[0]=$:-1>$?this[0]=$+this.DV:this.t=0}function s(E){var q=f();return q._58O(E),q}function Q(r,B){var k,U=this;if(16==B)k=4;else if(8==B)k=3;else if(256==B)k=8;else if(2==B)k=1;else if(32==B)k=5;else{if(4!=B)return U.fromRadix(r,B),void 0;k=2}U.t=0,U.s=0;for(var e=r.length,M=!1,b=0;--e>=0;){var w=8==k?255&r[e]:D(r,e);0>w?"-"==r.charAt(e)&&(M=!0):(M=!1,0==b?U[U.t++]=w:b+k>U.DB?(U[U.t-1]|=(w&(1<<U.DB-b)-1)<<b,U[U.t++]=w>>U.DB-b):U[U.t-1]|=w<<b,b+=k,b>=U.DB&&(b-=U.DB))}8==k&&0!=(128&r[0])&&(U.s=-1,b>0&&(U[U.t-1]|=(1<<U.DB-b)-1<<b)),U._57O(),M&&X.ZERO._78O(U,U)}function A(){for(var y=this,v=y.s&y.DM;y.t>0&&y[y.t-1]==v;)--y.t}function M(N){var B=this;if(B.s<0)return"-"+B._85O()[fj](N);var p;if(16==N)p=4;else if(8==N)p=3;else if(2==N)p=1;else if(32==N)p=5;else{if(4!=N)return B.toRadix(N);p=2}var g,q=(1<<p)-1,P=!1,m="",u=B.t,a=B.DB-u*B.DB%p;if(u-->0)for(a<B.DB&&(g=B[u]>>a)>0&&(P=!0,m=E(g));u>=0;)p>a?(g=(B[u]&(1<<a)-1)<<p-a,g|=B[--u]>>(a+=B.DB-p)):(g=B[u]>>(a-=p)&q,0>=a&&(a+=B.DB,--u)),g>0&&(P=!0),P&&(m+=E(g));return P?m:"0"}function P(){var C=f();return X.ZERO._78O(this,C),C}function n(){return this.s<0?this._85O():this}function I(y){var G=this,w=G.s-y.s;if(0!=w)return w;var r=G.t;if(w=r-y.t,0!=w)return G.s<0?-w:w;for(;--r>=0;)if(0!=(w=G[r]-y[r]))return w;return 0}function k(A){var y,W=1;return 0!=(y=A>>>16)&&(A=y,W+=16),0!=(y=A>>8)&&(A=y,W+=8),0!=(y=A>>4)&&(A=y,W+=4),0!=(y=A>>2)&&(A=y,W+=2),0!=(y=A>>1)&&(A=y,W+=1),W}function w(){var S=this;return S.t<=0?0:S.DB*(S.t-1)+k(S[S.t-1]^S.s&S.DM)}function T(U,A){var k;for(k=this.t-1;k>=0;--k)A[k+U]=this[k];for(k=U-1;k>=0;--k)A[k]=0;A.t=this.t+U,A.s=this.s}function W(p,o){for(var U=p;U<this.t;++U)o[U-p]=this[U];o.t=S(this.t-p,0),o.s=this.s}function p(H,r){var x,R=this,j=H%R.DB,b=R.DB-j,g=(1<<b)-1,O=N(H/R.DB),z=R.s<<j&R.DM;for(x=R.t-1;x>=0;--x)r[x+O+1]=R[x]>>b|z,z=(R[x]&g)<<j;for(x=O-1;x>=0;--x)r[x]=0;r[O]=z,r.t=R.t+O+1,r.s=R.s,r._57O()}function t(F,P){var h=this;P.s=h.s;var l=N(F/h.DB);if(l>=h.t)return P.t=0,void 0;var x=F%h.DB,I=h.DB-x,L=(1<<x)-1;P[0]=h[l]>>x;for(var X=l+1;X<h.t;++X)P[X-l-1]|=(h[X]&L)<<I,P[X-l]=h[X]>>x;x>0&&(P[h.t-l-1]|=(h.s&L)<<I),P.t=h.t-l,P._57O()}function G(V,z){for(var v=this,i=0,L=0,S=c(V.t,v.t);S>i;)L+=v[i]-V[i],z[i++]=L&v.DM,L>>=v.DB;if(V.t<v.t){for(L-=V.s;i<v.t;)L+=v[i],z[i++]=L&v.DM,L>>=v.DB;L+=v.s}else{for(L+=v.s;i<V.t;)L-=V[i],z[i++]=L&v.DM,L>>=v.DB;L-=V.s}z.s=0>L?-1:0,-1>L?z[i++]=v.DV+L:L>0&&(z[i++]=L),z.t=i,z._57O()}function i(G,j){var z=this.abs(),C=G.abs(),f=z.t;for(j.t=f+C.t;--f>=0;)j[f]=0;for(f=0;f<C.t;++f)j[f+z.t]=z.am(0,C[f],j,f,0,z.t);j.s=0,j._57O(),this.s!=G.s&&X.ZERO._78O(j,j)}function m(t){for(var Y=this.abs(),S=t.t=2*Y.t;--S>=0;)t[S]=0;for(S=0;S<Y.t-1;++S){var O=Y.am(S,Y[S],t,2*S,0,1);(t[S+Y.t]+=Y.am(S+1,2*Y[S],t,2*S+1,O,Y.t-S-1))>=Y.DV&&(t[S+Y.t]-=Y.DV,t[S+Y.t+1]=1)}t.t>0&&(t[t.t-1]+=Y.am(S,Y[S],t,2*S,0,1)),t.s=0,t._57O()}function z(h,i,Q){var W=h.abs(),z=this;if(!(W.t<=0)){var D=z.abs();if(D.t<W.t)return i!=J&&i._58O(0),Q!=J&&z._77O(Q),void 0;Q==J&&(Q=f());var b=f(),V=z.s,_=h.s,n=z.DB-k(W[W.t-1]);n>0?(W._44O(n,b),D._44O(n,Q)):(W._77O(b),D._77O(Q));var E=b.t,B=b[E-1];if(0!=B){var T=B*(1<<z.F1)+(E>1?b[E-2]>>z.F2:0),A=z.FV/T,c=(1<<z.F1)/T,j=1<<z.F2,y=Q.t,m=y-E,q=i==J?f():i;for(b._59O(m,q),Q._52O(q)>=0&&(Q[Q.t++]=1,Q._78O(q,Q)),X.ONE._59O(E,q),q._78O(b,b);b.t<E;)b[b.t++]=0;for(;--m>=0;){var L=Q[--y]==B?z.DM:N(Q[y]*A+(Q[y-1]+j)*c);if((Q[y]+=b.am(0,L,Q,m,0,E))<L)for(b._59O(m,q),Q._78O(q,Q);Q[y]<--L;)Q._78O(q,Q)}i!=J&&(Q._45O(E,i),V!=_&&X.ZERO._78O(i,i)),Q.t=E,Q._57O(),n>0&&Q._46O(n,Q),0>V&&X.ZERO._78O(Q,Q)}}}function x(x){var H=f();return this.abs()._49O(x,J,H),this.s<0&&H._52O(X.ZERO)>0&&x._78O(H,H),H}function V(H){this.m=H}function R(t){return t.s<0||t._52O(this.m)>=0?t.mod(this.m):t}function r(s){return s}function h(A){A._49O(this.m,J,A)}function e(T,H,R){T._47O(H,R),this._74O(R)}function v(s,E){s._48O(E),this._74O(E)}function g(){if(this.t<1)return 0;var G=this[0];if(0==(1&G))return 0;var i=3&G;return i=15&i*(2-(15&G)*i),i=255&i*(2-(255&G)*i),i=65535&i*(2-(65535&(65535&G)*i)),i=i*(2-G*i%this.DV)%this.DV,i>0?this.DV-i:-i}function a(h){var v=this;v.m=h,v.mp=h._50O(),v.mpl=32767&v.mp,v.mph=v.mp>>15,v.um=(1<<h.DB-15)-1,v.mt2=2*h.t}function $(I){var $=f();return I.abs()._59O(this.m.t,$),$._49O(this.m,J,$),I.s<0&&$._52O(X.ZERO)>0&&this.m._78O($,$),$}function H(N){var W=f();return N._77O(W),this._74O(W),W}function _(R){for(var r=this;R.t<=r.mt2;)R[R.t++]=0;for(var S=0;S<r.m.t;++S){var z=32767&R[S],v=z*r.mpl+((z*r.mph+(R[S]>>15)*r.mpl&r.um)<<15)&R.DM;for(z=S+r.m.t,R[z]+=r.m.am(0,v,R,S,0,r.m.t);R[z]>=R.DV;)R[z]-=R.DV,R[++z]++}R._57O(),R._45O(r.m.t,R),R._52O(r.m)>=0&&R._78O(r.m,R)}function Jf(x,o){x._48O(o),this._74O(o)}function rq(v,X,Z){v._47O(X,Z),this._74O(Z)}function Qc(){return 0==(this.t>0?1&this[0]:this.s)}function Er(D,n){if(D>4294967295||1>D)return X.ONE;var c=f(),J=f(),K=n._73O(this),g=k(D)-1;for(K._77O(c);--g>=0;)if(n._76O(c,J),(D&1<<g)>0)n._75O(J,K,c);else{var W=c;c=J,J=W}return n.revert(c)}function uq(g,H){var C;return C=256>g||H._51O()?new V(H):new a(H),this.exp(g,C)}function il(){var e=this;if(e.s<0){if(1==e.t)return e[0]-e.DV;if(0==e.t)return-1}else{if(1==e.t)return e[0];if(0==e.t)return 0}return(e[1]&(1<<32-e.DB)-1)<<e.DB|e[0]}function Wn(j,E){return new X(j,E)}function jg(){var z=this;z.n=J,z.e=0,z.d=J,z.p=J,z.q=J,z.dmp1=J,z.dmq1=J,z._10A=J}function nl(C){return C._53O(this.e,this.n)}function Ze(L){var d,h,n,_="",$=0;for(d=0;d<L.length&&L.charAt(d)!=vn;++d)n=on.indexOf(L.charAt(d)),0>n||(0==$?(_+=E(n>>2),h=3&n,$=1):1==$?(_+=E(h<<2|n>>4),h=15&n,$=2):2==$?(_+=E(h),_+=E(n>>2),h=3&n,$=3):(_+=E(h<<2|n>>4),_+=E(15&n),$=0));return 1==$&&(_+=E(h<<2)),_}function vj(_){var b=_.split(""),e=Ze(_);return b.forEach(function(v){var P=v.length;
P>0&&e&&(Xj+=L(v))}),e}function xj(F,g){var r=Fr._4O.Util._56O(F,"ss"),L={},Y=0;return L.v=r==g,L.t=1,L.s=0>Y?-1:0,cq=L.v,Y>0?L[0]=Y:-1>Y?L[0]=Y+L.DV:L.t=0,[r,L]}function Iq(h){var k=38,g=h.substring(0,k);if(g&&30==g.indexOf("05000420")){var G=["ss",h.substring(k)];return G}return[]}function qq(c,v){v=v.replace(Lg,""),v=v.replace(/[ \n]+/g,"");var x=Wn(v,16);if(x._55O()>this.n._55O())return 0;var n=this._37O(x),m=n[fj](16).replace(/^1f+00/,""),h=Iq(m);if(0==h.length)return!1;for(var E,T,I,V=.5,e=ap,U=[0,.5,.75,.875,.9375],R=[],b=[],B=[],f=l/e,a=h[1],O=xj(c,a)[0],G=0,o=0;G<U.length;G++){var g=0===G%2?0:.5;for(E=0;e>=E;E++)T=(E+g)*f,I=1-U[G],R.push(C(T)*V*I,-V+2*U[G]*V,-j(T)*V*I),b.push((E+g)/e,I)}for(G=0;G<U.length-1;G++){var D=G*(e+1),Y=(G+1)*(e+1);for(E=0;e>E;E++)B.push(D+E,Y+E+1,Y+E,D+E,D+E+1,Y+E+1)}return B.forEach(function(r){o+=r}),a==O&&o>10}var Bj,uf=0xdeadbeefcafe,lm=15715070==(16777215&uf),fj="toString",Ie="",We="nat",qg=function(){};d=B["D"+11182[fj](q(2,5))];var to=X.prototype;Ej+=Qb.substr(0,1);var mg=B.navigator?B.navigator.appName:"";lm&&"Microsoft Internet Explorer"==mg?(to.am=Y,Bj=30):lm&&"Netscape"!=mg?(to.am=F,Bj=26):(to.am=U,Bj=28),to.DB=Bj,to.DM=(1<<Bj)-1,to.DV=1<<Bj;var Vd=52;to.FV=q(2,Vd),to.F1=Vd-Bj,to.F2=2*Bj-Vd;var qn,Uj,Ll="0123456789abcdefghijklmnopqrstuvwxyz",$p=[],bi=function(N){return String.fromCharCode(N)};for(qn="0".charCodeAt(0),Uj=0;9>=Uj;++Uj)$p[qn++]=Uj;for(qn="a".charCodeAt(0),Uj=10;36>Uj;++Uj)$p[qn++]=Uj;for(qn="A".charCodeAt(0),Uj=10;36>Uj;++Uj)$p[qn++]=Uj;var Se=V.prototype;Se._73O=R,Se.revert=r,Se._74O=h,Se._75O=e,Se._76O=v;var dq=a.prototype;dq._73O=$,dq.revert=H,dq._74O=_,dq._75O=rq,dq._76O=Jf,to._77O=b,to._58O=y,to._54O=Q,to._57O=A,to._59O=T,to._45O=W,to._44O=p,to._46O=t,to._78O=G,to._47O=i,to._48O=m,to._49O=z,to._50O=g,to._51O=Qc,to.exp=Er,to.toString=M,to._85O=P,to.abs=n,to._52O=I,to._55O=w,to.mod=x,to._53O=uq,X.ZERO=s(0),X.ONE=s(1),to._86O=il;var bs=function(W,c){var n=this;n.isPublic=!0,typeof W!==lf?(n.n=W,n.e=c):W!=J&&c!=J&&W.length>0&&c.length>0&&(n.n=Wn(W,16),n.e=L(c,16))};ob=function(){var R,$,c=vj(Qr),S=c.substr(0,4),C=c.substr(4,2),W=c.substr(6,2),Q=1,n=!Q,M=K,z=[],o=Qi.charAt(7);if(d&&(d[fj]().indexOf(We)<0||d[Ej][fj]().indexOf(We)<0||!c?R=eb(Kf[o]):(c=new d(S-0,C-Q,W-0),$=c.setHours(9),d[Ej]()>$?R=eb(Kf[o]):n=!0)),c&&R&&M){for(var q in R)z.push(q);var G,r=R[z[0]],U=R[z[1]],l=R[z[2]],v=R[z[4]],k=R[z[5]],f=R[z[6]],A=Sg._27O(M);A&&f&&(G=r+U+l+v+""+k,G&&A._31O(G,f)&&(n=!0))}return n||(lb=If),o};var Zr=jg.prototype;Zr._37O=nl,Zr._38O=bs;var on="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vn="=",rl=25,jb=10,Qr="IBgQAQ==",ph=ph||function(v,f){var J={},l=J._7A={},z=l._6A=function(){function J(){}return{_80O:function(G){J.prototype=this;var S=new J;return G&&S._5A(G),S.hasOwnProperty("_82O")||(S._82O=function(){S.$super._82O.apply(this,arguments)}),S._82O.prototype=S,S.$super=this,S},_3A:function(){var _=this._80O();return _._82O.apply(_,arguments),_},_82O:function(){},_5A:function(J){for(var Y in J)J.hasOwnProperty(Y)&&(this[Y]=J[Y]);J.hasOwnProperty(fj)&&(this.toString=J.toString)},_88O:function(){return this._82O.prototype._80O(this)}}}(),g=l._39O=z._80O({_82O:function(T,j){T=this._84O=T||[],this._65O=j!=f?j:4*T.length},toString:function(f){return(f||b).stringify(this)},_89O:function(u){var c=this._84O,l=u._84O,F=this._65O,v=u._65O;if(this._57O(),F%4)for(var b=0;v>b;b++){var L=255&l[b>>>2]>>>24-8*(b%4);c[F+b>>>2]|=L<<24-8*((F+b)%4)}else if(l.length>65535)for(var b=0;v>b;b+=4)c[F+b>>>2]=l[b>>>2];else c.push.apply(c,l);return this._65O+=v,this},_57O:function(){var k=this._84O,u=this._65O;k[u>>>2]&=4294967295<<32-8*(u%4),k.length=o(u/4)},_88O:function(){var y=z._88O.call(this);return y._84O=this._84O.slice(0),y},_87O:function(C){for(var G=[],P=0;C>P;P+=4)G.push(0|4294967296*O);return new g._82O(G,C)}}),F=J._2A={},b=F._69O={stringify:function(S){var $,v=S._84O,i=S._65O,Y=[];for($=0;i>$;$++){var W=255&v[$>>>2]>>>24-8*($%4);Y.push((W>>>4).toString(16)),Y.push((15&W).toString(16))}return Y.join("")},_68O:function(D){for(var O=D.length,M=[],d=0;O>d;d+=2)M[d>>>3]|=L(D.substr(d,2),16)<<24-4*(d%8);return new g._82O(M,O/2)}},i=F._8A={stringify:function(t){var K,H=t._84O,b=t._65O,S=[];for(K=0;b>K;K++){var W=255&H[K>>>2]>>>24-8*(K%4);S.push(bi(W))}return S.join("")},_68O:function(f){var p,m=f.length,r=[];for(p=0;m>p;p++)r[p>>>2]|=(255&f.charCodeAt(p))<<24-8*(p%4);return new g._82O(r,m)}},M=F._9A={stringify:function(F){try{return decodeURIComponent(escape(i.stringify(F)))}catch(P){throw new Error("")}},_68O:function(J){return i._68O(unescape(encodeURIComponent(J)))}},m=l._32O=z._80O({_1A:function(){this._83O=new g._82O,this._23O=0},_33O:function(t){typeof t==lf&&(t=M._68O(t)),this._83O._89O(t),this._23O+=t._65O},_25O:function(R){var x=this._83O,v=x._84O,P=x._65O,F=this._79O,e=4*F,y=P/e;y=R?o(y):S((0|y)-this._22O,0);var E=y*F,K=c(4*E,P);if(E){for(var m=0;E>m;m+=F)this._20O(v,m);var W=v.splice(0,E);x._65O-=K}return new g._82O(W,K)},_88O:function(){var t=z._88O.call(this);return t._83O=this._83O._88O(),t},_22O:0});l._66O=m._80O({cfg:z._80O(),_82O:function(v){this.cfg=this.cfg._80O(v),this._1A()},_1A:function(){m._1A.call(this),this._34O()},_81O:function(c){return this._33O(c),this._25O(),this},_72O:function(h){h&&this._33O(h);var R=this._21O();return R},_79O:16,_26O:function(S){return function(P,K){return new S._82O(K)._72O(P)}},_19O:function(b){return function(s,H){return new I._71O._82O(b,H)._72O(s)}}});var I=J._67O={};return J}();!function(){var B=ph,o=B._7A,H=o._39O,l=o._66O,L=B._67O,c=[],n=[];!function(){function v(h){for(var k=Z(h),E=2;k>=E;E++)if(!(h%E))return!1;return!0}function b(J){return 0|4294967296*(J-(0|J))}for(var D=2,L=0;64>L;)v(D)&&(8>L&&(c[L]=b(q(D,.5))),n[L]=b(q(D,1/3)),L++),D++}();var R=[],P=L._41O=l._80O({_34O:function(){this._64O=new H._82O(c.slice(0))},_20O:function(O,W){for(var E=this._64O._84O,k=E[0],e=E[1],G=E[2],D=E[3],X=E[4],b=E[5],S=E[6],a=E[7],Z=0;64>Z;Z++){if(16>Z)R[Z]=0|O[W+Z];else{var H=R[Z-15],h=(H<<25|H>>>7)^(H<<14|H>>>18)^H>>>3,T=R[Z-2],o=(T<<15|T>>>17)^(T<<13|T>>>19)^T>>>10;R[Z]=h+R[Z-7]+o+R[Z-16]}var Q=X&b^~X&S,v=k&e^k&G^e&G,z=(k<<30|k>>>2)^(k<<19|k>>>13)^(k<<10|k>>>22),B=(X<<26|X>>>6)^(X<<21|X>>>11)^(X<<7|X>>>25),q=a+B+Q+n[Z]+R[Z],s=z+v;a=S,S=b,b=X,X=0|D+q,D=G,G=e,e=k,k=0|q+s}E[0]=0|E[0]+k,E[1]=0|E[1]+e,E[2]=0|E[2]+G,E[3]=0|E[3]+D,E[4]=0|E[4]+X,E[5]=0|E[5]+b,E[6]=0|E[6]+S,E[7]=0|E[7]+a},_21O:function(){var B=this._83O,c=B._84O,w=8*this._23O,J=8*B._65O;return c[J>>>5]|=128<<24-J%32,c[(J+64>>>9<<4)+14]=N(w/4294967296),c[(J+64>>>9<<4)+15]=w,B._65O=4*c.length,this._25O(),this._64O},_88O:function(){var K=l._88O.call(this);return K._64O=this._64O._88O(),K}});B._41O=l._26O(P),B._42O=l._19O(P)}();var Lg=new RegExp("");Lg.compile("[^0-9a-f]","gi"),jg._28O=-1,jg._29O=-2,Zr._31O=qq,Zr._63O=qq,jg._43O=-2;var Jr=new function(){var I=this;I._5O=function(y,H){if("8"!=y.substring(H+2,H+3))return 1;var A=L(y.substring(H+3,H+4));return 0==A?-1:A>0&&10>A?A+1:-2},I._13O=function(t,j){var O=I._5O(t,j);return 1>O?"":t.substring(j+2,j+2+2*O)},I._12O=function(R,n){var e=I._13O(R,n);if(""==e)return-1;var x;return x=L(e.substring(0,1))<8?new X(e,16):new X(e.substring(2),16),x._86O()},I._6O=function(q,X){var A=I._5O(q,X);return 0>A?A:X+2*(A+1)},I._11O=function(Q,D){var _=I._6O(Q,D),G=I._12O(Q,D);return Q.substring(_,_+2*G)},I._10O=function(i,y){var w=I._6O(i,y),X=I._12O(i,y);return w+2*X},I._7O=function(e,_){var K=[],c=I._6O(e,_);K.push(c);for(var W=I._12O(e,_),d=c,E=0;;){var V=I._10O(e,d);if(V==J||V-c>=2*W)break;if(E>=200)break;K.push(V),d=V,E++}return K}};if(Jr._90O=bi(jb+24),Jr._91O=u+bi(jb*jb+8),Fr==J||!Fr)var Fr={};Fr._4O!=J&&Fr._4O||(Fr._4O={});var _r=Fr._4O;Fr._4O.Util=new function(){var R=this;R._56O=function(n){var A=new Fr._4O._3O;return A._30O(n)},R._4A=function(V){var z=new Fr._4O._3O;return z._36O(V)},R._11A=function(u){var T=new _r._3O;return T._30O(u)}},Fr._4O._3O=function(){var T=this;T._8O=function(i,U){if("ss"==i&&"cj"==U){try{T.md=ph._67O._41O._3A()}catch(H){qg(Ie)}T._24O=function(s){T.md._81O(s)},T._35O=function(H){var M=ph._2A._69O._68O(H);T.md._81O(M)},T._60O=function(){var p=T.md._72O();return p[fj](ph._2A._69O)},T._30O=function(b){return T._24O(b),T._60O()},T._36O=function(C){return T._35O(C),T._60O()}}},T._24O=function(){qg(Ie)},T._35O=function(){qg(Ie)},T._60O=function(){qg(Ie)},T._30O=function(){qg(Ie)},T._36O=function(){qg(Ie)},T._8O("ss","cj")},Ql=function(N){var B=ac[ge[7]],j=1,w=!1;if(qs.a!=ac[ug])return qs.a;if(qs.forEach(function(U){j*=U}),N>j){if(B){B=B.split(Jr._90O);var L=B[3],p=B[7],W=B[11],x=B[19],M=B[23],n=B[27],R=L+p+W+x+M;w=fg()(R,n)}w||(Sp.prototype._42=Sk)}else w=!0;return qs.a=w,w},rl=String.fromCharCode(rl+20);var ko=function(k){return k=k.replace(Lg,Ie),k=k.replace(/[ \n]+/g,Ie)},bc="30",ze="06",tq="02",nj="03",jk=Wn,ho=/^1f+00/,Sg=function(){var o;return o={_18O:function(y){var J=y,G=J.replace(/\s+/g,""),o=Ze(G);return o},_14O:function(I){var e=this._18O(I),E=this._15O(e);return E},_15O:function(u){var P=this._17O(u);if("2a864886f70d010101"==P._61O){var k=this._16O(P.key),h=new jg;return h._38O(k.n,k.e),h}qg(Ie)},_16O:function(z){var n={};z.substr(0,2)!=bc&&qg(Ie);var J=Jr._7O(z,0);return 2!=J.length&&qg(Ie),z.substr(J[0],2)!=tq&&qg(Ie),n.n=Jr._11O(z,J[0]),z.substr(J[1],2)!=tq&&qg(Ie),n.e=Jr._11O(z,J[1]),n},_17O:function(Y){var q={};q._40O=J;var C=Jr._7O(Y,0);2!=C.length&&qg(Ie);var h=C[0];Y.substr(h,2)!=bc&&qg(Ie);var A=Jr._7O(Y,h);return 2!=A.length&&qg(Ie),Y.substr(A[0],2)!=ze&&qg(Ie),q._61O=Jr._11O(Y,A[0]),Y.substr(A[1],2)==ze?q._40O=Jr._11O(Y,A[1]):Y.substr(A[1],2)==bc&&(q._40O={},q._40O.p=Jr._70O(Y,A[1],[0],tq),q._40O.q=Jr._70O(Y,A[1],[1],tq),q._40O.g=Jr._70O(Y,A[1],[2],tq)),Y.substr(C[1],2)!=nj&&qg(Ie),q.key=Jr._11O(Y,C[1]).substr(2),q}},o._17O?o:J}(),Wj=Sg._27O=function(e){return Sg._14O(e)};fg=function(){return function(t,e){e=ko(e);var $=jk(e,q(2,4)),v=this;if(!v||!v.n||$._55O()>v.n._55O())return 0;var S=v._37O($),Q=S[fj](q(2,4)).replace(ho,""),T=Iq(Q);if(0==T.length)return!1;var g=T[0],G=T[1],J=function(s){return Fr._4O.Util._56O(s,g)},V=J(t);return G==V}.bind(Wj(K))};var Yc,wg;return function(){var K=Gi.length-ro.length;if(K>0)for(var x=0;K>x;x++)Yc=_r.Util,wg=ko}(),Lq=function(O,b){b=wg(b);var k=Wj(Of),e=dm.length,c=2*e,P=jk(b,q(e,c)),a=k,W=!0;if(a){var m=a[_m[0]];m&&P._55O()<=m._55O()&&(W=!1)}if(W)return 0;var C=a._37O(P),u=C[fj](q(e,c)).replace(ho,""),U=Iq(u);if(0==U.length)return!1;var Y=U[0],y=U[1],I=Yc._11A(O,Y);return y==I},Sg}(x,h),vf(r,{load:function(){var W={},F=function(W){return W?"c_"+(W.sync?"1":"0")+"_"+(W.post?"1":"0")+"_"+(W.responseType||"H")+"_"+(W.mimeType||"H")+"_"+(W.data?JSON.stringify(W.data):"H"):""};return function(S,w,N){var G,L=W[S],t=F(N);return L&&(G=L[t])?(G.push(w),void 0):(W[S]||(L=W[S]={count:0}),G=L[t]=[w],L.count++,r.xhrLoad(S,function(j){delete L[t],L.count--,L.count||delete W[S],G.forEach(function(o){o(j)})},N),void 0)}}(),asyncEach:function(A,m,o){"function"!=typeof o&&(o=Function.prototype);var X=new Array(A.length),q=0,N=!1;A.forEach(function(t,U){m(t,function(G,W){return N?void 0:G?(N=!0,o(null)):(X[U]=W,q++,q===A.length?o(X):void 0)})})},xhrLoad:function(q,C,B){var R=!1;Ji(q)||(R=!0,q=[q]),B=B||{},q.length;var t=B.sync,g=!!B.post,E=B.data||null;r.asyncEach(q,function(c,K){var w=new XMLHttpRequest;B.responseType?w.responseType=B.responseType:w.overrideMimeType&&w.overrideMimeType(B.mimeType||"text/plain"),c=r.beforeLoadURL(c),c.data?K(null,c.data):(w.open(g?"POST":"GET",encodeURI(c),!t),w.onload=function(o){200===this.status||0===this.status?K(null,o.target.response||o.target.responseText):K(!0)},w.onerror=function(){K(!0)},w.send(E))},function(v){"function"==typeof C&&C(R&&v?v[0]:v)})}});var Cq=A.List=function(){this._as=[];var e,l,D=arguments.length;if(1===D){var N=arguments[0];if(Mj(N)&&(N=N._as),Ji(N))for(l=N.length,e=0;l>e;e++)this._as.push(N[e]);else N!=J&&this._as.push(N)}else if(D>1)for(e=0;D>e;e++)this._as.push(arguments[e])};bi("List",h,{forEach:function(t,$){this.each(t,$)},push:function(){for(var W=0;W<arguments.length;W++)this.add(arguments[W])},pop:function(){return this._as.pop()},shift:function(){return this._as.shift()},unshift:function(){return this._as.unshift.apply(this._as,arguments)},size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(A,u){return u===e?this._as.push(A):this._as.splice(u,0,A)},addAll:function(Q){Mj(Q)&&(Q=Q._as),Ji(Q)?im(this._as,Q):this._as.push(Q)},get:function(f){return this._as[f]},slice:function(M,$){return new Cq(this._as.slice(M,$))},remove:function(r){var w=this._as.indexOf(r);return w>=0&&w<this._as.length&&this.removeAt(w),w},removeAt:function(E){return this._as.splice(E,1)[0]},set:function(b,u){return this._as[b]=u},clear:function(){return this._as.splice(0,this._as.length)},contains:function(m){return this._as.indexOf(m)>=0},indexOf:function(z){return this._as.indexOf(z)},each:function(P,I){for(var r=0,c=this._as.length;c>r;r++){var A=this._as[r];I?P.call(I,A,r,this):P(A,r,this)}},reverseEach:function(u,j){for(var x=this._as.length-1;x>=0;x--){var Q=this._as[x];j?u.call(j,Q):u(Q)}},toArray:function(y,p){if(y){for(var b,j=[],q=0,s=this._as.length;s>q;q++)b=this._as[q],p?y.call(p,b)&&j.push(b):y(b)&&j.push(b);return j}return this._as.concat()},toList:function(M,U){if(M){for(var B,H=new Cq,k=0,u=this._as.length;u>k;k++)B=this._as[k],U?M.call(U,B)&&H.add(B):M(B)&&H.add(B);return H}return new Cq(this)},reverse:function(){this._as.reverse()},sort:function(B){return this._as.sort(B?B:Vj),this},toString:function(){return this._as.toString()}}),h.defineProperties(Cq.prototype,{length:{get:function(){return this._as.length},set:function(n){this._as.length=n}}});var Bo=new Cq;vf(Bo,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:gi,each:gi,reverseEach:gi,toArray:function(){return[]},toList:function(){return new Cq},add:nn,addAll:nn,set:nn,remove:nn,removeAt:nn,clear:nn});var pc=A.Matrix=function(Z,n,G,K,r){var J=this;Z=Z||0;var d=j(Z),c=C(Z);K=K||1,r=r||1,J.a=c*K,J.b=d*K,J.c=-d*r,J.d=c*r,J.tx=n||0,J.ty=G||0};pc.prototype.tf=function(z,e){1===arguments.length&&(e=z.y,z=z.x);var J=this;return{x:J.a*z+J.c*e+J.tx,y:J.b*z+J.d*e+J.ty}},pc.prototype.translate=function(Z,g){var C=this;return C.tx+=Z,C.ty+=g,C},pc.prototype.scale=function(G,x){var z=this;return z.a*=G,z.d*=x,z.c*=G,z.b*=x,z.tx*=G,z.ty*=x,z},pc.prototype.rotate=function(m){var b=C(m),t=j(m),H=this,f=H.a,w=H.c,d=H.tx;return H.a=f*b-H.b*t,H.b=f*t+H.b*b,H.c=w*b-H.d*t,H.d=w*t+H.d*b,H.tx=d*b-H.ty*t,H.ty=d*t+H.ty*b,H},pc.prototype.transform=function(N){var $=this,d=N.a,z=N.b,J=N.c,D=N.d,W=N.tx,c=N.ty,S=$.a,g=$.b,j=$.c,H=$.d,R=$.tx,y=$.ty;return $.a=d*S+J*g,$.b=z*S+D*g,$.c=d*j+J*H,$.d=z*j+D*H,$.tx=d*R+J*y+W,$.ty=z*R+D*y+c,$},pc.prototype.tfi=function(f,q){1===arguments.length&&(q=f.y,f=f.x);var m=this,h=1/(m.a*m.d+m.c*-m.b);return{x:m.d*h*f+-m.c*h*q+(m.ty*m.c-m.tx*m.d)*h,y:m.a*h*q+-m.b*h*f+(-m.ty*m.a+m.tx*m.b)*h}};var _b=A.Notifier=function(){this._f=0};bi("Notifier",h,{contains:function(j,n){if(this._ls)for(var S,Q=0,d=this._ls.size();d>Q;Q++)if(S=this._ls.get(Q),j===S.l&&n===S.s)return!0;return!1},add:function(S,Z,w){var j=this,p={l:S,s:Z,a:w};j._ls||(j._ls=new Cq),j._f?(j._as||(j._as=new Cq),j._as.add(p)):p.a?j._ls.add(p,0):j._ls.add(p)},remove:function(b,A){var h=this;h._ls&&(h._f?(h._rs||(h._rs=new Cq),h._rs.add({l:b,s:A})):h._remove(b,A))},_remove:function(E,b){for(var Q,i=this._ls,m=0,F=i.size();F>m;m++)if(Q=i.get(m),Q.l===E&&Q.s===b)return i.removeAt(m),void 0},fire:function(a){var B=this,v=B._ls;if(B._b=1e4,v){++B._f;try{for(var l,F=0,m=v.size();m>F;F++)l=v.get(F),l.s?l.l.call(l.s,a):l.l(a)}finally{if(--B._f)return;if(B._rs){for(m=B._rs.size(),F=0;m>F;F++)l=B._rs.get(F),B._remove(l.l,l.s);delete B._rs}if(B._as){for(m=B._as.size(),F=0;m>F;F++)l=B._as.get(F),l.a?v.add(l,0):v.add(l);delete B._as}}}}});var Nd=A.Data=function(){this._id=Vb()};bi("Data",h,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","layer","adjustChildrenToTop","dataBindings"],ms_dm:1,ms_attr:1,_icon:J,_parent:J,_children:Bo,_childMap:J,_styleMap:J,_layer:"0",_adjustChildrenToTop:!1,getUIClass:function(){return J},_22Q:function(){return J},s:function(d,E){var N=this;if(2===arguments.length)N.setStyle(d,E);else{if(!Vc(d))return N.getStyle(d);for(var p in d)N.setStyle(p,d[p])}return N},fp:function(Q,q,w,N,I){return this.firePropertyChange(Q,q,w,N,I)},firePropertyChange:function(q,U,M,R,g){if(R){if(R(U,M))return!1}else if(U===M)return!1;var $=this,r=g||{};return r.property=q,r.oldValue=U,r.newValue=M,r.data=$,$._dataModel&&$._dataModel.handleDataPropertyChange(r),$.onPropertyChanged(r),!0},onPropertyChanged:function(n){var V=this,y=V._parent,X=n.property;if(Mg(y)){var s=V.s(zr),j="s:ingroup"===X;(s&&tb[X]||X===j)&&y._81I(),(s||j)&&y.fp("childChange",!0,!1)}Fh(y)&&tb[X]&&y.updateFromChildren()},_21I:function(w){var L=this;if(w&&L._dataModel)throw"Remove data from dataModel before adding";L._dataModel=w},removeFromDataModel:function(){this._dataModel?this._dataModel.remove(this):this.setParent(null)},clearChildrenFromDataModel:function(){for(var f=0,b=this._children.toArray(),L=b.length;L>f;f++)b[f].removeFromDataModel()},getId:function(){return this._id},setId:function(s){this._id=s},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(V,u){return this._children.toList(V,u)},eachChild:function(X,F){this._children.each(X,F)},addChild:function(g,y){var s=this;g!==s&&(s._children===Bo&&(s._children=new Cq,s._childMap={}),y>=0||(y=s._children.size()),s._childMap[g._id]||s.isDescendantOf(g)||(g._parent&&g._parent.removeChild(g),(0>y||y>s._children.size())&&(y=s._children.size()),s._children.add(g,y),s._childMap[g._id]=g,g.setParent(s),s.onChildAdded(g,y),s.fp(Hm,J,g)))},onChildAdded:function(){},removeChild:function(I){var m=this;if(m._childMap&&m._childMap[I._id]){var v=m._children.remove(I);delete m._childMap[I._id],m.fp(Hm,I,J),I.setParent(J,v),m.onChildRemoved(I,v)}},onChildRemoved:function(){},getChildAt:function(h){return this._children.get(h)},clearChildren:function(){var $=this;if(!$._children.isEmpty())for(var m=0,h=$._children.toArray(),X=h.length;X>m;m++)$.removeChild(h[m])},getParent:function(){return this._parent},setParent:function(u,o){var F=this;if(!(F._73I||F._parent===u||F===u||u&&u.isDescendantOf(F))){var Q,K=F._parent;F._parent=u,F._73I=1,K?(o==J&&(o=K.getChildren().indexOf(F)),K.removeChild(F)):F._dataModel&&o==J&&(o=F._dataModel.getRoots().indexOf(F)),u&&(u.addChild(F),Q=u.getChildren().indexOf(F)),delete F._73I,F.fp("parent",K,u,e,{oldIndex:o,newIndex:Q}),F.onParentChanged(K,u)}},onParentChanged:function(){},hasChildren:function(){return this._children.size()>0},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(N){return N?this.isDescendantOf(N)||N.isDescendantOf(this):!1},isParentOf:function(h){return h&&this._childMap?!!this._childMap[h._id]:!1},isDescendantOf:function(C){if(!C||C.isEmpty())return!1;for(var H=this._parent;H;){if(C===H)return!0;H=H._parent}return!1},getStyleMap:function(){return this._styleMap},getStyle:function(S,w){w===e&&(w=1);var Q=this._styleMap?this._styleMap[S]:e;return Q===e&&w?P[S]:Q},setStyle:function(J,$){var m=this;m._styleMap||(m._styleMap={});var d=m._styleMap[J];$===e?delete m._styleMap[J]:m._styleMap[J]=$,m.fp("s:"+J,d,$)&&m.onStyleChanged(J,d,$)},onStyleChanged:function(){},iv:function(){this.invalidate()},invalidate:function(){this.fp("*",!1,!0)},toString:function(){var c=this;return c._displayName||c._name||c._tag||c._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(O,e){var Z=this,q=Z.s(hc);q||Z.s(hc,q={}),e?q[O]=e:delete q[O],Z.fp(hc,J,q)},removeStyleIcon:function(O){var M=this.s(hc);if(M){var R=M[O];delete M[O],this.fp(hc,J,M)}return R},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,tag:1,adjustChildrenToTop:1,dataBindings:1}},getSerializableStyles:function(){var L,Q={};for(L in this._styleMap)Q[L]=1;return Q}});var hd=A.DataModel=function(){var w=this;w._datas=new Cq,w._dataMap={},w._roots=new Cq,w._rootMap={},w._78O={},w._36I=new _b,w._35I=new _b,w._selectionModel=new vh(w);var Y=w._29Q=[],j=w._scheduleCallback=function(){for(var M=Date.now(),C=0;C<Y.length;C++){var m=Y[C];m.enabled&&M-m.lastTime>m.interval&&(m.beforeAction&&m.beforeAction(),w.each(function(i){m.action(i)}),m.afterAction&&m.afterAction(),m.lastTime=M)}Y.length&&(w._30Q=x.requestAnimationFrame(j))}};bi("DataModel",h,{ms_fire:1,ms_attr:1,ms_ac:["layers","name","autoAdjustIndex","hierarchicalRendering","background","init"],_name:e,_autoAdjustIndex:!0,_hierarchicalRendering:!1,_background:e,_init:e,sm:function(){return this.getSelectionModel()},mm:function(w,I,D){this.addDataModelChangeListener(w,I,D)},umm:function(S,A){this.removeDataModelChangeListener(S,A)},md:function(G,H,E){this.addDataPropertyChangeListener(G,H,E)},umd:function(i,f){this.removeDataPropertyChangeListener(i,f)},mh:function(T,z,R){this.addHierarchyChangeListener(T,z,R)},umh:function(A,Z){this.removeHierarchyChangeListener(A,Z)},getAttrObject:function(){return this._attrObject},setAttrObject:function(d){return this._attrObject=d},getSelectionModel:function(){return this._selectionModel},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getDataById:function(c){return this._dataMap[c]},removeDataById:function(i){this.remove(this.getDataById(i))},toDatas:function(E,p){return this._datas.toList(E,p)},each:function(j,x){this._datas.each(j,x)},getDataByTag:function(c){return this._78O[c]},getTagMap:function(){return this._78O},removeDataByTag:function(Y){this.remove(this.getDataByTag(Y))},add:function(K,R,f){var F=this,m=K._id,q=K._tag,i=F._roots;if(F._dataMap[m])throw"'"+m+"' already exists";q!=J&&(F._78O[q]=K),F._dataMap[m]=K,f>=0?F._datas.add(K,f):F._datas.add(K),K._parent||(F._rootMap[m]=K,R>=0?i.add(K,R):i.add(K)),K._21I(F),F.onAdded(K),F._36I.fire({kind:"add",data:K,rootsIndex:R,datasIndex:f})},onAdded:function(){},remove:function(Z,s){if(Z){var w=this,X=Z._id,O=s&&s.keepStructure,L=s&&s.keepChildren,x=Z.getTag();if(Z._dataModel===w){this.beginTransaction(),O?w._removingData||(w._removingData=Z):w.prepareRemove(Z),L||Z.toChildren().each(function(F){w.remove(F,s)},w),O?w._removingData===Z&&(Z._parent&&Z._parent.removeChild(Z),delete w._removingData):Z._parent&&Z._parent.removeChild(Z);var t=w._datas.remove(Z);delete w._dataMap[X],x!=J&&delete w._78O[x];var z;w._rootMap[X]&&(delete w._rootMap[X],z=w._roots.remove(Z)),Z._21I(J),w.onRemoved(Z),w._36I.fire({kind:Jn,data:Z,rootsIndex:z,datasIndex:t}),this.endTransaction()}}},onRemoved:function(){},prepareRemove:function(){},clear:function(){var W=this;if(W._datas.size()){var D=W._historyManager?this.toJSON():e;W._datas.toArray().forEach(function(f){f._21I(J)}),W._datas.clear(),W._dataMap={},W._roots.clear(),W._rootMap={},W._78O={},W._36I.fire({kind:Jb,json:D})}},contains:function(t){return t&&t._dataModel===this},handleDataPropertyChange:function(t){var Z=this,B=t.data,M=t.property;if("parent"===M){var C=B._id,l=Z._rootMap,j=Z._roots;B._parent?l[C]&&(delete l[C],j.remove(B)):l[C]||(l[C]=B,j.add(B))}else if("tag"===M){var Q=t.oldValue,u=t.newValue,p=Z._78O;Q!=J&&delete p[Q],u!=J&&(p[u]=B)}this.onDataPropertyChanged(B,t),this._35I.fire(t)},onDataPropertyChanged:function(){},addDataModelChangeListener:function(u,N,c){this._36I.add(u,N,c)},removeDataModelChangeListener:function(m,V){this._36I.remove(m,V)},addDataPropertyChangeListener:function(h,r,u){this._35I.add(h,r,u)},removeDataPropertyChangeListener:function(x,w){this._35I.remove(x,w)},_38I:function(Y,V,L){this._37I&&this._37I.fire({data:Y,oldIndex:V,newIndex:L})},addHierarchyChangeListener:function(E,i,x){this._37I||(this._37I=new _b),this._37I.add(E,i,x)},removeHierarchyChangeListener:function(U,s){this._37I.remove(U,s)},getSiblings:function(h){var D=h._parent;return D?D._children:this._roots},eachByHierarchical:function(O,e,R){if(e)return this._eachByHierarchical(O,e,R);for(var r=0,o=this._roots,k=o.size();k>r;r++)if(this._eachByHierarchical(O,o.get(r),R)===!1)return!1;return!0},_eachByHierarchical:function(i,m,u){if(u){if(i.call(u,m)===!1)return!1}else if(i(m)===!1)return!1;for(var c=m.size(),q=0;c>q;q++)if(this._eachByHierarchical(i,m.getChildAt(q),u)===!1)return!1;return!0},reverseEachByHierarchical:function(i,E,L){if(E)return this._reverseEachByHierarchical(i,E,L);for(var z=this._roots,v=z.size(),A=v-1;A>=0;A--)if(this._reverseEachByHierarchical(i,z.get(A),L)===!1)return!1;return!0},_reverseEachByHierarchical:function(T,U,b){for(var u=U.size(),f=u-1;f>=0;f--)if(this._reverseEachByHierarchical(T,U.getChildAt(f),b)===!1)return!1;if(b){if(T.call(b,U)===!1)return!1}else if(T(U)===!1)return!1;return!0},eachByDepthFirst:function(K,C,F){if(C)return this._11I(K,C,F);for(var s=0,o=this._roots,m=o.size();m>s;s++)if(this._11I(K,o.get(s),F)===!1)return!1;return!0},_11I:function(b,x,k){for(var v=x.size(),c=0;v>c;c++)if(this._11I(b,x.getChildAt(c),k)===!1)return!1;if(k){if(b.call(k,x)===!1)return!1}else if(b(x)===!1)return!1;return!0},eachByBreadthFirst:function(N,M,Q){var h=new Cq;for(M?h.add(M):this._roots.each(h.add,h);h.size()>0;)if(M=h.removeAt(0),M.eachChild(h.add,h),Q){if(N.call(Q,M)===!1)return!1}else if(N(M)===!1)return!1;return!0},moveTo:function(t,x){var R=this.getSiblings(t),C=R.indexOf(t);C===x||0>C||x>=0&&x<=R.size()&&(R.remove(t),x>R.size()&&x--,R.add(t,x),this._38I(t,C,x))},moveUp:function(m){this.moveTo(m,this.getSiblings(m).indexOf(m)-1)},moveDown:function(P){this.moveTo(P,this.getSiblings(P).indexOf(P)+1)},moveToTop:function(m){this.moveTo(m,0)},moveToBottom:function(A){this.moveTo(A,this.getSiblings(A).size())},moveSelectionUp:function(Y){this.beginTransaction(),Y||(Y=this.sm());var P=new Cq;pq(Y,P,this._roots),P.each(this.moveUp,this),this.endTransaction()},moveSelectionDown:function(E){this.beginTransaction(),E||(E=this.sm());var I=new Cq;ln(E,I,this._roots),I.each(this.moveDown,this),this.endTransaction()},moveSelectionToTop:function(z){this.beginTransaction(),z||(z=this.sm());var A=new Cq;Rf(z,A,this._roots),A.each(this.moveToTop,this),this.endTransaction()},moveSelectionToBottom:function(J){this.beginTransaction(),J||(J=this.sm());var L=new Cq;Bq(J,L,this._roots),L.each(this.moveToBottom,this),this.endTransaction()},moveToIndex:function(r,w,z){var l=this.getDatas();null==z&&(z=l.indexOf(r)),z===w||0>z||w>=0&&w<=l.size()&&(l.remove(r),w>l.size()&&w--,l.add(r,w),this._76I(r,z,w))},bringForward:function(H){this.moveToIndex(H,this.getDatas().indexOf(H)+1)},bringToFront:function(Y){this.moveToIndex(Y,this.size())},sendBackward:function(F){this.moveToIndex(F,this.getDatas().indexOf(F)-1)},sendToBack:function(q){this.moveToIndex(q,0)},bringSelectionForward:function(E){this.beginTransaction(),E||(E=this.sm());for(var P=new Cq,q=this.getDatas(),N=!1,T=0;T<q.size();T++){var i=q.get(q.size()-1-T);E.contains(i)?N&&P.add(i):N=!0}P.each(this.bringForward,this),this.endTransaction()},bringSelectionToFront:function(l){this.beginTransaction(),l||(l=this.sm());for(var f=new Cq,H=this.getDatas(),S=0;S<H.size();S++){var y=H.get(S);l.contains(y)&&f.add(y)}f.each(this.bringToFront,this),this.endTransaction()},sendSelectionBackward:function(Z){this.beginTransaction(),Z||(Z=this.sm());for(var t=new Cq,w=this.getDatas(),m=!1,J=0;J<w.size();J++){var V=w.get(J);Z.contains(V)?m&&t.add(V):m=!0}t.each(this.sendBackward,this),this.endTransaction()},sendSelectionToBack:function(O){this.beginTransaction(),O||(O=this.sm());for(var I=new Cq,m=this.getDatas(),h=0;h<m.size();h++){var B=m.get(m.size()-1-h);O.contains(B)&&I.add(B)}I.each(this.sendToBack,this),this.endTransaction()},addScheduleTask:function(s){var d=this;d.removeScheduleTask(s),s.enabled==J&&(s.enabled=!0),s.interval==J&&(s.interval=10),s.action==J&&(s.action=gi),s.lastTime=Date.now(),d._29Q.push(s),d._30Q==J&&(d._30Q=x.requestAnimationFrame(d._scheduleCallback))},removeScheduleTask:function(X){var r=this,u=r._29Q,Z=u.indexOf(X);Z>=0&&u.splice(Z,1),u.length||r._30Q==J||(x.cancelAnimationFrame(r._30Q),delete r._30Q)},getHistoryManager:function(){return this._historyManager},enableHistoryManager:function(S){this._historyManager||new A.HistoryManager(this),null!=S&&this._historyManager.setMaxHistoryCount(S),this._historyManager.setDisabled(!1)},disableHistoryManager:function(){this._historyManager&&this._historyManager.setDisabled(!0)},clearHistoryManager:function(){this._historyManager&&this._historyManager.clear()},undo:function(J){this._historyManager&&this._historyManager.undo(J)},redo:function(f){this._historyManager&&this._historyManager.redo(f)},beginTransaction:function(){this._historyManager&&this._historyManager.beginTransaction()},endTransaction:function(){this._historyManager&&this._historyManager.endTransaction()},addHistory:function(c){this._historyManager&&this._historyManager.addHistory(c)},onHistoryManagerChanged:function(){}});var vh=A.SelectionModel=function(u){var U=this;U._68O=bk,U._map={},U._73O=new Cq,U._74I=new _b,U._21I(u)};bi("SelectionModel",h,{ms_fire:1,ms_dm:1,ms:function(M,e,l){this.addSelectionChangeListener(M,e,l)},ums:function(h,B){this.removeSelectionChangeListener(h,B)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===ip},co:function(R){return this._map[R._id]!=J},ss:function(G){this.setSelection(G)},as:function(g){this.appendSelection(g)},rs:function(R){this.removeSelection(R)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(k){var $=this;if($._68O!==k&&(k===_m||k===ip||k===bk)){$.cs();var o=$._68O;$._68O=k,$.fp("selectionMode",o,k)}},_21I:function(D){var H=this,u=H._dataModel;u!==D&&(u&&(H.cs(),u.umm(H.handleDataModelChange,H)),H._dataModel=D,D.mm(H.handleDataModelChange,H,!0),H.fp(Rc,u,D))},dispose:function(){var m=this;m.cs(),m._dataModel.umm(m.handleDataModelChange,m)},handleDataModelChange:function(x){var I=this;if(x.kind===Jn){var M=x.data;I.co(M)&&(I._73O.remove(M),delete I._map[M._id],I._75I(Jn,new Cq(M)))}else x.kind===Jb&&I.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(z){var x=this;if(x._filterFunc!==z){x.cs();var m=x._filterFunc;x._filterFunc=z,x.fp("filterFunc",m,x._filterFunc)}},_75I:function(O,T,I,J){I&&(this._73O.each(function(r){J[r._id]?I.remove(r):I.add(r)}),T=I.toList()),this._74I.fire({kind:O,datas:new Cq(T)})},addSelectionChangeListener:function(w,g,k){this._74I.add(w,g,k)},removeSelectionChangeListener:function(a,e){this._74I.remove(a,e)},_97O:function(g,U){for(var y,O=this,v=0,x=new Cq(g);v<x.size();v++)y=x.get(v),(O._filterFunc&&!O._filterFunc(y)||U&&O.co(y)||!U&&!O.co(y)||!O._dataModel.contains(y))&&(x.removeAt(v),v--);return x},appendSelection:function(V){var o=this;if(o._68O!==_m){var v,r,Q=o._73O,D=o._97O(V,!0);D.isEmpty()||(o.sg()&&(v=new Cq(Q),r=o._map,Q.clear(),o._map={},D=new Cq(D.get(D.size()-1))),D.each(function(j){Q.add(j),o._map[j._id]=j}),o._75I("append",D,v,r))}},removeSelection:function(L){var x=this,h=x._97O(L),b=0,i=h.size();if(0!==i){for(;i>b;b++){var r=h.get(b);x._73O.remove(r),delete x._map[r._id]}x._75I(Jn,h)}},toSelection:function(e,$){return this._73O.toList(e,$)},getSelection:function(){return this._73O},each:function(t,T){this._73O.each(t,T)},setSelection:function(I){var C=this,r=C._73O;if(C._68O!==_m&&!(r.isEmpty()&&!I||1===r.size()&&C.ld()===I)){var n=new Cq(r),V=C._map;r.clear(),C._map={};var z=C._97O(I,!0);C.sg()&&z.size()>1&&(z=new Cq(z.get(z.size()-1))),z.each(function(d){r.add(d),C._map[d._id]=d}),C._75I("set",J,n,V)}},clearSelection:function(){var r=this,f=r._73O;if(f.size()>0){var W=f.toList();f.clear(),r._map={},r._75I(Jb,W)}},selectAll:function(){var P=this;if(P._68O!==_m){var R,s,j=P._dataModel.toDatas();if(P._filterFunc)for(R=0;R<j.size();R++)s=j.get(R),P._filterFunc(s)||(j.removeAt(R),R--);
var Y=P._73O,A=new Cq(Y),z=P._map;Y.clear(),P._map={},P.sg()&&j.size()>1&&(j=new Cq(j.get(j.size()-1)));var q=j.size();for(R=0;q>R;R++)s=j.get(R),Y.add(s),P._map[s._id]=s;P._75I("all",J,A,z)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(c){return this._map[c._id]!=J},getLastData:function(){var Z=this._73O;return Z.size()>0?Z.get(Z.size()-1):J},getFirstData:function(){var F=this._73O;return F.size()>0?F.get(0):J},isSelectable:function(B){var e=this;return B&&e._68O!==_m?e._filterFunc?e._filterFunc(B):!0:!1},getTopSelection:function(){var r=this,p=new Cq;return r._73O.each(function(l){for(var e=l.getParent();e;){if(r.contains(e)){l=J;break}e=e.parent}l&&p.add(l)}),p}});var yd=function(){return Jd(0),function(J,c){var t;if(Fr(c)){var e=J.getDataUI(c);e&&e._88I&&(t=e._88I.rect)}return t?t:c.getRect()}}();vf(r,{edgeGroupAgentFunc:J,graphViewAutoScrollZone:16,graphViewResettable:!1,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:T.rectSelectBorder,graphViewRectSelectBackground:Qn,graphViewEditPointSize:s?17:7,graphViewEditPointBorderColor:T.editPointBorder,graphViewEditPointBackground:T.editPointBackground,setEdgeType:function(e,Z,Y){gj[e]=Z,yo[e]=Y},getEdgeType:function(A){return gj[A]},getEdgeTypeMap:function(){return gj},getNodeRect:yd},!0),vf(P,{"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":e,interactive:!1,"image.stretch":"fill",icons:e,ingroup:!0,"body.color":e,opacity:e,pixelPerfect:!0,"clip.direction":"top","clip.percentage":1,"select.color":Md,"select.width":1,"select.padding":2,"select.type":Yf,shadow:!1,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,"border.color":e,"border.width":2,"border.padding":2,"border.type":Yf,label:e,"label.font":e,"label.color":qd,"label.background":e,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":e,"label.max":e,"label.opacity":e,"label.scale":1,"label.align":e,"label.selectable":!0,label2:e,"label2.font":e,"label2.color":qd,"label2.background":e,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":e,"label2.max":e,"label2.opacity":e,"label2.scale":1,"label2.align":e,"label2.selectable":!0,note:e,"note.expanded":!0,"note.font":e,"note.color":Lp,"note.background":Md,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":e,"note.toggleable":!0,"note.border.width":1,"note.border.color":e,"note.opacity":e,"note.scale":1,"note.align":e,note2:e,"note2.expanded":!0,"note2.font":e,"note2.color":Lp,"note2.background":Md,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":e,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":e,"note2.opacity":e,"note2.scale":1,"note2.align":e,"group.type":e,"group.image":e,"group.image.stretch":"fill","group.repeat.image":e,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":e,"group.title.color":Lp,"group.title.background":T.groupTitleBackground,"group.title.align":fh,"group.background":T.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":e,"group.border.color":Yb,"group.border.cap":Ap,"group.border.join":Sq,"group.gradient":J,"group.gradient.color":"#FFF",shape:e,"shape.background":Yb,"shape.repeat.image":e,"shape.border.width":0,"shape.border.width.absolute":!1,"shape.border.color":Yb,"shape.border.3d":!1,"shape.border.3d.color":e,"shape.border.3d.accuracy":e,"shape.border.cap":Ap,"shape.border.join":Sq,"shape.border.pattern":e,"shape.gradient":J,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":hf,"shape.dash.offset":0,"shape.dash.color":Vq,"shape.dash.width":e,"shape.dash.3d":!1,"shape.dash.3d.color":e,"shape.dash.3d.accuracy":e,"shape.polygon.side":6,"shape.arc.from":I,"shape.arc.to":l,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":e,"shape.gradient.pack":e,"shape.fill.rule":"nonzero","shape.fill.clip.direction":"top","shape.fill.clip.percentage":1,"autolayout.gap":e,"autolayout.hgap":e,"autolayout.vgap":e,"edge.type":e,"edge.points":e,"edge.segments":e,"edge.color":Yb,"edge.width":2,"edge.width.absolute":!1,"edge.offset":20,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":e,"edge.3d.accuracy":e,"edge.cap":Ap,"edge.join":Sq,"edge.source.position":17,"edge.source.anchor.x":e,"edge.source.anchor.y":e,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.target.position":17,"edge.target.anchor.x":e,"edge.target.anchor.y":e,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.pattern":e,"edge.dash":!1,"edge.dash.pattern":hf,"edge.dash.offset":0,"edge.dash.color":Vq,"edge.dash.width":e,"edge.dash.3d":!1,"edge.dash.3d.color":e,"edge.dash.3d.accuracy":e,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":e,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":e,"grid.column.percents":e,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":T.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":T.gridCellBorderColor,"grid.block":e,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":T.gridBlockColor,text:"","text.align":"left","text.vAlign":"middle","text.color":qd,"text.font":ee,"text.shadow":!1,"text.shadow.color":nr,"text.shadow.blur":6,"text.shadow.offset.x":3,"text.shadow.offset.y":3},!0),vf(hd,{_76I:function(P,v,C){this._39I&&this._39I.fire({data:P,oldIndex:v,newIndex:C})},addIndexChangeListener:function(p,O,u){var l=this;l._39I||(l._39I=new _b),l._39I.add(p,O,u)},removeIndexChangeListener:function(j,M){this._39I.remove(j,M)},prepareRemove:function(b){zj(b)&&(b.setSource(J),b.setTarget(J)),b._70O&&b._70O.toList().each(this.remove,this),b._69O&&b._69O.toList().each(function(P){P.setHost(J)}),b._host&&b.setHost(J)},onAdded:function(f){this.isAutoAdjustIndex()&&this.adjustIndex(f)},onDataPropertyChanged:function(d,O){Nc[O.property]&&this.isAutoAdjustIndex()&&this.adjustIndex(d)},isAdjustable:function(L){return Yq(L)||zj(L)},isAdjustedToBottom:function(H){return Mg(H)?H.isExpanded()&&ni(H):!1},adjustIndex:function(v){var W=this;this.isHierarchicalRendering()||(W.isAdjustedToBottom(v)?(W.sendToBottom(v),v.eachChild(W.adjustIndex,W)):W.sendToTop(v))},sendToTop:function(g){var b=this;if(b.contains(g)&&b.isAdjustable(g)){var N=b._datas;if(g!==N.get(b.size()-1)){var X=N.indexOf(g);N.removeAt(X),N.add(g),b._76I(g,X,b.size()-1)}if(zj(g)){var e=g._40I;e&&!b.isAdjustedToBottom(e)&&b.sendToTop(e),e=g._41I,e&&!b.isAdjustedToBottom(e)&&b.sendToTop(e)}g._69O&&g._69O.each(function($){$.isRelatedTo(g)||Yq(g)&&$.isLoopedHostOn(g)||b.sendToTop($)}),g.ISubGraph||(!Mg(g)||g.isExpanded())&&g._adjustChildrenToTop&&g.eachChild(function(H){zj(H)||b.sendToTop(H)})}},sendToBottom:function(j,M){var Z=this;if(j!==M&&Z.contains(j)&&Z.isAdjustable(j)&&(!M||Z.contains(M))){var n=Z._datas,U=n.remove(j),H=M?Z._datas.indexOf(M):0;if(n.add(j,H),U!==H){Z._76I(j,U,H);var K=j._parent;!K||K.ISubGraph||zj(K)||Z.sendToBottom(j._parent,j)}}}}),vf(Xp,{ms_edit:function(K){K._46O=function(S){var x=this,J=x.gv.dm(),R=x._index,k=x._89I,e=x._node,w=x._shape,L=x._edge,M=x._77I;e&&k?(this.fi({kind:"endEditRect",event:S,data:e,direction:k}),J.endTransaction()):w&&R>=0?(x.fi({kind:"endEditPoint",event:S,data:w,index:R}),J.endTransaction()):L&&R>=0?(x.fi({kind:"endEditPoint",event:S,data:L,index:R}),J.endTransaction()):M&&(x.fi({kind:"endEditRotation",event:S,data:M}),J.endTransaction())},K._78I=function(K){var A=this;A.autoScroll(K);var w=A.gv.lp(K),m=A._index,F=A._89I,e=A._node,o=A._shape,V=A._edge,T=A._77I;if(e&&F)A._80O(w),A.fi({kind:"betweenEditRect",event:K,data:e,direction:F});else if(o&&m>=0)w.e=o.getPoints().get(m).e,o.setPoint(m,w),A.fi({kind:"betweenEditPoint",event:K,data:o,index:m});else if(V&&m>=0){var v=V.s(mg);w.e=v.get(m).e,v.set(m,w),V.fp(mg,J,v),A.fi({kind:"betweenEditPoint",event:K,data:V,index:m})}else if(T){var M=T.p(),j=T.getScale(),l=$+f(w.y-M.y,w.x-M.x);j.y<0&&(l+=I),k(l)<.04&&(l=0),T.setRotation(l),A.fi({kind:"betweenEditRotation",event:K,data:T})}},K._80O=function(Z){var e=this,z=e._node,P=e._rect,b=P.x,r=P.y,I=P.width,C=P.height,Q=e._89I,A=e._anchor,l=e._matrix,Z=l.tfi(Z);"northwest"===Q?P=Pk(Z,{x:b+I,y:r+C}):Q===xb?P=Pk({x:b,y:Z.y},{x:b+I,y:r+C}):"northeast"===Q?P=Pk({x:b,y:Z.y},{x:Z.x,y:r+C}):Q===Qb?P=Pk({x:Z.x,y:r},{x:b+I,y:r+C}):Q===uj?P=Pk({x:b,y:r},{x:Z.x,y:r+C}):"southwest"===Q?P=Pk({x:Z.x,y:r},{x:b+I,y:Z.y}):"south"===Q?P=Pk({x:b,y:r},{x:b+I,y:Z.y}):"southeast"===Q&&(P=Pk({x:b,y:r},Z)),z.setPosition(l.tf(P.x+P.width*A.x,P.y+P.height*A.y)),z.setWidth(P.width),z.setHeight(P.height)},K._80I=function(T,D,p,B){var X=this,j=X.gv._zoom,J=(X.gv.getEditPointSize()+2)/j;return Pm({x:D-J/2,y:p-J/2,width:J,height:J},T)?(X._89I!==B&&(X._89I=B),!0):!1},K._79I=function(D,W,x){var g=this,w=g.gv,I=W?w.getDataUI(W):J,b=I?I._55O:J;if(b){var N,H,M,z,t=w._zoom,h=(w.getEditPointSize()+2)/t,_=w.lp(D);if(Yq(W)){if(b._56O&&Yq(W)&&(H=b._98o,Pm({x:H.x-h/2,y:H.y-h/2,width:h,height:h},_)))return g._77I=W,x&&g.fi({kind:"beginEditRotation",event:D,data:W}),g.setCursor("crosshair"),!0;if(b._43O&&W instanceof Pq)for(M=W.getPoints(),N=M.size()-1;N>=0;N--)if(H=M.get(N),Pm({x:H.x-h/2,y:H.y-h/2,width:h,height:h},_))return g._index=N,g._shape=W,x&&g.fi({kind:"beginEditPoint",event:D,data:W,index:N}),g.setCursor("crosshair"),!0;if(b._42O)for(var O=W.getEditControlPoints(),o=["northwest",-1,-1,Qb,-1,0,"southwest",-1,1,"south",0,1,"southeast",1,1,uj,1,0,"northeast",1,-1,xb,0,-1],N=0,z=O.length;z>N;N++){var X=o[3*N],U=O[N];if(g._80I(_,U.x,U.y,X)){g._node=W;var s=W.getWidth(),Y=W.getHeight(),a=W.getAnchor();g._rect={x:-s*a.x,y:-Y*a.y,width:s,height:Y},g._anchor=a,g._matrix=W.getMatrix();var P=W.getRotation(),l=C(P),S=j(P),r=o[3*N+1]*$k(W.getScale().x),Z=o[3*N+2]*$k(W.getScale().y),A=Math.atan2(-S*r-l*Z,l*r-S*Z),L=(Math.round(A/(Math.PI/4))+8)%8,k=[Dn,"nesw-resize",Qi,"nwse-resize",Dn,"nesw-resize",Qi,"nwse-resize"][L];return g.setCursor(k),x&&g.fi({kind:"beginEditRect",event:D,data:W,direction:g._89I}),!0}}}if(b._43O&&zj(W)&&W.s(pk)===co&&(M=W.s(mg)))for(N=M.size()-1;N>=0;N--)if(H=M.get(N),Pm({x:H.x-h/2,y:H.y-h/2,width:h,height:h},_))return g._index=N,g._edge=W,x&&g.fi({kind:"beginEditPoint",event:D,data:W,index:N}),g.setCursor("crosshair"),!0}return!1}},ms_gv:function(k){k._currentSubGraph=J,k.upSubGraph=function(){this.setCurrentSubGraph(kd(this._currentSubGraph))},k.isVisible=function(c){var l=this;if(kd(c)!==l._currentSubGraph)return!1;if(zj(c)){var f=c._40I,k=c._41I;if(!f||!k)return!1;if(!(c.s("edge.independent")||l.isVisible(f)&&l.isVisible(k)))return!1;if(c.isEdgeGroupHidden())return!1}else for(var q=c._parent;q&&!q.ISubGraph;){if(Mg(q)&&(!q.isExpanded()||!l.isVisible(q)))return!1;q=q._parent}if(c._parent instanceof Ij&&!l.isVisible(c._parent))return!1;if(c._refGraph instanceof Bl&&!l.isVisible(c._refGraph))return!1;if(l instanceof $p){if(!c.s("3d.visible"))return!1}else{var h=l.getLayersInfo();if(h){var E=h[c._layer];if(E&&E.visible===!1)return!1}if(!c.s("2d.visible"))return!1}return l._visibleFunc?l._visibleFunc(c):!0},k.handleSelectionChange=function(G){var L=this;G.datas.each(function(m){L.invalidateData(m);var Z=m._parent;Mg(Z)&&Yq(m)&&m.s(zr)&&(L.invalidateData(Z),Z._49I&&Z._49I.each(function($){L.invalidateData($)}))}),L.onSelectionChanged(G)},k.onSelectionChanged=function(w){var r=this,B=r.sm();if(1===B.size()&&("set"===w.kind||"append"===w.kind)){var z=B.ld();r.isAutoMakeVisible()&&r.makeVisible(z),r.adjustIndex&&r._dataModel.isAutoAdjustIndex()&&r.adjustIndex(z)}},k.makeVisible=function(D){if(D){var E=this,h=E.getDataUI?E.getDataUI(D):E.getData3dUI(D);if(h){var S=D,L=kd(D);for(L!==E._currentSubGraph&&E.setCurrentSubGraph(L);(S=S._parent)&&S!==L;)Mg(S)&&S.setExpanded(!0);E._23I=D,E.iv()}}},k.getLabel=function(i){var U=i.getStyle(ld);return U===e?i.getName():U},k.getLabelBackground=function(F){return F.getStyle("label.background")},k.getLabelColor=function(W){return W.getStyle("label.color")},k.getLabel2=function(s){return s.getStyle("label2")},k.getLabel2Background=function(A){return A.getStyle("label2.background")},k.getLabel2Color=function(h){return h.getStyle("label2.color")},k.getNote=function(e){return e.getStyle(Hb)},k.getNoteBackground=function(j){return j.getStyle("note.background")},k.getNote2=function(w){return w.getStyle(Ar)},k.getNote2Background=function(Y){return Y.getStyle("note2.background")},k.handleClick=function(w,f,K){var W=this;f?(W.fi({kind:"clickData",event:w,data:f,part:K}),W.onDataClicked(f,w)):(W.fi({kind:"clickBackground",event:w}),W.onBackgroundClicked(w))},k.handleDoubleClick=function(r,K,Z){var U=this;Dp(r)&&(K?(U.fi({kind:"doubleClickData",event:r,data:K,part:Z}),U.onDataDoubleClicked(K,r,Z),U.checkDoubleClickOnNote(r,K,Z)||U.checkDoubleClickOnRotation&&U.checkDoubleClickOnRotation(r,K,Z)||(zj(K)?U.onEdgeDoubleClicked(K,r,Z):K.ISubGraph?U.onSubGraphDoubleClicked(K,r,Z):Mg(K)?U.onGroupDoubleClicked(K,r,Z):K.IDoorWindow?U.onDoorWindowDoubleClicked(K,r,Z):K.ICSGBox&&U.onCSGBoxDoubleClicked(K,r,Z))):(U.fi({kind:"doubleClickBackground",event:r}),U.onBackgroundDoubleClicked(r)))},k.onSubGraphDoubleClicked=function(K){this.setCurrentSubGraph(K)},k.onEdgeDoubleClicked=function(o,D){o.ISubGraph&&!dh(D)?this.setCurrentSubGraph(o):o.s("edge.toggleable")&&o.toggle()},k.onGroupDoubleClicked=function(Y){Y.s("group.toggleable")&&Y.toggle()},k.onDoorWindowDoubleClicked=function(L){L.s("dw.toggleable")&&L.toggle(!0)},k.onCSGBoxDoubleClicked=function(o,e){var P=this;if(P instanceof $p){var J=P.getHitFaceInfo(e);J&&J.face&&o.s(J.face+".toggleable")&&o.toggleFace(J.face,!0)}},k.onBackgroundClicked=function(){},k.onBackgroundDoubleClicked=function(){this.upSubGraph()},k.onDataClicked=function(){},k.onDataDoubleClicked=function(){},k.onAutoLayoutEnded=function(){},k.onMoveEnded=function(){},k.onPanEnded=function(){},k.onPinchEnded=function(){},k.onRectSelectEnded=function(){},k.onZoomEnded=function(){}},ms_icons:function(g){g.getRotation=function(X){return X==J?0:X},g._15O=function(){var D=this,U=D.s(hc);if(U){var k=D,s=D.data||D._data,j=D._38o={icons:U,rects:{}};for(var X in U){var Z=U[X],V=dg(Z.shape3d,s,k);if(!(dg(Z.visible,s,k)===!1||dg(Z.for3d,s,k)&&!D.I3d||V&&!D.I3d)){var r=V?[V]:dg(Z.names,s,k),y=r?r.length:0,n=dg(Z.position,s,k)||3,b=dg(Z.offsetX,s,k)||0,W=dg(Z.offsetY,s,k)||0,B=dg(Z.direction,s,k)||uj,S=dg(Z.gap,s,k),L=S!=J?S:1,o=dg(Z.rotation,s,k),M=dg(Z.keepOrien,s,k),e=dg(Z.rotationFixed,s,k)?o:D.getRotation(o,M,n),f=J,l=j.rects[X]=new Array(y);l.rotation=e;for(var R=0;y>R;R++){var E,q,h,u,A=r[R];if(V)h=0,u=0;else{var Y=$l(A);h=dg(Z.width,s,k),u=dg(Z.height,s,k),h==J&&(h=Sf(Y,s)),u==J&&(u=tk(Y,s))}if(f?B===uj?b+=h/2:B===Qb?b-=h/2:B===xb?W-=u/2:W+=u/2:f={width:h,height:u},D.I3d){var P=-h/2,w=-u/2;q={width:h,height:u,mat:D._16O(dg(Z.autorotate,s,k),n,f,dg(Z.face,s,k)||Im,dg(Z.t3,s,k),dg(Z.r3,s,k),dg(Z.rotationMode,s,k),b,W),vs:new Jg([P,-w,0,P,-w-u,0,P+h,-w-u,0,P+h,-w,0])}}else E=D.getPosition(n,b,W,f,dg(Z.positionFixed,s,k)),q={x:E.x-h/2,y:E.y-u/2,width:h,height:u},D._68o(q,e);l[R]=q,B===uj?b+=h/2+L:B===Qb?b-=h/2+L:B===xb?W-=u/2+L:W+=u/2+L}}}}}}});var jb={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},wk={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},rr={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},Nc={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},tb={position:1,width:1,height:1,expanded:1,rotation:1,anchor:1,scale:1,"s:edge.points":1},Jk={"edge.type":1,"edge.group":1},an={rotation:1,rotationX:1,rotationZ:1},Ol={position:1,width:1,height:1,anchor:1,scale:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},yn={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},Aj={shape:1,thickness:1,position:1,anchor:1,scale:1},Xf=function(p,P){if(!p||!Mg(P)||P.isEmpty())return!1;for(p=p._parent;Mg(p);){if(p===P)return!0;p=p._parent}return!1},Ml=function(f,e){if(!f||!Fh(e)||e.isEmpty())return!1;for(f=f._parent;Fh(f);){if(f===e)return!0;f=f._parent}return!1},kd=function(r){if(!r)return J;if(zj(r)){var Y=r._40I,Z=r._41I;if(!Y||!Z)return J;var R=kd(Y),t=kd(Z);return R===t?R:J}for(var l=r._parent;zj(l)&&!l.ISubGraph;)l=l._parent;return l?l.ISubGraph?l:kd(l):J},ki=function(B,u,J,K){var M=u.getStyle(J)*K;M&&Wr(B,M),M=u.getStyle(J+".left")*K,M&&(B.x-=M,B.width+=M),M=u.getStyle(J+".right")*K,M&&(B.width+=M),M=u.getStyle(J+".top")*K,M&&(B.y-=M,B.height+=M),M=u.getStyle(J+".bottom")*K,M&&(B.height+=M),B.width<0&&(B.width=-B.width,B.x-=B.width),B.height<0&&(B.height=-B.height,B.y-=B.height)},ni=function(J){for(var o,b=0,x=J.size();x>b;b++)if(o=J.getChildAt(b),Yq(o)&&ni(o))return!0;return J.hasAgentEdges()},mm=function(F){if(!F)return J;for(var v=F._parent;Mg(v);){if(!Mg(v._parent))return v.isExpanded()?F:v;v.isExpanded()||(F=v),v=v._parent}return F},bm=function(b,s){if(!b||!s)return J;var O,A,B,o=kd(b),Z=kd(s);if(o!==Z){for(;Z&&o!==Z;)Z=kd(Z);if(o===Z)return b;O=new Cq,O.add(b,0);for(var I=b._parent;Yq(I)&&!s.isDescendantOf(I);)O.add(I,0),I=I._parent;for(B=O.size(),A=0;B>A;A++){var a=O.get(A);if(Mg(a)&&!a.isExpanded())return a;if(a.ISubGraph)return a}return b}return b},Ai=function(l){if(l.isLooped())return l._source;var g=mm(l._source),U=mm(l._target);return g===U?l._source:bm(g,U)},bl=function($){if($.isLooped())return $._target;var z=mm($._source),Q=mm($._target);return z===Q?$._target:bm(Q,z)},uo=function(f,I,N,t,W,b,n){if(!I)return J;var A,D=I.getRotation?I.getRotation():0;if(b!==e||n!==e)if(b=b===e?.5:b,n=n===e?.5:n,D&&!Fr(I,f)){var K=I.getPosition(),m=I.getWidth(),l=I.getHeight(),r=I.getAnchor(),X=I.getScale(),L=new pc(D,K.x,K.y,X.x,X.y);N=L.tf((b-r.x)*m,(n-r.y)*l)}else A=yd(f,I),N={x:A.x+b*A.width,y:A.y+n*A.height};else N=Dh(N,yd(f,I));if(D){var Y=C(D),y=j(D),S=t*Y-W*y;W=t*y+W*Y,t=S}return N.x+=t,N.y+=W,N},km=function(s,I){if(!s||!I)return J;var D,v,b,x,P,q;if(s===I){if(x=s.getLoopedEdges(),!x)return J;x=new Cq(x)}else{if(P=s.getAgentEdges(),q=I.getAgentEdges(),!P||!q)return J;for(v=P.size(),D=0;v>D;D++)b=P.get(D),q.contains(b)&&(x||(x=new Cq),x.add(b))}if(x)for(D=0;D<x.size();D++)b=x.get(D),b.getStyle(pk)===co&&(b._22I(J),x.removeAt(D),D--);return x},fd=function(X,e){var T=km(X,e);if(T&&!T.isEmpty()){if(1===T.size())return T.get(0)._22I(J),void 0;var u=new Cq,y=new Cq;T.each(function(i){var P=i.s("edge.group");u.contains(P)||u.add(P)}),u.sort(),u.each(function(P){y.add(new A.EdgeGroup(T.toList(function(v){return P===v.s("edge.group")}),y))}),y.each(function(x){x.each(function(k){k._22I(x)})})}},gf=function(d,L){if(L){var E=L.rect,y=L.color,c=L.rotation,$=L.labelWidth,W=L.background,b=L.opacity,f=L.scale,X=f!=J&&1!==f;if(b!=J){var m=d.globalAlpha;d.globalAlpha*=b}if(c||X){d.save();var g=E.x+E.width/2,S=E.y+E.height/2;zs(d,g,S),c&&so(d,c),X&&d.scale(f,f),zs(d,-g,-S)}if(W&&Wl(d,E.x,E.y,E.width,E.height,W),$){var u=E.width,I=d.createLinearGradient(E.x,E.y,E.x+u,E.y);I.addColorStop(0,y),I.addColorStop(.9,y),I.addColorStop(1,Qh),y=I,E.width=$}Me(d,L.ss,E,L.font,y,L.align),$&&(E.width=u),(c||X)&&d.restore(),b!=J&&(d.globalAlpha=m)}},Hh=function(i,d){if(d){var g=d.rect,H=g.x,S=g.y,N=g.width,x=g.height,u=d.background,b=d.backgroundImage,Y=d.borderWidth,Q=d.borderColor,r=d.labelWidth,s=d.opacity,P=d.scale,M=P!=J&&1!==P;if(s!=J){var E=i.globalAlpha;i.globalAlpha*=s}if(M){i.save();var R=g.x+g.width/2,T=g.y+g.height/2;zs(i,R,T),i.scale(P,P),zs(i,-R,-T)}if(d.expanded){var f=c(8,N/4),y=S+x-8;if(i.fillStyle=u,i.beginPath(),i.moveTo(H,S),i.lineTo(H,y),i.lineTo(H+N/2,y),i.lineTo(H+N/2,S+x),i.lineTo(H+N/2+f,y),i.lineTo(H+N,y),i.lineTo(H+N,S),i.closePath(),i.fill(),Y&&(i.lineWidth=Y,i.lineJoin="round",i.lineCap="round",Q?(i.strokeStyle=Q,i.stroke()):(i.strokeStyle=qq(u),i.beginPath(),i.moveTo(H+N,S),i.lineTo(H+N,y),i.lineTo(H+N/2+f,y),i.lineTo(H+N/2,S+x),i.stroke(),i.strokeStyle=Co(u),i.beginPath(),i.moveTo(H+N,S),i.lineTo(H,S),i.lineTo(H,y),i.lineTo(H+N/2,y),i.lineTo(H+N/2,S+x),i.stroke())),b)Ck(i,$l(b),Re,g.x,g.y,g.width,g.height-8,d.data,d.view);else{if(g.height-=8,u=d.color,r){var q=N,A=i.createLinearGradient(H,S,H+q,S);A.addColorStop(0,u),A.addColorStop(.9,u),A.addColorStop(1,Qh),u=A,g.width=r}Me(i,d.ss,g,d.font,u,d.align),r&&(g.width=q),g.height+=8}}else if(d.icon)nk(i,$l(d.icon),H,S,N,x,d.data,d.view);else{var e=N/2;Y&&(i.lineWidth=Y,i.lineJoin="round",i.lineCap="round",i.strokeStyle=Q?Q:qq(u),i.beginPath(),i.arc(H+e,S+e,e,$,1.6*I,!0),i.moveTo(H+e,S+x),i.lineTo(H+N-e/5,S+e),i.stroke(),i.strokeStyle=Q?Q:Co(u),i.beginPath(),i.arc(H+e,S+e,e,1.6*I,$,!0),i.moveTo(H+e,S+x),i.lineTo(H+e/5,S+e),i.stroke()),i.fillStyle=u,i.beginPath(),i.arc(H+e,S+e,e,0,l,!0),i.moveTo(H+e,S+x),i.lineTo(H+N-e/5,S+e),i.lineTo(H+e/5,S+e),i.closePath(),i.fill(),i.fillStyle=d.color,i.beginPath(),i.arc(H+e,S+e,e/3,0,l,!0),i.fill()}M&&i.restore(),s!=J&&(i.globalAlpha=E)}},Cg=function(W,H){return H>2*W?W:H/2},Te=function(L,v,T,W){if(!L||!v)return 0;var Z=f(v.y-L.y,v.x-L.x);return T||(Z=v.x<L.x?Z+I:Z),Z+W},zg=function(N,t,h,d,r,i,e){e&&(N.x>t.x||N.x===t.x&&N.y>t.y)&&(h=ig[h],r=-r);var Z=Dh(h,{x:0,y:0,width:ii(N,t),height:0},i);return Z.x+=d,Z.y+=r,Z=new pc(f(t.y-N.y,t.x-N.x)).tf(Z),Z.x+=N.x,Z.y+=N.y,Z},am=function(S,O,T,o,U){if(S._19Q=!0,!T.getEdgeGroup())return o?T.s("edge.gap"):0;var R,X=0,x=0,K=0;if(T.getEdgeGroup().getSiblings().each(function(g){g.each(function(h){if(O.isVisible(h)&&h.s(pk)==U){var J=h.s("edge.gap");R?(x+=K/2+J/2,K=J):(R=h,K=J),h===T&&(X=x)}})}),o)return x-X+K;var k=X-x/2;return R&&T._40I!==R._40I&&(S._19Q=!1),k},Pg=function(){var z=function(j){var y=[];return j.forEach(function(D){y.push({x:D.x,y:D.y}),y.push({x:D.x+D.width,y:D.y+D.height}),y.push({x:D.x+D.width,y:D.y}),y.push({x:D.x,y:D.y+D.height})}),y};return function(y,Q,t){if("oval"===y){var R=0,a=t.height/t.width,P=a*a,s=t.x+t.width/2,d=t.y+t.height/2,F=z(Q);F.forEach(function(A){var q=A.x-s,S=A.y-d,w=q*q+S*S/P;w>R&&(R=w)}),R=Z(R);var p=a*R;return{x:s-R,y:d-p,width:2*R,height:2*p}}if("circle"===y){var S=0,s=t.x+t.width/2,d=t.y+t.height/2,F=z(Q);return F.forEach(function(g){var A=g.x-s,D=g.y-d,W=A*A+D*D;W>S&&(S=W)}),S=Z(S),{x:s-S,y:d-S,width:2*S,height:2*S}}return"roundRect"===y?(Wr(t,c(t.width,t.height)/16),t):t}}(),zh=A.graph={},xc=function(P,g,N){js(u+".graph."+P,g,N)};A.layout={};var wb={comps:[{type:el,points:[85,50,70,115,100,71,86,107,88,49,56,82,97,86,78,121,75,54,119,67,102,74,47,67,73,55,115,99,98,70,109,43,83,89,72,103,55,73,82,70,116,80,115,61],borderWidth:1,borderColor:J}]};wb[vs]=wb[sh]=160,yp("node_image",Ro(30,30,[{type:Yf,rect:[4,5,22,16],gradient:lc,gradientColor:hi,background:Yb},{type:Yf,rect:[2,3,26,20],borderWidth:1,borderColor:Yb},{type:Yf,rect:[11,23,8,4],background:Yb},{type:Yf,rect:[6,27,18,2],background:Yb}])),yp("node_icon",Ro(16,16,[{type:Yf,rect:[2,2,12,10],gradient:lc,gradientColor:hi,background:Yb},{type:qo,rect:[2,2,12,10],width:1,color:Yb},{type:Yf,rect:[6,12,4,2],background:Yb},{type:Yf,rect:[4,14,8,1],background:Yb}])),yp("block_icon",Ro(16,16,[{type:qo,rect:[1,1,14,14],width:1,color:Yb}])),yp("group_image",Ro(66,39,[{type:Yf,rect:[44.3,18,18.1,12.8],gradient:lc,gradientColor:hi,background:Yb},{type:Yf,rect:[3.3,17.8,18.1,12.8],gradient:lc,gradientColor:hi,background:Yb},{type:Yf,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:Yb,gradient:lc,gradientColor:hi,background:Yb},{type:Yf,rect:[26.2,29.4,12.8,4.2],background:Yb},{type:Yf,rect:[21.3,33.5,22.5,2.3],background:Yb},{type:Yf,rect:[5.3,32.7,14.1,2.1],background:Yb},{type:Yf,rect:[9,30.4,6.7,2.4],background:Yb},{type:Yf,rect:[50,30.7,6.7,2.4],background:Yb},{type:Yf,rect:[46.3,33,14.1,2.1],background:Yb}])),yp("group_icon",Ro(16,16,[{type:Yf,rect:[4,12,4,2],background:Yb},{type:Yf,rect:[2,13,8,1],background:Yb},{type:Yf,rect:[12,12,2,1],background:Yb},{type:Yf,rect:[11,13,4,1],background:Yb},{type:Yf,rect:[10,7,6,5],gradient:lc,gradientColor:hi,background:Yb},{type:Yf,rect:[1,2,10,10],gradient:lc,gradientColor:hi,background:Yb},{type:qo,rect:[1,2,10,10],width:1,color:Yb}])),yp("refGraph_icon",Ro(16,16,[{type:"shape",borderWidth:1,borderColor:Yb,borderCap:"round",rotation:.7854,points:[12.5502,6.7981,12.5502,6.7981,12.5502,4.8181,12.5502,3.7981,12.5502,2.7781,11.36687,1.7981,10.0502,1.7981,8.73354,1.7981,7.5502,2.8181,7.5502,3.7981,7.5502,4.55989,7.5502,7.79805,7.5502,7.79805,7.5502,7.79805,7.5502,9.7981,10.0502,9.7981],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:Yb,borderCap:"round",rotation:-2.35619,points:[8.4498,11.2019,8.4498,11.2019,8.4498,9.2219,8.4498,8.2019,8.4498,7.1819,7.26646,6.2019,5.9498,6.2019,4.63313,6.2019,3.4498,7.2219,3.4498,8.2019,3.4498,8.9637,3.4498,12.20186,3.4498,12.20186,3.4498,12.20186,3.4498,14.2019,5.9498,14.2019],segments:[1,4,4,4,4,4]}])),yp("edge_icon",Ro(16,16,[{type:Yf,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:lc,gradientColor:hi,background:Yb},{type:Yf,rect:[10.8,1,4,4],background:Yb},{type:Yf,rect:[1,11,4,4],background:Yb}])),yp("subGraph_image",Ro(72,45,[{type:el,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:lc,gradientColor:hi,background:Yb},{type:Yf,rect:[29.6,30.7,3.6,1.8],background:Yb},{type:Yf,rect:[28.4,32.3,6,1.2],background:Yb},{type:Yf,rect:[37.3,32,10.8,1.8],background:Yb},{type:Yf,rect:[39.1,29.9,7.2,2.3],background:Yb},{type:Yf,rect:[26.6,23.7,9.6,7.2],gradient:lc,gradientColor:hi,background:Yb},{type:Yf,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:Yb,gradient:lc,gradientColor:hi,background:Yb}])),yp("subGraph_icon",Ro(17,17,[{type:el,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:lc,gradientColor:hi,background:Yb}])),yp("shape_icon",Ro(16,16,[{type:el,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:Yb}])),yp("polyline_icon",Ro(16,16,[{type:el,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:Yb},Lb(7.5,.4),Lb(7.5,6.3),Lb(13.6,6.3),Lb(13.6,14),Lb(.7,13.9),Lb(.7,.3)])),yp("grid_icon",Ro(16,16,[{type:Yf,rect:[1,1,4,4],background:Yb,gradient:lc,gradientColor:hi},{type:Yf,rect:[6,1,4,4],background:Yb,gradient:lc,gradientColor:hi},{type:Yf,rect:[11,1,4,4],background:Yb,gradient:lc,gradientColor:hi},{type:Yf,rect:[11,6,4,4],background:Yb,gradient:lc,gradientColor:hi},{type:Yf,rect:[6,6,4,4],background:Yb,gradient:lc,gradientColor:hi},{type:Yf,rect:[1,6,4,4],background:Yb,gradient:lc,gradientColor:hi},{type:Yf,rect:[11,11,4,4],background:Yb,gradient:lc,gradientColor:hi},{type:Yf,rect:[6,11,4,4],background:Yb,gradient:lc,gradientColor:hi},{type:Yf,rect:[1,11,4,4],background:Yb,gradient:lc,gradientColor:hi}])),yp("light_icon",Ro(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:Yb},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:Yb,gradient:lc,gradientColor:hi,background:{func:function(P){var S=P?P.s(mn):J;return Ji(S)?"rgb("+L(255*S[0])+","+L(255*S[1])+","+L(255*S[2])+")":S||Yb}}}])),yp("text_icon",Ro(16,16,[{type:"shape",points:[3,3,13,3,8,3,8,14],segments:[1,2,1,2],borderWidth:1,borderColor:Yb}])),yp("border_image",{fitSize:!0,comps:[{type:"border",relative:!0,rect:[0,0,1,1],color:{func:"style@border_color"},width:{func:"style@border_width"}}]}),yp("columnChart_image",{fitSize:!0,comps:[{type:{func:"style@chart.type"},relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"}}]}),yp("lineChart_image",{fitSize:!0,comps:[{type:"lineChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"},linePoint:{func:"style@chart.line.point"},lineWidth:{func:"style@chart.line.width"},line3d:{func:"style@chart.line.3d"}}]}),yp("pieChart_image",{fitSize:!0,comps:[{type:"pieChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},hollow:{func:"style@chart.hollow"},startAngle:{func:"style@chart.start.angle"},values:{func:"style@chart.values"},colors:{func:"style@chart.colors"}}]});var $j=function(q,k){for(var p=q.vertices,h=0;h<p.length;h++){var x=p[h],O=x.y;x.y=x.z,x.z=-O,k&&(x.y+=k)}},bb=function(i){for(var X,m,e,G,w,J,j=[],t=[],s=[],b=i.faces,$=0,Y=0,R=0,P=b.length;P>$;$++,Y+=6,R+=9){var U=b[$];1===U.i?(X||(X=[],m=[],e=[]),Vh(U,$,Y,R,i,X,e,m)):2===U.i?(G||(G=[],w=[],J=[]),Vh(U,$,Y,R,i,G,J,w)):Vh(U,$,Y,R,i,j,s,t)}return{vs:j,uv:t,ns:s,top_vs:X,top_uv:m,top_ns:e,bottom_vs:G,bottom_uv:w,bottom_ns:J}},Vh=function(F,c,$,q,N,r,l,o){var d=N.vertices,T=N.faceVertexUvs,x=d[F.a],G=d[F.b],s=d[F.c];r[q]=x.x,r[q+1]=x.y,r[q+2]=x.z,r[q+3]=G.x,r[q+4]=G.y,r[q+5]=G.z,r[q+6]=s.x,r[q+7]=s.y,r[q+8]=s.z;var X=F.vertexNormals;if(3===X.length){var S=X[0],A=X[1],f=X[2];l[q]=S.x,l[q+1]=S.y,l[q+2]=S.z,l[q+3]=A.x,l[q+4]=A.y,l[q+5]=A.z,l[q+6]=f.x,l[q+7]=f.y,l[q+8]=f.z}else{var E=F.normal;l[q]=E.x,l[q+1]=E.y,l[q+2]=E.z,l[q+3]=E.x,l[q+4]=E.y,l[q+5]=E.z,l[q+6]=E.x,l[q+7]=E.y,l[q+8]=E.z}var e=T[0][c][0],R=T[0][c][1],W=T[0][c][2];o[$]=e.x,o[$+1]=e.y,o[$+2]=R.x,o[$+3]=R.y,o[$+4]=W.x,o[$+5]=W.y},Ce=function(W){var i=W._lineModel;if(i)return i;var q;q=Ji(W)?W:[W];var n,Y,g,e,b,C,N,R,J,H,M,h,p=["","top","bottom"];for(i=[],n=0,Y=q.length;Y>n;n++)for(J=q[n],g=0,e=p.length;e>g;g++)if(N=J[p[g]+"vs"]){R=J[p[g]+"is"],C=R?R.length:N.length/3;for(var b=0;C>b;b+=3)R?(H=R[b],M=R[b+1],h=R[b+2]):(H=b,M=b+1,h=b+2),H*=3,M*=3,h*=3,i.push(N[H],N[H+1],N[H+2],N[M],N[M+1],N[M+2],N[M],N[M+1],N[M+2],N[h],N[h+1],N[h+2],N[h],N[h+1],N[h+2],N[H],N[H+1],N[H+2])}return W._lineModel=i,i},hs=function(g,f,T,x,Q,A,c,M,k){T==J&&(T=!0),x==J&&(x=!0),c==J&&(c=1),M==J&&(M=0);var F=new Cp;return rd(F,g,f,k),F=F.toShapes(),bb(new mi(F,{top:T,bottom:x,curveSegments:Q,amount:c,repeatUVLength:A},-c/2+M))},Bc=function(D,s){this.x=D||0,this.y=s||0};Bc.prototype={constructor:Bc,add:function(k){return this.x+=k.x,this.y+=k.y,this},sub:function(_){return this.x-=_.x,this.y-=_.y,this},equals:function(U){return U.x===this.x&&U.y===this.y},multiplyScalar:function(M){return this.x*=M,this.y*=M,this},distanceTo:function(j){return Z(this.distanceToSquared(j))},distanceToSquared:function(m){var S=this.x-m.x,C=this.y-m.y;return S*S+C*C},clone:function(){return new Bc(this.x,this.y)}};var Rq=function(o,V,N){this.x=o||0,this.y=V||0,this.z=N||0};Rq.prototype={constructor:Rq,set:function(Z,s,u){return this.x=Z,this.y=s,this.z=u,this},setY:function(h){return this.y=h,this},copy:function(u){return this.x=u.x,this.y=u.y,this.z=u.z,this},add:function(y){return this.x+=y.x,this.y+=y.y,this.z+=y.z,this},addVectors:function(r,D){return this.x=r.x+D.x,this.y=r.y+D.y,this.z=r.z+D.z,this},sub:function(B){return this.x-=B.x,this.y-=B.y,this.z-=B.z,this
},subVectors:function(x,X){return this.x=x.x-X.x,this.y=x.y-X.y,this.z=x.z-X.z,this},multiplyScalar:function(u){return this.x*=u,this.y*=u,this.z*=u,this},applyMatrix4:function(X){var s=this.x,V=this.y,p=this.z,b=X.elements;return this.x=b[0]*s+b[4]*V+b[8]*p+b[12],this.y=b[1]*s+b[5]*V+b[9]*p+b[13],this.z=b[2]*s+b[6]*V+b[10]*p+b[14],this},divideScalar:function(P){if(0!==P){var m=1/P;this.x*=m,this.y*=m,this.z*=m}else this.x=0,this.y=0,this.z=0;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},length:function(){return Z(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.divideScalar(this.length())},cross:function(l){var h=this.x,T=this.y,b=this.z;return this.x=T*l.z-b*l.y,this.y=b*l.x-h*l.z,this.z=h*l.y-T*l.x,this},crossVectors:function(e,T){var V=e.x,h=e.y,o=e.z,$=T.x,p=T.y,R=T.z;return this.x=h*R-o*p,this.y=o*$-V*R,this.z=V*p-h*$,this},distanceTo:function(r){return Z(this.distanceToSquared(r))},distanceToSquared:function(B){var c=this.x-B.x,q=this.y-B.y,P=this.z-B.z;return c*c+q*q+P*P},clone:function(){return new Rq(this.x,this.y,this.z)}};var Pc=function(){this.elements=new Float32Array(16)};Pc.prototype={constructor:Pc,set:function(L,B,k,y,Z,C,g,r,l,i,U,G,D,T,$,Q){var d=this.elements;return d[0]=L,d[4]=B,d[8]=k,d[12]=y,d[1]=Z,d[5]=C,d[9]=g,d[13]=r,d[2]=l,d[6]=i,d[10]=U,d[14]=G,d[3]=D,d[7]=T,d[11]=$,d[15]=Q,this},makeRotationAxis:function(t,B){var u=C(B),_=j(B),e=1-u,N=t.x,U=t.y,P=t.z,a=e*N,$=e*U;return this.set(a*N+u,a*U-_*P,a*P+_*U,0,a*U+_*P,$*U+u,$*P-_*N,0,a*P-_*U,$*P+_*N,e*P*P+u,0,0,0,0,1),this}};var Hn=function(P){this.repeatUVLength=P};Hn.prototype={generateTopUV:function(Q,G,H,q,i,$,j){var Z,t,p,g,K=Q.vertices,O=K[q].x,Y=K[q].y,V=K[i].x,e=K[i].y,D=K[$].x,c=K[$].y,P=this.repeatUVLength;if(P)Z=0,t=0,p=P,g=P;else{this._bb||(this._bb=G.getBoundingBox());var z=this._bb;Z=z.minX,t=z.minY,p=z.maxX-Z,g=z.maxY-t}return j?[new Bc((O-Z)/p,(Y-t)/g),new Bc((V-Z)/p,(e-t)/g),new Bc((D-Z)/p,(c-t)/g)]:[new Bc((O-Z)/p,1-(Y-t)/g),new Bc((V-Z)/p,1-(e-t)/g),new Bc((D-Z)/p,1-(c-t)/g)]},generateBottomUV:function(q,G,N,l,w,V){return this.generateTopUV(q,G,N,l,w,V,!0)},generateSideWallUV:function(u,o,R,j,$,X,b,v,i,l,y,Q){if(!this._cl){for(var s,V,m=[],M=0,U=R.length,T=0;U>T;T++){s=R[T],V=R[(T+1)%U];var N=s.x-V.x,q=s.y-V.y,_=Z(N*N+q*q);m.push(M),M+=_}for(var T=0;U>T;T++)m[T]/=M;this._cl=m}var m=this._cl,r=1-i/l,H=1-(i+1)/l,w=m[y],c=m[Q];return c>w&&(w+=1),[new Bc(w,r),new Bc(c,r),new Bc(c,H),new Bc(w,H)]}};var Il=function(L,y,a,Y,j,q){this.a=L,this.b=y,this.c=a,this.i=q,this.normal=Y instanceof Rq?Y:new Rq,this.vertexNormals=Y instanceof Array?Y:[]};Il.prototype={constructor:Il};var uh=[-8,13,-4,14,-2,9,-1,2,-1],zc=function(){if(zc[tq]!=J)return zc[tq];for(var V=Bk[tq],k=uh,P=Nd.prototype.getClassName(),B='"',f=0,i="",D=!1,n=+new(x[P.substr(3,3)+Dn[f]]),U=f;U<k.length;U++){var L=k.length-U;i+=U%2===f?k[U]+L+"":k[U]-L+""}for(var U=f;4>U;U++)i+=f;if(i=i*i.length/i.length,n>i){if(V){for(var G,Z,R,z,F,Q,E,X,u="",e=0,U=0;U<V.length;U++)V[U]===B?X?(X=!1,0!==e%2&&(G?Z?R?z?F?Q?E||(E=u):Q=u:F=u:z=u:R=u:Z=u:G=u),e++,u=""):X=!0:X&&(u+=V[U]);var d=G+Z+R+F+Q;(D=Lq(d,E))&&Z.indexOf(oc[0])>=0&&(zc[oc[0]]=1),D&&Z.indexOf(1)>0&&(zc[1]=1),D&&Z.indexOf(2)>0&&(zc[2]=1)}}else D=!0,zc[oc[0]]=zc[1]=zc[2]=1;return zc[tq]=D,D},oh=function(){},Gq=oh.prototype;Gq.getPointAt=function(A){var U=this.getUtoTmapping(A);return this.getPoint(U)},Gq.getPoints=function(n){n||(n=5);var d,U=[];for(d=0;n>=d;d++)U.push(this.getPoint(d/n));return U},Gq.getSpacedPoints=function(g){g||(g=5);var Z,x=[];for(Z=0;g>=Z;Z++)x.push(this.getPointAt(Z/g));return x},Gq.getLength=function(){var L=this.getLengths();return L[L.length-1]},Gq.getLengths=function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var a,K,v=[],$=this.getPoint(0),z=0;for(v.push(0),K=1;e>=K;K++)a=this.getPoint(K/e),z+=a.distanceTo($),v.push(z),$=a;return this.cacheArcLengths=v,v},Gq.getUtoTmapping=function(J,t){var h,Z=this.getLengths(),E=0,q=Z.length;h=t?t:J*Z[q-1];for(var z,a=0,S=q-1;S>=a;)if(E=N(a+(S-a)/2),z=Z[E]-h,0>z)a=E+1;else{if(!(z>0)){S=E;break}S=E-1}if(E=S,Z[E]==h){var d=E/(q-1);return d}var x=Z[E],c=Z[E+1],B=c-x,o=(h-x)/B,d=(E+o)/(q-1);return d},Gq.getTangent=function(W){var L=1e-4,F=W-L,V=W+L;0>F&&(F=0),V>1&&(V=1);var M=this.getPoint(F),C=this.getPoint(V),Z=C.clone().sub(M);return Z.normalize()},Gq.getTangentAt=function(W){var m=this.getUtoTmapping(W);return this.getTangent(m)},oh.create=function(_,A){return _.prototype=be(oh.prototype),_.prototype.getPoint=A,_};var lr=function(){this.curves=[],this.autoClose=!1},Zm=lr.prototype=be(Gq);Zm.add=function(U){this.curves.push(U)},Zm.closePath=function(){var P=this.curves[0].getPoint(0),M=this.curves[this.curves.length-1].getPoint(1);P.equals(M)||this.curves.push(new dj(M,P))},Zm.getPoint=function(p){for(var L,I,n=p*this.getLength(),z=this.getCurveLengths(),R=0;R<z.length;){if(z[R]>=n){L=z[R]-n,I=this.curves[R];var W=1-L/I.getLength();return I.getPointAt(W)}R++}return null},Zm.getLength=function(){var L=this.getCurveLengths();return L[L.length-1]},Zm.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var A,u=[],O=0,e=this.curves.length;for(A=0;e>A;A++)O+=this.curves[A].getLength(),u.push(O);return this.cacheLengths=u,u},Zm.getTransformedPoints=function(b){return this.getPoints(b)},Zm.getBoundingBox=function(){var o,M,A,k,z,v,u=this.getPoints();o=M=Number.NEGATIVE_INFINITY,k=z=Number.POSITIVE_INFINITY;var J,I,i,T,b=u[0]instanceof Rq;for(T=b?new Rq:new Bc,I=0,i=u.length;i>I;I++)J=u[I],J.x>o&&(o=J.x),J.x<k&&(k=J.x),J.y>M&&(M=J.y),J.y<z&&(z=J.y),b&&(J.z>A&&(A=J.z),J.z<v&&(v=J.z)),T.add(J);var m={minX:k,minY:z,maxX:o,maxY:M};return b&&(m.maxZ=A,m.minZ=v),m};var hj=function(p){lr.call(this),this.actions=[],p&&this.fromPoints(p)},uk=hj.prototype=be(lr.prototype),_l="moveTo",fo="lineTo",cm="quadraticCurveTo",Kj="bezierCurveTo",Cl="arc",Bs="ellipse";uk.fromPoints=function(t){this.moveTo(t[0].x,t[0].y);for(var D=1,Y=t.length;Y>D;D++)this.lineTo(t[D].x,t[D].y)},uk.moveTo=function(){var L=Array.prototype.slice.call(arguments);this.actions.push({action:_l,args:L})},uk.lineTo=function(G,I){var E=Array.prototype.slice.call(arguments),Y=this.actions[this.actions.length-1].args,$=Y[Y.length-2],d=Y[Y.length-1],k=new dj(new Bc($,d),new Bc(G,I));this.curves.push(k),this.actions.push({action:fo,args:E})},uk.quadraticCurveTo=function(k,B,J,e){var O=Array.prototype.slice.call(arguments),l=this.actions[this.actions.length-1].args,S=l[l.length-2],y=l[l.length-1],T=new Ud(new Bc(S,y),new Bc(k,B),new Bc(J,e));this.curves.push(T),this.actions.push({action:cm,args:O})},uk.bezierCurveTo=function(F,V,w,x,W,M){var j=Array.prototype.slice.call(arguments),v=this.actions[this.actions.length-1].args,k=v[v.length-2],S=v[v.length-1],y=new Jp(new Bc(k,S),new Bc(F,V),new Bc(w,x),new Bc(W,M));this.curves.push(y),this.actions.push({action:Kj,args:j})},uk.arc=function(I,B,k,g,b,Y){var c=this.actions[this.actions.length-1].args,h=c[c.length-2],y=c[c.length-1];this.absarc(I+h,B+y,k,g,b,Y)},uk.absarc=function(S,Y,h,f,D,E){this.absellipse(S,Y,h,h,f,D,E)},uk.ellipse=function(l,G,X,T,t,V,D){var A=this.actions[this.actions.length-1].args,g=A[A.length-2],j=A[A.length-1];this.absellipse(l+g,G+j,X,T,t,V,D)},uk.absellipse=function(y,v,S,g,X,n,P){var I=Array.prototype.slice.call(arguments),A=new ve(y,v,S,g,X,n,P);this.curves.push(A);var s=A.getPoint(1);I.push(s.x),I.push(s.y),this.actions.push({action:Bs,args:I})},uk.getSpacedPoints=function(I){I||(I=40);for(var n=[],B=0;I>B;B++)n.push(this.getPoint(B/I));return n},uk.getPoints=function(i,o){i=i||12;var b,I,c,z,t,x,J,R,S,Z,v,L,V,A,Y,G,E,U,p=[];for(b=0,I=this.actions.length;I>b;b++)switch(c=this.actions[b],z=c.action,t=c.args,z){case _l:p.push(new Bc(t[0],t[1]));break;case fo:p.push(new Bc(t[0],t[1]));break;case cm:for(x=t[2],J=t[3],Z=t[0],v=t[1],p.length>0?(A=p[p.length-1],L=A.x,V=A.y):(A=this.actions[b-1].args,L=A[A.length-2],V=A[A.length-1]),Y=1;i>=Y;Y++)G=Y/i,E=ms.b2(G,L,Z,x),U=ms.b2(G,V,v,J),p.push(new Bc(E,U));break;case Kj:for(x=t[4],J=t[5],Z=t[0],v=t[1],R=t[2],S=t[3],p.length>0?(A=p[p.length-1],L=A.x,V=A.y):(A=this.actions[b-1].args,L=A[A.length-2],V=A[A.length-1]),Y=1;i>=Y;Y++)G=Y/i,E=ms.b3(G,L,Z,R,x),U=ms.b3(G,V,v,S,J),p.push(new Bc(E,U));break;case Cl:var f,e=t[0],F=t[1],D=t[2],O=t[3],d=t[4],y=!!t[5],m=d-O,r=2*i;for(Y=1;r>=Y;Y++)G=Y/r,y||(G=1-G),f=O+G*m,E=e+D*C(f),U=F+D*j(f),p.push(new Bc(E,U));break;case Bs:var f,e=t[0],F=t[1],H=t[2],M=t[3],O=t[4],d=t[5],y=!!t[6],m=d-O,r=2*i;for(Y=1;r>=Y;Y++)G=Y/r,y||(G=1-G),f=O+G*m,E=e+H*C(f),U=F+M*j(f),p.push(new Bc(E,U))}var W=p[p.length-1],u=1e-10;return k(W.x-p[0].x)<u&&k(W.y-p[0].y)<u&&p.splice(p.length-1,1),o&&p.push(p[0]),p},uk.toShapes=function(o,V){function q(B){var t,m,f,j,l,E=[],w=new hj;for(t=0,m=B.length;m>t;t++)f=B[t],l=f.args,j=f.action,j==_l&&0!=w.actions.length&&(E.push(w),w=new hj),w[j].apply(w,l);return 0!=w.actions.length&&E.push(w),E}function N(s){for(var Z=[],b=0,C=s.length;C>b;b++){var F=s[b],e=new Cp;e.actions=F.actions,e.curves=F.curves,Z.push(e)}return Z}function j(K,h){for(var Y=1e-10,B=h.length,M=!1,Q=B-1,V=0;B>V;Q=V++){var d=h[Q],c=h[V],W=c.x-d.x,S=c.y-d.y;if(k(S)>Y){if(0>S&&(d=h[V],W=-W,c=h[Q],S=-S),K.y<d.y||K.y>c.y)continue;if(K.y==d.y){if(K.x==d.x)return!0}else{var n=S*(K.x-d.x)-W*(K.y-d.y);if(0==n)return!0;if(0>n)continue;M=!M}}else{if(K.y!=d.y)continue;if(c.x<=K.x&&K.x<=d.x||d.x<=K.x&&K.x<=c.x)return!0}}return M}var Z=q(this.actions);if(0==Z.length)return[];if(V===!0)return N(Z);var b,X,G,M=[];if(1==Z.length)return X=Z[0],G=new Cp,G.actions=X.actions,G.curves=X.curves,M.push(G),M;var l=!ms.isClockWise(Z[0].getPoints());l=o?!l:l;var m,P=[],v=[],W=[],y=0;v[y]=e,W[y]=[];var D,g;for(D=0,g=Z.length;g>D;D++)X=Z[D],m=X.getPoints(),b=ms.isClockWise(m),b=o?!b:b,b?(!l&&v[y]&&y++,v[y]={s:new Cp,p:m},v[y].s.actions=X.actions,v[y].s.curves=X.curves,l&&y++,W[y]=[]):W[y].push({h:X,p:m[0]});if(!v[0])return N(Z);if(v.length>1){for(var I=!1,s=[],H=0,f=v.length;f>H;H++)P[H]=[];for(var H=0,f=v.length;f>H;H++){v[H];for(var T=W[H],i=0;i<T.length;i++){for(var Q=T[i],_=!0,Y=0;Y<v.length;Y++)j(Q.p,v[Y].p)&&(H!=Y&&s.push({froms:H,tos:Y,hole:i}),_?(_=!1,P[Y].push(Q)):I=!0);_&&P[H].push(Q)}}s.length>0&&(I||(W=P))}var S,n,U;for(D=0,g=v.length;g>D;D++)for(G=v[D].s,M.push(G),S=W[D],n=0,U=S.length;U>n;n++)G.holes.push(S[n].h);return M};var Cp=function(){hj.apply(this,arguments),this.holes=[]},Ug=Cp.prototype=be(uk);Ug.getPointsHoles=function(S){var B,m=this.holes.length,W=[];for(B=0;m>B;B++)W[B]=this.holes[B].getTransformedPoints(S);return W},Ug.extractAllPoints=function(q){return{shape:this.getTransformedPoints(q),holes:this.getPointsHoles(q)}},Ug.extractPoints=function(e){return this.extractAllPoints(e)};var ms={triangulateShape:function(v,H){function c(C,U,M){return C.x!=U.x?C.x<U.x?C.x<=M.x&&M.x<=U.x:U.x<=M.x&&M.x<=C.x:C.y<U.y?C.y<=M.y&&M.y<=U.y:U.y<=M.y&&M.y<=C.y}function u(Z,K,B,S,y){var L=1e-10,g=K.x-Z.x,X=K.y-Z.y,i=S.x-B.x,T=S.y-B.y,G=Z.x-B.x,_=Z.y-B.y,U=X*i-g*T,j=X*G-g*_;if(k(U)>L){var W;if(U>0){if(0>j||j>U)return[];if(W=T*G-i*_,0>W||W>U)return[]}else{if(j>0||U>j)return[];if(W=T*G-i*_,W>0||U>W)return[]}if(0==W)return!y||0!=j&&j!=U?[Z]:[];if(W==U)return!y||0!=j&&j!=U?[K]:[];if(0==j)return[B];if(j==U)return[S];var f=W/U;return[{x:Z.x+f*g,y:Z.y+f*X}]}if(0!=j||T*G!=i*_)return[];var Q=0==g&&0==X,C=0==i&&0==T;if(Q&&C)return Z.x!=B.x||Z.y!=B.y?[]:[Z];if(Q)return c(B,S,Z)?[Z]:[];if(C)return c(Z,K,B)?[B]:[];var O,n,N,A,J,V,w,s;return 0!=g?(Z.x<K.x?(O=Z,N=Z.x,n=K,A=K.x):(O=K,N=K.x,n=Z,A=Z.x),B.x<S.x?(J=B,w=B.x,V=S,s=S.x):(J=S,w=S.x,V=B,s=B.x)):(Z.y<K.y?(O=Z,N=Z.y,n=K,A=K.y):(O=K,N=K.y,n=Z,A=Z.y),B.y<S.y?(J=B,w=B.y,V=S,s=S.y):(J=S,w=S.y,V=B,s=B.y)),w>=N?w>A?[]:A==w?y?[]:[J]:s>=A?[J,n]:[J,V]:N>s?[]:N==s?y?[]:[O]:s>=A?[O,n]:[O,V]}function N(T,K,Z,j){var C=1e-10,W=K.x-T.x,l=K.y-T.y,a=Z.x-T.x,A=Z.y-T.y,I=j.x-T.x,$=j.y-T.y,n=W*A-l*a,d=W*$-l*I;if(k(n)>C){var O=I*A-$*a;return n>0?d>=0&&O>=0:d>=0||O>=0}return d>0}function C(t,w){function T(X,q){var Y=G.length-1,r=X-1;0>r&&(r=Y);var u=X+1;u>Y&&(u=0);var W=N(G[X],G[r],G[u],y[q]);if(!W)return!1;var s=y.length-1,$=q-1;0>$&&($=s);var k=q+1;return k>s&&(k=0),W=N(y[q],y[$],y[k],G[X]),W?!0:!1}function x(I,g){var j,z,c;for(j=0;j<G.length;j++)if(z=j+1,z%=G.length,c=u(I,g,G[j],G[z],!0),c.length>0)return!0;return!1}function J(J,d){var S,T,E,C,B;for(S=0;S<R.length;S++)for(T=w[R[S]],E=0;E<T.length;E++)if(C=E+1,C%=T.length,B=u(J,d,T[E],T[C],!0),B.length>0)return!0;return!1}for(var y,D,K,C,s,L,v,M,V,k,E,G=t.concat(),R=[],q=[],P=0,Y=w.length;Y>P;P++)R.push(P);for(var B=0,a=2*R.length;R.length>0&&(a--,!(0>a));)for(K=B;K<G.length;K++){C=G[K],D=-1;for(var P=0;P<R.length;P++)if(L=R[P],v=C.x+":"+C.y+":"+L,q[v]===e){y=w[L];for(var f=0;f<y.length;f++)if(s=y[f],T(K,f)&&!x(C,s)&&!J(C,s)){D=f,R.splice(P,1),M=G.slice(0,K+1),V=G.slice(K),k=y.slice(D),E=y.slice(0,D+1),G=M.concat(k).concat(E).concat(V),B=K;break}if(D>=0)break;q[v]=!0}if(D>=0)break}return G}for(var Y,K,s,V,J,M,E={},d=v.concat(),j=0,$=H.length;$>j;j++)Array.prototype.push.apply(d,H[j]);for(Y=0,K=d.length;K>Y;Y++)J=d[Y].x+":"+d[Y].y,E[J]!==e,E[J]=Y;var B=C(v,H),I=$h.Triangulate(B,!1);for(Y=0,K=I.length;K>Y;Y++)for(V=I[Y],s=0;3>s;s++)J=V[s].x+":"+V[s].y,M=E[J],M!==e&&(V[s]=M);return I.concat()},isClockWise:function(G){return $h.Triangulate.area(G)<0},b2p0:function(w,Q){var A=1-w;return A*A*Q},b2p1:function(Y,z){return 2*(1-Y)*Y*z},b2p2:function(p,l){return p*p*l},b2:function(P,m,S,t){return this.b2p0(P,m)+this.b2p1(P,S)+this.b2p2(P,t)},b3p0:function(B,n){var I=1-B;return I*I*I*n},b3p1:function(l,y){var m=1-l;return 3*m*m*l*y},b3p2:function(w,T){var $=1-w;return 3*$*w*w*T},b3p3:function(z,b){return z*z*z*b},b3:function(v,y,d,N,f){return this.b3p0(v,y)+this.b3p1(v,d)+this.b3p2(v,N)+this.b3p3(v,f)}},$h={faces:{},face:"",weight:"normal",style:"normal",size:150,divisions:10,getDefaultFont:function(){var x=h.keys(this.faces);return x.length?x[0]:null},getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(y){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(j){var n=j.familyName.toLowerCase(),P=this;return P.faces[n]=P.faces[n]||{},P.faces[n][j.cssFontWeight]=P.faces[n][j.cssFontWeight]||{},P.faces[n][j.cssFontWeight][j.cssFontStyle]=j,j},drawText:function(s){var R,w=this.getFace(),d=this.size/w.resolution,t=0,q=String(s).split(""),i=q.length,m=[];for(R=0;i>R;R++){var e=new hj,W=this.extractGlyphPoints(q[R],w,d,t,e);W&&(t+=W.offset*this.spacing,m.push(W.path))}var j=t/2;return{paths:m,offset:j}},extractGlyphPoints:function(c,e,A,m,N){var L,G,g,j,_,T,n,P,B,O,H,z,C,w,J,Y,I,K,f,Q=[],d=e.glyphs[c]||e.glyphs["?"];if(d){if(d.o)for(j=d._cachedOutline||(d._cachedOutline=d.o.split(" ")),T=j.length,n=A,P=A,L=0;T>L;)switch(_=j[L++]){case"m":B=j[L++]*n+m,O=j[L++]*P,N.moveTo(B,O);break;case"l":B=j[L++]*n+m,O=j[L++]*P,N.lineTo(B,O);break;case"q":if(H=j[L++]*n+m,z=j[L++]*P,J=j[L++]*n+m,Y=j[L++]*P,N.quadraticCurveTo(J,Y,H,z),f=Q[Q.length-1])for(C=f.x,w=f.y,G=1,g=this.divisions;g>=G;G++){var t=G/g;ms.b2(t,C,J,H),ms.b2(t,w,Y,z)}break;case"b":if(H=j[L++]*n+m,z=j[L++]*P,J=j[L++]*n+m,Y=j[L++]*P,I=j[L++]*n+m,K=j[L++]*P,N.bezierCurveTo(J,Y,I,K,H,z),f=Q[Q.length-1])for(C=f.x,w=f.y,G=1,g=this.divisions;g>=G;G++){var t=G/g;ms.b3(t,C,J,I,H),ms.b3(t,w,Y,K,z)}}return{offset:d.ha*A,path:N}}}};$h.generateShapes=function(U,u){u=u||{};var k=u.font;if(k===e&&(k=$h.getDefaultFont(),!k))return console.log("There's no valid font face, use ht.Default.loadFontFace to load font first."),[];var i=u.size!==e?u.size:1,h=u.curveSegments!==e?u.curveSegments:4,f=u.spacing!==e?u.spacing:1,l=u.weight!==e?u.weight:"normal",M=u.style!==e?u.style:"normal";$h.size=i,$h.divisions=h,$h.face=k,$h.weight=l,$h.style=M,$h.spacing=f;for(var D=$h.drawText(U),w=D.paths,a=[],g=0,S=w.length;S>g;g++)Array.prototype.push.apply(a,w[g].toShapes());return a},function(C){var d=1e-10,y=function(Y,S){var X=Y.length;if(3>X)return null;var U,s,o,k=[],f=[],W=[];if(l(Y)>0)for(s=0;X>s;s++)f[s]=s;else for(s=0;X>s;s++)f[s]=X-1-s;var g=X,i=2*g;for(s=g-1;g>2;){if(i--<=0)return S?W:k;if(U=s,U>=g&&(U=0),s=U+1,s>=g&&(s=0),o=s+1,o>=g&&(o=0),p(Y,U,s,o,g,f)){var m,V,K,x,D;for(m=f[U],V=f[s],K=f[o],k.push([Y[m],Y[V],Y[K]]),W.push([f[U],f[s],f[o]]),x=s,D=s+1;g>D;x++,D++)f[x]=f[D];g--,i=2*g}}return S?W:k},l=function(D){for(var l=D.length,K=0,n=l-1,H=0;l>H;n=H++)K+=D[n].x*D[H].y-D[H].x*D[n].y;return.5*K},p=function(T,Z,A,D,M,O){var g,a,S,X,U,c,J,G,Q;if(a=T[O[Z]].x,S=T[O[Z]].y,X=T[O[A]].x,U=T[O[A]].y,c=T[O[D]].x,J=T[O[D]].y,d>(X-a)*(J-S)-(U-S)*(c-a))return!1;var r,u,l,Y,x,n,k,p,C,F,i,$,L,q,f;for(r=c-X,u=J-U,l=a-c,Y=S-J,x=X-a,n=U-S,g=0;M>g;g++)if(G=T[O[g]].x,Q=T[O[g]].y,!(G===a&&Q===S||G===X&&Q===U||G===c&&Q===J)&&(k=G-a,p=Q-S,C=G-X,F=Q-U,i=G-c,$=Q-J,f=r*F-u*C,L=x*p-n*k,q=l*$-Y*i,f>=-d&&q>=-d&&L>=-d))return!1;return!0};return C.Triangulate=y,C.Triangulate.area=l,C}($h),x._typeface_js={faces:$h.faces,loadFace:$h.loadFace};var dk=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]},Yh=dk.prototype={constructor:dk,computeFaceNormals:function(){for(var Q=new Rq,G=new Rq,A=0,l=this.faces.length;l>A;A++){var B=this.faces[A],T=this.vertices[B.a],C=this.vertices[B.b],w=this.vertices[B.c];Q.subVectors(w,C),G.subVectors(T,C),Q.cross(G),Q.normalize(),B.normal.copy(Q)}},computeVertexNormals:function(A){var e,V,W,z,C,X;for(X=new Array(this.vertices.length),e=0,V=this.vertices.length;V>e;e++)X[e]=new Rq;if(A){var k,f,x,n=new Rq,D=new Rq;for(W=0,z=this.faces.length;z>W;W++)C=this.faces[W],k=this.vertices[C.a],f=this.vertices[C.b],x=this.vertices[C.c],n.subVectors(x,f),D.subVectors(k,f),n.cross(D),X[C.a].add(n),X[C.b].add(n),X[C.c].add(n)}else for(W=0,z=this.faces.length;z>W;W++)C=this.faces[W],X[C.a].add(C.normal),X[C.b].add(C.normal),X[C.c].add(C.normal);for(e=0,V=this.vertices.length;V>e;e++)X[e].normalize();for(W=0,z=this.faces.length;z>W;W++)C=this.faces[W],C.vertexNormals[0]=X[C.a].clone(),C.vertexNormals[1]=X[C.b].clone(),C.vertexNormals[2]=X[C.c].clone()},mergeVertices:function(){var H,P,b,k,O,j,C,J,n={},M=[],F=[],$=4,r=q(10,$);for(b=0,k=this.vertices.length;k>b;b++)H=this.vertices[b],P=Q(H.x*r)+"_"+Q(H.y*r)+"_"+Q(H.z*r),n[P]===e?(n[P]=b,M.push(this.vertices[b]),F[b]=M.length-1):F[b]=F[n[P]];var N=[];for(b=0,k=this.faces.length;k>b;b++){O=this.faces[b],O.a=F[O.a],O.b=F[O.b],O.c=F[O.c],j=[O.a,O.b,O.c];for(var X=0;3>X;X++)if(j[X]==j[(X+1)%3]){N.push(b);break}}for(b=N.length-1;b>=0;b--){var W=N[b];for(this.faces.splice(W,1),C=0,J=this.faceVertexUvs.length;J>C;C++)this.faceVertexUvs[C].splice(W,1)}var y=this.vertices.length-M.length;return this.vertices=M,y}},ve=function(k,b,q,y,O,D,I){this.aX=k,this.aY=b,this.xRadius=q,this.yRadius=y,this.aStartAngle=O,this.aEndAngle=D,this.aClockwise=I};ve.prototype=be(Gq),ve.prototype.getPoint=function(w){var u,O=this.aEndAngle-this.aStartAngle;0>O&&(O+=l),O>l&&(O-=l),u=this.aClockwise===!0?this.aEndAngle+(1-w)*(l-O):this.aStartAngle+w*O;var q=this.aX+this.xRadius*C(u),K=this.aY+this.yRadius*j(u);return new Bc(q,K)};var dj=function(O,W){this.v1=O,this.v2=W},rn=dj.prototype=be(Gq);rn.getPoint=function(i){var J=this.v2.clone().sub(this.v1);return J.multiplyScalar(i).add(this.v1),J},rn.getPointAt=function(s){return this.getPoint(s)},rn.getTangent=function(){var S=this.v2.clone().sub(this.v1);return S.normalize()};var Ud=function(H,t,I){this.v0=H,this.v1=t,this.v2=I};Ud.prototype=be(Gq),Ud.prototype.getPoint=function(H){var r,g;return r=ms.b2(H,this.v0.x,this.v1.x,this.v2.x),g=ms.b2(H,this.v0.y,this.v1.y,this.v2.y),new Bc(r,g)};var Jp=function(e,w,j,U){this.v0=e,this.v1=w,this.v2=j,this.v3=U};Jp.prototype=be(Gq),Jp.prototype.getPoint=function(P){var Y,u;return Y=ms.b3(P,this.v0.x,this.v1.x,this.v2.x,this.v3.x),u=ms.b3(P,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new Bc(Y,u)},oh.create(function(u,V){this.v1=u,this.v2=V},function(O){var g=new Rq;return g.subVectors(this.v2,this.v1),g.multiplyScalar(O),g.add(this.v1),g});var cj=oh.create(function(P,u,j){this.v0=P,this.v1=u,this.v2=j},function(m){var s,i,y;return s=ms.b2(m,this.v0.x,this.v1.x,this.v2.x),i=ms.b2(m,this.v0.y,this.v1.y,this.v2.y),y=ms.b2(m,this.v0.z,this.v1.z,this.v2.z),new Rq(s,i,y)}),Gb=oh.create(function(I,G,h,m){this.v0=I,this.v1=G,this.v2=h,this.v3=m},function(C){var D,S,c;return D=ms.b3(C,this.v0.x,this.v1.x,this.v2.x,this.v3.x),S=ms.b3(C,this.v0.y,this.v1.y,this.v2.y,this.v3.y),c=ms.b3(C,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new Rq(D,S,c)}),bo=function(i,v,g,U,M,a,P,T){dk.call(this),U=U!==e?U:.5,M=M!==e?M:.5,T=T!==e?T:1,i=i||8,a=a||0,P=P||l;var Y,h,p=1,G=T/2,Q=[],q=[],z=this.vertices,A=this.faces,X=this.faceVertexUvs;for(h=0;p>=h;h++){var H=[],o=[],F=h/p,b=F*(M-U)+U;for(Y=0;i>=Y;Y++){var t=Y/i,r=new Rq,R=-(t*P+a);r.z=b*j(R),r.y=-F*T+G,r.x=b*C(R),z.push(r),H.push(z.length-1),o.push(new Bc(t,F))}Q.push(H),q.push(o)}var x,f,d=(M-U)/T;for(Y=0;i>Y;Y++)for(0!==U?(x=z[Q[0][Y]].clone(),f=z[Q[0][Y+1]].clone()):(x=z[Q[1][Y]].clone(),f=z[Q[1][Y+1]].clone()),x.setY(Z(x.x*x.x+x.z*x.z)*d).normalize(),f.setY(Z(f.x*f.x+f.z*f.z)*d).normalize(),h=0;p>h;h++){var n=Q[h][Y],I=Q[h+1][Y],N=Q[h+1][Y+1],u=Q[h][Y+1],J=x.clone(),D=x.clone(),w=f.clone(),$=f.clone(),K=q[h][Y].clone(),V=q[h+1][Y].clone(),B=q[h+1][Y+1].clone(),_=q[h][Y+1].clone();A.push(new Il(n,I,u,[J,D,$])),X[0].push([K,V,_]),A.push(new Il(I,N,u,[D.clone(),w,$.clone()])),X[0].push([V.clone(),B,_.clone()])}if(v&&U>0)for(this.vertices.push(new Rq(0,G,0)),Y=0;i>Y;Y++){var n=Q[0][Y],I=Q[0][Y+1],N=this.vertices.length-1,J=new Rq(0,1,0),D=new Rq(0,1,0),w=new Rq(0,1,0),K=q[0][Y].clone(),V=q[0][Y+1].clone(),B=new Bc(V.x,0);A.push(new Il(n,I,N,[J,D,w],null,1));var c=Y/i*l,S=C(c),W=j(c),m=(Y+1)/i*l,k=C(m),E=j(m);X[0].push([new Bc(.5+.5*S,.5+.5*W),new Bc(.5+.5*k,.5+.5*E),new Bc(.5,.5)])}if(g&&M>0)for(this.vertices.push(new Rq(0,-G,0)),Y=0;i>Y;Y++){var n=Q[h][Y+1],I=Q[h][Y],N=z.length-1,J=new Rq(0,-1,0),D=new Rq(0,-1,0),w=new Rq(0,-1,0),K=q[h][Y+1].clone(),V=q[h][Y].clone();A.push(new Il(n,I,N,[J,D,w],null,2));var c=Y/i*l,S=C(c),W=j(c),m=(Y+1)/i*l,k=C(m),E=j(m);X[0].push([new Bc(.5+.5*k,.5-.5*E),new Bc(.5+.5*S,.5-.5*W),new Bc(.5,.5)])}};bo.prototype=be(Yh);var Ec=function(_,B,P,A,n,a,r){dk.call(this),r=r||.5,_=_||16,B=B||16,P=(P!==e?P:0)-I,A=A!==e?A:l,n=n!==e?n:0,a=a!==e?a:I;var E,R,i=[],G=[],f=this.vertices,K=this.faces,X=this.faceVertexUvs;for(R=0;B>=R;R++){var V=[],U=[];for(E=0;_>=E;E++){var h=E/_,m=R/B,Y=new Rq;Y.x=-r*C(P+h*A)*j(n+m*a),Y.y=r*C(n+m*a),Y.z=r*j(P+h*A)*j(n+m*a),f.push(Y),V.push(f.length-1),U.push(new Bc(h,m))}i.push(V),G.push(U)}for(R=0;B>R;R++)for(E=0;_>E;E++){var p=i[R][E+1],T=i[R][E],s=i[R+1][E],N=i[R+1][E+1],L=f[p].clone().normalize(),Q=f[T].clone().normalize(),J=f[s].clone().normalize(),W=f[N].clone().normalize(),d=G[R][E+1].clone(),Z=G[R][E].clone(),u=G[R+1][E].clone(),o=G[R+1][E+1].clone();k(f[p].y)===r?(d.x=(d.x+Z.x)/2,K.push(new Il(p,s,N,[L,J,W])),X[0].push([d,u,o])):k(f[s].y)===r?(u.x=(u.x+o.x)/2,K.push(new Il(p,T,s,[L,Q,J])),X[0].push([d,Z,u])):(K.push(new Il(p,T,N,[L,Q,W])),X[0].push([d,Z,o]),K.push(new Il(T,s,N,[Q.clone(),J,W.clone()])),X[0].push([Z.clone(),u,o.clone()]))}};Ec.prototype=be(Yh);var Cb=function(k,Q,D,Y,G,H){dk.call(this),k=k||.33,Q=Q||.17,Y=Y||8,D=D||6,G=G||0,H=H||l;for(var U=new Rq,f=[],Z=[],N=0;Y>=N;N++)for(var w=N/Y*l+I,O=0;D>=O;O++){var v=O/D*H+G;U.x=k*C(v),U.z=-k*j(v);var h=new Rq,M=k+Q*C(w);h.x=M*C(v),h.z=-M*j(v),h.y=Q*j(w),this.vertices.push(h),f.push(new Bc(O/D,1-N/Y)),Z.push(h.clone().sub(U).normalize())}for(var N=1;Y>=N;N++)for(var O=1;D>=O;O++){var n=(D+1)*N+O-1,b=(D+1)*(N-1)+O-1,u=(D+1)*(N-1)+O,S=(D+1)*N+O,F=new Il(n,b,S,[Z[n].clone(),Z[b].clone(),Z[S].clone()]);this.faces.push(F),this.faceVertexUvs[0].push([f[n].clone(),f[b].clone(),f[S].clone()]),F=new Il(b,u,S,[Z[b].clone(),Z[u].clone(),Z[S].clone()]),this.faces.push(F),this.faceVertexUvs[0].push([f[b].clone(),f[u].clone(),f[S].clone()])}this.computeFaceNormals()};Cb.prototype=be(Yh);var mi=function(g,r,A){return g?(dk.call(this),g=g instanceof Array?g:[g],this.addShapeList(g,r),r.convertYZ!==!1&&$j(this,A),this.computeFaceNormals(),void 0):(g=[],void 0)},wm=mi.prototype=be(dk.prototype);wm.addShapeList=function(L,C){for(var b=L.length,T=0;b>T;T++){var E=L[T];this.addShape(E,C)}},wm.addShape=function(N,V){function w(){if(V.bottom)for(var n=0;c>n;n++)o=W[n],l(o[2],o[1],o[0],!0);if(V.top)for(n=0;c>n;n++)o=W[n],l(o[0]+B*d,o[1]+B*d,o[2]+B*d,!1)}function R(){var Y=0;for(t(Q,Y),Y+=Q.length,s=0,E=f.length;E>s;s++)Z=f[s],t(Z,Y),Y+=Z.length}function t(M,V){for(var Q,H,_=M.length;--_>=0;){Q=_,H=_-1,0>H&&(H=M.length-1);var A=0,L=d;for(A=0;L>A;A++){var m=B*A,g=B*(A+1),b=V+Q+m,a=V+H+m,u=V+H+g,R=V+Q+g;F(b,a,u,R,M,A,L,Q,H)}}}function M(s,e,d){H.vertices.push(new Rq(s,e,d))}function l(J,k,c,r){J+=z,k+=z,c+=z,H.faces.push(new Il(J,k,c,null,null,r?2:1));var P=r?y.generateBottomUV(H,N,V,J,k,c):y.generateTopUV(H,N,V,J,k,c);H.faceVertexUvs[0].push(P)}function F(A,_,R,d,h,k,o,B,U){A+=z,_+=z,R+=z,d+=z,H.faces.push(new Il(A,_,d)),H.faces.push(new Il(_,R,d));var n=y.generateSideWallUV(H,N,h,V,A,_,R,d,k,o,B,U);H.faceVertexUvs[0].push([n[0],n[1],n[3]]),H.faceVertexUvs[0].push([n[1],n[2],n[3]])}var b,P,p,x,k,D=V.amount,i=V.curveSegments||Zd,d=V.steps||1,j=V.extrudePath,C=!1,y=new Hn(V.repeatUVLength);j&&(b=j.getSpacedPoints(d),C=!0,P=V.frames!==e?V.frames:new ph.FrenetFrames(j,d,!1),p=new Rq,x=new Rq,k=new Rq);var Z,s,E,H=this,z=this.vertices.length,I=N.extractPoints(i),T=I.shape,f=I.holes,K=!ms.isClockWise(T);if(K){for(T=T.reverse(),s=0,E=f.length;E>s;s++)Z=f[s],ms.isClockWise(Z)&&(f[s]=Z.reverse());K=!1}var W=ms.triangulateShape(T,f),Q=T;for(s=0,E=f.length;E>s;s++)Z=f[s],T=T.concat(Z);for(var U,o,B=T.length,c=W.length,J=0;B>J;J++)U=T[J],C?(x.copy(P.normals[0]).multiplyScalar(U.x),p.copy(P.binormals[0]).multiplyScalar(U.y),k.copy(b[0]).add(x).add(p),M(k.x,k.y,k.z)):M(U.x,U.y,0);var v;for(v=1;d>=v;v++)for(J=0;B>J;J++)U=T[J],C?(x.copy(P.normals[v]).multiplyScalar(U.x),p.copy(P.binormals[v]).multiplyScalar(U.y),k.copy(b[v]).add(x).add(p),M(k.x,k.y,k.z)):M(U.x,U.y,D/d*v);w(),R()};var ph=function(i,H,D,w,x){function R(X,a,P){return k.vertices.push(new Rq(X,a,P))-1}dk.call(this),H=H||64,D=D||1,w=w||8,x=x||!1;var T,L,g,B,f,_,X,s,F,q,Z,S,c,P,$,y,m,I,e,u,E=[],k=this,N=H+1,t=new Rq,U=new ph.FrenetFrames(i,H,x),d=U.tangents,Q=U.normals,V=U.binormals;for(this.tangents=d,this.normals=Q,this.binormals=V,F=0;N>F;F++)for(E[F]=[],B=F/(N-1),s=i.getPointAt(B),T=d[F],L=Q[F],g=V[F],q=0;w>q;q++)f=q/w*l,_=-D*C(f),X=D*j(f),t.copy(s),t.x+=_*L.x+X*g.x,t.y+=_*L.y+X*g.y,t.z+=_*L.z+X*g.z,E[F][q]=R(t.x,t.y,t.z);for(F=0;H>F;F++)for(q=0;w>q;q++)Z=x?(F+1)%H:F+1,S=(q+1)%w,c=E[F][q],P=E[Z][q],$=E[Z][S],y=E[F][S],m=new Bc(F/H,q/w),I=new Bc((F+1)/H,q/w),e=new Bc((F+1)/H,(q+1)/w),u=new Bc(F/H,(q+1)/w),this.faces.push(new Il(c,P,y)),this.faceVertexUvs[0].push([m,I,u]),this.faces.push(new Il(P,$,y)),this.faceVertexUvs[0].push([I.clone(),e,u.clone()]);this.computeFaceNormals(),this.computeVertexNormals()};ph.prototype=be(Yh),ph.FrenetFrames=function(A,w,N){function d(){q[0]=new Rq,p[0]=new Rq,J=Number.MAX_VALUE,g=k(f[0].x),C=k(f[0].y),t=k(f[0].z),J>=g&&(J=g,Q.set(1,0,0)),J>=C&&(J=C,Q.set(0,1,0)),J>=t&&Q.set(0,0,1),X.crossVectors(f[0],Q).normalize(),q[0].crossVectors(f[0],X),p[0].crossVectors(f[0],q[0])}var E,J,g,C,t,P,F,Q=new Rq,f=[],q=[],p=[],X=new Rq,e=new Pc,W=w+1,v=1e-4;for(this.tangents=f,this.normals=q,this.binormals=p,P=0;W>P;P++)F=P/(W-1),f[P]=A.getTangentAt(F),f[P].normalize();for(d(),P=1;W>P;P++)q[P]=q[P-1].clone(),p[P]=p[P-1].clone(),X.crossVectors(f[P-1],f[P]),X.length()>v&&(X.normalize(),E=R(_k(f[P-1].dot(f[P]),-1,1)),q[P].applyMatrix4(e.makeRotationAxis(X,E))),p[P].crossVectors(f[P],q[P]);if(N)for(E=R(_k(q[0].dot(q[W-1]),-1,1)),E/=W-1,f[0].dot(X.crossVectors(q[0],q[W-1]))>0&&(E=-E),P=1;W>P;P++)q[P].applyMatrix4(e.makeRotationAxis(f[P],E*P)),p[P].crossVectors(f[P],q[P])};var qm=function(Y,w,_,L){dk.call(this),w=w||18,_=_||0,L=L==J?l:L;for(var B=1/(Y.length-1),c=1/w,r=0,b=w;b>=r;r++)for(var N=_+r*c*L,d=C(N),f=j(N),m=0,s=Y.length;s>m;m++){var W=Y[m],U=new Rq;U.x=d*W.x-f*W.y,U.y=f*W.x+d*W.y,U.z=W.z,this.vertices.push(U)}for(var F=Y.length,r=0,b=w;b>r;r++)for(var m=0,s=Y.length-1;s>m;m++){var t=m+F*r,q=t,z=t+F,d=t+1+F,p=t+1,n=r*c,D=m*B,g=n+c,x=D+B;this.faces.push(new Il(q,p,z)),this.faceVertexUvs[0].push([new Bc(n,D),new Bc(n,x),new Bc(g,D)]),this.faces.push(new Il(z,p,d)),this.faceVertexUvs[0].push([new Bc(g,D),new Bc(n,x),new Bc(g,x)])}this.mergeVertices(),$j(this),this.computeFaceNormals(),this.computeVertexNormals()};qm.prototype=be(Yh);var fp=function(d,B){B=B||{};var O=$h.generateShapes(d,B);B.amount=B.amount!==e?B.amount:.5,B.convertYZ=!1,B.fill!==!1&&(B.bottom=!0,B.top=!0),mi.call(this,O,B)};fp.prototype=be(wm);var Xk=A.Node=function(){Vp(Xk,this)},td={X:Kl,Y:Qc,Z:Op},nb={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},ff="xzy",Oq=function(B,c,e){if(c){var S=c[0],z=c[1],Z=c[2];"xzy"===e?(Qc(B,z),Op(B,Z),Kl(B,S)):"xyz"===e?(Op(B,Z),Qc(B,z),Kl(B,S)):"yxz"===e?(Op(B,Z),Kl(B,S),Qc(B,z)):"yzx"===e?(Kl(B,S),Op(B,Z),Qc(B,z)):"zxy"===e?(Qc(B,z),Kl(B,S),Op(B,Z)):"zyx"===e?(Kl(B,S),Qc(B,z),Op(B,Z)):(Qc(B,z),Op(B,Z),Kl(B,S))}};bi("Node",Nd,{ms_ac:["rotationMode","anchorElevation"],_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:ff,_64O:0,_rotationX:0,_53O:0,_host:J,_position:{x:0,y:0},_anchor:{x:.5,y:.5},_anchorElevation:.5,_scale:{x:1,y:1},_scaleTall:1,_54O:0,getUIClass:function(){return ue},_22Q:function(){return _e},getX:function(){return this.p().x},setX:function(E){this.p(E,this.p().y)},getY:function(){return this.p().y},setY:function(M){this.p(this.p().x,M)},getAnchorX:function(){return this.getAnchor().x},setAnchorX:function(q){this.setAnchor(q,this.getAnchor().y)},getAnchorY:function(){return this.getAnchor().y},setAnchorY:function(Q){this.setAnchor(this.getAnchor().x,Q)},getScaleX:function(){return this.getScale().x},setScaleX:function(k){this.setScale(k,this.getScale().y)},getScaleY:function(){return this.getScale().y},setScaleY:function(q){this.setScale(this.getScale().x,q)},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(k,d){Nq(k,fj(J,J,this.r3(),this.getRotationMode())),this.translate3d(k[0]*d,k[1]*d,k[2]*d)},translateFront:function(p){this.translate3dBy([0,0,1],p)},translateBack:function(d){this.translate3dBy([0,0,-1],d)},translateLeft:function(W){this.translate3dBy([-1,0,0],W)},translateRight:function(N){this.translate3dBy([1,0,0],N)},translateTop:function(C){this.translate3dBy([0,1,0],C)},translateBottom:function(g){this.translate3dBy([0,-1,0],g)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(d,v,u){1===arguments.length&&(v=d[1],u=d[2],d=d[0]),this.p(d,u),this.setElevation(v)},translate3d:function(_,c,S){1===arguments.length&&(c=_[1],S=_[2],_=_[0]),this.translate(_,S),this.setElevation(this._54O+c)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(X,e,l){1===arguments.length&&(e=X[1],l=X[2],X=X[0]),this.setSize(X,l),this.setTall(e)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(i,s,Q){1===arguments.length&&(s=i[1],Q=i[2],i=i[0]),this.setRotationX(i),this.setRotation(-s),this.setRotationZ(Q)},setRotationY:function(C){this.setRotation(-C)},getRotationY:function(){return-this._64O},lookAt:function(a,U){U=U||Im;var v=this,Q=$r(a,v.p3()),n=ii(Q);U===Im?(v.r3([-t(Q[1]/n),-f(Q[2],Q[0])+$,0]),v.setRotationMode("xzy")):U===um?(v.r3(0,-f(Q[2],Q[0]),t(Q[1]/n)),v.setRotationMode("zyx")):U===fh?(v.r3(0,-f(Q[2],Q[0])+I,-t(Q[1]/n)),v.setRotationMode("zyx")):U===Wc?(v.r3([-t(Q[1]/n)+$,-f(Q[2],Q[0])+$,0]),v.setRotationMode("xzy")):U===Wb&&(v.r3([-t(Q[1]/n)-$,-f(Q[2],Q[0])+$,0]),v.setRotationMode("xzy")),U===Id&&(v.r3([-t(Q[1]/n)+I,-f(Q[2],Q[0])+$,I]),v.setRotationMode("zxy"))
},getLoopedEdges:function(){return this._45I},getEdges:function(){return this._70O},getAgentEdges:function(){return this._49I},getHost:function(){return this._host},setHost:function(p){var S=this;if(S!==p&&S._host!==p){var J=S._host;J&&J._removeAttach(S),S._host=p,S._host&&S._host._addAttach(S),S.fp("host",J,p),S.onHostChanged(J,p)}},getAttaches:function(){return this._69O},_addAttach:function(q){var L=this;L._69O||(L._69O=new Cq),L._69O.add(q),L.fp("attaches",J,q)},_removeAttach:function(I){var M=this;M._69O.remove(I),M._69O.isEmpty()&&delete M._69O,M.fp("attaches",I,J)},getSourceEdges:function(){return this._42I},getTargetEdges:function(){return this._43I},_2I:function(I){var e=this;e._44I||(e._44I=new Cq),e._42I||(e._42I=new Cq),e._44I.add(I),e._42I.add(I),e._20I()},_4I:function(P){var Z=this;Z._44I||(Z._44I=new Cq),Z._43I||(Z._43I=new Cq),Z._44I.add(P),Z._43I.add(P),Z._20I()},_16I:function(J){var H=this;H._44I.remove(J),H._42I.remove(J),H._44I.isEmpty()&&delete H._44I,H._42I.isEmpty()&&delete H._42I,H._20I()},_18I:function(o){var e=this;e._44I.remove(o),e._43I.remove(o),e._44I.isEmpty()&&delete e._44I,e._43I.isEmpty()&&delete e._43I,e._20I()},_20I:function(){var A=this;if(delete A._45I,!A._44I||A._44I.isEmpty())return delete A._70O,void 0;var g;A._44I.each(function(B){B.isLooped()&&(g||(g={}),g[B._id]||(A._45I||(A._45I=new Cq),A._45I.add(B),g[B._id]=B))}),g?(A._70O=new Cq,A._44I.each(function(j){g[j._id]?"A"===g[j._id]||(g[j._id]="A",A._70O.add(j)):A._70O.add(j)})):A._70O=A._44I},hasAgentEdges:function(){return!!this._49I&&!this._49I.isEmpty()},getSourceAgentEdges:function(){return this._46I},getTargetAgentEdges:function(){return this._47I},_1I:function(o){var u=this;u._46I||(u._46I=new Cq),u._48I||(u._48I=new Cq),u._46I.add(o),u._48I.add(o),u._19I()},_3I:function(E){var Q=this;Q._47I||(Q._47I=new Cq),Q._48I||(Q._48I=new Cq),Q._47I.add(E),Q._48I.add(E),Q._19I()},_15I:function(j){var Y=this;Y._46I.remove(j),Y._48I.remove(j),Y._46I.isEmpty()&&delete Y._46I,Y._48I.isEmpty()&&delete Y._48I,Y._19I()},_17I:function(z){var u=this;u._47I.remove(z),u._48I.remove(z),u._47I.isEmpty()&&delete u._47I,u._48I.isEmpty()&&delete u._48I,u._19I()},_19I:function(){var X=this;delete X._49I;var t=X._48I;if(t&&!t.isEmpty()){var Y={};t.each(function(O){Y[O._id]?X._49I||(X._49I=new Cq):Y[O._id]=O}),X._49I?t.each(function(T){Y[T._id]&&(X._49I.add(T),delete Y[T._id])}):X._49I=t}},getImage:function(){if(this._pendingCheckImageJSON){var w=r.getImage(this._image);w&&(this._pendingCheckImageJSON=!1,this.getParent()instanceof Bl&&this.getParent().checkPendingUpdateInfo())}return this._image},setImage:function(s){var x=this,o=x._image,g=x.getWidth(),i=x.getHeight();x._image=s,x.fp("image",o,s)&&(null!=s&&(Vc(s)||se(s)&&/\.json$/i.test(s))&&(this._pendingCheckImageJSON=!0),x.fp(vs,g,x.getWidth()),x.fp(sh,i,x.getHeight()))},getElevation:function(){return this._54O},setElevation:function(J){var F=this;if(!F._50O){F._50O=1;var T=F._54O;F._54O=J,F.fp(Dm,T,J),delete this._50O}},getRotation:function(){return this._64O},setRotation:function(I){var F=this;if(!F._49O){F._49O=1;var G=F._64O;F._64O=I,F.fp(uq,G,I),delete F._49O}},getRotationX:function(){return this._rotationX},setRotationX:function(d){var y=this;if(!y._51O){y._51O=1;var C=y._rotationX;y._rotationX=d,y.fp("rotationX",C,d),delete y._51O}},getRotationZ:function(){return this._53O},setRotationZ:function(K){var O=this;if(!O._52O){O._52O=1;var P=O._53O;O._53O=K,O.fp("rotationZ",P,K),delete O._52O}},getPosition:function(){return this._position},setPosition:function(Z,q){var $=this;if(!$._50I){$._50I=1;var R;if(R=2===arguments.length?{x:Z,y:q}:Z,R.x!==$._position.x||R.y!==$._position.y){var F=$._position;$._position=R,$.fp(wi,F,R)}delete $._50I}},translate:function(c,X){var a=this._position;this.p(a.x+c,a.y+X)},getWidth:function(){var X=this;if(X._width>=0)return X._width;var M=X.getStyle("shape3d");if(M){var d=$o(M);if(d&&d.rawS3)return d.rawS3[0]}var m=$l(X._image);return m?Sf(m,X):20},setWidth:function(u){var C=this,p=C._width;C._width=u,C.fp(vs,p,u)},getHeight:function(){var d=this;if(d._height>=0)return d._height;var e=d.getStyle("shape3d");if(e){var f=$o(e);if(f&&f.rawS3)return f.rawS3[2]}var c=$l(d._image);return c?tk(c,d):20},setHeight:function(c){var N=this,y=N._height;N._height=c,N.fp(sh,y,c)},getTall:function(){var z=this;if(z._tall>=0)return z._tall;var o=z.getStyle("shape3d");if(o){var j=$o(o);if(j&&j.rawS3)return j.rawS3[1]}return 20},setTall:function(c){var L=this,N=L._tall;L._tall=c,L.fp("tall",N,c)},setSize:function(P,$){var J=this;2===arguments.length?(J.setWidth(P),J.setHeight($)):(J.setWidth(P.width),J.setHeight(P.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(n,u,A,V,D){var P=this,q=P.getAnchor(),T=P.getScale();arguments.length<=2&&(D=u,u=n.y,A=n.width,V=n.height,n=n.x);var x=D&&T.x<0?1-q.x:q.x,R=D&&T.y<0?1-q.y:q.y;P.p(n+A*x,u+V*R),D&&(A/=Math.abs(T.x),V/=Math.abs(T.y)),P.setWidth(A),P.setHeight(V)},getMatrix:function(){var E=this,I=E._64O,g=E._position,A=E.getScale();return new pc(I,g.x,g.y,A.x,A.y)},getAnchorRect:function(){var Q=this,V=Q.getWidth(),s=Q.getHeight(),d=Q.getAnchor();return{x:-V*d.x,y:-s*d.y,width:V,height:s}},toLocal:function(G){return this.getMatrix().tfi(G)},toGlobal:function(F){return this.getMatrix().tf(F)},isInRect:function(H){H=this.toLocal(H);var j=this.getWidth(),p=this.getHeight();return H.x+=j*this.getAnchorX(),H.y+=p*this.getAnchorY(),!(H.x<0||H.y<0||H.x>j||H.y>p)},getRect:function(){var K=this,J=K.getWidth(),Y=K.getHeight(),o=K.getAnchor(),f={x:-J*o.x,y:-Y*o.y,width:J,height:Y},r=K.getMatrix();return f=Pk([r.tf(f.x,f.y),r.tf(f.x+f.width,f.y),r.tf(f.x+f.width,f.y+f.height),r.tf(f.x,f.y+f.height)])},getAnchorElevation:function(){return this._anchorElevation},getAnchor3d:function(){var T=this,e=T.getAnchor(),r=T._anchorElevation;return{x:e.x,y:r,z:e.y}},setAnchorElevation:function(C){var $=this,f=$._anchorElevation;return f!==C?($._anchorElevation=C,$.fp("anchorElevation",f,C),!0):!1},setAnchor3d:function(t,q,A,j){var O,i=this;"number"==typeof t?O={x:t,y:q,z:A}:(O=t.length?{x:t[0],y:t[1],z:t[2]}:t,j=q);var v=i.getDataModel();v&&v.beginTransaction();var X=i.getAnchor3d(),S=i.setAnchor(O.x,O.z);if(i.setAnchorElevation(O.y)&&(S=!0),S&&j&&!$c){i.getAnchor3d();var B=ao(i),Y=Nq([O.x-X.x,O.y-X.y,O.z-X.z],B);i.p3(Y)}return v&&v.endTransaction(),S},getAnchor:function(){var P=this;if(P.hasOwnProperty("_anchor"))return P._anchor;var v=$l(P._image);return v&&v.anchorX!==e?{x:v.anchorX,y:v.anchorY}:P._anchor},setAnchor:function(G,v,L){var e,w=this;"number"==typeof G?e={x:G,y:v}:(e=G.length?{x:G[0],y:G[1]}:G,L=v);var d=w.getAnchor();if(d.x!==e.x||d.y!==e.y){var r=w.getDataModel();if(r&&r.beginTransaction(),w._anchor=e,w.fp("anchor",d,e),L&&!$c){var W=w.getPosition(),b=w.getSize(),U=w.getRotation(),K=w.getScale(),s=-b.width*(d.x-e.x)*K.x,F=-b.height*(d.y-e.y)*K.y,g=j(U),Q=C(U);w.setPosition(W.x+Q*s-g*F,W.y+g*s+Q*F)}return r&&r.endTransaction(),!0}return!1},getScale:function(){return this._scale},setScale:function(n,T){var b,R=this;b=2===arguments.length?{x:n,y:T}:n;var j=R.getScale();(j.x!==b.x||j.y!==b.y)&&(R._scale=b,R.fp("scale",j,b))},getScaleTall:function(){return this._scaleTall},getScale3d:function(){var q=this,k=q._scaleTall,Y=q.getScale();return[Y.x,k,Y.y]},getFinalScale3d:function(){var u=this,j=u.s3(),q=u._dynamicScale3d,T=u.getScale3d();return j&&(T[0]*=j[0],T[1]*=j[1],T[2]*=j[2]),q&&(T[0]*=q[0],T[1]*=q[1],T[2]*=q[2]),T},setScaleTall:function(Y){var c=this,f=c._scaleTall;f!==Y&&(c._scaleTall=Y,c.fp("scaleTall",f,Y))},setScale3d:function(b,c,Z){var H,T=this;H="number"==typeof b?{x:b,y:c,z:Z}:b.length?{x:b[0],y:b[1],z:b[2]}:b,T.setScaleTall(H.y),T.setScale(H.x,H.z)},getCorners:function(x,V){x==J&&(x=0),V==J&&(V=x);var $=this,H=$.getAnchor(),p=$.getWidth(),z=$.getHeight(),Q=-p*H.x-x,D=-z*H.y-V,G=p+2*x,h=z+2*V,g=$.getMatrix();return[g.tf(Q,D),g.tf(Q,D+h),g.tf(Q+G,D+h),g.tf(Q+G,D)]},getEditControlPoints:function(d,T,H){T==J&&(T=0),H==J&&(H=T);var m=this,r=m.getAnchor(),W=m.getWidth(),C=m.getHeight(),a=-W*r.x-T,S=-C*r.y-H,k=W+2*T,j=C+2*H;if(d)return[{x:a,y:S},{x:a,y:0},{x:a,y:S+j},{x:0,y:S+j},{x:a+k,y:S+j},{x:a+k,y:0},{x:a+k,y:S},{x:0,y:S}];var Q=m.getMatrix();return[Q.tf(a,S),Q.tf(a,0),Q.tf(a,S+j),Q.tf(0,S+j),Q.tf(a+k,S+j),Q.tf(a+k,0),Q.tf(a+k,S),Q.tf(0,S)]},rotateAt:function(r,y,H){var c=this,x=c._position,o=c._64O,g=new pc(o,x.x,x.y).tf(r,y),T=Z(r*r+y*y),i=f(x.y-g.y,x.x-g.x)+H;c.setRotation(o+H),c.p(g.x+T*C(i),g.y+T*j(i))},onParentChanged:function(){Xk.superClass.onParentChanged.apply(this,arguments),this._8I()},_8I:function(){this._70O&&this._70O.each(function(F){F._7I()})},onPropertyChanged:function(L){var e=this;Xk.superClass.onPropertyChanged.call(e,L),e._69O&&e._69O.each(function(S){S.handleHostPropertyChange(L)}),e._49I&&e._49I.each(function(I){I.fp("agentChange",!0,!1)})},onHostChanged:function(){this.updateAttach()},handleHostPropertyChange:function(_){this.updateAttach(_)},onStyleChanged:function(v){Xk.superClass.onStyleChanged.apply(this,arguments),yn[v]&&this.updateAttach()},updateAttach:function(X){var x=this;x._51I||$c||(x._51I=1,x._71O(X),delete x._51I)},_71O:function(q){var p,S,y,Z,T,z,Y=this,C=Y._host,r=q?q.property:J,k=q?q.oldValue:J,N=q?q.newValue:J;if(C instanceof A.Grid){if(r===Dm)Y.setElevation(Y._54O+N-k);else if(!q||Ol[r]){if(p=Y.s("attach.row.index"),S=Y.s("attach.column.index"),y=C.getCellRect(p,S),!y)return;Z=Y.s("attach.row.span"),T=Y.s("attach.column.span"),(1!==Z||1!==T)&&(y=Wn(y,C.getCellRect(p+Z-1,S+T-1))),ki(y,Y,"attach.padding",1),Y.setRect(y)}}else if(C instanceof Pq&&(z=Y.s("attach.index"))>=0&&(!q||Aj[r])){var B=Y.s("attach.thickness");B!=J&&Y.setHeight(C.getThickness()*B);var E=Y.s("attach.offset"),x=C.getPoints(),O=x.size();if(O>z){var h=x.get(z),V=O===z+1?x.get(0):x.get(z+1),t=[V.x-h.x,V.y-h.y],$=ii(t);if($){Y.s("attach.offset.relative")&&(E*=$),Y.s("attach.offset.opposite")&&(E=$-E);var i={x:h.x+t[0]/$*E,y:h.y+t[1]/$*E},R=Y.s("attach.gap");R&&(Y.s("attach.gap.relative")&&(R*=C.getThickness()),i=Ye(J,i,V,R)),Y.p(i),Y.setRotation(f(t[1],t[0]))}}}else q&&(r===wi?Y.translate(N.x-k.x,N.y-k.y):r===Dm?Y.setElevation(Y._54O+N-k):an[r]&&Y._11Q(C,r,N-k))},_11Q:function(D,T,V){var P=this,m=D.p3(),d=$r(P.p3(),m),h=Ln(),Q=nb[P.getRotationMode()],j=Q[0],o=Q[1],F=Q[2],G=td[j],e=td[o],l=td[F];T===uq&&(T="rotationY",V=-V),T===uq+j?(l(h,D[Rm+F]()),e(h,D[Rm+o]()),G(h,V),e(h,-D[Rm+o]()),l(h,-D[Rm+F]()),P[lk+j](P[Rm+j]()+V)):T===uq+o?(l(h,D[Rm+F]()),e(h,V),l(h,-D[Rm+F]()),P[lk+o](P[Rm+o]()+V)):T===uq+F&&(l(h,V),P[lk+F](P[Rm+F]()+V)),Nq(d,h),P.p3(m[0]+d[0],m[1]+d[1],m[2]+d[2])},isHostOn:function(G){var n=this;if(n._host&&G&&G._69O)for(var r={},W=n._host;W&&W!==n&&!r[W._id];){if(W===G)return!0;r[W._id]=W,W=W._host}return!1},isLoopedHostOn:function(v){return this.isHostOn(v)&&v.isHostOn(this)},getSerializableProperties:function(){var h=Xk.superClass.getSerializableProperties.call(this);return vf(h,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,anchor:1,anchorElevation:1,scale:1,scaleTall:1,_width:1,_height:1,_tall:1,elevation:1}),h}});var lj=A.Edge=function(d,y){var h=this;Vp(lj,h),h.setSource(d),h.setTarget(y)};bi("Edge",Nd,{_icon:"edge_icon",getUIClass:function(){return Wi},_22Q:function(){return Xr},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},setSource:function(j){var Q=this;if(Q._source!==j){var n=Q._source;Q._source=j,n&&n._16I(Q),j&&j._2I(Q),Q._7I(),Q.fp("source",n,j)}},setTarget:function(G){var n=this;if(n._target!==G){var i=n._target;n._target=G,i&&i._18I(n),G&&G._4I(n),n._7I(),n.fp("target",i,G)}},isLooped:function(){var H=this;return H._source===H._target&&!!H._source&&!!H._target},_7I:function(){var g,P=this,z=Ai(P);P._40I!==z&&(g=this._40I,g&&g._15I(P),P._40I=z,z&&z._1I(P),P.fp("sourceAgent",g,z),fd(g,P._41I),fd(z,P._41I));var $=bl(P);P._41I!==$&&(g=P._41I,g&&g._17I(P),P._41I=$,$&&$._3I(P),P.fp("targetAgent",g,$),fd(g,P._40I),fd($,P._40I))},_22I:function(p){this._52I=p,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){var U=this;return U._52I&&U._52I.get(0)!==U&&!U.getStyle(Gr)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var q=this,z=q._52I;return z&&!q.getStyle(Gr)&&z.size()>1&&q===z.get(0)},toggle:function(){var d=this._52I,k=!this.s(Gr);d&&d.size()>1&&(d.each(function(P){P.s(Gr,k)}),d.getSiblings().each(function(v){v!==d&&v.each(function(x){x.fp("edgeGroup",J,v)})}))},setStyle:function(e,r){(e===mg||"edge.segments"===e)&&(r=$b(r)),lj.superClass.setStyle.call(this,e,r)},onStyleChanged:function(Q){lj.superClass.onStyleChanged.apply(this,arguments),Jk[Q]&&fd(this._41I,this._40I)},getSerializableProperties:function(){var I=lj.superClass.getSerializableProperties.call(this);return vf(I,{source:1,target:1}),I}});var Gd=A.Group=function(){Vp(Gd,this)};bi("Group",Xk,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return Vr},onChildAdded:function(){Gd.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(){Gd.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var U=this;if(!U._54I&&!$c){var M=U.getChildrenRect();M&&(U._53I=1,U.p(Dh(U.s("group.position"),M,U.getSize())),delete U._53I)}},getChildrenRect:function(){var x,M=this;return M.eachChild(function(G){x=Wn(x,M.getChildRect(G))}),x},getChildRect:function(t){var c;return Yq(t)&&t.s(zr)&&(Mg(t)&&t.isExpanded()&&t.eachChild(function(v){c=Wn(c,t.getChildRect(v))}),!c&&t.getRect&&(c=t.getRect())),c},setPosition:function(I,m){var t=this;if(!t._54I){var i;i=2===arguments.length?{x:I,y:m}:I,$c||t._53I||(t._54I=1,ih(t._children,i.x-t._position.x,i.y-t._position.y),delete t._54I),Gd.superClass.setPosition.call(this,i)}},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(b){var L=this;if(L._57O!==b){var v=L._57O;L._57O=b,L.fp("expanded",v,L._57O),L._8I()}},_8I:function(){Gd.superClass._8I.call(this),this.eachChild(function(i){Yq(i)&&i._8I()})},onStyleChanged:function(O){Gd.superClass.onStyleChanged.apply(this,arguments),"group.position"===O&&this._81I()},getSerializableProperties:function(){var d=Gd.superClass.getSerializableProperties.call(this);return d.expanded=1,d}});var Ij=A.Block=function(){Vp(Ij,this)};bi("Block",Xk,{_icon:"block_icon",_clickThroughEnabled:!1,_syncSize:!0,ms_ac:["clickThroughEnabled","syncSize"],getUIClass:function(){return pd},onChildAdded:function(){Ij.superClass.onChildAdded.apply(this,arguments),this.updateFromChildren()},onChildRemoved:function(){Ij.superClass.onChildRemoved.apply(this,arguments),this.updateFromChildren()},updateFromChildren:function(){var Z=this;if(!$c&&!Z._updatingToChildren&&Z._syncSize){var F,r,o,R,B,T=[],W=Z.getRotation();if(Z.eachChild(function(n){Yq(n)&&T.push.apply(T,n.getCorners())}),T.length){Z._updatingFromChildren=1;var m=C(-W),g=j(-W),d=1/0,H=-1/0,x=1/0,Y=-1/0;for(R=0,B=T.length;B>R;R++)o=T[R],F=o.x,r=o.y,o.x=m*F-g*r,o.y=g*F+m*r,d=c(d,o.x),H=S(H,o.x),x=c(x,o.y),Y=S(Y,o.y);var f=Z.getScale();Z.setSize(k((H-d)/f.x),k((Y-x)/f.y));var M;f.x<0&&(M=d,d=H,H=M),f.y<0&&(M=x,x=Y,Y=M),m=C(W),g=j(W);var J=Z.getAnchor();F=d+(H-d)*J.x,r=x+(Y-x)*J.y,Z.setPosition(m*F-g*r,g*F+m*r),delete Z._updatingFromChildren}}},setPosition:function($,q){var m=this;if(!m._updatingToChildren){var C;C=2===arguments.length?{x:$,y:q}:$,$c||m._updatingFromChildren||(m._updatingToChildren=1,ih(m._children,C.x-m._position.x,C.y-m._position.y),delete m._updatingToChildren),Ij.superClass.setPosition.call(this,C)}},setWidth:function(N){return this.setSize(N,this.getHeight())},setHeight:function(g){return this.setSize(this.getWidth(),g)},setSize:function(x,s){1>x&&(x=1),1>s&&(s=1);var c=this;if(!c._updatingToChildren){2!==arguments.length&&(s=x.height,x=x.width);var X=c.getWidth(),C=c.getHeight();if(x!==X&&Ij.superClass.setWidth.call(c,x),s!==C&&Ij.superClass.setHeight.call(c,s),!$c&&!c._updatingFromChildren){c._updatingToChildren=1;var T=x/X,R=s/C;c._adjustChildScaleOrSize(T,R,"size"),delete c._updatingToChildren,c.updateFromChildren()}}},_adjustChildScaleOrSize:function(A,M,b){var n=this;if(n._syncSize){var S=n.getPosition(),h=n.getRotation();n.getScale(),n.eachChild(function(p){if(Yq(p)){var D=p.getPosition(),P=p.getRotation(),F=p.getWidth(),m=p.getHeight(),g=p.getScale(),O=g.x*F,$=g.y*m,l=new pc(P,D.x,D.y,O,$);l.translate(-S.x,-S.y),l.rotate(-h),P=f(l.b*Math.sign(O),l.a*Math.sign(O)),l.scale(A,M);var R,B,X,J=C(P);if(Math.abs(J)<.001?(R=j(P),B=l.b/R,X=-l.c/R):(B=l.a/J,X=l.d/J),"scale"===b)p.setScale(B/F,X/m);else if("size"===b){var K=B/g.x,t=X/g.y;p.setScale($k(B)*Math.abs(g.x),$k(X)*Math.abs(g.y)),p.setSize(Math.max(.1,Math.abs(K)),Math.max(.1,Math.abs(t)))}l.rotate(h),l.translate(S.x,S.y),p.setPosition(l.tx,l.ty)}})}},_calcChangeFactor:function($,s,e,J){var V,d,R,K;return V=k($),d=k(e),R=V>d?V/d:d/V,V=k(s),d=k(J),K=V>d?V/d:d/V,S(R,K)},setAnchor:function(){var H=this;if(!H._updatingToChildren){var r=H.getAnchor();if(Ij.superClass.setAnchor.apply(H,arguments),!$c&&!H._updatingFromChildren&&H._syncSize){H._updatingToChildren=1;var U=H.getAnchor();H.getPosition();var L=H.getSize(),K=H.getScale(),e=H.getRotation(),Z=-L.width*K.x*(r.x-U.x),m=-L.height*K.y*(r.y-U.y),u=j(e),D=C(e),f=D*Z-u*m,g=u*Z+D*m;H.eachChild(function(I){if(Yq(I)){var y=I.getPosition();I.setPosition(y.x-f,y.y-g)}}),delete H._updatingToChildren}}},setRotation:function(W){var k=this;if(!k._updatingToChildren){var L=k.getRotation();if(Ij.superClass.setRotation.apply(k,arguments),!$c&&!k._updatingFromChildren){k._updatingToChildren=1;var J=k.getPosition(),_=W-L;k.eachChild(function(O){if(Yq(O)){var Z=O.getMatrix();Z.translate(-J.x,-J.y),Z.rotate(_),Z.translate(J.x,J.y);var m=Math.sign(O.getScale().x);O.setRotation(f(Z.b*m,Z.a*m)),O.setPosition(Z.tx,Z.ty)}}),delete k._updatingToChildren}}},setScale:function(I,R){var a=this;if(!a._updatingToChildren){null==R&&(R=I.y,I=I.x);var S=a.getScale();if(k(I)<.01&&(I=.01*($k(I)||$k(S.x))),k(R)<.01&&(R=.01*($k(R)||$k(S.y))),Ij.superClass.setScale.call(a,I,R),!$c&&!a._updatingFromChildren){a._updatingToChildren=1;var l=I/S.x,G=R/S.y;a._adjustChildScaleOrSize(l,G,"size"),delete a._updatingToChildren,a.updateFromChildren()}}},getSerializableProperties:function(){var K=Ij.superClass.getSerializableProperties.call(this);return K.clickThroughEnabled=1,K.syncSize=1,K}});var Mp=A.Grid=function(){Vp(A.Grid,this)};bi("Grid",Xk,{IRotatable:!1,_icon:"grid_icon",_image:J,getUIClass:function(){return Zn},setRotation:function(){},getCellRect:function(O,e){var G=this,q=G.s("grid.row.count"),s=G.s("grid.column.count");if(0>=q||0>=s||0>O||O>=q||0>e||e>=s)return J;var R,V,r,H=G.getRect(),L=G.s("grid.row.percents"),z=G.s("grid.column.percents");if(ki(H,G,"grid.border",-1),L&&L._as&&(L=L._as),z&&z._as&&(z=z._as),L&&L.length===q){for(r=0,R=0;O>R;R++)r+=H.height*L[R];H.y+=r,H.height=H.height*L[O]}else H.height=H.height/q,H.y+=H.height*O;if(z&&z.length===s){for(V=0,R=0;e>R;R++)V+=H.width*z[R];H.x+=V,H.width=H.width*z[e]}else H.width=H.width/s,H.x+=H.width*e;return Wr(H,-G.s("grid.gap")),H}});var wf=A.Text=function(){Vp(wf,this),this.setSize(100,50),this.s("text","TEXT")};bi("Text",Xk,{_icon:"text_icon",_image:"__text__",getUIClass:function(){return Pr},setWidth:function(r){r||(r=.001),wf.superClass.setWidth.call(this,r)},setHeight:function(B){B||(B=.001),wf.superClass.setHeight.call(this,B)},toLabel:function(){return this._displayName||this._name||this.s("text")}}),yp("__text__",{width:{value:100,isSafeFunc:!0,func:function(c){return c._width}},height:{value:50,isSafeFunc:!0,func:function(J){return J._height}},comps:[{type:"text",relative:!0,rect:[0,0,1,1],text:{func:"style@text"},align:{func:"style@text.align"},vAlign:{func:"style@text.vAlign"},color:{func:"style@text.color"},font:{func:"style@text.font"},shadow:{func:"style@text.shadow"},shadowColor:{func:"style@text.shadow.color"},shadowBlur:{func:"style@text.shadow.blur"},shadowOffsetX:{func:"style@text.shadow.offset.x"},shadowOffsetY:{func:"style@text.shadow.offset.y"}}]});var Pq=A.Shape=function(){Vp(Pq,this),this._59O=new Cq};Pq.__de__=wb,bi("Shape",Xk,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return Sb},_22Q:function(){return Wp},getLength:function(k){return un(rg(this._59O,this._58O,k,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var F=this._58O;return F?new Cq(F._as.slice(0)):F},setSegments:function(k){var W=this._58O;k=k?Ji(k)?new Cq(k.slice(0)):new Cq(k._as.slice(0)):null,(W&&k&&W._as.join(",")!==k._as.join(",")||W!==k)&&(this._58O=k,this.fp("segments",W,k))},getPoints:function(){return this._59O},toPoints:function(){var B=this._59O;return new Cq(B._as.slice(0))},setPoints:function(S,K){var I=this,B=I._59O;S=S?Ji(S)?new Cq(S.slice(0)):new Cq(S._as.slice(0)):new Cq;var o,W,E,s,v,_;K&&(o=I.getPosition(),_=new pc(I.getRotation(),0,0,I.getScale().x,I.getScale().y)),(B&&S&&B._as.join(",")!==S._as.join(",")||B!==S)&&(I._59O=S,I.fs(),I.fp("points",B,S)),K&&(W=I.getPosition(),E=W.x-o.x,s=W.y-o.y,v=_.tf(E,s),I.setPosition(W.x-E+v.x,W.y-s+v.y))},addPoint:function(O,l,y){var $=this.toPoints();$.add(O,l),this.setPoints($,y)},setPoint:function(I,C,M){var q=this.toPoints();q.set(I,C),this.setPoints(q,M)},removePointAt:function(s){var l=this.toPoints();l.removeAt(s),this.setPoints(l)},setWidth:function(m){var p=this;if(1>m&&(m=1),!p._55I&&!$c&&p.getWidth()){p._55I=1;var S=p._position.x,b=m/p.getWidth(),A=p.toPoints(),e=new Cq;A.each(function(z){e.add({x:(z.x-S)*b+S,y:z.y,e:z.e})}),p.setPoints(e),Kf(p,[b,0,0,1,S*(1-b),0]),p.fs(),delete p._55I}Pq.superClass.setWidth.call(p,m)},setHeight:function($){var b=this;if(1>$&&($=1),!b._55I&&!$c&&b.getHeight()){b._55I=1;var P=b._position.y,G=$/b.getHeight(),q=b.toPoints(),A=new Cq;q.each(function(r){A.add({x:r.x,y:(r.y-P)*G+P,e:r.e})}),b.setPoints(A),Kf(b,[1,0,0,G,0,P*(1-G)]),b.fs(),delete b._55I}Pq.superClass.setHeight.call(b,$)},setAnchorElevation:function(q){var B=this;B._55I=!0;var x=B._updatingAnchor3d,y=!$c&&!x;if(y){var Q,X=q,C=B.getAnchorElevation(),D=B.getTall();Q=D*(C-X),B.shiftPointsElevation(Q)}var P=Pq.superClass.setAnchorElevation.apply(B,arguments);return x||delete B._55I,P},getShapeElevation:function(){var h=this,k=h._54O;return k-(h.getTall()||0)*(h._anchorElevation-.5)},setAnchor3d:function(Q,e,f,c){var F,T=this;"number"==typeof Q?F={x:Q,y:e,z:f}:(F=Q.length?{x:Q[0],y:Q[1],z:Q[2]}:Q,c=e),T._55I=!0,T._updatingAnchor3d=!0;var Y=T.getDataModel();if(Y&&Y.beginTransaction(),!$c){var $=T.getAnchor3d(),E=T.getSize(),k=T.getTall(),B=E.width*($.x-F.x),b=E.height*($.z-F.z),H=k*($.y-F.y);c||T.shiftPoints(B,b,H);var n=T.p3()}var W=Pq.superClass.setAnchor3d.apply(T,arguments);if(!$c&&c){var p=T.p3();T.shiftPoints(p[0]-n[0]+B,p[2]-n[2]+b,p[1]-n[1]+H)}return Y&&Y.endTransaction(),delete T._updatingAnchor3d,delete T._55I,W},setAnchor:function(j,L,Y){var g=this;g._55I=!0;var K=g._updatingAnchor3d,l=!$c&&!K;if(l){var c,n,C;"number"==typeof j?C={x:j,y:L}:(C=j.length?{x:j[0],y:j[1]}:j,Y=L);var t=g.getAnchor(),p=g.getSize();c=p.width*(t.x-C.x),n=p.height*(t.y-C.y),Y||g.shiftPoints(c,n);var J=g.getPosition()}var N=Pq.superClass.setAnchor.apply(g,arguments);if(l){var S=g.getPosition();Y&&g.shiftPoints(S.x-J.x+c,S.y-J.y+n)}return K||delete g._55I,N},shiftPoints:function(E,d,z){var R=this,O=R.getElevation()||0,I=R.toPoints(),a=new Cq;I.each(function(Y){var K=Y.e;z&&(K=(K==J?O:K)+z),a.add({x:Y.x+E,y:Y.y+d,e:K})}),R.setPoints(a),R.fs()},shiftPointsElevation:function(z){return this.shiftPoints(0,0,z)},setPosition:function(M,B){var n,Y=this;if(!Y._28Q){if(Y._28Q=1,!Y._55I&&!$c){n=2===arguments.length?{x:M,y:B}:M;var L=n.x-Y._position.x,Z=n.y-Y._position.y;if(0===L&&0===Z)return delete Y._28Q,void 0;Y._55I=1,Y.shiftPoints(L,Z),Kf(Y,[1,0,0,1,L,Z]),delete Y._55I}Pq.superClass.setPosition.apply(Y,arguments),delete Y._28Q}},fs:function(){this.fireShapeChange()},_70I:function(){var j=this;if(2!==j._59O.size())return!1;var k=j._58O;return k?2===k.size()&&1===k.get(0)&&2===k.get(1)?!0:!1:!0},fireShapeChange:function(){var A=this;if(!A._55I&&!$c){var O=Pk(A._59O);O&&(A._55I=1,A.setRect(O),delete A._55I)}A.fp(el,!1,!0)},getSerializableProperties:function(){var w=Pq.superClass.getSerializableProperties.call(this);return w.segments=1,w.points=1,w.thickness=1,w.closePath=1,w}});var Cc=A.Polyline=function(){Vp(Cc,this),this.s({"shape.background":null,"shape.border.width":2})};bi("Polyline",Pq,{_icon:"polyline_icon",_22Q:function(){return ll},getUIClass:function(){return kc},setClosePath:function(){},setTall:function(e){var I=this;if(!I._55I&&!I._24Q&&!$c&&I.getTall()){I._24Q=1;var N=I._54O,n=e/I.getTall();I._59O.each(function(T){T.e=T.e==J?N:(T.e-N)*n+N}),I.fs(),delete I._24Q}Cc.superClass.setTall.call(I,e)},setElevation:function(D){var v=this;if(!v._55I&&!v._24Q&&!$c){v._24Q=1;var V=D-v._54O;v._59O.each(function(e){e.e==J?e.e=D:e.e+=V}),v.fs(),delete v._24Q}Cc.superClass.setElevation.apply(v,arguments)},fireShapeChange:function(){var v=this,I=v._59O;if(!v._55I&&!v._24Q&&!$c){var D=I.size();if(D){var g=1,V=I.get(0),R=v._54O;V.e==J&&(V.e=R);for(var b=V.e,O=0;D>g;g++){V=I.get(g),V.e==J&&(V.e=R);var B=c(b,V.e),s=S(b+O,V.e);b=B,O=s-B}v._24Q=1,v.setTall(O),v.setElevation(b+O*v._anchorElevation),delete v._24Q}}Cc.superClass.fireShapeChange.apply(v,arguments)}});var qr=A.SubGraph=function(){Vp(qr,this)};bi("SubGraph",Xk,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){qr.superClass._8I.call(this),this.eachChild(function(E){Yq(E)&&E._8I()})}}),r.loadingRefGraph=0;var Bl=A.RefGraph=function(){Vp(Bl,this)};bi("RefGraph",Ij,{_icon:"refGraph_icon",getRef:function(){return this._ref},setRef:function(p){var r=this._ref;this._ref=p,this.fp("ref",r,p),this.updateRef()},_21I:function(){Bl.superClass._21I.apply(this,arguments),this.updateRef()},updateRef:function(){var v=this;if(r.loadingRefGraph++,v.clearChildrenFromDataModel(),r.loadingRefGraph--,v._ref&&v._dataModel){v._xhrLoadHandler&&(v._xhrLoadHandler.cancel=!0);var E=$c,D=v._xhrLoadHandler=function(S){if(S&&v._dataModel){r.loadingRefGraph++;var R=v._pendingUpdateInfo={needToRestore:E};E&&(R.position=v.p(),R.width=v.getWidth(),R.height=v.getHeight(),R.rotation=v.getRotation(),R.anchor=v.getAnchor(),R.scale=v.getScale()),v.p(0,0),v.setAnchor(.5,.5),v.setRotation(0),v.setScale(1,1);var P=r.parse(S),T=v._dataModel.deserialize(P,v,{justDatas:!0});T.each(function(f){f._refGraph=v}),v.checkPendingUpdateInfo(),r.loadingRefGraph--,r.handleRefGraphLoaded(v,T,P)}};D.xhrLoadCalled=!1,r.load(v._ref,function(B){D.cancel||(D.xhrLoadCalled?D(B):id(function(){D(B)}))}),D.xhrLoadCalled=!0}},checkPendingUpdateInfo:function(){var n=this,i=n._pendingUpdateInfo;if(!i)return n.onPendingUpdated&&(r.loadingRefGraph++,n.onPendingUpdated(),r.loadingRefGraph--),void 0;var c=!0;this.eachChild(function(p){(p._pendingCheckImageJSON||p._pendingUpdateInfo)&&(c=!1)}),c&&(r.loadingRefGraph++,n._pendingUpdateInfo=null,n.updateFromChildren(),i.needToRestore&&(n.setSize(i.width,i.height),n.setAnchor(i.anchor),n.setRotation(i.rotation),n.setScale(i.scale),n.p(i.position)),this.getParent()instanceof Bl&&this.getParent().checkPendingUpdateInfo(),n.onPendingUpdated&&n.onPendingUpdated(),r.loadingRefGraph--)},getSerializableProperties:function(){var R=Bl.superClass.getSerializableProperties.call(this);return R.ref=1,R}}),A.EdgeGroup=function(w,N){this._70O=w,this._siblings=N;for(var z,W,T=0,i=w.size(),k=P[Gr];i>T;T++)if(z=w.get(T).getStyle(Gr,!1),z!=J){k=z;break}k==J&&(k=!0);var I=r.edgeGroupAgentFunc;for(I&&(W=I(w),W&&W!==w.get(0)&&(w.remove(W),w.add(W,0))),T=0;i>T;T++)w.get(T).s(Gr,k)},bi("EdgeGroup",h,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(R){return this._70O.get(R)},indexOf:function(Y){return this._70O.indexOf(Y)},each:function(G,u){this._70O.each(G,u)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(x,o){this._siblings.each(function(c){c._70O.each(x,o)})}});var Ti=function(h,f,Y){var z=Ld[h]={type:h,action:f};if(Y)for(var M in Y)z[M]=Y[M]};Ti("host",function(x,s,i){i&&s.setHost(i)},{"delete":{visible:function(G,x){return x.getHost()},action:function(D,d){d.setHost(null)}}}),Ti("parent",function($,j,Q){Q&&j.setParent(Q)},{"delete":{visible:function(U,u){return u.getParent()},action:function($,R){R.setParent(null)}}}),Ti("copySize",function(J,b,W){if(W){var Q=W.getSize();b.setSize(Q)}}),Ti("copyRotation",function(F,r,P){if(P){var D=P.getRotation();r.setRotation(D)}}),Ti("edge",function(u,a,Z){if(Z){var E=new A.Edge(a,Z);a.dm().add(E)}}),vf(r,{setConnectAction:Ti,getConnectAction:function(p,s){return s=s||p.getCurrentConnectActionType(),Ld[s]},doConnectAction:function(Q,b,S,g){g=g||Q.getCurrentConnectActionType();var q=Ld[g];if(!q)return!1;var p=q.action;return p?(p.call(null,Q,b,S),!0):!1},doDeleteConnectionAction:function(K,X,J){J=J||K.getCurrentConnectActionType();var i=Ld[J];if(!i||!i.delete)return!1;var l=i.delete.action;return l?(l.call(null,K,X),!0):!1}});var Cj=A.JSONSerializer=function($,w){this.dm=this._dataModel=$,this._hierarchical=r.forceHierarchicalSerialization?!0:w==J?$.isHierarchicalRendering():w};bi("JSONSerializer",h,{ms_ac:["hierarchical"],serialize:function(h){return r.stringify(this.toJSON(),h)},toJSON:function(){var X=this,g=X.dm,q=g.getRoots(),T=X.json={v:r.getVersion(),p:{},a:{},d:[]},W=g.getSerializableAttrs();g.getInit()&&(T.init=g.getInit()),g.getName()&&(T.p.name=g.getName()),g.getBackground()&&(T.p.background=g.getBackground()),g.getLayers()&&(T.p.layers=g.getLayers()),T.p.autoAdjustIndex=g.isAutoAdjustIndex(),T.p.hierarchicalRendering=g.isHierarchicalRendering();for(var $ in W){var c=g.a($);c!==e&&X[ge]($,c,T.a)}return Ep(T.a)&&delete T.a,X._hierarchical?q.each(X.serializeData,this):g.each(function(R){X.serializeData(R)}),T},isSerializable:function(){return!0},getProperties:function(Y){return Y.getSerializableProperties()},getStyles:function(d){return d.getSerializableStyles()},getAttrs:function(V){return V.getSerializableAttrs()},serializeData:function(e){var E=this;if(E.isSerializable(e)&&!e._refGraph){var s,R,X,Z,b=tr(e.getClassName())||e.getClass(),n=new b,V={c:e.getClassName(),i:e.getId(),p:{},s:{},a:{}};E.json.d.push(V),s=E.getProperties(e);for(R in s)/^_/.test(R)?(X=e[R],X!==n[R]&&E[ge](R.substr(1),X,V.p)):(Z=Kp(R),e[Z]&&(X=e[Z](),X!==n[Z]()&&E[ge](R,X,V.p)));s=E.getStyles(e);for(R in s)X=e.s(R),X!==n.s(R)&&E[ge](R,X,V.s);s=E.getAttrs(e);for(R in s)X=e.a(R),X!==n.a(R)&&E[ge](R,X,V.a);Ep(V.p)&&delete V.p,Ep(V.s)&&delete V.s,Ep(V.a)&&delete V.a}E._hierarchical&&e.getChildren().each(E.serializeData,E)},serializeValue:function(j,E,k){Mj(E)?E={__a:E._as}:E instanceof Nd&&(E={__i:E.getId()}),k[j]=E},deserialize:function(x,N,O){var A=this,d=A.dm;d.beginTransaction(),$c++,O=Kb(O)?{setId:O}:O||{},x=A.json=se(x)?r.parse(x):x,A._82I={};var I=new Cq,w=new Cq,K=0,B=x.d.length;if(O.justDatas||(jo(x.init)&&x.init(d),d.setInit(x.init)),!O.justDatas){for(var l in x.a)d.a(l,A[Zo](x.a[l]));for(var b in x.p)d[nq(b)](x.p[b])}for(;B>K;K++){var e=x.d[K],o=tr(e.c),G=new o,Z=e.i;O.setId&&Z!=J&&(G._id=Z),A._82I[Z]=G,I.add(G),w.add(e)}for(K=0;B>K;K++)A.deserializeData(I.get(K),w.get(K));return I.each(function(k){N&&!k.getParent()&&k.setParent(N),d.add(k)}),$c--,d.endTransaction(),I},deserializeData:function(n,V){for(var b in V.p)n[nq(b)](this[Zo](V.p[b]));for(b in V.s)n.s(b,this[Zo](V.s[b]));for(b in V.a)n.a(b,this[Zo](V.a[b]))},deserializeValue:function(l){if(Vc(l)){var e=l.__i;if(e!=J)return this._82I[e];if(e=l.__a,Ji(e))return new Cq(e)}return l}}),vf(hd,{serialize:function(J,N){return new Cj(this,N).serialize(J)},toJSON:function(H){return new Cj(this,H).toJSON()},deserialize:function($,u,p){return new Cj(this).deserialize($,u,p)}});var kh=A.OverlappingBox=function(F){this.gv=F,this.boxes={}
};bi("OverlappingBox",h,{clear:function(){var s,t,m=this.boxes;for(s in m)t=m[s],t.length=0},isOverlapping:function(W,f){var z,G,m=this,R=m.boxes,F=R[W];F?(z=F.rects,G=F.length):F=R[W]={rects:z=[],length:G=0};var A,p,f;for(A=0;G>A;A++)if(p=z[A],p.x<f.x+f.w&&p.x+p.w>f.x&&p.y<f.y+f.h&&p.h+p.y>f.y)return!0;return z.length<=G?(z.push(f),F.length++):z[F.length++]=f,!1}}),zh.GraphView=function(w){var O=this;O._24I={},O._34I=new Cq,O._25I={},O._56I={},O._view=Eq(1,O),O._canvas=Rk(O._view),O.dm(w?w:new hd),this._coreInteractor=new we(this),O.setEditable(!1),O.setScrollBarVisible(r.graphViewScrollBarVisible)},xc("GraphView",h,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:[Br,jl,Kn,vb,"resettable","editInteractor",Kq,"pannable","rectSelectable","autoScrollZone",go,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","anchorEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_resettable:r.graphViewResettable,_pannable:r.graphViewPannable,_rectSelectable:r.graphViewRectSelectable,_autoScrollZone:r.graphViewAutoScrollZone,_rectSelectBackground:r.graphViewRectSelectBackground,_rectSelectBorderColor:r.graphViewRectSelectBorderColor,_editPointSize:r.graphViewEditPointSize,_editPointBorderColor:r.graphViewEditPointBorderColor,_editPointBackground:r.graphViewEditPointBackground,_scrollBarColor:ql,_scrollBarSize:sp,_autoHideScrollBar:dd,_autoMakeVisible:lq,_currentActionType:"host",getCoreInteractor:function(){return this._coreInteractor},getLayers:function(){return this._dataModel.getLayers()},setLayers:function(n){this._dataModel.setLayers(n)},setEditable:function(P){var T=this,X=T.__interactorMap__;if(!X){var J=zh.XEditInteractor;X=T.__interactorMap__={scrollBar:new Yo(T),select:new rl(T),edit:J?new J(T):new qk(T),move:new jd(T),"default":new Vf(T),touch:new Zq(T,{editable:!1})}}P?(T._uieditable=!0,T.setInteractors([X.scrollBar,X.select,X.edit,X.move,X.default,X.touch])):(T._uieditable=!1,T.setInteractors([X.scrollBar,X.select,X.move,X.default,X.touch]))},getCanvas:function(){return this._canvas},_33I:function(R){var A=R.getUIClass();return A?new A(this,R):J},getDataUI:function(k){var l=this,m=l._25I[k._id];return m===e&&(m=l._33I(k),l._25I[k._id]=m),m},getNodeRect:function(b){return r.getNodeRect(this,b)},getEdgeInfo:function(q){var U=this.getDataUI(q);return U?(U._79o(),U._78o):null},getEdgeSourcePosition:function(z){var V=this,q=V.getDataUI(z),X=q.s,c=q._data._40I;return uo(V,c,X("edge.source.position"),X("edge.source.offset.x"),X("edge.source.offset.y"),X("edge.source.anchor.x"),X("edge.source.anchor.y"))},getEdgeTargetPosition:function(X){var h=this,k=h.getDataUI(X),D=k.s,I=k._data._41I;return uo(h,I,D("edge.target.position"),D("edge.target.offset.x"),D("edge.target.offset.y"),D("edge.target.anchor.x"),D("edge.target.anchor.y"))},invalidateAll:function(Y){var m=this;if(Y){for(var d in m._25I){var _=m._25I[d];_&&_.dispose()}m._25I={},m._56I={},m._24I={},m._34I.clear(),m.redraw()}else m.dm().each(function(M){m.invalidateData(M)})},invalidateSelection:function(){var j=this;j.sm().each(function(Y){j.invalidateData(Y)})},invalidateData:function(e){var S=this;S._24I[e._id]=e,S._21Q(e),S.iv()},_21Q:function(K){var x=this,B=x._24I;if(zj(K)&&yo[K.s(pk)]){var j=K.getSourceAgent();j&&j.getAgentEdges().each(function($){B[$._id]=$}),j=K.getTargetAgent(),j&&j.getAgentEdges().each(function(V){B[V._id]=V}),x.iv()}},redraw:function(J){var B=this;B._32I||(J?B._34I.add(J):(B._32I=1,B._34I.clear()),B.iv())},each:function(D,Z){var V,n,h,C=0,Q=this.getLayers(),T=this._dataModel,I=T._datas._as,m=I.length;if(Q){for(var w=Q.length;w>C;C++)if(h=Q[C],Vc(h)&&(h=h.name),T.isHierarchicalRendering()){var L=function(L){return L._layer===h?Z?D.call(Z,L):D(L):void 0};if(this._dataModel.eachByHierarchical(L)===!1)return}else for(var A=0;m>A;A++)if(V=I[A],V._layer===h&&(n=Z?D.call(Z,V):D(V),n===!1))return}else if(T.isHierarchicalRendering())this._dataModel.eachByHierarchical(D,null,Z);else for(;m>C;C++)if(V=I[C],n=Z?D.call(Z,V):D(V),n===!1)return},reverseEach:function(s,q){var z,c,O,T,R=this._dataModel,X=R._layers,U=R._datas._as,g=U.length;if(X){for(z=X.length-1;z>=0;z--)if(T=X[z],Vc(T)&&(T=T.name),R.isHierarchicalRendering()){var l=function(d){return d._layer===T?q?s.call(q,d):s(d):void 0};if(R.reverseEachByHierarchical(l)===!1)return}else for(var h=g-1;h>=0;h--)if(c=U[h],c._layer===T&&(O=q?s.call(q,c):s(c),O===!1))return}else if(R.isHierarchicalRendering())R.reverseEachByHierarchical(s,null,q);else for(z=g-1;z>=0;z--)if(c=U[z],O=q?s.call(q,c):s(c),O===!1)return},getViewRect:function(){return this._29I},getContentRect:function(){var A=this,_=A._84I;if(!_){var m=this.dm().a("width"),D=this.dm().a("height");m>0&&D>0?A._84I={x:0,y:0,width:m,height:D}:(A.each(function(C){A.isVisible(C)&&(_=Wn(_,A.getDataUIBounds(C)))}),A._84I=_?_:Rd)}return A._84I},getScrollRect:function(){return Wn(this.getContentRect(),this._29I)},makeCenter:function(V,I,P){var r=this;if(!r.getWidth()||!r.getHeight())return P||id(r.centerData,r,[V,I,!0],500),void 0;r.makeVisible(V),r.validate();var z=r.getDataUIBounds(V);if(z){var j=r.getWidth(),k=r.getHeight(),c=z.x+z.width/2,Z=z.y+z.height/2,R=-c*r._zoom+j/2,Q=-Z*r._zoom+k/2;r.setTranslate(R,Q,I)}},fitData:function(P,G,e,p,F){var i=this;if(!i.getWidth()||!i.getHeight())return F||id(i.fitData,i,[P,G,e,p,!0],500),void 0;var D=function(){i.makeVisible(P),i.validate();var r=i.getDataUIBounds(P);r&&(r=Se(r),Wr(r,e==J?20:e),i.fitRect(r,G,p))};G?r.callWhenLoaded(D):D()},fitContent:function(L,G,K,v){var g=this;if(!g.getWidth()||!g.getHeight())return v||id(g.fitContent,g,[L,G,K,!0],500),void 0;var N=function(){g.validate();var D=Se(g.getContentRect());Wr(D,G==J?20:G),g.fitRect(D,L,K)};L?r.callWhenLoaded(N):N()},fitRect:function(U,_,p){var S=this,w=S.getWidth(),H=S.getHeight(),u=U.x+U.width/2,E=U.y+U.height/2,t=c(w/U.width,H/U.height),M=S._zoom,P=-u*M+w/2,o=-E*M+H/2;0===t||isNaN(t)||(p&&(t=c(1,t)),_?S.setTranslate(P,o,{finishFunc:function(){S.setZoom(t,_)}}):(S.setTranslate(P,o),S.setZoom(t)))},toCanvas:function(W,p){p=p||this._zoom,this.validateImpl();var t=this,a=t.getContentRect();a.width||(a.width=10),a.height||(a.height=10);var B=Rk(),c=a.x*p,J=a.y*p,e=a.width*p,d=a.height*p;Er(B,e,d,1);var j=Bb(B);return W=W||this._dataModel.getBackground(),W&&Wl(j,0,0,e,d,W),zs(j,-c,-J),j.scale(p,p),t._42(j),j.restore(),B},toDataURL:function(k,J,i){return this.toCanvas(k,i).toDataURL(J||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(P,J){var s,X,K=this;K._93db(P,J),K.each(function(V){K._56I[V._id]&&(s=K.getDataUI(V),s&&(X=s._79o(),A.HtmlNode&&V instanceof A.HtmlNode?s._42(P):(!J||db(J,X))&&s._42(P)))}),K._92db(P,J)},validateImpl:function(){var _,P,d,Z,e,a=this,V=a.tx(),j=a.ty(),k=a._zoom,w=a._canvas,I=this.getWidth(),U=this.getHeight(),q=a._29I,H={x:-V/k,y:-j/k,width:I/k,height:U/k},r={},y=a._34I,R=a._24I,m=a._32I,F=a._23I;a._24I={},(I!==w.clientWidth||U!==w.clientHeight)&&(Er(w,I,U),m=1),m||ce(H,q)||(m=1),a._29I=H,a.each(function(J){P=J._id;var l=r[P]=a.isVisible(J);l!==a._56I[P]&&(R[P]=J,d=a.getDataUI(R[P]),d&&d._84o(l),a._84o(J,l))},a);for(P in R)d=a.getDataUI(R[P]),d&&(!m&&a._56I[P]&&(e=d._79o(),e&&y.add(e)),d.invalidate()),a._83I=1;if(a._56I=r,!m)for(P in R)r[P]&&(d=a.getDataUI(R[P]),d&&(e=d._79o(),e&&y.add(e)));if(m?Z=H:(y.each(function(N){db(H,N)&&(Z=Wn(Z,N))}),Z&&(Wr(Z,S(1,1/k)),Z.x=N(Z.x*k)/k,Z.y=N(Z.y*k)/k,Z.width=o(Z.width*k)/k,Z.height=o(Z.height*k)/k,Z=Eb(H,Z))),a._74O=Z,Z){_=Bb(w);var L=Z.x,O=Z.y,u=Z.width,f=Z.height;L=Math.floor((L*k+V)*Gh),O=Math.floor((O*k+j)*Gh),u=Math.ceil(u*k*Gh)+1,f=Math.ceil(f*k*Gh)+1,_.beginPath(),_.rect(L,O,u,f),_.clip(),_.clearRect(L,O,u,f),Gl(_,V,j,k),a._42(_,Z),_.restore(),delete a._74O}if(y.clear(),delete a._32I,F&&I>0&&U>0){var d=a.getDataUI(F);if(d){var e=d._79o(),B=a._29I,n=B.x,x=B.y,p=B.width,C=B.height,k=a._zoom;e&&!db(e,B)&&(e.x+e.width<n&&a.tx(-e.x*k),e.x>n+p&&a.tx(-(e.x+e.width-p)*k),e.y+e.height<x&&a.ty(-e.y*k),e.y>x+C&&a.ty(-(e.y+e.height-C)*k))}delete a._23I}a._83I&&(delete a._83I,delete a._84I),a._98O(),Ep(a._24I)||id(a.iv,a)},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(B){var R=this;B!==R.isScrollBarVisible()&&(B?(tf(R._view,R._79O=cd()),tf(R._79O,R._27I=cd()),tf(R._79O,R._28I=cd())):(Aq(R._79O),delete R._79O,delete R._27I,delete R._28I),R.fp("scrollBarVisible",!B,B))},showScrollBar:function(){var i=this;i._79O&&(i._85I||(U(function(){i._86I()},iq),i.iv()),i._85I=new Date)},_86I:function(){var s=this;if(s._85I){var e=new Date,l=e.getTime();l-s._85I.getTime()>=iq?(delete s._85I,s.iv()):U(function(){s._86I()},iq)}},_98O:function(){var K=this,d=this._27I,R=this._28I;if(K._79O){if(K._autoHideScrollBar&&!K._85I)return d.style.visibility=hg,R.style.visibility=hg,void 0;var N=K.getScrollBarColor(),W=K._zoom,X=K.getScrollBarSize(),$=K.getViewRect(),Y=K.getScrollRect(),n=$.height*W,k=Y.height*W,D=$.width*W-X-2,c=n*(($.y-Y.y)*W/k),F=n*(n/k),T=d.style;k-.5>n?(Lc>F&&(c=c+F/2-Lc/2,0>c&&(c=0),c+Lc>n&&(c=n-Lc),F=Lc),zq(d,D,c,X,F),T.visibility=xq,T.background=N,T.borderRadius=X/2+dm):T.visibility=hg;var A=$.width*W,H=Y.width*W,c=$.height*W-X-2,D=A*(($.x-Y.x)*W/H),h=A*(A/H),T=R.style;H-.5>A?(Lc>h&&(D=D+h/2-Lc/2,0>D&&(D=0),D+Lc>A&&(D=A-Lc),h=Lc),zq(R,D,c,h,X),T.visibility=xq,T.background=N,T.borderRadius=X/2+dm):T.visibility=hg}},setDataModel:function(g){var o=this,r=o._dataModel,P=o._selectionModel;r!==g&&(r&&(r.ump(o.handleDataModelPropertyChange,o),r.umm(o.handleDataModelChange,o),r.umd(o.handleDataPropertyChange,o),r.removeIndexChangeListener(o._75O,o),r.removeHierarchyChangeListener(o.handleHierarchyChange,o),P||r.sm().ums(o.handleSelectionChange,o)),o._dataModel=g,g.mp(o.handleDataModelPropertyChange,o),g.mm(o.handleDataModelChange,o),g.md(o.handleDataPropertyChange,o),g.addIndexChangeListener(o._75O,o),g.addHierarchyChangeListener(o.handleHierarchyChange,o),P?P._21I(g):g.sm().ms(o.handleSelectionChange,o),o.invalidateAll(!0),o.fp(Rc,r,g),o._canvas.style.background=g.getBackground()||"")},getLayersInfo:function(){if(this._layersInfo===e){var v=this.getLayers();v?(this._layersInfo={},v.forEach(function(G){var b=Vc(G)?G.name:G;this._layersInfo[b]=G},this)):this._layersInfo=null}return this._layersInfo},updateLayers:function(){this._layersInfo=e,this.invalidateSelection(),this.redraw()},handleDataModelPropertyChange:function(G){if("background"===G.property){var _=this._canvas.style.background,S=G.newValue||"";this._canvas.style.background=S,this.fp("canvasBackground",_,S)}else"a:width"===G.property||"a:height"===G.property?(this._83I=1,this.redraw()):"layers"===G.property?this.updateLayers():"hierarchicalRendering"===G.property&&this.redraw()},handleDataPropertyChange:function(D){this.dm().isHierarchicalRendering()&&"parent"===D.property&&D.data.hasChildren()&&this.redraw(),this.invalidateData(D.data)},onPropertyChanged:function(V){var D=this,L=V.property;if(D.redraw(),"zoom"===L){var m=D.sm().getSelection();m.size()&&m.each(function(q){q.invalidate()})}rr[L]?D.showScrollBar():L===Kq&&D.onCurrentSubGraphChanged(V)},onCurrentSubGraphChanged:function(){this.sm().cs(),this.reset()},handleDataModelChange:function(t){var o=this,A=t.kind,e=t.data;if(o._83I=1,"add"===A)o.invalidateData(e),zj(e)&&e.getEdgeGroup()&&e.getEdgeGroup().eachSiblingEdge(o.invalidateData,o);else if(A===Jn){o._21Q(e);var h=e._id,k=o._25I[h];if(k){if(o._56I[h]){var I=k._79o();I&&o.redraw(I)}k.dispose(),delete o._25I[h],delete o._24I[h],delete o._56I[h]}e===o._currentSubGraph&&o.setCurrentSubGraph(J)}else A===Jb&&(o.invalidateAll(!0),o.setCurrentSubGraph(J))},_75O:function(R){this.invalidateData(R.data)},handleHierarchyChange:function(p){this.dm().isHierarchicalRendering()&&p.data.hasChildren()&&this.redraw(),this.invalidateData(p.data)},adjustIndex:function(D){var f=this;if(f.isVisible(D)){f.dm().beginTransaction();for(var v=D;v._parent&&f.isVisible(v._parent);)v=v._parent;v&&v!==D&&f._dataModel.adjustIndex(v),f._dataModel.adjustIndex(D),f.dm().endTransaction()}},getImage:function(u){return u.getImage?u.getImage():e},getSelectWidth:function(N){return N.s("select.width")},isSelectable:function(E){if(!this._clickThroughChecking&&E.getParent()instanceof Ij&&E.getParent().isSyncSize())return!1;var Q=this.getLayersInfo();if(Q){var f=Q[E._layer];if(f&&f.selectable===!1)return!1}return E.s("2d.selectable")&&this.sm().isSelectable(E)},isMovable:function(P){var E=this;if(zj(P)&&P.getStyle(pk)!==co)return!1;var W=this.getLayersInfo();if(W){var A=W[P._layer];if(A&&A.movable===!1)return!1}return P.s("2d.movable")?E._movableFunc?E._movableFunc(P):!0:!1},isEditable:function(u){var l=this;if(A._uiSerializing)return l._uieditable;if(!l._editInteractor||!l.isSelected(u))return!1;if(Mg(u)){var s=l.getDataUI(u);if(!s||s._88I)return!1}if(zj(u)&&u.getStyle(pk)!==co)return!1;var U=this.getLayersInfo();if(U){var N=U[u._layer];if(N&&N.editable===!1)return!1}return u.s("2d.editable")?l._editableFunc?l._editableFunc(u):!0:!1},handleDelete:function(){this._editInteractor&&(this._editInteractor.handleDelete?this._editInteractor.handleDelete():this.removeSelection())},isPointEditable:function(M){return Yq(M)&&0!==M.getRotation()?!1:this._pointEditableFunc?this._pointEditableFunc(M):!0},isRectEditable:function(r){return this._rectEditableFunc?this._rectEditableFunc(r):!0},isAnchorEditable:function(V){return this._anchorEditableFunc?this._anchorEditableFunc(V):!0},isRotationEditable:function(T){return T.setRotation&&T.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(T):!0:!1},getRotationPoint:function(A){var u=A.getAnchor(),E=A.getScale(),L=this._zoom,z=Wm(A.getRotation(),0,-A.getHeight()*E.y*u.y-(E.y<0?-1:1)*(s?32:16)/L),i=A.p();return z.x+=i.x,z.y+=i.y,z},getLogicalPoint:function(T){var K=this;return es(T,K._canvas,K.tx(),K.ty(),K._zoom,K._zoom)},getSelectedDataAt:function(G){var _=this;return this.getDataAt(G,function(O){return _.isSelected(O)})},getDataInfoAt:function(v,E,_){var W,s=this.lp(v),i=this.getDataAt(s,E,_);if(i){var C=this.getDataUI(i);W={data:i,ui:C,point:s};var K=C._38o;if(K){var h=K.icons;for(var w in h){var G=h[w],P=K.rects[w];if(P)for(var V=dg(G.names,i,this),X=V?V.length:0,d=P.rotation,f=X-1;f>=0;f--){var n=V[f],m=P[f];if(Pm(m,s,d))return W.part="icons",W.name=w,W.icon=n,W.rect=m,W.index=f,W.rotation=d,W}}}if(this.isNoteVisible(i)){if(C.note2Info&&Pm(C.note2Info.clickRect,s,J,C.note2Info.scale))return W.part="note2",W;if(C.noteInfo&&Pm(C.noteInfo.clickRect,s,J,C.noteInfo.scale))return W.part="note",W}if(this.isLabelVisible(i)){if(C.label2Info&&Pm(C.label2Info.rect,s,C.label2Info.rotation,C.label2Info.scale))return W.part="label2",W;if(C.labelInfo&&Pm(C.labelInfo.rect,s,C.labelInfo.rotation,C.labelInfo.scale))return W.part="label",W}if(i.isInRect&&i.isInRect(s))return W.part="body",W}return W},getDataAt:function(h,C,T){h.target&&(h=this.lp(h));var l,L=this._zoom;return this.reverseEach(function(u){return(C?C(u):this.isSelectable(u))&&this.rectIntersects(u,vk(h.x,h.y,T,L))?(l=u,!1):void 0},this),l},getIconInfoAt:function(N,n){var c=this;if(N.target&&(N=c.lp(N)),n||(n=c.getDataAt(N)),n){var W=c.getDataUI(n);if(W&&W._38o){var m,x=W._38o,l=new Cq;for(m in x.icons)l.add(m);for(var u=l.size()-1;u>=0;u--){m=l.get(u);for(var C=x.rects[m],p=C.rotation,A=C.length-1;A>=0;A--){var P=C[A],F=P.width,r=P.height,R={x:N.x-P.x-F/2,y:N.y-P.y-r/2};p!=J&&(R=Wm(-p,R.x,R.y));var P={x:-F/2,y:-r/2,width:F,height:r};if(Pm(P,R))return{key:m,index:A,name:x.icons[m].names[A],rect:C[A],point:N,rotation:p,relativeRect:P,relativePoint:R,data:n}}}}}return J},getDatasInRect:function(x,z,C){C===e&&(C=1);var E=this,o=new Cq;return E.reverseEach(function(P){C&&!E.isSelectable(P)||(z?E.rectIntersects(P,x):E.rectContains(P,x))&&o.add(P)}),o},moveSelection:function($,T){var l=this;l.dm().beginTransaction(),ih(l.sm().toSelection(l.isMovable,l),$,T),l.dm().endTransaction()},moveDatas:function(T,R,N){var q=this;q.dm().beginTransaction(),T instanceof Cq||(T=new Cq(T)),ih(T,R,N),q.dm().endTransaction()},getDataUIBounds:function(d){var M=this.getDataUI(d);return M?M._79o():J},drawData:function(I,Q){var f=this.getDataUI(Q);f&&(f._79o(),f._42(I)),Q instanceof A.Block&&Q.eachChild(function(f){this.drawData(I,f)},this)},getBoundsForGroup:function(e){return e.s(zr)?this.getDataUIBounds(e):J},rectIntersects:function(I,i){this.validate();var E=J;if(this._56I[I._id]){var q=this._25I[I._id];if(q){var _=q._79o();if(qh(i,_))E=!0;else if((i=Eb(i,_))&&(q.rectIntersects&&(E=q.rectIntersects(i)),E==J)){if(!I.s("pixelPerfect"))return!0;var l=i.x,f=i.y,A=i.width,s=i.height,R=this._zoom,m=r.hitMaxArea,L=A*s*R*R;if(L>m){var U=Math.sqrt(m/L);R*=U}A*=R,s*=R,2>A&&(A=2),2>s&&(s=2),l*=R,f*=R;var V=vd(A,s);zs(V,-l,-f),V.scale(R,R),this._drawForChecking=!0,this.drawData(V,I),this._drawForChecking=!1;try{for(var D=0,p=V.getImageData(0,0,A,s).data;D<p.length;D+=4)if(0!==p[D+3]){E=!0;break}V.restore()}catch(t){cn=J,E=!1}}}}return E?!0:!1},rectContains:function(K,E){if(this._56I[K._id]){var x=this._25I[K._id];if(x)return qh(E,x._79o())}return!1},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(W){if(!r.isInput(W.target)){var C=this,Y=C._focusData,Q=Y&&C._25I[Y._id],p=0,R=C._dataModel._datas;if(!(Y&&Y._enabled&&Y._editable&&Q&&Q.onKeyDown&&Q.onKeyDown(W)===!0))if(9===W.keyCode&&(Y&&(p=R.indexOf(Y),Cm(W)?-1===--p&&(p=0):++p===R.size()&&(p=0)),C._focusData=Y=R.get(p),C.sm().setSelection(Y)),Eh(W)?C.selectAll():_d(W)&&C.isResettable()&&C.reset(),C.sm().isEmpty()){if(C._editing)return;var H=C.tx(),k=C.ty(),z=!1,a=Cm()?100:10;Jf(W)&&(H-=a,z=!0),mk(W)&&(k-=a,z=!0),Yk(W)&&(H+=a,z=!0),Vn(W)&&(k+=a,z=!0),z&&C.setTranslate(H,k)}else{As(W)&&C.handleDelete(W);var l=Cm()?10:1;Jf(W)&&(C.moveSelection(-l,0),C.fi({kind:"moveLeft"})),mk(W)&&(C.moveSelection(0,-l),C.fi({kind:"moveUp"})),Yk(W)&&(C.moveSelection(l,0),C.fi({kind:"moveRight"})),Vn(W)&&(C.moveSelection(0,l),C.fi({kind:"moveDown"}))}}},handleScroll:function(Z,w){pm(Z);var C=this.lp(Z);w>0?this.scrollZoomIn(C):0>w&&this.scrollZoomOut(C)},handlePinch:function(N,H,R){this._68I||(H>R?this.pinchZoomIn(N):this.pinchZoomOut(N))},checkDoubleClickOnNote:function(E,u){var Y=this,G=Y.lp(E),Z=Y.getDataUI(u),j=Z.note2Info;return j&&u.s("note2.toggleable")&&Pm(j.clickRect,G)?(u.s(El,!u.s(El)),Y.fi({kind:"toggleNote2",event:E,data:u}),!0):(j=Z.noteInfo,j&&u.s("note.toggleable")&&Pm(j.clickRect,G)?(u.s(Vd,!u.s(Vd)),Y.fi({kind:"toggleNote",event:E,data:u}),!0):!1)},_84o:function(){},isNoteVisible:function(){return this._zoom>.15},isLabelVisible:function(){return this._zoom>.15},isEditVisible:function(){return this._zoom>.15},autoScroll:function(T,S){var _=this,B=_.getAutoScrollZone(),i=B/_.getZoom(),H=B/4,o=_._29I,j=_.lp(T),U={x:_.tx(),y:_.ty()};return j&&B>0&&o&&(j.x-o.x<i?_.translate(H,0):o.x+o.width-j.x<i&&_.translate(-H,0),j.y-o.y<i?_.translate(0,H):o.y+o.height-j.y<i&&_.translate(0,-H)),U.x=_.tx()-U.x,U.y=_.ty()-U.y,S&&(S.x+=U.x,S.y+=U.y),U},getMoveMode:function(R,B){var x=B.s("2d.move.mode");return x?x:rc["88"]?"x":rc["89"]?"y":"xy"},getSerializableProperties:function(){return{scrollBarColor:1,scrollBarSize:1,autoMakeVisible:1,autoHideScrollBar:1,editable:1,resettable:1,pannable:1,rectSelectable:1,autoScrollZone:1,visibleFunc:1,movableFunc:1,editableFunc:1,pointEditableFunc:1,rectEditableFunc:1,anchorEditableFunc:1,rotationEditableFunc:1,rectSelectBackground:1,rectSelectBorderColor:1,editPointSize:1,editPointBorderColor:1,editPointBackground:1,hoverDelay:1,dataModel:1,selectionModel:1,currentSubGraph:1,zoom:1,translateX:1,translateY:1}},serializeProperty:function(v,w,X){var A=this;return"currentSubGraph"===w?{__i:v.getId()}:X.serializeProperty(v,w,A)},deserializeProperty:function(g,G,B){var I=this;if("currentSubGraph"===G){var y=I.dm(),v=y.__idMap;return v[g.__i]}return B.deserializeProperty(g,G,I)},setDefaultCursor:function(N,A){this._defaultCursor=N,A!==!1&&this.setCursor(N)},setCursor:function(j){"default"===j&&(j=this._defaultCursor||j);var Z=this.getView().style;Z.cursor=j,Z.cursor="-webkit-"+j,Z.cursor="-moz-"+j},getCurrentConnectActionType:function(){return this._currentActionType},setCurrentConnectActionType:function(s){return r.getConnectAction(null,s)?(this._currentActionType=s,!0):!1},isInteractive:function(w){return w.s("interactive")}});var Sp=function(f,X){var Y=this;Y.gv=f,Y.s=function(_){return X.getStyle(_)},Y._data=X,Y._87I=new Cq};js(Sp,h,{_6I:J,ms_icons:1,_84o:function(){},dispose:function(){},isShadowed:function(){return this.s("shadow")||this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},getSelectWidth:function(){var b=this,M=b.gv.isSelected(b._data);return!M||b.isShadowed()?0:b.gv.getSelectWidth(b._data)},getBodyColor:function(O){var I=this._data,w=this.gv.getBodyColor(I);return w?w:O?I.getStyle(O):J},_2Q:function(Y){return this.s(Y)},_1Q:function(M,n,N,t){var f=this.s,j=f(n+".dash.color");M.strokeStyle=j,M.lineWidth=N,M.stroke(),f(n+".dash.3d")&&Tr(M,j,f(n+".dash.3d.color"),N,this.gv._zoom,f(n+".dash.3d.accuracy")),Xn(M,t)},invalidate:function(){this._6I=J},_79o:function(){var v=this;if(!v._6I){var b=v._data,M=v.gv;v.labelInfo=v.label2Info=v.noteInfo=v.note2Info=v._38o=J,v._87I.clear(),v.interactiveInfo=M.isInteractive(b)?{}:J,v._3O(),v._55O=M.isEditable(b)?{_42O:M.isRectEditable(b),_43O:M.isPointEditable(b),_56O:M.isRotationEditable(b)}:J,v._6I=v._81o()}return v._6I},_3O:function(){},getPosition:function(){return Rd},_68o:function(S,r){S&&this._87I.add(Nb(S,r))},_81o:function(){var J=this,V=J.s;J._24O(ld,"getLabel"),J._24O(rh,"getLabel2"),J._26O(Hb,"getNote"),J._26O(Ar,"getNote2"),J._15O(),J._55O&&J._48O();var U;if(J._87I.each(function(S){U=Wn(U,S)}),U&&J.isShadowed()){var h=Se(U);h.x+=V("shadow.offset.x"),h.y+=V("shadow.offset.y"),Wr(h,V("shadow.blur")),U=Wn(U,h)}return J._87I.clear(),U},_42:function(d){var c=this,a=c._data,N=c.gv,X=c.s,b=X("opacity"),i=this.isShadowed();if(i){var Z=d.shadowOffsetX,v=d.shadowOffsetY,e=d.shadowBlur,I=d.shadowColor,u=N.getZoom();d.shadowOffsetX=X("shadow.offset.x")*u,d.shadowOffsetY=X("shadow.offset.y")*u,d.shadowBlur=X("shadow.blur")*u,d.shadowColor=X("select.color")}if(b!=J){var t=d.globalAlpha;d.globalAlpha=b}c._80o(d),N.isLabelVisible(a)&&((!N._drawForChecking||X("label.selectable"))&&gf(d,c.labelInfo),(!N._drawForChecking||X("label2.selectable"))&&gf(d,c.label2Info)),N.isNoteVisible(a)&&(Hh(d,c.noteInfo),Hh(d,c.note2Info)),c._99O(d),b!=J&&(d.globalAlpha=t),i&&(d.shadowOffsetX=Z,d.shadowOffsetY=v,d.shadowBlur=e,d.shadowColor=I)},_80o:function(){},_47O:function(){},_24O:function(D,u){var t=this,X=t._data,k=t.gv,O=t.s,r=k[u](X);if(r!=J){var U=O(D+".scale"),m=O(D+".max"),I=O(D+".position"),$=t[D+"Info"]={label:r,scale:U,color:k[u+"Color"](X),font:O(D+".font"),opacity:O(D+".opacity"),align:O(D+".align"),rotation:t.getRotation(O(D+".rotation"),!1,I),background:k[u+"Background"](X)},j=bp($,r);m>0&&m<j.width&&($.labelWidth=j.width,j.width=m),1!==U&&(j.width*=U,j.height*=U);var s=t.getPosition(I,O(D+".offset.x"),O(D+".offset.y"),j,O(D+".position.fixed"));if(j.x=s.x-j.width/2,j.y=s.y-j.height/2,t._68o($.rect=j,$.rotation),1!==U){var H=j.width/U,i=j.height/U;$.rect={x:s.x-H/2,y:s.y-i/2,width:H,height:i}}}},_26O:function(j,q){var N=this,s=N.gv,v=N._data,Y=N.s,p=s[q](v);if(p!=J){var V,h,e=Y(j+".scale"),C=N[j+"Info"]={note:p,scale:e,data:v,view:s,expanded:Y(j+".expanded"),font:Y(j+".font"),color:Y(j+".color"),opacity:Y(j+".opacity"),align:Y(j+".align"),icon:Y(j+".icon"),backgroundImage:Y(j+".backgroundImage"),borderWidth:Y(j+".border.width"),borderColor:Y(j+".border.color"),background:s[q+"Background"](v)},z=N.getPosition(Y(j+".position"),Y(j+".offset.x"),Y(j+".offset.y")),F=z.x,U=z.y;if(C.expanded){var M,A=Y(j+".max"),t=Y(j+".backgroundImage");t?(t=$l(t),M={width:Sf(t,v),height:tk(t,v)}):M=bp(C,p),M.width+=6,M.height+=2,A>0&&A<M.width&&(C.labelWidth=M.width,M.width=A),V=M.width,h=M.height+8,C.clickRect={x:F-V*e/2,y:U-h*e,width:V*e,height:h*e*M.height/h}}else{var P=Y(j+".icon");P?(P=$l(P),V=Sf(P,v),h=tk(P,v)):(V=12,h=18),C.clickRect={x:F-V*e/2,y:U-h*e,width:V*e,height:h*e}}C.rect={x:F-V/2,y:U-h*e/2-h/2,width:V,height:h};var m=o(C.borderWidth/2)*e;N._68o({x:F-V*e/2-m,y:U-h*e-m,width:V*e+2*m,height:h*e+2*m})}},_48O:function(){},_99O:function(s){var w=this,i=w._38o;if(i){var x=w.gv,Y=w._data,k=i.icons,T=w.interactiveInfo;T&&(T._38o={});for(var V in k){var E=k[V],S=i.rects[V];if(S){T&&(T._38o[V]=[]);var P=dg(E.opacity,Y,x),F=dg(E.names,Y,x),q=F?F.length:0,N=S.rotation;if(P!=J){var R=s.globalAlpha;s.globalAlpha*=P}for(var m=0;q>m;m++){var e=F[m],u=$l(e),z=S[m];if(N){var t=z.x+z.width/2,n=z.y+z.height/2;s.save(),zs(s,t,n),so(s,N),zs(s,-t,-n)}T&&T._38o[V].push(s.interactiveInfo={compInfos:[],stacks:N?[{t:[t,n]},{r:N},{t:[-t,-n]}]:[]}),Ck(s,u,dg(E.stretch,Y,x),z.x,z.y,z.width,z.height,w._data,w.gv),s.interactiveInfo=J,N&&s.restore()}P!=J&&(s.globalAlpha=R)}}}}});var ue=function(w,Z){Vp(ue,this,[w,Z])};js(ue,Sp,{_checkEmptyRect:!0,_40O:function(g,s){var O=this,R=O.s,h=g.rect;(g.borderColor=O.gv.getBorderColor(O._data))&&(g.borderType=R("border.type"),g.borderWidth=R("border.width"),g.borderPadding=R("border.padding"),s=S(s,g.borderPadding+g.borderWidth/2));var X=O._data.getScale(),A=S(1,S(k(X.x),k(X.y)));if(g.selectWidth=O.getSelectWidth()){var j=O.gv._zoom;g.selectType=R("select.type"),g._97o=R("select.color"),g.selectPadding=R("select.padding"),s=S(s,(g.selectPadding+g.selectWidth/2/j)/A)}s>0&&(s*=A,h=Se(h),Wr(h,s)),O._68o(h)},_39O:function(n,r){var Z,s=this,m=r.rect;if(r.borderWidth>0&&(Z=r.borderPadding,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,lb(n,r.borderType,{x:m.x-Z,y:m.y-Z,width:m.width+2*Z,height:m.height+2*Z}),n.stroke()),r.selectWidth>0){var D=s.gv._zoom;if(Z=r.selectPadding,n.strokeStyle=r._97o,n.lineWidth=r.selectWidth/D,r.rotation!=J){n.save(),n.translate(r.position.x,r.position.y),n.rotate(r.rotation);var Y=s._data,p=Y.getWidth(),B=Y.getHeight(),F=r.scale,E=r.anchor;m={x:F.x*-p*E.x,y:F.y*-B*E.y,width:F.x*p,height:F.y*B}}lb(n,r.selectType,{x:m.x-Z,y:m.y-Z,width:m.width+2*Z,height:m.height+2*Z}),r.rotation!=J&&n.restore(),n.stroke()}},_3O:function(){var z=this,b=z.s,O=z._data,f=O.getStyle(el),C=z.getBodyColor(),i=z._83o=f?{shape:f,_53o:z.getBodyColor("shape.background"),_27Q:$l(b("shape.repeat.image"),C),shapeGradientPack:b("shape.gradient.pack"),_54o:b("shape.border.width"),_55o:b("shape.border.color"),_56o:b("shape.border.3d"),_57o:b("shape.border.3d.color"),_58o:b("shape.border.3d.accuracy"),shapeGradient:b("shape.gradient"),_59o:b("shape.gradient.color"),_60o:b("shape.border.pattern"),_61o:b("shape.border.cap"),_62o:b("shape.border.join"),bodyColor:C}:{img:$l(z.gv.getImage(O),C),bodyColor:C,stretch:b("image.stretch")};if(M&&!_);else{i.rect=O.getRect(),i.position=O.p(),i.scale=O.getScale(),i.anchor=O.getAnchor(),i.rotation=O.getRotation(),f===Yf&&(i._63o=b("shape.depth"));var Q=0;if(f)Q=Bk(J,i._54o/2,i._62o),z.s("shape.dash")&&(Q=S(Q,(z.s("shape.dash.width")||i._54o)/2));else if(i.img&&i.img.boundExtend)if(Q=dg(i.img.boundExtend,O,z.gv),i.img.boundExtendAbsolute){var Z=O.getScale();Q/=z.gv._zoom*S(1,S(k(Z.x),k(Z.y)))}else if(!dg(i.img.fitSize,O,z.gv)){var F=dg(i.img.width,O,z.gv),T=dg(i.img.height,O,z.gv);Q*=S(O.getWidth()/F,O.getHeight()/T)}z._40O(i,Q);var e=b("clip.percentage");if(1>e&&(0>e&&(e=0),i.clipRect=pg(O.getAnchorRect(),b("clip.direction"),e)),f){var E=b("shape.fill.clip.percentage");1>E&&(0>E&&(E=0),i.shapeClipRect=pg(O.getAnchorRect(),b("shape.fill.clip.direction"),E))}}},getPosition:function(T,a,M,V){var E=Dh(T,this._83o.rect,V);return E.x+=a,E.y+=M,E},_80o:function(z){var K=this,R=K.s,k=K.gv,Y=K._data,f=K._83o,W=f.rect,q=f.position,I=f.rotation,j=f.anchor,B=f.scale,U=f.shape,G=f.clipRect;if(!K._checkEmptyRect||W.width>0&&W.height>0){var D=Y.getSize();if(D.x=-D.width*j.x,D.y=-D.height*j.y,z.save(),zs(z,q.x,q.y),so(z,I),pe(z,B.x,B.y),G&&(z.beginPath(),z.rect(G.x,G.y,G.width,G.height),z.clip()),K.freeDraw)K.freeDraw(z,D,f);else if(U){var h,w,N,O,$=f._60o,p=gb(z,$),Q=f._53o,o=f._27Q,V=f._54o,g=f._55o,y=f.shapeGradientPack,S=z.lineJoin,C=z.lineCap;if("roundRect"===U?h=R("shape.corner.radius"):"polygon"===U?h=R("shape.polygon.side"):"arc"===U&&(h=R("shape.arc.from"),w=R("shape.arc.to"),N=R("shape.arc.close"),O=R("shape.arc.oval")),z.lineJoin=f._62o,z.lineCap=f._61o,Q||o||y){var c=f.shapeClipRect;c&&(z.save(),z.beginPath(),z.rect(c.x,c.y,c.width,c.height),z.clip()),lb(z,U,D,h,w,N,O),y?Rh(z,y):o?Kd(z,o,f.bodyColor,null,Y,k):_p(z,Q,f.shapeGradient,f._59o,D),z.fill(),c&&z.restore(),y&&z.restore(),z!==p&&lb(p,U,D,h,w,N,O)}else lb(p,U,D,h,w,N,O);if(V>0){var u=R("shape.border.width.absolute");u&&(z.save(),z.setTransform(1,0,0,1,0,0)),z.lineWidth=V,z.strokeStyle=g,z.stroke(),u&&z.restore(),f._56o&&Tr(z,g,f._57o,V,k._zoom,f._58o)}if(Xn(z,$),R("shape.dash")){var s=R("shape.dash.width")||V;if(s>0){$=R("shape.dash.pattern");var p=gb(z,$,K._2Q("shape.dash.offset"));p!==z&&lb(p,U,D,h,w,N,O),K._1Q(z,"shape",s,$)}}ui(z,Q,f._63o,D),z.lineJoin=S,z.lineCap=C}else{var l=K.interactiveInfo;l&&(z.interactiveInfo=l.bodyInfo={compInfos:[],stacks:[{t:[q.x,q.y]},{r:I},{s:[B.x,B.y]}]}),Ck(z,f.img,f.stretch,D.x,D.y,D.width,D.height,Y,k,f.bodyColor),z.interactiveInfo=J}z.restore()}K._39O(z,f)},_48O:function(){},_47O:function(){}});var Wi=function(Q,c){Vp(Wi,this,[Q,c])},Td=function(h,n,C,H){var e=ii(h,n);return C=H?c(C,e):Cg(C,e),e?C/=e:C=0,{x:h.x+(n.x-h.x)*C,y:h.y+(n.y-h.y)*C}};js(Wi,Sp,{_3O:function(){var E,k=this,L=k._data,O=k.gv,_=k.s,B=_(pk),U=L.isLooped(),D=_("edge.width"),d=_("edge.center"),T=_("edge.offset"),y=O.getBorderColor(L),i=y?_("border.width"):0,C=k.getSelectWidth(),K=L._40I,h=L._41I,R=k._78o=K&&h?{looped:U,type:B,width:D,center:d,color:k.getBodyColor("edge.color"),borderColor:y,borderWidth:i,_97o:C?_("select.color"):J,selectWidth:C,pattern:_("edge.pattern"),cap:_("edge.cap"),join:_("edge.join"),is3d:_("edge.3d"),_67o:_("edge.3d.color"),_66o:_("edge.3d.accuracy")}:J;if(R){var n=r.getEdgeType(B);if(n){var l=n(L,am(k,O,L,U,B),O,k._19Q);l.points&&l.points.size()>1?(R._4O=l,E=Pk(R._4O.points)):l[Ee]&&l.rect&&(R._4O=l,E=l.rect)}else{var N=_("edge.source.anchor.x"),Y=_("edge.source.anchor.y"),t=_("edge.target.anchor.x"),M=_("edge.target.anchor.y"),s=uo(O,K,_("edge.source.position"),_("edge.source.offset.x"),_("edge.source.offset.y"),N,Y),o=uo(O,h,_("edge.target.position"),_("edge.target.offset.x"),_("edge.target.offset.y"),t,M);if(B===co){var b=R.points=_(mg)||Bo,u=b.size();R.segments=_("edge.segments");var g=N!==e||Y!==e,v=t!==e||M!==e;if(!d)if(T)g||(s=Td(s,u?b.get(0):o,T,u)),v||(o=Td(o,u?b.get(u-1):s,T,u));else{var p;g||(p=Al(s,u?b.get(0):o,yd(O,K)),p&&(s={x:p[0],y:p[1]})),v||(p=Al(u?b.get(u-1):s,o,yd(O,h)),p&&(o={x:p[0],y:p[1]}))}E=Wn(Pk(R.points),Pk(s,o))}else{var w=am(k,O,L,U,B);if(k._19Q||(w=-w),U)s=Se(s),s.x=O.getNodeRect(K).x,R.radius=w,E={x:s.x-w,y:s.y-w,width:2*w,height:2*w};else{var x=ii(s,o),G=Cg(T,x),F={x:G,y:w},a={x:x-G,y:w},W=f(o.y-s.y,o.x-s.x),m=R.mat=new pc(W);if(R.orienAngle=W,R.angle=o.x<s.x?W+I:W,R.rect={x:F.x,y:F.y,width:a.x-F.x,height:0},R.origin=s,F=m.tf(F),F.x+=s.x,F.y+=s.y,a=m.tf(a),a.x+=s.x,a.y+=s.y,d){var X={x:x,y:0};X=m.tf(X),X.x+=s.x,X.y+=s.y,E=Pk([s,F,a,X]),R.c1=s,R.c2=X}else E=Pk(F,a);s=F,o=a}}R.sourcePoint=s,R.targetPoint=o,L._lastSourcePoint=s,L._lastTargetPoint=o}var z=0;_("edge.dash")&&(z=_("edge.dash.width")||D);var Q="square"===R.cap?.71:.5;Bk(E,S(z*Q,D*Q+i+C),R.join),k._68o(E)}},getRotation:function(v,d,b){v=v||0;var _=this._78o;if(_){var l,n=_.angle,L=_.points,A=_._4O;if(n!=J)return d?_.orienAngle+v:n+v;if(A&&A[Ee])return A.getRotation?A.getRotation(this,v,d,b):0;if(A&&A.points){var P=A.points;return l=P.size(),wk[b]?l&&0===l%2?Te(P.get(l/2-1),P.get(l/2),d,v):v:jb[b]?Te(P.get(0),P.get(1),d,v):Te(P.get(l-2),P.get(l-1),d,v)}if(L)return l=L.size(),wk[b]?l&&0===l%2?Te(L.get(l/2-1),L.get(l/2),d,v):v:jb[b]?Te(_.sourcePoint,l?L.get(0):_.targetPoint,d,v):Te(l?L.get(l-1):_.sourcePoint,_.targetPoint,d,v)}return v},getPosition:function(d,F,I,v,z){var o=this._78o;if(o){var L,l=o.type,q=o.points,i=o._4O,X=o.sourcePoint,E=o.targetPoint;
if(!l)return o.looped?{x:X.x-o.radius+F,y:X.y+I}:(z&&X&&E&&(X.x>E.x||X.x===E.x&&X.y>E.y)&&(d=ig[d],I=-I),L=Dh(d,o.rect,v),L.x+=F,L.y+=I,L=o.mat.tf(L),L.x+=o.origin.x,L.y+=o.origin.y,L);if(i&&i[Ee])return i.getPosition?i.getPosition(this,d,F,I,v,z):{x:(X.x+E.x)/2,y:(X.y+E.y)/2};if(q){var L,k=q.size();if(wk[d]){if(k){var Q=k%2;if(0===Q)return zg(q.get(k/2-1),q.get(k/2),d,F,I,v,z);L=q.get((k-Q)/2)}else L={x:(X.x+E.x)/2,y:(X.y+E.y)/2};return L=Dh(d,{x:L.x,y:L.y,width:0,height:0},v),L.x+=F,L.y+=I,L}return jb[d]?zg(X,k?q.get(0):E,d,F,I,v,z):zg(k?q.get(k-1):X,E,d,F,I,v,z)}if(i){var j=i.points,k=j.size();if(wk[d]){var Q=k%2;return 0===Q?zg(j.get(k/2-1),j.get(k/2),d,F,I,v,z):(L=j.get((k-Q)/2),L=Dh(d,{x:L.x,y:L.y,width:0,height:0},v),L.x+=F,L.y+=I,L)}return jb[d]?zg(j.get(0),j.get(1),d,F,I,v,z):zg(j.get(k-2),j.get(k-1),d,F,I,v,z)}}return Rd},_42:function(M){this._78o&&Wi.superClass._42.call(this,M)},drawPath:function(V,u){V.beginPath();var L=u.type,o=u.points,g=u.segments,S=u._4O;if(!L||o){var Y=u.sourcePoint,I=Y.x,c=Y.y,W=u.targetPoint,K=W.x,H=W.y;if(L)if(g){var B=new Cq({x:I,y:c});B.addAll(o),B.add({x:K,y:H}),rd(V,B,g)}else V.moveTo(I,c),o.each(function(l){V.lineTo(l.x,l.y)}),V.lineTo(K,H);else u.looped?V.arc(I,c,u.radius,0,l,!0):u.center?(V.moveTo(u.c1.x,u.c1.y),V.lineTo(I,c),V.lineTo(K,H),V.lineTo(u.c2.x,u.c2.y)):(V.moveTo(I,c),V.lineTo(K,H))}else S&&(S.points?rd(V,S.points,S.segments):S[Ee]&&S[Ee](V,S))},_80o:function(p){var t=this,I=t.s,X=t._78o,S=X.width,e=X.selectWidth,h=X.borderWidth,O=X.color,D=p.lineJoin,G=p.lineCap,u=X.pattern;p.lineJoin=X.join,p.lineCap=X.cap,t.drawPath(gb(p,u),X);var U=I("edge.width.absolute");if(U&&(p.save(),p.setTransform(1,0,0,1,0,0)),e&&(p.strokeStyle=X._97o,p.lineWidth=S+2*(h+e),p.stroke()),h&&(p.strokeStyle=X.borderColor,p.lineWidth=S+2*h,p.stroke()),p.strokeStyle=O,p.lineWidth=S,p.stroke(),X.is3d&&Tr(p,O,X._67o,S,t.gv._zoom,X._66o),U&&p.restore(),Xn(p,u),I("edge.dash")){u=I("edge.dash.pattern");var L=gb(p,u,t._2Q("edge.dash.offset"));L!==p&&t.drawPath(L,X),t._1Q(p,"edge",I("edge.dash.width")||S,u)}p.lineJoin=D,p.lineCap=G},_48O:function(){},_47O:function(){},_71o:function(A,v){var d=this,K=d._data;if(d._19Q=!0,!K.getEdgeGroup())return A?K.s("edge.gap"):0;var M,j=0,U=0,R=0;if(K.getEdgeGroup().getSiblings().each(function(n){n.each(function(O){if(d.gv.isVisible(O)&&O.s(pk)==v){var p=O.s("edge.gap");M?(U+=R/2+p/2,R=p):(M=O,R=p),O===K&&(j=U)}})}),A)return U-j+R;var C=j-U/2;return M&&K._40I!==M._40I&&(d._19Q=!1),C}});var Vr=function(n,G){Vp(Vr,this,[n,G])};js(Vr,ue,{_3O:function(){var Q,W,q=this,U=q.s,d=q._data,S=q.gv;if(q._88I=J,d.isExpanded()&&d.eachChild(function(E){var s=S.getBoundsForGroup(E);s&&(W||(W=[]),W.push(s),Q=Wn(Q,s))}),Q){var j=S.getLabel(d),g=U("group.type");Q=Pg(g,W,Q),ki(Q,d,"group.padding",1);var c=q._88I={type:g,rect:Q,_64o:Q};if(!g&&j!=J){var r,V=q.labelInfo={label:j,color:U("group.title.color"),font:U("group.title.font"),align:U("group.title.align")},N=bp(V,j),s=N.width,l=N.height,n=U("group.title.align");s>Q.width&&(Q.width=s),V.rect={y:Q.y-l,width:N.width,height:l},r=n===fh?Q.x:n===um?Q.x+Q.width-s:Q.x+Q.width/2-s/2,V.rect.x=r,c.titleRect={x:Q.x,y:Q.y-l,width:Q.width,height:l+1},c.rect={x:Q.x,y:Q.y-l,width:Q.width,height:Q.height+l}}q._40O(c,U("group.border.width")/2)}else Vr.superClass._3O.call(q)},getPosition:function(p,b,P,y){var q=this._88I;if(q){var h=Dh(p,q.rect,y);return h.x+=b,h.y+=P,h}return Vr.superClass.getPosition.apply(this,arguments)},_24O:function(l,m){var s=this._88I;(!s||s.type||"label2"===l)&&Vr.superClass._24O.call(this,l,m)},_80o:function(x){var B=this,e=B._88I;if(e){var v=B._data,p=B.s,G=B.gv,w=e.type,n=e.rect,D=e._64o,d=e.titleRect,M=B.getBodyColor(),L=$l(p("group.image"),M),X=p("group.image.stretch"),f=B.getBodyColor("group.background"),l=$l(p("group.repeat.image"),M),T=p("group.gradient.pack"),a=p("group.gradient"),J=p("group.gradient.color"),i=p("group.depth");if(w){var Z=p("group.border.pattern"),h=p("group.border.width"),s=x.lineJoin,I=x.lineCap;if(x.lineJoin=p("group.border.join"),x.lineCap=p("group.border.cap"),L){if(x.save(),lb(x,w,n),x.clip(),Ck(x,L,X,n.x,n.y,n.width,n.height,v,G,M),x.restore(),h>0){var q=gb(x,Z);lb(q,w,n),x.lineWidth=h,x.strokeStyle=p("group.border.color"),x.stroke(),Xn(x,Z)}}else{var q=gb(x,Z);f||l||T?(lb(x,w,n),T?Rh(x,T):l?Kd(x,l,M,null,v,G):_p(x,f,a,J,n),x.fill(),T&&x.restore(),x!==q&&lb(q,w,n)):lb(q,w,n),h>0&&(x.lineWidth=h,x.strokeStyle=p("group.border.color"),x.stroke()),Xn(x,Z),w===Yf&&ui(x,f,i,n)}x.lineJoin=s,x.lineCap=I}else if(L?Ck(x,L,X,D.x,D.y,D.width,D.height,v,G,B.getBodyColor()):(f||l)&&(l?Kd(x,l,M,null,v,G):_p(x,f,a,J,D),lb(x,Yf,D),x.fill(),ui(x,f,i,D)),d){var E=p("group.title.background");Wl(x,d.x,d.y,d.width,d.height,E),ui(x,E,i,d)}B._39O(x,e)}else Vr.superClass._80o.call(B,x)}});var pd=function(w,I){Vp(pd,this,[w,I])};js(pd,ue,{_80o:function(y){this._39O(y,this._83o)}});var Sb=function(k,y){Vp(Sb,this,[k,y])};js(Sb,ue,{_3O:function(){var H=this,u=H._data,L=H.s,b=H.gv,C=u.getPoints(),y=b.getBorderColor(u),A=y?L("border.width"):0,R=H.getSelectWidth(),c=L("shape.border.width"),w=u.getRect(),r=b.getBodyColor(u),e=H._99o=C.isEmpty()?J:{rect:w,rotation:u.getRotation(),fillRule:L("shape.fill.rule"),scale:u.getScale(),position:u.p(),points:C,segments:u.getSegments(),bodyColor:r,borderColor:y,borderWidth:A,_94o:L("shape.border.3d"),_95o:L("shape.border.3d.color"),_96o:L("shape.border.3d.accuracy"),_97o:R?L("select.color"):J,selectWidth:R,_53o:L("shape.background"),_27Q:$l(L("shape.repeat.image"),r),shapeGradientPack:L("shape.gradient.pack"),_54o:c,_55o:L("shape.border.color"),shapeGradient:L("shape.gradient"),_59o:L("shape.gradient.color"),_60o:L("shape.border.pattern"),_61o:L("shape.border.cap"),_62o:L("shape.border.join")};if(e){var f=u.getScale(),z=S(1,S(k(f.x),k(f.y)));L("shape.dash")&&L("shape.dash.width")>c&&(c=L("shape.dash.width"));var E=c*("square"===e._61o?.71:.5)+A+R/H.gv._zoom/z;E&&(E*=z,w=Se(w),Bk(w,E,e._62o)),H._68o(w);var n=L("clip.percentage");1>n&&(0>n&&(n=0),e.clipRect=pg(u.getAnchorRect(),L("clip.direction"),n));var O=L("shape.fill.clip.percentage");1>O&&(0>O&&(O=0),e.shapeClipRect=pg(u.getAnchorRect(),L("shape.fill.clip.direction"),O))}},getPosition:function(P,d,h,u){var J=this._99o;if(J){var s=Dh(P,J.rect,u);return s.x+=d,s.y+=h,s}return Rd},_42:function(S){this._99o&&Sb.superClass._42.call(this,S)},_80o:function(M){var m,U=this,i=U.s,c=U._99o,Z=c.position,b=c.scale,I=c.rotation,n=c.bodyColor,K=c.borderWidth,g=c.selectWidth,J=c._53o,l=c._27Q,w=c.shapeGradientPack,Y=c._54o,e=c.clipRect,q=c.shapeClipRect,N=c.points,j=c.segments,s=U._data.isClosePath(),T=c.fillRule,y=J||l||w;M.save(),zs(M,Z.x,Z.y),so(M,I),pe(M,b.x,b.y),e&&(M.beginPath(),M.rect(e.x,e.y,e.width,e.height),M.clip()),y&&q&&(M.save(),M.beginPath(),M.rect(q.x,q.y,q.width,q.height),M.clip()),zs(M,-Z.x,-Z.y);var t=c._60o,z=gb(M,t),Q=M.lineJoin,B=M.lineCap;M.lineJoin=c._62o,M.lineCap=c._61o,y?(rd(M,N,j,s),w?Rh(M,w):l?Kd(M,l,n,null,U._data,U.gv):(m=n?n:J,_p(M,m,c.shapeGradient,c._59o,c.rect)),M.fill(T),q&&(M.restore(),zs(M,-Z.x,-Z.y)),w&&M.restore(),z!==M&&rd(z,N,j,s)):rd(z,N,j,s);var x=i("shape.border.width.absolute");if(x&&(M.save(),M.setTransform(1,0,0,1,0,0)),g&&(M.strokeStyle=c._97o,M.lineWidth=Y+2*(K+g),M.stroke()),K&&(M.strokeStyle=c.borderColor,M.lineWidth=Y+2*K,M.stroke()),Y&&(m=c._55o,!J&&n&&(m=n),M.strokeStyle=m,M.lineWidth=Y,M.stroke(),c._94o&&Tr(M,m,c._95o,Y,U.gv._zoom,c._96o)),x&&M.restore(),Xn(M,t),i("shape.dash")){var d=i("shape.dash.width")||Y;if(d>0){t=i("shape.dash.pattern");var z=gb(M,t,U._2Q("shape.dash.offset"));z!==M&&rd(z,N,j,s),U._1Q(M,"shape",d,t)}}M.lineJoin=Q,M.lineCap=B,M.restore()},_48O:function(){},_47O:function(){}});var kc=function(Z,C){Vp(kc,this,[Z,C])};js(kc,Sb,{getRotation:function(L,n,x){L=L||0;var Y=this._data.getPoints(),H=Y.size();return H>1?wk[x]?H&&0===H%2?Te(Y.get(H/2-1),Y.get(H/2),n,L):L:jb[x]?Te(Y.get(0),Y.get(1),n,L):Te(Y.get(H-2),Y.get(H-1),n,L):L},getPosition:function(X,T,P,p,I){var K=this._data.getPoints(),V=K.size();if(V>1){if(wk[X]){var u=V%2;if(0===u)return zg(K.get(V/2-1),K.get(V/2),X,T,P,p,I);var b=K.get((V-u)/2),N={x:b.x,y:b.y,width:0,height:0};return b=Dh(X,N,p),b.x+=T,b.y+=P,b}return jb[X]?zg(K.get(0),K.get(1),X,T,P,p,I):zg(K.get(V-2),K.get(V-1),X,T,P,p,I)}return Rd}});var Zn=function(v,u){Vp(Zn,this,[v,u])};js(Zn,ue,{_3O:function(){var c=this;Zn.superClass._3O.call(c);var I=c.s,R=c._83o;c._82o=R.img||R.shape?J:{background:c.getBodyColor("grid.background"),depth:I("grid.depth"),rect:R.rect,_88o:I("grid.cell.depth"),cellBorderColor:I("grid.cell.border.color"),_89o:I("grid.row.count"),_90o:I("grid.column.count"),block:I("grid.block"),_91o:I("grid.block.color"),_92o:I("grid.block.padding"),_93o:I("grid.block.width")}},_80o:function(N){var X=this,s=X._82o;if(!s)return Zn.superClass._80o.call(X,N),void 0;var x,W,U=X._data,y=s.background,q=s.rect,G=s.block,E=s._91o,L=s._92o,S=s._93o,w=s._88o,p=s.cellBorderColor,O=s._89o,b=s._90o;if(y)if(Wl(N,q.x,q.y,q.width,q.height,y),ui(N,y,s.depth,q),w)for(x=0;O>x;x++)for(W=0;b>W;W++)q=U.getCellRect(x,W),q&&ui(N,y,w,q);else if(p){for(N.beginPath(),x=0;O>x;x++)for(W=0;b>W;W++)q=U.getCellRect(x,W),q&&N.rect(q.x,q.y,q.width,q.height);N.strokeStyle=p,N.lineWidth=1,N.stroke()}if("h"===G)for(x=0;O>x;x++)q=Wn(U.getCellRect(x,0),U.getCellRect(x,b-1)),Wr(q,L),Uj(N,E,q.x,q.y,q.width,q.height,S);else if("v"===G)for(W=0;b>W;W++)q=Wn(U.getCellRect(0,W),U.getCellRect(O-1,W)),Wr(q,L),Uj(N,E,q.x,q.y,q.width,q.height,S);X._39O(N,X._83o)}});var Pr=function(v,S){Vp(Pr,this,[v,S])};js(Pr,ue,{_checkEmptyRect:!1,_81o:function(){var x=this._data,v=Pr.superClass._81o.call(this),r=x.s("text");if(r!=J){var S,F,h=x.s("text.font"),V=x.s("text.align"),Z=x.s("text.vAlign"),n=cf(h,r),X=n.width,G=n.height,L=x.getAnchor(),T=x.getWidth(),u=x.getHeight();"left"===V?S=-T*L.x:"center"===V?S=-T*L.x+(T-X)/2:"right"===V&&(S=T*(1-L.x)-n.width),"top"===Z?F=-u*L.y:"middle"===Z?F=-u*L.y+(u-G)/2:"bottom"===Z&&(F=u*(1-L.y)-n.height);var H,I=x.getMatrix();if(H=Pk([I.tf(S,F),I.tf(S+X,F),I.tf(S+X,F+G),I.tf(S,F+G)]),v=Wn(v,H),v&&x.s("text.shadow")){var z=Se(v);z.x+=x.s("text.shadow.offset.x"),z.y+=x.s("text.shadow.offset.y"),Wr(z,x.s("text.shadow.blur")),v=Wn(v,z)}}return v}});var Go=zh.Interactor=function(_){this.gv=this._graphView=_};xc("Interactor",h,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(S){this.gv.fi(S)},setCursor:function(L){s||this.gv.setCursor(L)},startDragging:function(a){var u=this;u._lastClientPoint=Ao(a),u._lastLogicalPoint=u.gv.lp(a),Vk(u,a)},clearDragging:function(){var D=this;D._lastClientPoint=D._lastLogicalPoint=D._logicalPoint=J},autoScroll:function(z){return this.gv.autoScroll(z,this._lastClientPoint)}});var we=function(D){var H=this;H.gv=D,H.filter=function(q){return D.isSelectable(q)&&D.isInteractive(q)},D.getView(),["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"].forEach(function(K){H.addListener(K)}),x.addEventListener(Nm,function(q){Dp(q)&&H.handleWindowMove(q)},!1),x.addEventListener(Rp,function(X){Dp(X)&&H.handleWindowUp(X)},!1),x.addEventListener(Po,function(I){Dp(I)&&H.handleWindowMove(I)},!1),x.addEventListener(Yi,function(M){Dp(M)&&H.handleWindowUp(M)},!1)};js(we,Go,{addListener:function(O){var c=this;c.gv.getView().addEventListener(O,function(m){r.preventDefault(m),Dp(m)&&!c.disabled&&c["handle_"+O](m)},!1)},handle:function(L,i,y){var t=this.gv;if(y=y||t.getDataInfoAt(i,this.filter)){var r=y.ui.interactiveInfo;if(r){var e,A=y.data;if(A.s(L)&&A.s(L)(i,A,t),"body"===y.part&&r.bodyInfo)e="body",y.hits=this.handleImage(e,t.getImage(A),L,i,A,y.point,r.bodyInfo);else if("icons"===y.part&&r._38o){var V=r._38o[y.name];V&&V[y.index]&&(e="icons|"+y.name+"|"+y.index,y.hits=this.handleImage(e,y.icon,L,i,A,y.point,V[y.index]))}}return y}},handleImage:function(b,M,E,d,c,i,m){var H={};if(M&&(M=$l(M))){var z=this.gv,n=m.rect,s=this.convertPoint(i,m);s.inRect&&(M[E]&&M[E](d,c,z,s,n.width,n.height),H[b+"|image"]={target:M,point:s,width:n.width,height:n.height});for(var f=m.compInfos,l=f.length-1;l>=0;l--){var W=f[l],Z=W.comp;s=this.convertPoint(i,W),s.inRect&&(n=W.rect,Z[E]&&Z[E](d,c,z,s,n.width,n.height),(M=n.image)&&M[E]&&M[E](d,c,z,s,n.width,n.height),H[b+"|"+l]={target:Z,point:s,width:n.width,height:n.height},M&&(H[b+"|"+l+"|image"]={target:M,point:s,width:n.width,height:n.height}))}}return H},handle_mousedown:function(P){this.handleWindowUp(P),this.downInfo=this.handle("onDown",P)},handle_mousemove:function(F){var p=this,P=p.gv;p._hoverTimer&&(G(p._hoverTimer),delete p._hoverTimer);var L,g,I,c=p.handle("onMove",F),Y=this.currentInfo?this.currentInfo.data:J,H=this.currentInfo?this.currentInfo.hits:J;if(c&&(g=c.data,I=c.hits,p._hoverTimer=U(function(){G(p._hoverTimer),delete p._hoverTimer,p.handle("onHover",F,c)},P.getHoverDelay()||r.hoverDelay)),g!==Y){if(g&&g.s("onEnter")&&g.s("onEnter")(F,g,P),Y&&Y.s("onLeave")&&Y.s("onLeave")(F,Y,P),H)for(L in H)H[L].target.onLeave&&this.handleLeave(F,L);if(I)for(L in I)I[L].target.onEnter&&I[L].target.onEnter(F,g,P,I[L].point,I[L].width,I[L].height)}else{if(H)for(L in H)I&&I[L]||H[L].target.onLeave&&this.handleLeave(F,L);if(I)for(L in I)H&&H[L]||I[L].target.onEnter&&I[L].target.onEnter(F,g,P,I[L].point,I[L].width,I[L].height)}this.currentInfo=c},handleLeave:function(N,X){if(this.currentInfo){var p=this.currentInfo,G=p.ui.interactiveInfo;if(G){var u,I=this.gv.lp(N),c=p.data;if("body"===p.part&&G.bodyInfo)u="body",this.handleLeaveImage(X,u,this.gv.getImage(c),N,c,I,G.bodyInfo);else if("icons"===p.part&&G._38o){var i=G._38o[p.name];i&&i[p.index]&&(u="icons|"+p.name+"|"+p.index,this.handleLeaveImage(X,u,p.icon,N,c,I,i[p.index]))}}}},handleLeaveImage:function(C,i,Q,T,d,J,Y){if(Q&&(Q=$l(Q))){var S=this.gv,y=Y.rect,p=this.convertPoint(J,Y);C===i+"|image"&&Q.onLeave&&Q.onLeave(T,d,S,p,y.width,y.height);for(var H=Y.compInfos,P=H.length-1;P>=0;P--){var L=H[P],E=L.comp;p=this.convertPoint(J,L),y=L.rect,E.onLeave&&C===i+"|"+P&&E.onLeave(T,d,S,p,y.width,y.height),(Q=y.image)&&Q.onLeave&&C===i+"|"+P+"|image"&&Q.onLeave(T,d,S,p,y.width,y.height)}}},handle_mouseup:function(c){this.handle("onUp",c)},handle_touchstart:function(i){this.handle_mousedown(i)},handle_touchmove:function(E){this.handle("onMove",E)},handle_touchend:function(N){this.handle_mouseup(N)},handleWindowMove:function(e){this.downInfo&&(this.isDragging?this.handleDrag("onDrag",e):(this.handleDrag("onBeginDrag",e),this.isDragging=!0))},handleWindowUp:function(P){this.isDragging&&(this.handleDrag("onEndDrag",P),this.isDragging=!1),this.downInfo=J},handleDrag:function(m,W){if(this.downInfo){var F=this.downInfo,n=F.ui.interactiveInfo;if(n){var x,d=this.gv.lp(W),C=F.data;if(C.s(m)&&C.s(m)(W,C,this.gv),"body"===F.part&&n.bodyInfo)x="body",this.handleDragImage(x,this.gv.getImage(C),m,W,C,d,n.bodyInfo);else if("icons"===F.part&&n._38o){var M=n._38o[F.name];M&&M[F.index]&&(x="icons|"+F.name+"|"+F.index,this.handleDragImage(x,F.icon,m,W,C,d,M[F.index]))}}}},handleDragImage:function(z,u,k,A,$,b,W){var o=this.downInfo.hits;if(o&&u&&(u=$l(u))){var p=this.gv,H=W.rect,K=this.convertPoint(b,W);o[z+"|image"]&&u[k]&&u[k](A,$,p,K,H.width,H.height);for(var Q=W.compInfos,C=Q.length-1;C>=0;C--){var O=Q[C],V=O.comp;K=this.convertPoint(b,O),H=O.rect,V[k]&&o[z+"|"+C]&&V[k](A,$,p,K,H.width,H.height),(u=H.image)&&u[k]&&o[z+"|"+C+"|image"]&&u[k](A,$,p,K,H.width,H.height)}}},convertPoint:function(r,T){var v=r.x,$=r.y;T.stacks.forEach(function(s){if(s.t)v-=s.t[0],$-=s.t[1];else if(s.s)v/=s.s[0],$/=s.s[1];else if(s.r){var L=j(-s.r),d=C(-s.r),F=d*v-L*$,D=L*v+d*$;v=F,$=D}});var g=T.rect;return r={x:v-g.x,y:$-g.y},r.inRect=r.x>=0&&r.y>=0&&r.x<=g.width&&r.y<=g.height,r}});var Vf=zh.DefaultInteractor=function(z){Vp(Vf,this,[z])};xc("DefaultInteractor",Go,{handle_mousedown:function(H){pm(H);var J=this,p=J.gv,k=p.getDataAt(H);!p.setFocus(H)||p._editing||p._scrolling||(qi(H)?p.handleDoubleClick(H,k):p.handleClick(H,k),!_d()&&k||!p.isPannable()||!Dp(H)||dh(H)||(J._tx=p.tx(),J._ty=p.ty(),J.startDragging(H)))},handleWindowMouseUp:function(q){var g=this,N=g.gv;N._panning&&(delete N._panning,N.onPanEnded(),g.fi({kind:"endPan",event:q})),delete g._tx,delete g._ty,g.clearDragging()},handle_mousemove:function(s){var A=this,f=A.gv;A._hoverTimer&&(G(A._hoverTimer),delete A._hoverTimer),A._hoverTimer=U(function(){A.fi({kind:"hover",event:s}),G(A._hoverTimer),delete A._hoverTimer},f.getHoverDelay()||r.hoverDelay)},handle_touchmove:function(C){this.handle_mousemove(C)},handleWindowMouseMove:function(B){var g=this,J=g.gv,D=g._lastClientPoint;g.fi({kind:J._panning?"betweenPan":"beginPan",event:B}),J._panning=1,J.setTranslate(g._tx+B.clientX-D.x,g._ty+B.clientY-D.y)},handle_mousewheel:function(j){this.gv.handleScroll(j,j.wheelDelta)},handle_DOMMouseScroll:function(o){2===o.axis&&this.gv.handleScroll(o,-o.detail)},handle_keydown:function(H){this.gv.handleKeyDown(H)}});var rl=zh.SelectInteractor=function(F){Vp(rl,this,[F])};xc("SelectInteractor",Go,{_42:function(){var d=this,W=d.gv,f=W.getZoom(),Q=d.mark,Y=d.div;Y||(Y=d.div=cd(),tf(d.getView(),Y));var o={};o.x=Q.x*f+W.tx(),o.y=Q.y*f+W.ty(),o.width=Q.width*f,o.height=Q.height*f,zq(Y,o),this.intersects()?(Y.style.border="",Y.style.background=W.getRectSelectBackground()):(Y.style.background="",Y.style.border="1px solid "+W.getRectSelectBorderColor())},handle_mousedown:function(w){var b=this,V=b.gv;if(b._57I=J,!(V._editing||V._scrolling||_d())){var n=V.getDataAt(w),t=V.sm();if(n)if(dh(w))t.co(n)?t.rs(n):t.as(n);else if(t.co(n)){if(qi(w)&&n instanceof Ij&&n.isClickThroughEnabled()){var Z=V.getDataAt(w,function(C){V._clickThroughChecking=!0;var s=C.getParent()===n&&V.isSelectable(C);return delete V._clickThroughChecking,s});Z&&(w.clickThrough=!0,t.ss(Z))}}else t.ss(n);else dh(w)||!V.isPannable()?Dp(w)&&(dh(w)||t.cs(),V.isRectSelectable()&&(b.startDragging(w),V._77O=1)):Dp(w)&&(b._57I=Ao(w))}},handle_mouseup:function(q){var Y=this,p=Y._57I;p&&(ii(p,Ao(q))<=1&&Y.gv.sm().cs(),Y._57I=J)},handleWindowMouseUp:function(m){this.clear(m)},handleWindowMouseMove:function(q){var I=this,m=I.gv;I._logicalPoint=m.lp(q),I.mark?(I.fi({kind:"betweenRectSelect",event:q}),m.isPannable()&&I.autoScroll(q),I.redraw()):I.fi({kind:"beginRectSelect",event:q}),I.mark=Pk(I._lastLogicalPoint,I._logicalPoint),I.redraw()},intersects:function(){var j=this,U=j._lastLogicalPoint,N=j._logicalPoint;return U.x>N.x||U.y>N.y},clear:function(s){var k=this,t=k.gv,R=k.mark;if(k._57I=J,k._lastLogicalPoint){if(R){if(0!==R.width&&0!==R.height){var Q=t.getDatasInRect(R,k.intersects());if(!Q.isEmpty()){var Z=t.sm(),p=Z.toSelection();Q.each(function(i){Z.co(i)?p.remove(i):p.add(i)}),Z.ss(p)}}Aq(k.div),delete k.div,delete k.mark,k.redraw(),k.fi({kind:"endRectSelect",event:s}),t.onRectSelectEnded()}k.clearDragging(),delete t._77O}},redraw:function(){var T=this;T._draw||(T._draw=1,U(function(){T.mark&&T._42(),delete T._draw},16))}});var jd=zh.MoveInteractor=function(I){Vp(jd,this,[I])};xc("MoveInteractor",Go,{handle_mousedown:function(N){var $=this,R=$.gv;if(Dp(N)&&!R._editing&&!R._scrolling&&!_d()){var M=R.getSelectedDataAt(N);M?($._data=M,R.handleMouseDown&&R.handleMouseDown(N,M),$.startDragging(N),R.isMovable(M)&&(R._moving=1)):R._focusData=J}},handleWindowMouseUp:function(p){var P=this,E=P.gv;E.handleMouseUp&&E.handleMouseUp(p,P._data),P.clear(p)},handleWindowMouseMove:function(g){var Y=this,G=Y._data,h=Y.gv;if((!h._93O||!h._93O(g,G))&&h._moving){Y._logicalPoint||Y.fi({kind:"prepareMove",event:g});var e=Y._logicalPoint?"betweenMove":"beginMove",z={kind:e,event:g},t=Y._logicalPoint=h.lp(g);"beginMove"!==e||Y._alreadyBeginTransaction||(Y._alreadyBeginTransaction=!0,h.getDataModel().beginTransaction());var f=Y._calcShift(e,g),j=f.x,I=f.y,F=Y.gv.getMoveMode(g,G);F&&("x"===F?I=0:"y"===F?j=0:"xy"!==F&&(j=I=0)),h.moveSelection(j,I),Y._lastLogicalPoint=t,Y.autoScroll(g),Y.fi(z)}},_calcShift:function(){var h=this,U=h._logicalPoint,d=h._lastLogicalPoint,H=U.x-d.x,T=U.y-d.y;return{x:H,y:T}},clear:function(e){var B=this,v=B.gv;B._lastLogicalPoint&&(B._lastLogicalPoint=B._data=v._moving=J,B._logicalPoint&&(B.fi({kind:"endMove",event:e}),v.onMoveEnded()),B.clearDragging()),B._alreadyBeginTransaction&&(B._alreadyBeginTransaction=!1,v.getDataModel().endTransaction())}});var Yo=zh.ScrollBarInteractor=function(S){Vp(Yo,this,[S])};xc("ScrollBarInteractor",Go,{_41o:function(){return this.gv.getViewRect().height<this.gv.getScrollRect().height},_40o:function(){return this.gv.getViewRect().width<this.gv.getScrollRect().width},isV:function(k){var w=this.gv.getViewRect();return this._41o()&&(w.x+w.width-this.gv.lp(k).x)*this.gv.getZoom()<Hq},isH:function(o){var $=this.gv.getViewRect();return this._40o()&&($.y+$.height-this.gv.lp(o).y)*this.gv.getZoom()<Hq},handle_mousemove:function(I){this.handle_touchmove(I)},handle_touchmove:function(v){if(!to&&Dp(v)&&this.gv.isScrollBarVisible()){var a=this,Q=a.isV(v),t=a.isH(v);(Q||t)&&a.gv.showScrollBar(),a.gv._scrolling=Q||t}},handleWindowMouseUp:function(Y){this.handleWindowTouchEnd(Y)},handleWindowTouchEnd:function(i){this._state=this._cp=this._tx=this._ty=this.gv._scrolling=J,this.fi({kind:"endScroll",event:i})},handle_mousedown:function(M){this.handle_touchstart(M)},handle_touchstart:function(r){var B=this;if(B.gv.setFocus(r),pm(r),B.handle_touchmove(r),!(yj(r)>1)&&B.gv._scrolling&&B.gv.isScrollBarVisible()){B._cp=Ao(r),B._tx=B.gv.tx(),B._ty=B.gv.ty();var h=B.isV(r);B._state=h?"vScroll":"hScroll",Vk(B,r),B.fi({kind:"beginScroll",event:r})}},handleWindowMouseMove:function(f){this.handleWindowTouchMove(f)},handleWindowTouchMove:function(R){var b=Ao(R),O=this.gv.getViewRect(),N=this.gv.getScrollRect();"vScroll"===this._state?this.gv.ty(this._ty+(this._cp.y-b.y)*N.height/O.height):"hScroll"===this._state&&this.gv.tx(this._tx+(this._cp.x-b.x)*N.width/O.width),this.fi({kind:"betweenScroll",event:R})}});var Zq=zh.TouchInteractor=function(W,y){y=y||{},y.selectable===e&&(y.selectable=!0),y.movable===e&&(y.movable=!0),y.pannable===e&&(y.pannable=!0),y.pinchable===e&&(y.pinchable=!0),y.editable===e&&(y.editable=!0),this.params=y,Vp(Zq,this,[W])};xc("TouchInteractor",Go,{ms_edit:1,setUp:function(){var k=this;Zq.superClass.setUp.call(k),s&&k.params.editable&&k.gv.setEditInteractor(k)},tearDown:function(){var D=this;Zq.superClass.tearDown.call(D),s&&D.params.editable&&D.gv.setEditInteractor(J)},clear:function(E){var d=this,B=d.gv;B._moving&&(d.fi({kind:"endMove",event:E}),delete B._moving,B.onMoveEnded(),B.dm().endTransaction()),B._panning&&(d.fi({kind:"endPan",event:E}),delete B._panning,B.onPanEnded()),B._pinching&&(d.fi({kind:"endPinch",event:E}),delete B._pinching,B.onPinchEnded()),B._editing&&(d._46O(E),d._77I=d._node=d._edge=d._shape=d._rect=d._89I=d._index=B._editing=J),d._moving=d._panning=d._pinching=d._editing=d._57I=d._data=d._beginHistory=J,d.clearDragging()},handle_touchstart:function(v){var $=this;if(!$.gv._editing){pm(v),$._57I=J;var C=$.params,c=$.gv,n=c.sm(),p=c.getDataAt(v),r=yj(v);if(1===r){if(qi(v))return c.handleDoubleClick(v,p),void 0;c.handleClick(v,p),p&&(c.handleMouseDown&&c.handleMouseDown(v,p),$._data=p),C.selectable||(p=J),p?(n.co(p)||n.ss(p),C.editable&&c.isEditable(p)&&$._79I(v,p,!0)?($._editing=1,$.startDragging(v)):C.movable&&c.isMovable(p)&&($._moving=1,$.startDragging(v))):($._57I=Ao(v),C.pannable&&c.isPannable()&&($._panning=1,$.startDragging(v),$._translate={x:c.tx(),y:c.ty()}))}else if(C.pinchable&&2===r){$._pinching=1,$.startDragging(v);var z=c.getView(),q=c.getZoom(),m=z.getBoundingClientRect(),F=v.touches[0],H=v.touches[1],W={x:(F.clientX+H.clientX)/2-m.left,y:(F.clientY+H.clientY)/2-m.top};W.x-=c.tx(),W.y-=c.ty(),W.x/=q,W.y/=q,$._p=W,$._d=Lh(v)}}},handle_touchend:function(G){var F=this,R=F.gv,B=F._57I,b=F._data;B&&(ii(B,Ao(G))<=1&&R.sm().cs(),F._57I=J),b&&R.handleMouseUp&&R.handleMouseUp(G,b)},handleWindowTouchEnd:function(u){this.clear(u)},handleWindowTouchMove:function(Y){var g=this,W=g.gv,H=yj(Y);if(1===H){if(g._editing&&(g._beginHistory||(g._beginHistory=1,W.dm().beginTransaction()),W._editing=1,g._78I(Y)),g._moving)g._beginHistory||(g._beginHistory=1,W.dm().beginTransaction()),g.handleMove(Y);else if(g._panning){var z=Ao(Y);W.setTranslate(g._translate.x+z.x-g._lastClientPoint.x,g._translate.y+z.y-g._lastClientPoint.y),g.fi({kind:W._panning?"betweenPan":"beginPan",event:Y}),W._panning=1}}else if(2===H&&g._pinching){var d=Lh(Y);W.handlePinch(g._p,d,g._d),g._d=d,g.fi({kind:W._pinching?"betweenPinch":"beginPinch",event:Y}),W._pinching=1}},handleMove:function(k){var D=this,Q=D.gv,U=Q.lp(k);Q._93O&&Q._93O(k,D._data)||(Q.moveSelection(U.x-D._lastLogicalPoint.x,U.y-D._lastLogicalPoint.y),D._lastLogicalPoint=U,D.autoScroll(k),D.fi({kind:Q._moving?"betweenMove":"beginMove",event:k}),Q._moving=1)}});var A=x.ht,Df=A.graph._editor={Math:{},Guide:{}};A.Math=Df.Math,Df.getStyle=function(l){var d,E=Df.StyleMap;return E&&(d=E[l],d!==e)?d:Df.DefaultStyleMap[l]},Df.setStyle=function(z,U){var V=Df.StyleMap;V||(V=Df.StyleMap={}),V[z]=U},Df.inEdit=function(X){return X._inXEdit===!0},Df.startEdit=function(N){N._inXEdit=!0,Df.Inject.doInject(N)},Df._46O=function(H){H._inXEdit=!1,Df.Inject.undoInject(H)},Df.toScreenPosition=function(q,$){var c=q.tx(),T=q.ty(),S=q._zoom;return new Df.Math.Vector2($.x*S+c,$.y*S+T)},Df.checkHit=function(z,F,d){return z.distanceTo(F)<d?!0:!1},Df.toWorldPosition=function(i,g){var N=i.tx(),A=i.ty(),v=i._zoom;return{x:(g.x-N)/v,y:(g.y-A)/v}},Df.setAntialias=function(f,v){for(var z,t=["imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","msImageSmoothingEnabled"],J=0,x=t.length;x>J&&(z=t[J],!(z in f));J++);f[z],f[z]=v},Df.getTargetCornersOnScreen=function(D,_){if(!_)return null;var Y,l=[];if(Fr(_,D)){var d=yd(D,_);Y=[{x:d.x,y:d.y},{x:d.x+d.width,y:d.y},{x:d.x+d.width,y:d.y+d.height},{x:d.x,y:d.y+d.height}]}else{if(!_.getCorners)return null;Y=_.getCorners()}return Y.forEach(function(F){var V=Df.toScreenPosition(D,F);l.push(V.x,V.y)}),l},Df.log=function(){};var ps=Df.Inject={_modules:[]};ps.registAsModule=function(V,w){var m={},T={};for(var u in V){var t=w.prototype[u];m[u]=t}V.getBackup=function(S){return m[S]},V.getBackups=function(){return m},T.doInject=function(){for(var T in V)"getBackup"!==T&&(w.prototype[T]=V[T])},T.undoInject=function(){for(var E in V)"getBackup"!==E&&(w.prototype[E]=m[E])},ps._modules.push(T)},ps.doInject=function(O){for(var e,l=ps._modules,g=0,S=l.length;S>g;g++)e=l[g],e.doInject(O)},ps.undoInject=function(h){for(var J,q=ps._modules,e=0,D=q.length;D>e;e++)J=q[e],J.undoInject(h)};var Go=A.graph.EditInteractor=function(p){var T=this,y=F.createElement("canvas");y.className="editCanvas",y.style.position="absolute",T._styleMap={},T._canvas=y,T._context=y.getContext("2d"),Go.superClass.constructor.call(T,p),Df.setAntialias(T._context,!1),T._subModules=[new Df.Anchor(T),new Df.Rect(T),new Df.Curve(T),new Df.MoveHelper(T)],T._gridGuide=new Df.Guide.Grid(T),T._rectGuide=new Df.Guide.Rect(T)},qk=Go;A.Default.def(Go,A.graph.Interactor,{ms_edit:1,ms_fire:1}),h.defineProperties(Go.prototype,{editDetail:{get:function(){var N=!!this._editDetail;return N},set:function(I){var M=this,P=M._editDetail;P!==I&&(M._editDetail=I,M.gv._editing=I,M.fp("editDetail",P,I),M.fp("pointsEditingMode",P,I),M.fi({kind:I?"beginEditPoints":"endEditPoints"}))}},gvEditing:{get:function(){return this.gv._editing},set:function(E){(!this._editDetail||E)&&(this.gv._editing=E,E||(this.editDetail=!1))}},editing:{get:function(){return this._editing},set:function(N){this._editing=N,this.gvEditing=N}},pointsEditingMode:{get:function(){return this.editDetail},set:function(R){var f=this;f.editDetail!==R&&(R?f._tryEnterEditDetailMode():f._tryQuitEditDetailMode())}},gridEnabled:{get:function(){var s=this._gridEnabled;if(!s)return!1;var U=this.gv;return U?!0:!0},set:function(T){T!==this._gridEnabled&&(this._gridEnabled=T,this._42())}},alignmentGuideEnabled:{get:function(){return this._agEnabled},set:function(E){E!==this._agEnabled&&(this._agEnabled=E,this._42())}},gridGuide:{get:function(){return this._gridGuide}},rectGuide:{get:function(){return this._rectGuide}}}),Go.prototype.getSubModule=function(O){var w,c,k,x=this._subModules;for(c=0,k=x.length;k>c;c++)if(w=x[c],w.catalog===O)return w},Go.prototype.invokeSubModule=function(u,E){var m=this,V=m._subModules;if(V)for(var A,z,F,B=Array.prototype.slice.call(arguments,2),O=0,l=V.length;l>O;O++)if(A=V[O],z=A[u],z&&(F=z.apply(A,B),F!=e&&E))return A},Go.prototype.invokeSubModuleInverse=function(N,X){var B=this,C=B._subModules;if(C)for(var U,t,p,w=Array.prototype.slice.call(arguments,2),m=C.length-1;m>=0;m--)if(U=C[m],t=U[N],t&&(p=t.apply(U,w),p!=e&&X))return U},Go.prototype.setUp=function(){Df.log("setUp");var X=this,B=X.gv,T=B.getView(),m=X._canvas;Go.superClass.setUp.call(X),B.setEditInteractor(X),B._79O?T.insertBefore(m,B._79O):T.appendChild(m),Df.startEdit(B),X.invokeSubModule("setUp"),B.dm().mm(X._onDataModelChanged,X),B.dm().md(X._onDataPropertyChanged,X)},Go.prototype.tearDown=function(){Df.log("tearDown");var q=this,g=q.gv,x=g.getView();q._resetCustomCursorStyle(),Go.superClass.tearDown.call(q),g.dm().umm(q._onDataModelChanged,q),g.dm().umd(q._onDataPropertyChanged,q),g.setEditInteractor(null),x.removeChild(q._canvas),q._drawTimer&&(G(q._drawTimer),q._drawTimer=null),Df._46O(g),q.invokeSubModule("tearDown")},Go.prototype._onDataModelChanged=function(n){var o=this;("clear"===n.kind||"remove"===n.kind&&o.editDetail&&n.data===o.getSubModule("Curve").target)&&(o.editDetail=!1,o._42())},Go.prototype._onDataPropertyChanged=function(u){var k=this;if(k.editDetail){var $=k.getSubModule("Curve"),H=u.data;H===$.target&&(H._writing||$._handleDataChanged())}},Go.prototype.clear=function(){Df.log("clear")},Go.prototype.redraw=function(){this._42()},Go.prototype._42=function(){var z=this;z._drawTimer||(z._drawTimer=U(function(){z._drawTimer=null,z.drawImpl()},0))},Go.prototype.drawImpl=function(){var W;for(W in{_42:!0})break;return function(){var B=this,m=B._canvas,f=B.gv,h=f.getWidth(),X=f.getHeight(),Y=B._context,d=A.Default.getInternal();(m.width!==h||m.height!==X)&&d.setCanvas(m,h,X),Y.clearRect(0,0,m.width,m.height);var G=B._getValidSelection();Y.save();var o=A.Default.devicePixelRatio;Y.scale(o,o),B._gridGuide._42(),B._rectGuide._42(),B.invokeSubModuleInverse(W,!1,Y,f,G),Y.restore()}}(),Go.prototype._getValidSelection=function(){var h=this,u=h.gv,i=u.sm().getSelection(),I=[];return i.each(function(G){u.isVisible(G)&&u.isEditable(G)&&I.push(G)}),I},Go.prototype.handle_touchmove=function(N){return this.handle_mousemove(N)},Go.prototype.handle_mousemove=function(M){if(!A.Default.isDragging()){var P=this;(P.editDetail||!_d())&&(P.gvEditing=!1,P._checkEdit(M)&&(P.gvEditing=!0))}},Go.prototype.handle_touchstart=function(D){return this.handle_mousedown(D)},Go.prototype.handle_mousedown=function(w){pm(w);var H=this;if(H.editDetail||!_d()){if(qi(w)&&!w.clickThrough){if(H.editDetail){if(H._tryQuitEditDetailMode(w))return}else if(H._tryEnterEditDetailMode())return;H.gv.dm().beginTransaction();var i=H.invokeSubModule("handleDoubleClick",!0,w);if(H.gv.dm().endTransaction(),i)return}var K=H._checkEdit(w);K&&(H._downPosition=H._getLogicalPoint(w),H.gv.dm().beginTransaction(),K.startEdit(H,w),H.editing=!0)}},Go.prototype._checkEdit=function(K){var U=this,O=U.gv,s=U._getLogicalPoint(K),M=U.invokeSubModule("check",!0,O,K,s)||null;return U._editMod=M,M},Go.prototype.handleWindowTouchMove=function(n){return this.handleWindowMouseMove(n)},Go.prototype.handleWindowMouseMove=function(h){var e=this,j=e._downPosition;if(j){var T=e._getLogicalPoint(h);if(T.distanceTo(j)<e.getStyle("moveSensitivity"))return;delete e._downPosition}var w=e._editMod;w&&w.handleEdit(e.gv,h)},Go.prototype._getLogicalPoint=function(u){var Z=this,R=A.Default.getLogicalPoint(u,Z._canvas);return new Df.Math.Vector2(R)},Go.prototype.handleWindowTouchEnd=function(l){return this.handleWindowMouseUp(l)},Go.prototype.handleWindowMouseUp=function(){var U;for(U in{_46O:!0})break;return function(x){var I=this;
I.editing=!1,I.setCursor("default"),I.invokeSubModule(U,!1,x),I._42(),I.gv.dm().endTransaction()}}(),Go.prototype.handle_mousewheel=function(O){var P=this;pm(O),P.invokeSubModule("preHandleScroll",!0)||P.gv.handleScroll(O,O.wheelDelta)},Go.prototype.handleDelete=function(){var G=this;if(!G.editDetail){G.gv.dm().beginTransaction();var u=G.invokeSubModule("handleNormalStateDelete",!0);return G.gv.dm().endTransaction(),u||G.gv.removeSelection(),void 0}G.gv.dm().beginTransaction(),G.invokeSubModule("handleDelete",!0),G.gv.dm().endTransaction(),G._42()},Go.prototype.handle_keydown=function(S){var t=this;if((S.metaKey||S.ctrlKey)&&t._42(),_d(S)&&!t.editing)return t.gvEditing=!1,t.setCursor("default"),t._42(),void 0;var w=Un(S);return t.editDetail?((w||no(S))&&(t.editDetail=!1,t._42()),t.gv.dm().beginTransaction(),t.invokeSubModule("handle_keydown",!0,S),t.gv.dm().endTransaction(),void 0):(t.gv.dm().beginTransaction(),t.invokeSubModule("handleNormalStateKeyDown",!0,S),t.gv.dm().endTransaction(),w&&t._tryEnterEditDetailMode(),void 0)},Go.prototype.handle_keyup=function(k){this.gv.dm().beginTransaction(),this.invokeSubModule("handle_keyup",!0,k),this.gv.dm().endTransaction()},Go.prototype._tryEnterEditDetailMode=function(){var I=this;return!I.editDetail&&I.invokeSubModule("canEnterEditDetailMode",!0)&&1===I._getValidSelection().length?(I.editDetail=!0,I._42(),!0):void 0},Go.prototype._tryQuitEditDetailMode=function(P){var f=this;if(f.editDetail){var t=f.gv,m=f.getSubModule("Curve").target;return P&&t.getDataAt(P)===m?void 0:(f.editDetail=!1,f._42(),!0)}},Go.prototype.setStyle=function(d,E,i){var J=this;i?Df.setStyle(d,E):J._styleMap[d]=E,J.fp("styleChanged",null,{key:d,value:E,base:i}),J._42()},Go.prototype.getStyle=function(N){var k=this,R=k._styleMap[N];return R!==e?R:Df.getStyle(N)},Go.prototype.setCursor=function(q){this._resetCustomCursorStyle(),A.graph.EditInteractor.superClass.setCursor.call(this,q)},Go.prototype._resetCustomCursorStyle=function(){var T=this;if(T._customStyle){var X=this.gv.getView();X.classList&&X.classList.remove&&X.classList.remove(T._customStyle),T._customStyle=null}},Go.prototype._setRotateCursor=function(w){var M=this,V=M._cursorFactory;V||(V=M._cursorFactory=new Df.CursorFactory(M));var p=V.getRotateCursor(w),X=M.gv.getView();M._resetCustomCursorStyle(),M._customStyle=p,X.classList&&X.classList.add&&X.classList.add(p)};var gl=Df.Group=function(X){var z=this;z._entities=X,z._64O=0,z._position={x:0,y:0},z._scale={x:1,y:1},z._anchor={x:.5,y:.5},z._anchor2={x:.5,y:.5}};gl.prototype={},gl.prototype.constructor=gl;var ad=null;gl.findOrCreateGroup=function(X){if(ad&&ad.checkIsMe(X))return ad;var a=new Df.Group(X);return a.getKeyOb()?(ad=a,a):void 0},gl.prototype.checkIsMe=function(I){var P=this._entities;if(P.length!==I.length)return!1;var R,w={},p=I.length;for(R=0;p>R;R++)w[I[R]._id]=!0;for(R=0;p>R;R++)if(!w[P[R]._id])return!1;return!0},gl.prototype.getRotation=function(){return this._64O},gl.prototype.getPosition=function(){return this._position},gl.prototype.getAnchor=function(){return this._anchor},gl.prototype.getWidth=function(){return this._width},gl.prototype.getScale=function(){return this._scale},gl.prototype.getSize=function(){return{width:this._width,height:this._height}},gl.prototype.getHeight=function(){return this._height},gl.prototype.getKeyOb=function(){for(var e=this._entities,V=e.length-1;V>=0;V--){var l=e[V];if(this.isNode(l))return l}},gl.prototype.getAnchor2=function(){var e=this,C=e.rotateCenter;if(C)return C;var t=e.getKeyOb();if(!t)return e._anchor;var T=e._anchor2,o=t.getMatrix();return o.tf({x:t.getWidth()*(T.x-t.getAnchor().x),y:t.getHeight()*(T.y-t.getAnchor().y)})},gl.prototype.setAnchor2=function(U,W){var Y=this,b=Y.getKeyOb();if(b){var C,L=b.getMatrix();C="number"==typeof U?{x:U,y:W}:U;var n=L.tfi(C);Y._anchor2={x:b.getAnchor().x+n.x/b.getWidth(),y:b.getAnchor().y+n.y/b.getHeight()}}},gl.prototype.setRotation=function(){},gl.prototype.beginRotate=function(s){this.rotateCenter=s.pos,this.rotateMode=s.groupRotateMode},gl.prototype.endRotate=function(){delete this.rotateCenter,delete this.rotateMode},gl.prototype.addRotation=function(w,H){return"batch"===H?this._addRotationInBatchMode(w):"block"===H?this._addRotationInBlockMode(w):void 0},gl.prototype._addRotationInBlockMode=function(K){var h=this,b=h.rotateCenter||h.getPosition();h._entities.forEach(function(H){if(h.isNode(H)){var C=H.getMatrix();C.translate(-b.x,-b.y),C.rotate(K),C.translate(b.x,b.y);var A=Math.sign(H.getScale().x);H.setRotation(f(C.b*A,C.a*A)),H.setPosition(C.tx,C.ty)}})},gl.prototype._addRotationInBatchMode=function(H){var e=this,t=e._anchor2;e._entities.forEach(function(O){if(e.isNode(O)){var A=O.getAnchor(),y=O.getMatrix(),s=y.tf({x:O.getWidth()*(t.x-A.x),y:O.getHeight()*(t.y-A.y)}),b=new Df.Math.Matrix2;b.set(y.a,y.b,y.c,y.d,y.tx,y.ty),b.translate(-s.x,-s.y),b.rotate(H),b.translate(s.x,s.y);var N=Math.sign(O.getScale().x);O.setRotation(f(b.b*N,b.a*N)),O.setPosition(b.tx,b.ty)}})},gl.prototype.setPosition=function(w){var F,r,u,T,d=this,W=d._position,K=w.x-W.x,H=w.y-W.y,M=d._entities;for(r=0,u=M.length;u>r;r++)F=M[r],Yq(F)&&(T=F.getPosition(),F.setPosition(T.x+K,T.y+H));d._position=w},gl.prototype.setScale=function(z,w){var F=this,d=z/F._scale.x,o=w/F._scale.y;F._adjustChildScaleOrSize(d,o,"size"),F._scale={x:z,y:w}},gl.prototype.getRect=function(){var X=this,F=X._position,o=X._width,D=X._height;return{x:F.x-o/2,y:F.y-D/2,width:o,height:D}},gl.prototype.setSize=function(d,W){var E=this,d=Math.max(1,d),W=Math.max(1,W),Z=d/E._width,t=W/E._height;E._adjustChildScaleOrSize(Z,t,"size"),E._width=d,E._height=W},gl.prototype._adjustChildScaleOrSize=function(W,v,M){var J,k,w,d,y,A,l,z,I,S,T,L,R,h,U=this,F=U._position,Y=U._entities,X=new Df.Math.Matrix2;for(k=0,w=Y.length;w>k;k++)if(J=Y[k],U.isNode(J)){if(d=J.getPosition(),y=J.getRotation(),A=J.getWidth(),l=J.getHeight(),z=J.getScale(),T=z.x*A,L=z.y*l,X.identity().scale(T,L).rotate(y).translate(d.x,d.y).translate(-F.x,-F.y).rotate(-U._64O),y=f(X.b*Math.sign(T),X.a*Math.sign(T)),X.scale(W,v),I=Math.cos(y),S=Math.sin(y),Math.abs(I)<.001?(R=X.b/S,h=-X.c/S):(R=X.a/I,h=X.d/I),"scale"===M)J.setScale(R/A,h/l);else if("size"===M){var E=R/z.x,Z=h/z.y;J.setScale($k(R)*Math.abs(z.x),$k(h)*Math.abs(z.y)),J.setSize(Math.max(.1,Math.abs(E)),Math.max(.1,Math.abs(Z)))}X.rotate(U._64O).translate(F.x,F.y),J.setPosition(X.tx,X.ty)}},gl.prototype.getMatrix=function(){var i=this,j=i._position,x=A.Default.getInternal(),F=i._scale;return new x.Mat(i._64O,j.x,j.y,F.x,F.y)},gl.prototype.getCorners=function(){var b=this,q=b._width,J=b._height,S=b._anchor,g=-q*S.x,x=-J*S.y,E=b.getMatrix();return[E.tf(g,x),E.tf(g,x+J),E.tf(g+q,x+J),E.tf(g+q,x)]},gl.prototype.calcInfo=function(){var A,d,F,g,y,k,p=this,C=[],P=p._entities,j=p._64O;for(g=0,y=P.length;y>g;g++)k=P[g],p.isNode(k)&&k.getCorners&&C.push.apply(C,k.getCorners());if(C.length){var t=Math.cos(-j),x=Math.sin(-j),J=1/0,D=-1/0,N=1/0,z=-1/0;for(g=0,y=C.length;y>g;g++)F=C[g],A=F.x,d=F.y,F.x=t*A-x*d,F.y=x*A+t*d,J=Math.min(J,F.x),D=Math.max(D,F.x),N=Math.min(N,F.y),z=Math.max(z,F.y);p._width=(D-J)/p._scale.x,p._height=(z-N)/p._scale.y,t=Math.cos(j),x=Math.sin(j);var O=p._anchor;A=J+(D-J)*O.x,d=N+(z-N)*O.y,p._position={x:t*A-x*d,y:x*A+t*d}}},gl.prototype.isNode=function(u){return Yq(u)?Fr(u)?!1:!0:!1},gl.prototype._42=function(x,G,u){var V,h,F,U,N,j,W,O,C=this,w=C._entities,I=C.rotateMode;for("batch"===I&&(O=C.getKeyOb()),V=0,h=w.length;h>V;V++)F=w[V],C.isNode(F)&&(j=F.getRect(),U=Df.toScreenPosition(u,{x:j.x,y:j.y}),N=Df.toScreenPosition(u,{x:j.x+j.width,y:j.y+j.height}),W={min:U,max:N},F===O&&(W.isKeyOb=!0),Df.Icons.DrawIcon(x,G,Df.Icons.GroupSubEntityRect,W))};var Wo=Df.CurveActiving=function(A,w){this._curve=A,this._interactor=A._interactor;for(var j in w)this[j]=w[j]};Wo.prototype={},Wo.prototype.constructor=Wo,h.defineProperties(Wo.prototype,{point:{get:function(){return this._point},set:function(H){var k=this;k._point=H,k.editingCtrl||k._firePointChange()}},pairs:{get:function(){return this._pairs},set:function(j){var y=this;y._pairs=j,y.editingCtrl&&y._firePointChange()}}}),Wo.prototype._firePointChange=function(){var q=this,c=q.getCurrentEditingPoint();if(!c)return s.fi({kind:"selectPoint"}),void 0;var s=q._interactor,k=this._curve.target;if(k){var S=Df.getDataMatrix(k).invert(),G=c.e;c=S.apply(Df.toWorldPosition(s.gv,c)),c.e=G;var i=q._lastFirePoint;i&&Math.abs(c.x-i.x)<1e-5&&Math.abs(c.y-i.y)<1e-5&&(c.e==e&&i.e==e||Math.abs(c.e-i.e)<1e-5)||(q._lastFirePoint=c,s.fi({kind:"selectPoint",x:c.x,y:c.y,e:c.e}))}},Wo.prototype.dispose=function(){this._interactor.fi({kind:"selectPoint"})},Wo.prototype.getCurrentEditingPoint=function(){var S=this,q=S.editingCtrl;if(q){var N=S.pairs;if(N){var w=N[q.pairId],z=w[q.type];if(z)return z}}return S._point};var Vm=Df.CursorFactory=function(p){var m=this;m._interactor=p,m._rotateCursorStyles={}};Vm.prototype={},Vm.prototype.constructor=Vm,Vm.prototype.getRotateCursor=function(z){var A=this;0>z&&(z+=2*Math.PI);var X=A._interactor,E=X.getStyle("rotateCursorSize"),H=X.getStyle("rotateCursorRound"),e=Math.round(180*(z/Math.PI)/H);e*H>=360&&(e=0);var g=A._rotateCursorStyles,h="htCustomRotateStyle_"+E+"_"+H+"_"+e;return g[h]||(A._produceRotateCursor(h,E,H,e),g[h]=!0),h},Vm.prototype._produceRotateCursor=function($,X,A,Y){var n=this;n._interactor;var S=n._canvas;S||(S=n._canvas=F.createElement("canvas")),S.width=S.height=X*devicePixelRatio,S.style.width=S.style.height=X+" px";var J=S.getContext("2d");Df.setAntialias(J,!1),J.scale(devicePixelRatio,devicePixelRatio);var E,Z,D,R,V,O=Math.round(X/2),s=""+O+" "+O+",auto !important;";E=Math.PI/180*Y*A,J.clearRect(0,0,X,X),J.save(),J.scale(X/32,X/32),J.translate(16,16),J.rotate(E+Math.PI/2),J.beginPath(),J.moveTo(-8,0),J.lineTo(-8,3),J.lineTo(-5,3),J.moveTo(8,0),J.lineTo(8,3),J.lineTo(5,3),J.moveTo(-8,3),J.quadraticCurveTo(0,-6,8,3),J.restore(),J.strokeStyle="white",J.lineWidth=4,J.stroke(),J.strokeStyle="black",J.lineWidth=2,J.stroke(),Z=JSON.stringify(S.toDataURL()),R="cursor:url("+Z+")"+s,1!==devicePixelRatio&&(D='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+X+'px" height="'+X+'px"><image xlink:href='+Z+' width="'+X+'" height="'+X+'"/></svg>',R+="cursor:url(data:image/svg+xml;base64,"+btoa(D)+")"+s,R+="cursor:-webkit-image-set(url("+Z+")"+devicePixelRatio+"x,url("+Z+")1x)"+s),V=F.createElement("style"),V.textContent="body."+$+" *, ."+$+"{"+R+"}",F.head.appendChild(V)};var Mp=Df.Guide.Grid=function(Z){var _=this;_._interactor=Z,_._alignmentGuideId=0,_._xAlignmentGuide=[],_._yAlignmentGuide=[]};Mp.prototype={},Mp.prototype.constructor=Mp,h.defineProperties(Mp.prototype,{gridBlockSize:{get:function(){var R=this;return R._gridBlockSize||R._interactor.getStyle("gridBlockSize")},set:function(V){this._gridBlockSize=V,this._interactor._42()}},gridThickLinesEvery:{get:function(){var X=this;return X._gridThickLinesEvery||X._interactor.getStyle("gridThickLinesEvery")},set:function(O){this._gridThickLinesEvery=O,this._interactor._42()}},gridEnabled:{get:function(){var O=this,C=O._interactor;return C.gridEnabled&&O.isValidGrid()}}}),Mp.prototype._42=function(){var N=this,h=N._interactor;N.gridEnabled&&N.drawGrid(),h.alignmentGuideEnabled&&N.drawAlignmentGuide()},Mp.prototype.makeMatrix=function(){var M=this,F=M._interactor.getStyle("gridAngle"),Q=M._interactor.getStyle("gridRotation"),u=new Df.Math.Matrix2,E=Math.sin(F),Y=Math.cos(F);return u.set(1,0,Y,E,0,0),u.rotate(Q),u},Mp.prototype.isValidGrid=function(){var b=this,i=Math.PI,v=b._interactor,E=v.gv;if(E._zoom<v.getStyle("gridZoomThreshold"))return!1;var j=v.getStyle("gridAngle"),C=Math.abs(180*(j%i/i)),D=1-1e-8;return D>C||C>180-D?!1:!0},Mp.prototype.drawAlignmentGuide=function(){var D=this,f=D._interactor,B=f.gv,R=f._canvas,J=f._context,F=R.width,U=R.height,_=B.tx(),s=B.ty(),r=B._zoom;J.beginPath(),J.strokeStyle=f.getStyle("gridAlignmentGuideColor"),J.lineWidth=1,D._xAlignmentGuide.forEach(function(z){var m=z.p*r+_;J.moveTo(m,0),J.lineTo(m,U)}),D._yAlignmentGuide.forEach(function(d){var g=d.p*r+s;J.moveTo(0,g),J.lineTo(F,g)}),J.stroke()},Mp.prototype.drawGrid=function(){function $(H,Z,D,z){var q=Df.toScreenPosition(W,B.apply({x:H,y:Z})),d=Df.toScreenPosition(W,B.apply({x:D,y:z}));m.moveTo(q.x,q.y),m.lineTo(d.x,d.y)}var U=this,I=U._interactor,E=U.gridBlockSize,V=U.gridThickLinesEvery,s=I.getStyle("gridThickColor"),T=I.getStyle("gridLightColor"),W=I.gv,F=I._canvas,m=I._context,b=F.width,l=F.height,B=U.makeMatrix(),d=B.applyInverse(Df.toWorldPosition(W,{x:0,y:0})),i=B.applyInverse(Df.toWorldPosition(W,{x:b,y:0})),_=B.applyInverse(Df.toWorldPosition(W,{x:0,y:l})),o=B.applyInverse(Df.toWorldPosition(W,{x:b,y:l})),z=Math.min(d.x,i.x,_.x,o.x),D=Math.max(d.x,i.x,_.x,o.x),X=Math.min(d.y,i.y,_.y,o.y),S=Math.max(d.y,i.y,_.y,o.y);b=D-z,l=S-X;var y=Math.ceil(z/E),P=Math.floor(D/E),M=Math.ceil(X/E),q=Math.floor(S/E);W.tx(),W.ty(),W._zoom;var v,K,G;for(m.save(),m.lineWidth=1,m.beginPath(),m.strokeStyle=s,G=Math.ceil(y/V)*V;P>=G;G+=V)v=G*E,$(v,X,v,S);for(G=Math.ceil(M/V)*V;q>=G;G+=V)K=G*E,$(z,K,D,K);for(m.stroke(),m.beginPath(),m.strokeStyle=T,G=y;P>=G;G++)0!==G%V&&(v=G*E,$(v,X,v,S));for(G=M;q>=G;G++)0!==G%V&&(K=G*E,$(z,K,D,K));m.stroke(),m.restore()},Mp.prototype.getAlignmentGuides=function(){var N=this;return{x:N._xAlignmentGuide,y:N._yAlignmentGuide}},Mp.prototype.addAlignmentGuide=function(w,d,C){var k=this,Y="x"===w?k._xAlignmentGuide:k._yAlignmentGuide,C=C?C:++k._alignmentGuideId,e={p:d,id:C};if(Y.length){var o=k._findClosestAlignmentGuide(e.p,Y);o.dis<0?Y.splice(o.index+1,0,e):Y.splice(o.index,0,e)}else Y.push(e);return k._interactor._42(),C},Mp.prototype.findClosest=function(E,t,N){var H=this,B=H._interactor,p=B.gv;N&&(E=Df.toWorldPosition(p,E));var C,d,L,b=1/0,G=1/0,J=E.x,u=E.y;if(H.gridEnabled){var k=H.gridBlockSize,M=H.makeMatrix(),Z=M.applyInverse(E);Z=M.apply({x:Math.round(Z.x/k)*k,y:Math.round(Z.y/k)*k}),b=Z.x-J,G=Z.y-u,L=!0}if(B.alignmentGuideEnabled&&(C=H._findClosestAlignmentGuide(J,H._xAlignmentGuide).dis,d=H._findClosestAlignmentGuide(u,H._yAlignmentGuide).dis,Math.abs(C)<Math.abs(b)&&(b=C,L=!0),Math.abs(d)<Math.abs(G)&&(G=d,L=!0)),L){L=!1;var R=p._zoom,o=B.getStyle("smartGuideSensitivity")/R,F={};if(Math.abs(b)<o&&"y"!==t&&(F.x=N?b*R:b,L=!0),Math.abs(G)<o&&"x"!==t&&(F.y=N?G*R:G,L=!0),L)return F}},Mp.prototype._findClosestAlignmentGuide=function(D,v){if(!v.length)return{dis:1/0};for(var s,$=0,r=v.length-1;r-$>1;)s=Math.floor(($+r)/2),v[s].p<D?$=s:r=s;var d=v[$].p-D,p=v[r].p-D;return Math.abs(d)<=Math.abs(p)?{line:v[$],dis:d,index:$}:{line:v[r],dis:p,index:r}},Mp.prototype.removeAllAlignmentGuide=function(U){var q=this;"y"!==U&&(q._xAlignmentGuide=[]),"x"!==U&&(q._yAlignmentGuide=[]),q._interactor._42()},Mp.prototype.removeAlignmentGuide=function(S){for(var F,C,i,y=this,U=y._xAlignmentGuide,k=0;2>k;k++)for(U=0===k?y._xAlignmentGuide:y._yAlignmentGuide,F=0,C=U.length;C>F;F++)if(i=U[F],i.id===S)return U.splice(F,1),y._interactor._42(),{axis:0===k?"x":"y",position:i.p};return!1},Mp.prototype.adjustAlignmentGuide=function(L,k){var d=this,y=d.removeAlignmentGuide(L);return y?(d.addAlignmentGuide(y.axis,k,L),!0):!1};var Qj=Df.Guide.Rect=function(w){var i=this;i._interactor=w};Qj.prototype={},Qj.prototype.constructor=Qj,Qj.prototype.gatherRects=function(){var z,l,K,a,q=this,p=q._interactor.gv,y=[],Q=[],S={x:y,y:Q},V={},g=p.getDataModel(),B=g.a("width"),k=g.a("height");B&&k&&(z=0,l=0,K=B,a=k,y.push({node:g,type:0,p:z},{node:g,type:1,p:z+K/2},{node:g,type:2,p:z+K}),Q.push({node:g,type:0,p:l},{node:g,type:1,p:l+a/2},{node:g,type:2,p:l+a}),V[g._id||0]={x:z,y:l,width:K,height:a}),g.each(function(h){if(Yq(h)&&!p.isSelected(h)&&p.isVisible(h)){var Z=!1;if(p.sm().getSelection().each(function(e){Z||(h.isHostOn(e)?Z=!0:h.isDescendantOf(e)&&(Z=!0))}),!Z){var X=h.getRect();z=X.x,l=X.y,K=X.width,a=X.height,y.push({node:h,type:0,p:z},{node:h,type:1,p:z+K/2},{node:h,type:2,p:z+K}),Q.push({node:h,type:0,p:l},{node:h,type:1,p:l+a/2},{node:h,type:2,p:l+a}),V[h._id]=X}}}),y.sort(function(X,S){return X.p-S.p}),Q.sort(function(h,S){return h.p-S.p}),q._grid=S,q._87I=V},Qj.prototype.gatherLines=function(y,b,D){var A,s,p,x,F,r,g,t,Y,l,k,u,v=this,T=[v.findClosest({x:y.x,y:y.y},b),v.findClosest({x:y.x+y.w/2,y:y.y+y.h/2},b),v.findClosest({x:y.x+y.w,y:y.y+y.h},b)],c={},a=v._87I;D=D||255;var C,e;for(v._guideLine=[],A=0;2>A;A++)for(c={},0===A?(x="y",t=y.x,Y=t+y.w):(x="x",t=y.y,Y=t+y.h),s=0;3>s;s++)F=T[s],F&&isFinite(F[x])&&(C=1<<3*A+s,D&C&&(r=F[x+"Line"],g=r.node,e=g._id||0,c[e]||(c[e]=!0,u=a[e],"y"===x?(l=u.x,k=u.x+u.width):(l=u.y,k=u.y+u.height),p=r.p,v._guideLine.push({type:x,a:t,b:Y,c:l,d:k,p:p}))))},Qj.prototype._binarySearchClosest=function(v,j){if(!j.length)return{dis:1/0};for(var m,s=0,T=j.length-1;T-s>1;)m=Math.floor((s+T)/2),j[m].p<v?s=m:T=m;var t=j[s].p-v,N=j[T].p-v;return Math.abs(t)<=Math.abs(N)?{line:j[s],dis:t}:{line:j[T],dis:N}},Qj.prototype.findClosest=function(V,n,t){var P=this,E=P._interactor,A=E.gv,N=P._grid;t&&(V=Df.toWorldPosition(A,V));var h,w=P._binarySearchClosest(V.x,N.x),x=P._binarySearchClosest(V.y,N.y),U=w.dis,d=x.dis,M=A._zoom,f=E.getStyle("smartGuideSensitivity")/M,B={};return Math.abs(U)<f&&"y"!==n&&(B.x=t?U*M:U,B.xLine=w.line,h=!0),Math.abs(d)<f&&"x"!==n&&(B.y=t?d*M:d,B.yLine=x.line,h=!0),h?B:void 0},Qj.prototype._42=function(){var k=this,Y=k._guideLine;if(Y&&!A.Default.isCtrlDown()){var g,G,T,m,i,F,N,E,f,b,J,V,R,Z,S,I,P,n=k._interactor,C=n.gv,B=n._context,Q=C.tx(),o=C.ty(),v=C._zoom,M=n.getStyle("guideLineTextSpacing");for(g=0,G=Y.length;G>g;g++)T=Y[g],E=T.type,f=T.p,b=T.a,J=T.b,V=T.c,R=T.d,Z=Math.min(b,V),S=Math.max(J,R),"x"===E?(m=f*v+Q,i=Z*v+o,F=m,N=S*v+o):(m=Z*v+Q,i=f*v+o,F=S*v+Q,N=i),Df.Icons.DrawIcon(n,B,Df.Icons.MoveLineGuide,[m,i,F,N]),R>=b&&J>=V||(Z=b>R?R:J,S=b>R?b:V,P=S-Z,"x"===E?(T.center2center||(m-=M,F=m),i=Z*v+o,N=S*v+o,I=Df.Icons.MoveLineGuideDistanceV):"y"===E&&(T.center2center||(i-=M,N=i),m=Z*v+Q,F=S*v+Q,I=Df.Icons.MoveLineGuideDistanceH),Df.Icons.DrawIcon(n,B,I,{x0:m,y0:i,x1:F,y1:N,dis:P}))}},Qj.prototype.clear=function(){this._guideLine=null},Df.DefaultStyleMap={pointSize:[24,9],checkSize:7,rotateCheckSize:10,moveSensitivity:10,rotateRound:Math.PI/2,rotateSensitivity:Math.PI/60,shiftRotateRound:Math.PI/12,shiftLineRotateRound:Math.PI/4,anchorMovable:!0,anchorVisible:!0,anchorHideThreshold:25,anchorOutsideVisibleThreshold:.25,anchorRound:.25,anchorSensitivity:.02,smartGuideSensitivity:8,curveIntersectSize:5,curvePointIntersectSize:8,edgeHostDetectPerFrame:!0,guideLineTextSpacing:32,gridBlockSize:40,gridThickLinesEvery:10,gridThickColor:"#5d5d5d",gridLightColor:"#d0d0d0",gridZoomThreshold:.25,gridAlignmentGuideColor:"#ff0000",gridAngle:Math.PI/2,gridRotation:0,groupRotateModeDefault:"block",groupRotateModeKey:["ctrlKey","metaKey"],rotateCursorSize:32,rotateCursorRound:45,tipTextColor:"#ffffff",tipBackground:"#333333",curveHighlightColor:"#30599e",rectPointBackground:"white",rectPointBorderColor:"#666666",rectPointShadowColor:"rgba(0,0,0,0.35)",shapeCtrlPointBackground:"white",shapeCtrlPointBorderColor:"#707070",shapeCtrlPointHighlightBorder:"black",shapeHighlighPointBackground:"#30599e",curveElevationVisible:!0,curveElevationIntersectSize:8,curveElevationGuideShift:[20,0],connectGuideVisible:!0,connectGuideShift:[1,.25,8,0],connectGuideIntersectSize:8,connectGuideGarbageIntersectsize:25,connectGuideGarbageShift:[1,1,-48,-48]};var Ie=Df.Icons={},as=1e4,he=null,Je=8;A.Default.setImage("Icons.RectPoint",{width:Je,height:Je,comps:[{type:"shape",points:[0,0,0,Je,Je,Je,Je,0],segments:[1,2,2,2,5],shadow:!0,borderWidth:1,shadowColor:{func:function(){return he.getStyle("rectPointShadowColor")}},background:{func:function(){return he.getStyle("rectPointBackground")}},borderColor:{func:function(){return he.getStyle("rectPointBorderColor")}}}]});var ym="#e000e0";Ie.GroupSubEntityRect={comps:[{type:"shape",points:{func:function(){var F=Ie.GroupSubEntityRect.data;if(!F)return[];var j=F.min,z=F.max;return[j.x,j.y,j.x,z.y,z.x,z.y,z.x,j.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:{func:function(){return Ie.GroupSubEntityRect.data.isKeyOb?ym:"#666666"}}}]},Ie.Line={comps:[{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[Ie.Line.data.P1.x,Ie.Line.data.P1.y],Je,Je]}}},{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[Ie.Line.data.P2.x,Ie.Line.data.P2.y],Je,Je]}}}]},Ie.NodeHoverGuide={comps:[{type:"shape",points:{func:function(){return Ie.NodeHoverGuide.data}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:"#3399FF"}]},Ie.Rect={comps:[{type:"shape",points:{func:function(){var D=Ie.Rect.data;if(!D)return[];var $=D.LT,t=D.LB,g=D.RB,k=D.RT;return[$.x,$.y,t.x,t.y,g.x,g.y,k.x,k.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:"#666666"},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return Ie.Rect.data.rotation}},rect:{func:function(){return[[Ie.Rect.data.LT.x,Ie.Rect.data.LT.y],Je,Je]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return Ie.Rect.data.rotation}},rect:{func:function(){return[[Ie.Rect.data.LB.x,Ie.Rect.data.LB.y],Je,Je]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return Ie.Rect.data.rotation}},rect:{func:function(){return[[Ie.Rect.data.RB.x,Ie.Rect.data.RB.y],Je,Je]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return Ie.Rect.data.rotation}},rect:{func:function(){return[[Ie.Rect.data.RT.x,Ie.Rect.data.RT.y],Je,Je]}}},{type:"image",name:"Icons.RectPoint",scaleX:.9,scaleY:.9,rotation:{func:function(){return Ie.Rect.data.rotation}},visible:{func:function(){return Ie.Rect.data.L?!0:!1}},rect:{func:function(){return[[Ie.Rect.data.L.x,Ie.Rect.data.L.y],Je,Je]}}},{type:"image",name:"Icons.RectPoint",scaleX:.9,scaleY:.9,rotation:{func:function(){return Ie.Rect.data.rotation}},visible:{func:function(){return Ie.Rect.data.R?!0:!1}},rect:{func:function(){return[[Ie.Rect.data.R.x,Ie.Rect.data.R.y],Je,Je]}}},{type:"image",name:"Icons.RectPoint",scaleX:.9,scaleY:.9,rotation:{func:function(){return Ie.Rect.data.rotation}},visible:{func:function(){return Ie.Rect.data.T?!0:!1}},rect:{func:function(){return[[Ie.Rect.data.T.x,Ie.Rect.data.T.y],Je,Je]}}},{type:"image",name:"Icons.RectPoint",scaleX:.9,scaleY:.9,rotation:{func:function(){return Ie.Rect.data.rotation}},visible:{func:function(){return Ie.Rect.data.B?!0:!1}},rect:{func:function(){return[[Ie.Rect.data.B.x,Ie.Rect.data.B.y],Je,Je]}}}]};var bg=18;A.Default.setImage("Icons.Anchor",{width:bg,height:bg,comps:[{type:"arc",rect:[4,4,bg-8,bg-8],arcFrom:0,arcClose:!1,background:"#ffffff",borderWidth:0,borderColor:"#000000"},{type:"shape",points:[2,bg/2,bg-2,bg/2,bg/2,2,bg/2,bg-2],segments:[1,2,1,2],background:null,borderWidth:1,borderColor:"#111111"},{type:"arc",rect:[5.5,5.5,bg-11,bg-11],arcFrom:0,arcClose:!1,background:null,borderWidth:1,borderColor:"#111111"}]}),Ie.Anchor={comps:[{type:"image",name:"Icons.Anchor",rect:{func:function(){return[[Ie.Anchor.data.POS.x,Ie.Anchor.data.POS.y],bg,bg]}}}]},Ie.TipShiftX=12,Ie.TipShiftY=12;var Hg=[8,28];Ie.TipHelper={comps:[{type:"roundRect",rect:{func:function(){return[Ie.TipHelper.data.helperPos.x,Ie.TipHelper.data.helperPos.y,Hg[0]*Ie.TipHelper.data.size,Hg[1]]}},background:{func:function(){return he.getStyle("tipBackground")}},opacity:.6},{type:"text",text:{func:function(){return Ie.TipHelper.data.text}},rect:{func:function(){return[Ie.TipHelper.data.helperPos.x,Ie.TipHelper.data.helperPos.y,Hg[0]*Ie.TipHelper.data.size,Hg[1]]}},color:{func:function(){return he.getStyle("tipTextColor")}},font:"bold 12px Arial",align:"center"}]};var Ic=7;Ie.ShapePoint={comps:[{type:"circle",rect:{func:function(){var E=Ie.ShapePoint.data;return[E,Ic,Ic]}},background:"#ffffff",borderWidth:1,borderColor:"#333333"}]},Ie.ShapeBgCurve={comps:[{type:"shape",points:{func:function(){return Ie.ShapeBgCurve.data.P}},segments:{func:function(){return Ie.ShapeBgCurve.data.S}},background:null,borderWidth:1,borderColor:"#333333"}]};var Em=8;Ie.ShapeHighlighPoint={comps:[{type:"circle",rect:{func:function(){var l=Ie.ShapeHighlighPoint.data;return[[l.x,l.y],Em,Em]}},background:{func:function(){return he.getStyle("shapeHighlighPointBackground")}},borderWidth:0}]};var Pp=10;Ie.ShapeHighlighRealPoint={comps:[{type:"circle",rect:{func:function(){var S=Ie.ShapeHighlighRealPoint.data;return[[S.x,S.y],Pp,Pp]}},background:"#ffffff",borderWidth:2,borderColor:"#333333"}]};var Ze=8;Ie.ShapeHighlighCtrlPoint={comps:[{type:"shape",points:{func:function(){var g=Ie.ShapeHighlighCtrlPoint.data,U=g.x,L=g.y,A=Ze/2;return[U-A,L-A,U-A,L+A,U+A,L+A,U+A,L-A]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return he.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return he.getStyle("shapeCtrlPointBorderColor")}}}]};var Ik=3;Ie.ShapeHighlightCurve={comps:[{type:"shape",points:{func:function(){return Ie.ShapeHighlightCurve.data}},segments:[1,4],background:null,borderWidth:Ik,borderColor:{func:function(){return he.getStyle("curveHighlightColor")}}}]},Ie.ShapeGuideLine={comps:[{type:"shape",points:{func:function(){return Ie.ShapeGuideLine.data}},background:null,borderWidth:1,borderColor:"red"}]},Ie.MoveLineGuide={comps:[{type:"shape",points:{func:function(){return Ie.MoveLineGuide.data}},background:null,borderWidth:1,borderColor:"red"}]};var Tk=5;Ie.MoveLineGuideDistanceH={comps:[{type:"shape",points:{func:function(){var g=Ie.MoveLineGuideDistanceH.data,n=g.x0,P=g.y0,M=g.x1,y=g.y1;return[n,P,M,y,n,P-Tk,n,P+Tk,M,y-Tk,M,y+Tk]}},segments:[1,2,1,2,1,2],background:null,borderWidth:1,borderColor:"red"},{type:"text",text:{func:function(){return Math.round(Ie.MoveLineGuideDistanceH.data.dis)}},rect:{func:function(){var p=Ie.MoveLineGuideDistanceH.data;return[[(p.x0+p.x1)/2,p.y0-10],20,20]}},color:"red",font:"12px Arial",align:"center"}]},Ie.MoveLineGuideDistanceV={comps:[{type:"shape",points:{func:function(){var O=Ie.MoveLineGuideDistanceV.data,p=O.x0,f=O.y0,I=O.x1,B=O.y1;return[p,f,I,B,p-Tk,f,p+Tk,f,I-Tk,B,I+Tk,B]}},segments:[1,2,1,2,1,2],background:null,borderWidth:1,borderColor:"red"},{type:"text",text:{func:function(){return Math.round(Ie.MoveLineGuideDistanceV.data.dis)}},rect:{func:function(){var X=Ie.MoveLineGuideDistanceV.data;return[[X.x0-10,(X.y0+X.y1)/2],20,20]}},color:"red",font:"12px Arial",align:"center"}]},A.Default.setImage("Icons.EdgeElevationGuideImage",{width:16,height:16,comps:[{type:"oval",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[.5,.5,15,15]},{type:"shape",borderWidth:2,borderColor:"rgb(44,44,44)",borderCap:"round",points:[4,8,8,4,12,8,8,4,8,13],segments:[1,2,2,1,2]}]}),Ie.EdgeElevationGuide={comps:[{type:"image",name:"Icons.EdgeElevationGuideImage",rect:{func:function(){var _=Ie.EdgeElevationGuide.data,f=_.x,G=_.y,C=he.getStyle("curveElevationIntersectSize"),U=he.getStyle("curveElevationGuideShift");return f+=U[0],G+=U[1],[f-C,G-C,2*C,2*C]}}}]},A.Default.setImage("Icons.ConnectGuideBgImage",{width:12,height:12,comps:[{type:"shape",background:"#3399ff",fillRule:"evenodd",shadowColor:"#1ABC9C",rotation:3.14159,points:[6.00001,11.99999,6.00001,11.99999,2.6863,11.99999,1e-5,9.30695,1e-5,5.99999,1e-5,5.99999,1e-5,2.68628,2.69305,-1e-5,6.00001,-1e-5,12.00001,-1e-5,11.99998,12.00001,6.00001,11.99999],segments:[1,2,4,2,4,2,2,2]}]}),A.Default.setImage("Icons.ConnectGuideHeaderImage",{width:12,height:12,comps:[{type:"oval",background:"#3399FF",borderColor:"#3399FF",shadowColor:"#1ABC9C",rect:[0,0,12,12]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[4.76,2.56,8.2,5.98,4.76,9.44]}]}),Ie.ConnectGuide={comps:[{type:"image",name:"Icons.ConnectGuideBgImage",rotation:{func:function(){return Ie.ConnectGuide.data.rotation}},rect:{func:function(){var e=Ie.ConnectGuide.data.connect;e.x,e.y;var h=he.getStyle("connectGuideIntersectSize");return[[e.x,e.y],2*h,2*h]}}},{type:"image",name:"Icons.ConnectGuideHeaderImage",rect:{func:function(){var y=Ie.ConnectGuide.data.cursorPos||Ie.ConnectGuide.data.connect,n=he.getStyle("connectGuideIntersectSize");return[[y.x,y.y],2*n-2,2*n-2]}}},{type:"shape",background:null,borderColor:"#3399ff",borderWidth:2,segments:[1,4],points:{func:function(){var I=Ie.ConnectGuide.data.connect,l=Ie.ConnectGuide.data.cursorPos||I;return[I.x,I.y,I.x+.5*(l.x-I.x),I.y,l.x+.5*(I.x-l.x),l.y,l.x,l.y]}}}]},A.Default.setImage("Icons.ConnectGuideGarbageImage",{width:48,height:48,comps:[{type:"oval",background:"rgba(0,0,0,0.1)",borderColor:"#979797",shadowColor:"#1ABC9C",rect:[0,0,48,48]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[19.84721,19.69091,19.84721,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[24.10371,19.69091,24.10371,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[28.15279,19.69091,28.15279,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[11.23055,15.22377,36.76945,15.189,19.12302,15.17121,20.94722,11.5228,26.41985,11.5228,28.24406,15.17121]},{type:"rect",borderWidth:2,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[15.48702,15.22377,17.02595,21.25344]}]}),A.Default.setImage("Icons.ConnectGuideDeletingImage",{width:56,height:56,comps:[{type:"oval",background:"rgba(232,0,0,0.75)",borderColor:"#979797",shadowColor:"#1ABC9C",rect:[0,0,56,56]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[22.67939,27.69091,22.67939,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[26.93588,27.69091,26.93588,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[30.98497,27.69091,30.98497,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",anchorX:0,anchorY:1,rotation:5.65062,points:[14.06272,23.22377,39.60163,23.189,21.9552,23.17121,23.7794,19.5228,29.25203,19.5228,31.07623,23.17121]},{type:"rect",borderWidth:2,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[18.3192,23.22377,17.02595,21.25344]}]}),Ie.ConnectGuideGarbage={comps:[{type:"image",name:{func:function(){var v=Ie.ConnectGuideGarbage.data.hover;return v?"Icons.ConnectGuideDeletingImage":"Icons.ConnectGuideGarbageImage"}},rect:{func:function(){var n=Ie.ConnectGuideGarbage.data,p=he.getStyle("connectGuideGarbageIntersectsize");return n.hover&&(p+=5),[[n.x,n.y],2*p,2*p]}}}]};var fr=6;Ie.ShapeActivingCtrl={comps:[{type:"shape",visible:{func:function(){return Ie.ShapeActivingCtrl.data.c1?!0:!1}},points:{func:function(){var I=Ie.ShapeActivingCtrl.data;return[I.point.x,I.point.y,I.c1.x,I.c1.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:"#707070"},{type:"shape",visible:{func:function(){return Ie.ShapeActivingCtrl.data.c2?!0:!1}},points:{func:function(){var e=Ie.ShapeActivingCtrl.data;return[e.point.x,e.point.y,e.c2.x,e.c2.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:"#707070"},{type:"shape",visible:{func:function(){return Ie.ShapeActivingCtrl.data.c1?!0:!1}},points:{func:function(){var P=Ie.ShapeActivingCtrl.data.c1,L=P.x,N=P.y,A=fr/2;return"c1"===Ie.ShapeActivingCtrl.data.hl&&(A+=.5),[L-A,N-A,L-A,N+A,L+A,N+A,L+A,N-A]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return he.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return"c1"===Ie.ShapeActivingCtrl.data.hl?he.getStyle("shapeCtrlPointHighlightBorder"):he.getStyle("shapeCtrlPointBorderColor")}}},{type:"shape",visible:{func:function(){return Ie.ShapeActivingCtrl.data.c2?!0:!1}},points:{func:function(){var K=Ie.ShapeActivingCtrl.data.c2,S=K.x,s=K.y,w=fr/2;return"c2"===Ie.ShapeActivingCtrl.data.hl&&(w+=.5),[S-w,s-w,S-w,s+w,S+w,s+w,S+w,s-w]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return he.getStyle("shapeCtrlPointBackground")
}},borderColor:{func:function(){return"c2"===Ie.ShapeActivingCtrl.data.hl?he.getStyle("shapeCtrlPointHighlightBorder"):he.getStyle("shapeCtrlPointBorderColor")}}}]},Df.Icons.DrawIcon=function(H,R,h,y){h.width=h.height=as,h.data=y,he=H,A.Default.drawImage(R,h,0,0,as,as)},Df.Icons.MapPoints=function(d,j){for(var a=0,B=d.length;B>a;a++)d[a]/=j},Df.roundTo=function(V,$,u){var s=Math.abs(V%$);return u>s||u>$-s?$*Math.round(V/$):V},Df.toFixed=function(s){return Math.round(100*s)/100},Df.getDataMatrix=function(X){if(X instanceof A.Shape){var k=new Df.Math.Matrix2,Z=X.getPosition();return k.translate(-Z.x,-Z.y).scale(X.getScale().x,X.getScale().y).rotate(X.getRotation()).translate(Z.x,Z.y),k}return X.getMatrix?X.getMatrix():new Df.Math.Matrix2},Math.sign===e&&(Math.sign=function(t){return 0>t?-1:t>0?1:+t});var Ph=Df.Math.Matrix2=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0};Ph.prototype={},Ph.prototype.constructor=Ph,Ph.prototype.set=function(n,F,$,K,i,D){return this.a=n,this.b=F,this.c=$,this.d=K,this.tx=i,this.ty=D,this},Ph.prototype.apply=function(J,N){N=N||new Eg;var r=J.x,C=J.y;return N.x=this.a*r+this.c*C+this.tx,N.y=this.b*r+this.d*C+this.ty,N},Ph.prototype.applyInverse=function(n,R){R=R||new Eg;var K=1/(this.a*this.d+this.c*-this.b),p=n.x,F=n.y;return R.x=this.d*K*p+-this.c*K*F+(this.ty*this.c-this.tx*this.d)*K,R.y=this.a*K*F+-this.b*K*p+(-this.ty*this.a+this.tx*this.b)*K,R},Ph.prototype.translate=function(l,M){return this.tx+=l,this.ty+=M,this},Ph.prototype.scale=function(e,g){return this.a*=e,this.d*=g,this.c*=e,this.b*=g,this.tx*=e,this.ty*=g,this},Ph.prototype.rotate=function(g){var s=Math.cos(g),M=Math.sin(g),v=this.a,F=this.c,N=this.tx;return this.a=v*s-this.b*M,this.b=v*M+this.b*s,this.c=F*s-this.d*M,this.d=F*M+this.d*s,this.tx=N*s-this.ty*M,this.ty=N*M+this.ty*s,this},Ph.prototype.append=function(e){var H=this.a,K=this.b,A=this.c,j=this.d;return this.a=e.a*H+e.b*A,this.b=e.a*K+e.b*j,this.c=e.c*H+e.d*A,this.d=e.c*K+e.d*j,this.tx=e.tx*H+e.ty*A+this.tx,this.ty=e.tx*K+e.ty*j+this.ty,this},Ph.prototype.setTransform=function($,U,z,C,J,X,w,M,m){var V,T,B,v,R,E,h,r,N,F;return R=Math.sin(w),E=Math.cos(w),h=Math.cos(m),r=Math.sin(m),N=-Math.sin(M),F=Math.cos(M),V=E*J,T=R*J,B=-R*X,v=E*X,this.a=h*V+r*B,this.b=h*T+r*v,this.c=N*V+F*B,this.d=N*T+F*v,this.tx=$+(z*V+C*B),this.ty=U+(z*T+C*v),this},Ph.prototype.prepend=function(p){var b=this.tx;if(1!==p.a||0!==p.b||0!==p.c||1!==p.d){var G=this.a,S=this.c;this.a=G*p.a+this.b*p.c,this.b=G*p.b+this.b*p.d,this.c=S*p.a+this.d*p.c,this.d=S*p.b+this.d*p.d}return this.tx=b*p.a+this.ty*p.c+p.tx,this.ty=b*p.b+this.ty*p.d+p.ty,this},Ph.prototype.invert=function(){var f=this.a,j=this.b,D=this.c,N=this.d,O=this.tx,I=f*N-j*D;return this.a=N/I,this.b=-j/I,this.c=-D/I,this.d=f/I,this.tx=(D*this.ty-N*O)/I,this.ty=-(f*this.ty-j*O)/I,this},Ph.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Ph.prototype.clone=function(){var G=new Ph;return G.a=this.a,G.b=this.b,G.c=this.c,G.d=this.d,G.tx=this.tx,G.ty=this.ty,G},Ph.prototype.copy=function(d){return d.a=this.a,d.b=this.b,d.c=this.c,d.d=this.d,d.tx=this.tx,d.ty=this.ty,d},Ph.IDENTITY=new Ph,Ph.TEMP_MATRIX=new Ph;var Eg=Df.Math.Vector2=function(u,l,w){"object"==typeof u&&(u.x!=e?(l=u.y,u=u.x,w=u.e):(w=u[2],l=u[1],u=u[0])),this.set(u||0,l||0,w)};Eg.prototype={},Eg.prototype.constructor=Eg,h.defineProperties(Eg.prototype,{width:{get:function(){return this.x},set:function(W){this.x=W}},height:{get:function(){return this.y},set:function(W){this.y=W}}}),Eg.prototype.clone=function(){return new Eg(this.x,this.y,this.e)},Eg.prototype.copy=function(Q){return this.set(Q.x,Q.y,Q.e),this},Eg.prototype.equals=function(R){return R.x===this.x&&R.y===this.y},Eg.prototype.set=function(M,j,s){return this.x=M||0,this.y=j||(0!==j?this.x:0),s!=e&&(this.e=s),this},Eg.prototype.setScalar=function(q){return this.x=q,this.y=q,this},Eg.prototype.setX=function(n){return this.x=n||0,this},Eg.prototype.setY=function(W){return this.y=W||0,this},Eg.prototype.add=function(E){return this.x+=E.x,this.y+=E.y,this},Eg.prototype.addVectors=function(R,w){return this.x=R.x+w.x,this.y=R.y+w.y,this},Eg.prototype.addScalar=function(Z){return this.x+=Z,this.y+=Z,this},Eg.prototype.addScaledVector=function(Y,y){return this.x+=Y.x*y,this.y+=Y.y*y,this},Eg.prototype.sub=function(U){return this.x-=U.x,this.y-=U.y,this},Eg.prototype.subScalar=function(Z){return this.x-=Z,this.y-=Z,this},Eg.prototype.subVectors=function(Y,E){return this.x=Y.x-E.x,this.y=Y.y-E.y,this},Eg.prototype.multiply=function(w){return this.x*=w.x,this.y*=w.y,this},Eg.prototype.multiplyScalar=function(e){return this.x*=e,this.y*=e,this},Eg.prototype.divide=function(a){return this.x/=a.x,this.y/=a.y,this},Eg.prototype.divideScalar=function(g){return this.multiplyScalar(1/g)},Eg.prototype.min=function(p){return this.x=Math.min(this.x,p.x),this.y=Math.min(this.y,p.y),this},Eg.prototype.max=function(k){return this.x=Math.max(this.x,k.x),this.y=Math.max(this.y,k.y),this},Eg.prototype.clamp=function(f,r){return this.x=Math.max(f.x,Math.min(r.x,this.x)),this.y=Math.max(f.y,Math.min(r.y,this.y)),this},Eg.prototype.clampScalar=function(){var m,I;return function($,y){return m===e&&(m=new Eg,I=new Eg),m.set($,$),I.set(y,y),this.clamp(m,I)}}(),Eg.prototype.clampLength=function(Y,L){var F=this.length();return this.multiplyScalar(Math.max(Y,Math.min(L,F))/F)},Eg.prototype.dot=function(e){return this.x*e.x+this.y*e.y},Eg.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},Eg.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Eg.prototype.normalize=function(){return this.divideScalar(this.length())},Eg.prototype.angle=function(){var L=Math.atan2(this.y,this.x);return 0>L&&(L+=2*Math.PI),L},Eg.prototype.distanceTo=function(l){return Math.sqrt(this.distanceToSquared(l))},Eg.prototype.distanceToSquared=function(B){var q=this.x-B.x,J=this.y-B.y;return q*q+J*J},Eg.prototype.isNearEnough=function(S){return this.distanceToSquared(S)<1e-8},Eg.prototype.setLength=function(R){var w=this.length();return w?this.multiplyScalar(R/w):this},Eg.prototype.lerp=function(k,_){return this.x+=(k.x-this.x)*_,this.y+=(k.y-this.y)*_,this},Eg.prototype.lerpVectors=function(L,E,u){return this.subVectors(E,L).multiplyScalar(u).add(L)},Eg.prototype.rotateAround=function(I,k){var r=Math.cos(k),C=Math.sin(k),c=this.x-I.x,Z=this.y-I.y;return this.x=c*r-Z*C+I.x,this.y=c*C+Z*r+I.y,this};var zd=Df.Math.Curve=function(){this._curves=[]};zd.prototype={},zd.prototype.constructor=zd,zd.prototype.createFromHtShape=function(l,r,o){r instanceof A.List&&(r=r.toArray());var t,x,L,w,q,Q,c,F=this,y=null,Z=null,O=0,b=Df.Math.Vector2,m=Df.Math.CubicBezier,u=function(r){return new b(l[r],l[r+1],o?o[r/2]:e)};for(x=0,L=r.length;L>x;x++){switch(w=r[x],q=null,w){case 1:Z=u(O),y=Z,O+=2;break;case 2:t=u(O),O+=2,q=new m(Z,Z.clone(),t.clone(),t),Z=t;break;case 3:Q=u(O),t=u(O+2),O+=4,q=new m(Z,Q.clone().sub(Z).multiplyScalar(2/3).add(Z),Q.clone().sub(t).multiplyScalar(2/3).add(t),t),Z=t;break;case 4:Q=u(O),c=u(O+2),t=u(O+4),O+=6,q=new m(Z,Q,c,t),Z=t;break;case 5:if(!y)break;q=new m(Z,Z.clone(),y.clone(),y),Z=null,y=null}q&&(q._index=F._curves.length,F._curves.push(q))}},zd.prototype.checkPoint=function(t,d){var T,F,J,u,m,A=this,C=A._curves;for(T=0,F=C.length;F>T;T++)if(u=C[T],m=u.intersectRect(t,d,d),m.length)return J=0,m.forEach(function(f){J+=f.t}),J/=m.length,t=u.getPointAt(J),t.t=J,{bezier:u,intersection:t}},zd.prototype.insertKnot=function(B,Y){var b=B.insertKnot(Y),k=this,E=k._curves;E.splice(B._index,1,b[0],b[1])},zd.prototype._isCloseEnough=function(H,Z){return Math.abs(H.x-Z.x)<1e-6&&Math.abs(H.y-Z.y)<1e-6},zd.prototype._isSamePoint=function(i,A){return i===A},zd.prototype.moveRealPoint=function(l,v){var T=this,I=T._curves,G=v.clone().sub(l);I.forEach(function(t){var B=t._p1;t._p2,t._p3;var I=t._p4;T._isSamePoint(B,l)&&(t._p2.add(G),t._p1=v),T._isSamePoint(I,l)&&(t._p3.add(G),t._p4=v)})},zd.prototype.moveCtrlDueToRealPointMovement=function(P,A){var O=this,C=O._curves,B=function(D){D.add(A),D.e&&A.e&&(D.e+=A.e)};C.forEach(function(q){var y=q._p1;q._p2,q._p3;var L=q._p4;O._isSamePoint(y,P)&&B(q._p2),O._isSamePoint(L,P)&&B(q._p3)})},zd.prototype.moveCtrlPoint=function(M,j,G){var N=M[G];if(N){N.e!==e&&(j.e=N.e);var Y=this,$=Y._curves;j.clone().sub(N),$.forEach(function(_){var B;"c2"===G?B="_p2":"c1"===G&&(B="_p3"),Y._isSamePoint(_[B],N)&&(_[B]=j)}),M[G]=j}},zd.prototype.deleteRealPoint=function(D,S){var R,H,M,W,P,I,L,f=this,s=f._curves,d={},h=[],V=Df.Math.CubicBezier;for(H=0,M=s.length;M>H;H++)R=s[H],W=R._p1,P=R._p2,I=R._p3,L=R._p4,(d[H]||!f._isSamePoint(W,D))&&(f._isSamePoint(L,D)?M>H+1&&f._isSamePoint(s[H+1]._p1,D)&&(S||h.push(new V(W,P,s[H+1]._p3,s[H+1]._p4))):h.push(R));f._curves=h},zd.prototype.findPairs=function(t,$){var M,y,W,X,h,q,k,a,F=this,z=F._curves,s={},P=[];for(y=0,W=z.length;W>y;y++)M=z[y],X=M._p1,h=M._p2,q=M._p3,k=M._p4,!s[y]&&F._isSamePoint(X,t)&&($?P.push({point:X,r2:k}):P.push({point:X,c2:h})),F._isSamePoint(k,t)&&(a=$?{point:k,r1:X}:{point:k,c1:q},W>y+1&&F._isSamePoint(z[y+1]._p1,t)&&($?a.r2=z[y+1]._p4:a.c2=z[y+1]._p2,s[y+1]=!0),P.push(a));return P},zd.prototype.toHtShape=function(){var o=this,D=o._curves,a=[],K=[],l={x:1/0,y:1/0};return D.forEach(function(F){var N=F._p1,C=F._p2,B=F._p3,A=F._p4;return o._isCloseEnough(N,l)||(a.push(1),K.push(N.clone())),l=A,o._isCloseEnough(N,C)&&o._isCloseEnough(B,A)?(a.push(2),K.push(A.clone()),void 0):(a.push(4),K.push(C.clone(),B.clone(),A.clone()),void 0)}),{segments:a,points:K}};var qj=Df.Math.CubicBezier=function(t,w,C,c){var E=this;E._id=Df.Math.CubicBezier._globalId++,E._p1=t,E._p2=w,E._p3=C,E._p4=c};qj._globalId=1,qj.prototype={},qj.prototype.constructor=qj,qj.prototype.toString=function(){return this._id},qj.prototype.intersectRect=function(N,Z,r){var x=Z/2,l=r/2,z=N.x,p=N.y,f=Df.Math.Vector2,j=new f(-x+z,-l+p),H=new f(x+z,l+p),d=new f(H.x,j.y),S=new f(j.x,H.y),F=this,h=F.intersectLine(j,d),q=F.intersectLine(d,H),m=F.intersectLine(H,S),c=F.intersectLine(S,j),K=h.concat(q).concat(m).concat(c);return K},qj.prototype.intersectLine=function(k,i){var B,U,X,I,v,V,K,f,n,w,O,Q,j,R=this,T=k.clone().min(i),G=k.clone().max(i);I=R._p1,v=R._p2,V=R._p3,K=R._p4,B=I.clone().multiplyScalar(-1),U=v.clone().multiplyScalar(3),X=V.clone().multiplyScalar(-3),O=B.add(U).add(X).add(K),B=I.clone().multiplyScalar(3),U=v.clone().multiplyScalar(-6),X=V.clone().multiplyScalar(3),w=B.add(U).add(X),B=I.clone().multiplyScalar(-3),U=v.clone().multiplyScalar(3),n=B.add(U),f=I.clone(),j=new Df.Math.Vector2(k.y-i.y,i.x-k.x),Q=k.x*i.y-i.x*k.y;for(var z=R.getRoots(j.dot(O),j.dot(w),j.dot(n),j.dot(f)+Q),$=new Array,D=0,d=z.length;d>D;D++){var u=z[D];if(!(0>u||u>1)){var J=I.clone().lerp(v,u),Y=v.clone().lerp(V,u),W=V.clone().lerp(K,u),g=J.lerp(Y,u),_=Y.lerp(W,u),t=g.lerp(_,u);t.t=u,k.x==i.x?T.y<=t.y&&t.y<=G.y&&$.push(t):k.y==i.y?T.x<=t.x&&t.x<=G.x&&$.push(t):t.x>=T.x&&t.y>=T.y&&t.x<=G.x&&t.y<=G.y&&$.push(t)}}return $},qj.prototype.solveTForPoint=function(k){var o,$,b,w,q=this;o=q._p1.x-k.x,$=q._p2.x-k.x,b=q._p3.x-k.x,w=q._p4.x-k.x;for(var R=q.getRoots(w-3*b+3*$-o,3*b-6*$+3*o,3*$-3*o,o),z=e,V=1/0,X=0,y=R.length;y>X;X++){var c=R[X];if(!(0>c||c>1)){var D=q._p1.clone().lerp(q._p2,c),v=q._p2.clone().lerp(q._p3,c),A=q._p3.clone().lerp(q._p4,c),G=D.lerp(v,c),F=v.lerp(A,c),C=G.lerp(F,c);C.t=c;var I=Math.abs(C.y-k.y);V>I&&(V=I,z=C)}}return z},qj.prototype.getPointAt=function(T){var P=this,O=P._p1,w=P._p2,p=P._p3,$=P._p4,I=O.clone().lerp(w,T),Q=w.clone().lerp(p,T),A=p.clone().lerp($,T),r=I.lerp(Q,T),D=Q.lerp(A,T);return r.lerp(D,T)},qj.prototype.getRoots=function(f,F,E,N){var j,d,l,v,u,T=new Array;if(Math.abs(f)<1e-6){var j=F,d=E/j,l=N/j,v=d*d-4*l;if(v>0){var u=Math.sqrt(v);T.push(.5*(-d+u)),T.push(.5*(-d-u))}else 0==v&&T.push(.5*-d)}F/=f,E/=f,N/=f,j=(3*E-F*F)/3,d=(2*F*F*F-9*E*F+27*N)/27;var e=F/3,K=d*d/4+j*j*j/27,Q=d/2;if(Math.abs(K)<=1e-6&&(K=0),K>0){var m,c,u=Math.sqrt(K);m=-Q+u,c=m>=0?Math.pow(m,1/3):-Math.pow(-m,1/3),m=-Q-u,m>=0?c+=Math.pow(m,1/3):c-=Math.pow(-m,1/3),T.push(c-e)}else if(0>K){var P=Math.sqrt(-j/3),i=Math.atan2(Math.sqrt(-K),-Q)/3,L=Math.cos(i),p=Math.sin(i),q=Math.sqrt(3);T.push(2*P*L-e),T.push(-P*(L+q*p)-e),T.push(-P*(L-q*p)-e)}else{var m;m=Q>=0?-Math.pow(Q,1/3):Math.pow(-Q,1/3),T.push(2*m-e),T.push(-m-e)}return T},qj.prototype._70I=function(){var W=this;return W._p1.distanceToSquared(W._p2)<1e-10&&W._p3.distanceToSquared(W._p4)<1e-10},qj.prototype.insertKnot=function(U){var p=this,z=p._p1,P=p._p2,B=p._p3,F=p._p4,R=z.clone().lerp(P,U),d=P.clone().lerp(B,U),b=B.clone().lerp(F,U),k=R.clone().lerp(d,U),J=d.clone().lerp(b,U),x=k.clone().lerp(J,U);return p._70I()?(z.clone().lerp(F,U),[new Df.Math.CubicBezier(z,z.clone(),x.clone(),x),new Df.Math.CubicBezier(x,x.clone(),F.clone(),F)]):[new Df.Math.CubicBezier(z,R,k,x),new Df.Math.CubicBezier(x,J,b,F)]};var Wi=A.Default.getInternal().ui().EdgeUI,Tc={_47O:function(b){var I=this,H=Tc.getBackups()._47O;Df.inEdit(I.gv)||H.call(I,b)}};Df.Inject.registAsModule(Tc,Wi);var ue=A.Default.getInternal().ui().NodeUI,er={_47O:function(J){var H=this,A=er.getBackups()._47O;Df.inEdit(H.gv)||A.call(H,J)},getSelectWidth:function(){var O=this,A=O.gv,m=O._data;if(A.isEditable(m)&&Df.inEdit(A))return 0;var r=er.getBackup("getSelectWidth");return r.call(O)}};Df.Inject.registAsModule(er,ue);var Tg=A.graph.GraphView,Dc={_editPointSize:function(){var r=A.Default.isTouchable,c=Df.getStyle("pointSize");return c[r?0:1]}(),isPointEditable:function(f){var Y=this;if(Df.inEdit(Y))return Y._pointEditableFunc?Y._pointEditableFunc(f):!0;var g=Dc.getBackup("isPointEditable");g.call(Y,f)},isEditable:function(B){var U,s=this,Q=Dc.getBackup("isEditable");if(U=B instanceof Df.Group?!0:Q.call(s,B),!Df.inEdit(s))return U;if(!(B instanceof A.Edge))return U;if(!B.s("2d.editable"))return!1;var C=s.getEditableFunc();return C?C(B):!0},_42:function(H,f){var d=this,b=Dc.getBackups()._42;if(b.call(d,H,f),Df.inEdit(d)){var l=d.getEditInteractor();l.drawImpl()}}};Df.Inject.registAsModule(Dc,Tg);var Sb=A.Default.getInternal().ui().ShapeUI,Ng={_47O:function(x){var h=this,i=Ng.getBackups()._47O;Df.inEdit(h.gv)||i.call(h,x)}};Df.Inject.registAsModule(Ng,Sb);var Vf=A.graph.DefaultInteractor,Fn={handle_mousewheel:function(s){var w=this,x=Fn.getBackup("handle_mousewheel");Df.inEdit(w.gv)||x.call(w,s)}};Df.Inject.registAsModule(Fn,Vf);var jd=A.graph.MoveInteractor,An={_calcShift:function(y,v){var b=this,R=An.getBackup("_calcShift"),L=b.gv;if(!Df.inEdit(L))return R.call(b,y,v);var Z=L.getEditInteractor(),e=Z.getSubModule("Move").calcShift(y,v,b);return e||R.call(b,y,v)},clear:function(C){var w=this,l=An.getBackup("clear");l.call(w,C);var L=w.gv;if(Df.inEdit(L)){var s=L.getEditInteractor();s.getSubModule("Move").clear(C)}}};Df.Inject.registAsModule(An,jd);var Qj=Df.Rect=function(t){this.catalog="Rect",this._interactor=t};Qj.prototype={},Qj.prototype.constructor=Qj,Qj.prototype.gatherInfo=function(F,x){var b=this;if(1===x.length){var r=x[0];return r instanceof A.Shape&&r._70I()?b.gatherLine(F,r):Fr(r,F)?!1:b.gatherSingleTarget(F,r)}return x.length>1?b.gatherMultiTargets(F,x):!1},Qj.prototype.gatherSingleTarget=function(A,Z){if(Z.getCorners){var K,x=this,D=x.info;x.target=Z,K=x.screenInfo={};var w=Z.getCorners();D.LT=new Df.Math.Vector2(w[0]),D.LB=new Df.Math.Vector2(w[1]),D.RB=new Df.Math.Vector2(w[2]),D.RT=new Df.Math.Vector2(w[3]),D.T=D.LT.clone().add(D.RT).divideScalar(2),D.B=D.LB.clone().add(D.RB).divideScalar(2),D.L=D.LT.clone().add(D.LB).divideScalar(2),D.R=D.RT.clone().add(D.RB).divideScalar(2);for(var V in D)K[V]=Df.toScreenPosition(A,D[V]);var z=x._interactor,Y=z.getStyle("checkSize"),H=function(O,e,u){var s=e.clone().sub(O).setLength(-Y),K=u.clone().sub(O).setLength(-Y),G=s.add(K).add(O);return G};return K.rotLT=H(K.LT,K.RT,K.LB),K.rotLB=H(K.LB,K.LT,K.RB),K.rotRB=H(K.RB,K.LB,K.RT),K.rotRT=H(K.RT,K.LT,K.RB),K.rotT=K.rotLT.clone().add(K.rotRT).divideScalar(2),K.rotB=K.rotLB.clone().add(K.rotRB).divideScalar(2),K.rotL=K.rotLT.clone().add(K.rotLB).divideScalar(2),K.rotR=K.rotRT.clone().add(K.rotRB).divideScalar(2),K.rotation=Z.getRotation(),x.gatherConnectInfo(),!0}},Qj.prototype.gatherConnectInfo=function(){var j=this,k=j.target,I=j._interactor,$=j.screenInfo,E=I.gv;if(k instanceof A.Node&&I.getStyle("connectGuideVisible")){var B=k.s("connectGuideShift")||I.getStyle("connectGuideShift"),s=k.getAnchor(),W=k.getSize(),C=k.toGlobal({x:W.width*(B[0]-s.x),y:W.height*(B[1]-s.y)});C=Df.toScreenPosition(E,C),$.P1?C.add($.P2.clone().sub($.P1).setLength(B[2])):(C.add($.RT.clone().sub($.LT).setLength(B[2])),C.add($.LB.clone().sub($.LT).setLength(B[3]))),$.connect=C}},Qj.prototype.gatherMultiTargets=function(G,e){var E=Df.Group.findOrCreateGroup(e);if(!E)return!1;var i=this;return i.editing&&"rotate"!==i.editing.mode||E.calcInfo(),i.gatherSingleTarget(G,E)},Qj.prototype.gatherLine=function(w,f){this.target=f;var R=this.screenInfo={},F=f.getPoints(),H=Df.getDataMatrix(f);return R.P1=Df.toScreenPosition(w,H.apply(F.get(0))),R.P2=Df.toScreenPosition(w,H.apply(F.get(1))),this.gatherConnectInfo(),!0},Qj.ResizeKeys=["LT","RB","LB","RT","L","R","B","T"],Qj.ResizeDirection=[{x:-1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:-1},{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1}],Qj.RotateKeys=["rotLT","rotRB","rotLB","rotRT","rotL","rotR","rotB","rotT"],Qj.prototype.check=function(W,U,p){if(A.Default.isLeftButton(U)){var Y=this;if(Y.editing=null,Y.tipInfo=null,Y.screenInfo){var n=Y.target,d=W.isEditable(n),F=Y.screenInfo;if(d&&F.connect){var u=Y._checkConnect(p);if(u)return u}if(F.P1)return Y._checkLine(p);var S,R,X,L=null,w=Y._interactor,C=w.getStyle("checkSize");if(d&&W.isRectEditable(n))for(R=0;R<Df.Rect.ResizeKeys.length;R++)if(X=Df.Rect.ResizeKeys[R],Df.checkHit(p,F[X],C)){L=X,S="resize";break}if(!L&&d&&W.isRotationEditable(n)){var $=w.getStyle("rotateCheckSize");for(R=0;R<Df.Rect.RotateKeys.length;R++)if(X=Df.Rect.RotateKeys[R],Df.checkHit(p,F[X],$)){L=X,S="rotate";break}}if(!L)return w.setCursor("default"),void 0;if("rotate"===S){var M,l=W.lp(U);if(n instanceof Df.Group){var K=w.getStyle("groupRotateModeKey");"string"==typeof K&&(K=[K]);for(var B=!1,T=0,x=K.length;x>T;T++)if(U[K[T]]){B=!0;break}var b=w.getStyle("groupRotateModeDefault");M=B?"batch"===b?"block":"batch":b}var Z="batch"===M?n.getAnchor2():n.getPosition(),E=Math.atan2(l.y-Z.y,l.x-Z.x);w._setRotateCursor(E),Y.editing={mode:S,key:L,pos:Z,flipY:n.getScale().y<0,rotation:n.getRotation(),hitRot:E},M&&(Y.editing.groupRotateMode=M)}else{var t=Df.Rect.ResizeKeys.indexOf(L),v=Df.Rect.ResizeDirection[t],Q=Math.cos(n.getRotation()),y=Math.sin(n.getRotation()),g=v.x*Math.sign(n.getScale().x),q=v.y*Math.sign(n.getScale().y),V=Math.atan2(-y*g-Q*q,Q*g-y*q),k=(Math.round(V/(Math.PI/4))+8)%8,D=["ew-resize","nesw-resize","ns-resize","nwse-resize","ew-resize","nesw-resize","ns-resize","nwse-resize"][k];this._interactor.setCursor(D);var o=n.getWidth(),I=n.getHeight(),_=n.getAnchor();Y.editing={mode:S,key:L,rect:{x:-o*_.x,y:-I*_.y,width:o,height:I},anchor:_,matrix:n.getMatrix()}}return L}}},Qj.prototype._checkLine=function(B){var n=this;n.screenInfo;var G,W=n._interactor.getStyle("checkSize");if(Df.checkHit(B,n.screenInfo.P1,W))G="P1";else{if(!Df.checkHit(B,n.screenInfo.P2,W))return this._interactor.setCursor("default"),void 0;G="P2"}return n.editing={mode:"line",key:G},G},Qj.prototype._checkConnect=function(x){var e=this,F=e.screenInfo,j=e._interactor,Z=j.getStyle("connectGuideIntersectSize");if(Df.checkHit(x,F.connect,Z)){var X="connect",L=r.getConnectAction(j.gv);return e.editing={mode:X},L&&L.delete&&L.delete.visible.call(null,j.gv,e.target)&&(e.editing.hasDeleteAction=!0),j.setCursor("default"),X}},Qj.prototype._fireEditEvent=function(a,E){var C=this._interactor,J=this.editing;if(J){var T=J.mode;T="rotate"===T?"Rotation":"connect"===T?"Connection":T[0].toUpperCase()+T.slice(1),C.fi({kind:a+"Edit"+T,event:E})}},Qj.prototype.startEdit=function(o,g){o.startDragging(g);var B=this;B._interactor.fi({kind:"prepareEdit",event:g});var k=B.editing,q=B.target;if(k){if(B._fireEditEvent("begin",g),"rotate"===k.mode)return k.groupRotateMode&&q.beginRotate(k),void 0;if("connect"!==k.mode)("line"===k.mode||q&&0===q.getRotation())&&(B._inSmartGuide=!0,B._interactor.rectGuide.gatherRects());else if(k.hasDeleteAction){var X=o.gv,L=B._interactor.getStyle("connectGuideGarbageShift");k.garbageInfo={x:X.getWidth()*L[0]+L[2],y:X.getHeight()*L[1]+L[3],size:B._interactor.getStyle("connectGuideGarbageIntersectsize")},o._42()}}},Qj.prototype._46O=function(l){var P,B=this,Y=B.editing;if(Y){if("connect"===Y.mode&&!Y.canceled&&!Y.deleted)try{Y.garbageInfo&&Y.garbageInfo.hover?r.doDeleteConnectionAction(B._interactor.gv,B.target):r.doConnectAction(B._interactor.gv,B.target,Y.target)}catch(G){console.error(G)}P=B.editing.groupRotateMode,B._fireEditEvent("end",l),B.editing=null}B.tipInfo=null,B._inSmartGuide&&(B._interactor.rectGuide.clear(),B._inSmartGuide=!1),P&&B.target&&B.target.endRotate()},Qj.prototype.handleNormalStateDelete=function(){var O=this,q=O.editing;if(q&&"connect"===q.mode&&!q.canceled&&!q.deleted){if(q.garbageInfo){try{r.doDeleteConnectionAction(O._interactor.gv,O.target)}catch(s){console.error(s)}q.garbageInfo=null}return q.cursorPos=null,q.targetCorners=null,q.deleted=!0,O._interactor._42(),!0}},Qj.prototype.handleNormalStateKeyDown=function(f){var R=this,v=R.editing;return!v||"connect"!==v.mode||v.canceled||v.deleted?void 0:A.Default.isEsc(f)?(v.cursorPos=null,v.targetCorners=null,v.canceled=!0,R._interactor._42(),!0):void 0},Qj.prototype.handleEdit=function(y,B){var b=this,T=b.editing;if(T){var D,t,G,J,V,n=b.target,l=T.key,c=T.mode,K=y.lp(B),M=b._interactor;if("connect"===c){if(T.canceled)return;if(T.deleted)return;T.cursorPos=M._getLogicalPoint(B);var q=T.garbageInfo;return q&&Df.checkHit(T.cursorPos,q,q.size)?(q.hover=!0,T.target=null,T.targetCorners=null):(q&&(q.hover=!1),T.target=y.getDataAt(K,function(P){return y.isSelectable(P)?Yq(P)?!0:!1:!1})||null,T.targetCorners=Df.getTargetCornersOnScreen(y,T.target)),M._42(),void 0}if("rotate"===c){var S,e,E=T.pos,I=Math.atan2(K.y-E.y,K.x-E.x);if(T.groupRotateMode?e=I-T.hitRot:(S=I-T.hitRot,e=T.rotation+S),e%=2*Math.PI,0>e&&(e+=2*Math.PI),!A.Default.isCtrlDown(B)){var Y,z;Cm(B)?(Y=M.getStyle("shiftRotateRound"),z=Y/2):(Y=M.getStyle("rotateRound"),z=M.getStyle("rotateSensitivity")),e=Df.roundTo(e,Y,z)}T.groupRotateMode?(S=e-(T.lastRotation||0),0!==S&&(n.addRotation(S,T.groupRotateMode),T.lastRotation=e)):n.setRotation(e),M._setRotateCursor(I),e>Math.PI&&(e-=2*Math.PI);var N=180*(e/Math.PI);N=N.toFixed(2),D=""+N+"°"}else if("resize"===c){var i=T.rect;G=i.x,J=i.y;var o,Q=i.width,W=i.height,p=T.anchor,h=T.matrix,v=Cm(B),P=b._unionPointMode1,Z=b._unionPointMode2;if(b._inSmartGuide&&!A.Default.isCtrlDown(B)&&!v){var X;"L"===l||"R"===l?X="x":("T"===l||"B"===l)&&(X="y"),b._adsorbedToClosest(K,X),V=!0}o=h.tfi(K);var F;"LT"===l?(i=P(o,{x:G+Q,y:J+W},Q,W,v),F=9):"T"===l?(i=Z({x:G,y:o.y},{x:G+Q,y:J+W},Q,W,v,"v"),F=1):"RT"===l?(i=P(o,{x:G,y:J+W},Q,W,v),F=33):"L"===l?(i=Z({x:o.x,y:J},{x:G+Q,y:J+W},Q,W,v,"h"),F=8):"R"===l?(i=Z({x:G,y:J},{x:o.x,y:J+W},Q,W,v,"h"),F=32):"LB"===l?(i=P(o,{x:G+Q,y:J},Q,W,v),F=12):"B"===l?(i=Z({x:G,y:J},{x:G+Q,y:o.y},Q,W,v,"v"),F=4):"RB"===l&&(i=P(o,{x:G,y:J},Q,W,v),F=36);var k=h.tf(i.x+i.width*p.x,i.y+i.height*p.y);n.setPosition(k),n.setSize(i.width,i.height),V&&(t=n.getRect(),M.rectGuide.gatherLines({node:n,x:t.x,y:t.y,w:t.width,h:t.height},X,F)),D=""+Math.round(i.width)+" * "+Math.round(i.height)}else if("line"===c){if(Cm(B)){var $=n.getPoints(),L="P1"===l?$.get(1):$.get(0),R={x:K.x-L.x,y:K.y-L.y},d=M.getStyle("shiftLineRotateRound"),m=b._shiftDirList;if(!m||b._shiftRotateRound!==d){b._shiftRotateRound=d,b._shiftDirList=m=[];for(var g=0;g<Math.PI;g+=d)m.push({x:j(g),y:C(g)})}for(var f,O=0,x=0,a=m.length;a>x;x++){var U=m[x],H=U.x*R.x+U.y*R.y;Math.abs(H)>Math.abs(O)&&(O=H,f=U)}K={x:L.x+f.x*O,y:L.y+f.y*O},M.rectGuide.clear()}else b._inSmartGuide&&!A.Default.isCtrlDown(B)&&(b._adsorbedToClosest(K),V=!0);var s=Df.getDataMatrix(n).applyInverse(K);n.setPoint("P1"===l?0:1,s,!0);var _=n.getPoints(),u=_.get(0),w=_.get(1);G=u.x-w.x,J=u.y-w.y,D=" "+Math.round(Math.sqrt(G*G+J*J))+" ",V&&(t=n.getRect(),M.rectGuide.gatherLines({node:n,x:t.x,y:t.y,w:t.width,h:t.height}))}if(D){var r=A.Default.getLogicalPoint(B,M._canvas);r.x+=Df.Icons.TipShiftX,r.y+=Df.Icons.TipShiftY,b.tipInfo={helperPos:r,text:D,size:D.length}}b._fireEditEvent("between",B)}},Qj.prototype._unionPointMode1=function(P,q,F,W,N){if(N&&F&&W){var x=P.x-q.x,i=P.y-q.y;Math.abs(x*W)<Math.abs(i*F)?(i=Math.sign(i)*Math.abs(x*W/F),P.y=q.y+i):(x=Math.sign(x)*Math.abs(i*F/W),P.x=q.x+x)}return A.Default.unionPoint(P,q)},Qj.prototype._unionPointMode2=function(B,D,G,J,l,F){var N=A.Default.unionPoint(B,D);if(l&&G&&J){var O;"v"===F?(O=N.x+N.width/2,N.width=G*N.height/J,N.x=O-N.width/2):(O=N.y+N.height/2,N.height=J*N.width/G,N.y=O-N.height/2)}return N},Qj.prototype._adsorbedToClosest=function(x,G){var y=this,A=y._interactor,b=A.rectGuide.findClosest(x,G),Y=A.gridGuide.findClosest(x,G),C=1/0,U=1/0;b&&(isFinite(b.x)&&(C=b.x),isFinite(b.y)&&(U=b.y)),Y&&(isFinite(Y.x)&&Math.abs(Y.x)<Math.abs(C)&&(C=Y.x),isFinite(Y.y)&&Math.abs(Y.y)<Math.abs(U)&&(U=Y.y)),isFinite(C)&&(x.x+=C),isFinite(U)&&(x.y+=U)},Qj.prototype._42=function(h,B,L){var G=this;G.info={},G.screenInfo=null;var K=G._interactor;if(!K.editDetail&&G.gatherInfo(B,L)){var C=G.editing,p=C?C.groupRotateMode:null,k=G.screenInfo;"block"!==p&&(k.P1?Df.Icons.DrawIcon(K,h,Df.Icons.Line,k):Df.Icons.DrawIcon(K,h,Df.Icons.Rect,k),k.connect&&(Df.Icons.DrawIcon(K,h,Df.Icons.ConnectGuide,{rotation:k.rotation,connect:k.connect,cursorPos:C?C.cursorPos:null}),C&&(C.targetCorners&&Df.Icons.DrawIcon(K,h,Df.Icons.NodeHoverGuide,C.targetCorners),C.garbageInfo&&Df.Icons.DrawIcon(K,h,Df.Icons.ConnectGuideGarbage,C.garbageInfo))),G.tipInfo&&Df.Icons.DrawIcon(K,h,Df.Icons.TipHelper,G.tipInfo)),G.target instanceof Df.Group&&G.target._42(K,h,B)}};var Qr=Df.Anchor=function(J){this.catalog="Anchor",this._interactor=J};Qr.prototype={},Qr.prototype.constructor=Qr,Qr.prototype.gatherInfo=function(n,a){var K=this;if(1===a.length){var o=a[0];if(!o.getAnchor)return;if(o instanceof A.Shape&&o._70I())return;if(Fr(o,n))return;return K.gatherSingleTarget(n,a[0])}return a.length>1?K.gatherMultiTargets(n,a):!1},Qr.prototype.gatherSingleTarget=function(S,Z){var p=this;return p.info.POS=Z.getPosition(),p.screenInfo.POS=Df.toScreenPosition(S,p.info.POS),p.target=Z,!0},Qr.prototype.gatherMultiTargets=function(m,R){var M=this,b=Df.Group.findOrCreateGroup(R);return b?(M.screenInfo.POS=Df.toScreenPosition(m,b.getAnchor2()),M.target=b,!0):!1},Qr.prototype.isVisible=function(){var t=this,y=t._interactor;if(y.getStyle("anchorVisible")===!1)return!1;var A=t.target;if(A){if(this.editing)return!0;var L=A.getAnchor(),w=y.getStyle("anchorOutsideVisibleThreshold");if(L.x<-w||L.x>1+w||L.y<-w||L.y>1+w)return!0;var B=A.getSize(),Z=A.getScale(),m=Math.min(Math.abs(B.width*Z.x),Math.abs(B.height*Z.y));if(m*y.gv._zoom<y.getStyle("anchorHideThreshold"))return!1}return!0},Qr.prototype.check=function(u,l,D){if(A.Default.isLeftButton(l)){var x=this,d=x._interactor;if(x.isVisible()&&d.getStyle("anchorMovable")!==!1){x.editing=null,x.tipInfo=null;var r=x.target;if(r&&u.isAnchorEditable(r)&&u.isEditable(r)){var j;if(x.screenInfo&&(j=x.screenInfo.POS)&&Df.checkHit(D,new Df.Math.Vector2(j),d.getStyle("checkSize"))){if(r instanceof Df.Group)return x.editing={},!0;var S=r.getWidth(),g=r.getHeight(),w=r.getAnchor();return x.editing={rect:{x:-S*w.x,y:-g*w.y,width:S,height:g},anchor:w,matrix:r.getMatrix()},!0}}}}},Qr.prototype.startEdit=function(h,e){h.startDragging(e),h.fi({kind:"beginEditAnchor",event:e})},Qr.prototype._46O=function(W){var O=this;O.editing&&(O.editing=null,O._interactor.fi({kind:"endEditAnchor",event:W})),O.tipInfo=null},Qr.prototype.handleEdit=function(l,L){var $=this,d=$.target;if(d){var c=$.editing;if(c){var g=l.lp(L),Q=$._interactor;if(d instanceof Df.Group)return d.setAnchor2(g),Q._42(),void 0;var G=c.matrix,R=G.tfi(g),D=c.rect,x=(R.x-D.x)/D.width,y=(R.y-D.y)/D.height;if(!A.Default.isCtrlDown(L)){var U=Q.getStyle("anchorRound"),h=Q.getStyle("anchorSensitivity");x=Df.roundTo(x,U,h),y=Df.roundTo(y,U,h)}d.setAnchor(x,y,!0);var a=A.Default.getLogicalPoint(L,Q._canvas);a.x+=Df.Icons.TipShiftX,a.y+=Df.Icons.TipShiftY;var E=""+x.toFixed(2)+", "+y.toFixed(2);$.tipInfo={helperPos:a,text:E,size:E.length},Q.fi({kind:"betweenEditAnchor",event:L})}}},Qr.prototype._42=function(J,H,G){var M=this;M.info={},M.screenInfo={};var Y=M._interactor;Y.editDetail||M.gatherInfo(H,G)&&M.isVisible()&&(Df.Icons.DrawIcon(Y,J,Df.Icons.Anchor,M.screenInfo),M.tipInfo&&Df.Icons.DrawIcon(Y,J,Df.Icons.TipHelper,M.tipInfo))};var zd=Df.Curve=function(L){this.catalog="Curve",this._interactor=L};zd.prototype={},zd.prototype.constructor=zd,h.defineProperties(zd.prototype,{activing:{get:function(){return this._activing},set:function(n){var o=this;if(n)o._activing=new Df.CurveActiving(this,n);else{var F=o._activing;F&&F.dispose(),o._activing=null}}}}),zd.PointType={Mirrored:0,Straight:1,Disconnected:2,Asymmetric:3},zd.prototype.setUp=function(){var f=this,n=f._interactor;n&&n.gv.mp(f._onGraphviewPropertyChanged,f)},zd.prototype._onGraphviewPropertyChanged=function(_){("zoom"===_.property||"translateX"===_.property||"translateY"===_.property)&&this._handleDataChanged()},zd.prototype.tearDown=function(){var g=this,E=g._interactor;E&&E.gv.ump(g._onGraphviewPropertyChanged,g)},zd.prototype.canEnterEditDetailMode=function(){var $=this,c=$._interactor,H=c._getValidSelection();if(1===H.length){var X=H[0],I=X instanceof A.Edge;if(X instanceof A.Shape||I){if(I){var T=X.s("edge.type");if(T&&"points"!==T)return}var s=c.gv;if(s.isPointEditable(X)&&s.isEditable(X))return $.target=X,!0}}},zd.prototype.preHandleScroll=function(){var o=this.editing;return o&&o.inEdit?!0:void 0},zd.prototype.getCurrentSelectintStatus=function(){var g=this;if(g.activing&&!g.activing.selections){if(g.activing.status!=e)return g.activing.status;var n=function(t){var Z=g.activing.status;g.activing.status=t,g._interactor.fp("shapePointStatus",Z,t)},r=Df.Curve.PointType,N=g.activing.point,m=g.activing.pairs;if(!m||1!==m.length)return n(r.Mirrored);var H=m[0],o=H.c1&&H.c1.isNearEnough(N),c=H.c2&&H.c2.isNearEnough(N);if(!H.c1||!H.c2)return o||c?n(r.Straight):n(r.Disconnected);if(o&&c)return n(r.Straight);if(o||c)return n(r.Asymmetric);var W=H.c1.clone().sub(N),Y=H.c2.clone().sub(N);return Math.abs(W.x*Y.y-W.y*Y.x)>1e-5||W.x*Y.x>0?n(r.Disconnected):Math.abs(W.length()-Y.length())>1e-5?n(r.Asymmetric):n(r.Mirrored)}},zd.prototype.handle_keydown=function(B){var f=this;if(f._interactor.editDetail){var r=Df.Curve.PointType;"1"===B.key?f.setCurrentSelectionStatus(r.Straight):"2"===B.key?f.setCurrentSelectionStatus(r.Mirrored):"3"===B.key?f.setCurrentSelectionStatus(r.Disconnected):"4"===B.key&&f.setCurrentSelectionStatus(r.Asymmetric)}},zd.prototype.setCurrentSelectionStatus=function(F){var a=this,C=a.activing;if(C){var U=a.getCurrentSelectintStatus();if(null!==U&&U!==F){C.status=F;var h=a.activing.point,i=a.activing.pairs;if(i&&1===i.length){var M=i[0],m=a.screenInfo.curve,s=Df.Curve.PointType,H=function(){a._writeToHt(),a._interactor.fp("shapePointStatus",U,F)};if(F===s.Straight)return m.moveCtrlPoint(M,h,"c1"),m.moveCtrlPoint(M,h,"c2"),H(),void 0;if(U===s.Straight){var p=m.findPairs(h,!0),S=p[0],L=S.r1||h,W=S.r2||h,V=W.clone().sub(L).multiplyScalar(.25);return m.moveCtrlPoint(M,h.clone().sub(V),"c1"),m.moveCtrlPoint(M,h.clone().add(V),"c2"),H(),void 0}var $=M.c1,k=M.c2;if($&&k){if(F===s.Mirrored)return m.moveCtrlPoint(M,h.clone().multiplyScalar(2).sub(k),"c1"),H(),void 0;if(F===s.Asymmetric&&U===s.Disconnected){var O=$.clone().sub(h).length(),V=h.clone().sub(k).setLength(O).add(h);return m.moveCtrlPoint(M,V,"c1"),H(),void 0}}C._firePointChange(),a._interactor.fp("shapePointStatus",U,F)}}}},zd.prototype._handleDataChanged=function(f){var j=this;if(j.screenInfo&&j.target){var S=j._interactor;j.gatherSingleTarget(S.gv,j.target,!0),j.check(S.gv,null,f?S._getLogicalPoint(f):new Df.Math.Vector2(S._lastClientPoint)),S._42()
}},zd.prototype.gatherSingleTarget=function(R,v,O){var N,i,W=this;W.screenInfo&&W.screenInfo.curve&&(i=W.screenInfo.curve._curves);var b=W.editing;N=b?W.screenInfo:W.screenInfo={};var P,T,n=v instanceof A.Edge;n?(P=v.s("edge.segments"),T=v.s("edge.points")||new A.List):(P=v._58O,T=v._59O),N.S=P;var z,H=N.P=[],V=Df.getDataMatrix(v);if(v instanceof A.Polyline&&(z=v.getElevation()||0,N.E=[]),T.each(function(v){N.E&&N.E.push(v.e||z),v=V.apply(v);var b=Df.toScreenPosition(R,v);H.push(b.x,b.y)}),n){var t=Df.toScreenPosition(R,v._lastSourcePoint),u=Df.toScreenPosition(R,v._lastTargetPoint);H.splice(0,0,t.x,t.y),H.push(u.x,u.y)}if(!N.S||!N.S.size()){N.S=new A.List,N.S.add(1);for(var y=0;y<H.length/2-1;y++)N.S.add(2)}if((!b||O)&&W.convertToCubicBezier(i),W.activing&&(O||!W.editing||"realPoint"===W.editing.type)){var g=N.curve.findPairs(W.activing.point);W.activing.pairs=g}n&&"points"!==v.s("edge.type")&&W._writeToHt()},zd.prototype._convertToNewPoint=function(c,y,B){var $,Z,Q;for($=0,Z=y.length;Z>$;$++){if(Q=y[$],Q._p1.isNearEnough(c))return Q._p1;if(Q._p4.isNearEnough(c))return Q._p4}if(B)for($=0,Z=Math.min(B.length,Z);Z>$;$++){if(Q=B[$],Q._p1===c)return y[$]._p1;if(Q._p4===c)return y[$]._p4}},zd.prototype.convertToCubicBezier=function(E){var h,Q,l=this,Y=new Df.Math.Curve,T=l.screenInfo;if(Y.createFromHtShape(T.P,T.S,T.E),T.curve=Y,l.activing){var k=Y._curves;if(h=l.activing.point,Q=l._convertToNewPoint(h,k,E),Q&&(l.activing.point=Q),l.activing.selections){var r=-1,z=l.activing.selections;z.forEach(function(i){r++,Q=l._convertToNewPoint(i,k,E),Q&&(z[r]=Q)})}}},zd.prototype.check=function(k,J,R){if(!J||A.Default.isLeftButton(J)){var j=this;if(j._interactor.setCursor("default"),j.editing=null,j.highlight=null,j.tipInfo=null,j.screenInfo){if(_d())return j._interactor._42(),!0;if(j._checkEditCtrlPoint(R))return j._interactor._42(),!0;if(j._checkEditRealPoint(R))return j._interactor._42(),!0;if(j._checkEditElevation(R))return j._interactor._42(),!0;var h=j.screenInfo.curve,w=h.checkPoint(R,j._interactor.getStyle("curveIntersectSize"));if(w){var x=j.highlight={};x.type="insertKnot",x.bezier=w.bezier,x.point=w.intersection}return j._interactor._42(),!0}}},zd.prototype._checkEditRealPoint=function(s){var I,S,F,H,y,V,C=this,r=C.screenInfo.curve._curves,p=C._interactor.getStyle("curvePointIntersectSize"),E=1/0;for(p*=p,F=0,H=r.length;H>F;F++)I=r[F],y=I._p1,V=s.distanceToSquared(y),E>V&&(E=V,S=y),y=I._p4,V=s.distanceToSquared(y),E>V&&(E=V,S=y);if(E>p)return!1;var t=C.highlight={};return t.type="changeRealPoint",t.point=S,C.editing={type:"realPoint",point:S,shiftGuide:{point:S.clone(),dir:"x",limit:0}},C._interactor.setCursor("crosshair"),!0},zd.prototype._checkEditElevation=function(g){var t=this;if(!t._interactor.getStyle("curveElevationVisible"))return!1;var y=t.activing;if(!y)return!1;var I=y.getCurrentEditingPoint();if(!I)return!1;var D=t._interactor,H=D.getStyle("curveElevationGuideShift"),v=D.getStyle("curveElevationIntersectSize"),W=g.distanceToSquared({x:I.x+H[0],y:I.y+H[1]});if(!(W>v*v)){var b=t.highlight={};b.type="elevation";var p=new Df.Math.Vector2(g.x,g.y,I.e);return t.editing={type:"elevation",startPoint:p},t._interactor.setCursor("crosshair"),!0}},zd.prototype._checkEditCtrlPoint=function(N){var d=this;if(d.activing&&!d.activing.selections){var y=d.getCurrentSelectintStatus();if(y!==Df.Curve.PointType.Straight){var c=d.activing.pairs;if(c){var r=d._interactor.getStyle("curvePointIntersectSize");r*=r;var T,e,j,G,v,$,u,w,X,U=1/0;for(u=0,X=c.length;X>u;u++)for(G=c[u],w=0;2>w;w++)v=0===w?"c1":"c2",G[v]&&($=N.distanceToSquared(G[v]),U>$&&(U=$,T=G,e=u,j=v));if(U>r)return!1;d.activing.hlpair=T,d.activing.hltype=j;var K=d.highlight={};return K.type="changeCtrlPoint",K.point=T[j],d.editing={type:"ctrlPoint",pair:T,pairId:e,ctrlType:j,direction:T[j].clone().sub(d.activing.point).normalize()},d._interactor.setCursor("crosshair"),!0}}}},zd.prototype.startEdit=function($,w){$.startDragging(w);var Q=this;Q.highlight&&"insertKnot"===Q.highlight.type&&(Q.insertKnot(),Q.gatherSingleTarget(Q._interactor.gv,Q.target),Q.activing=null,Q._checkEditRealPoint(Q._interactor._getLogicalPoint(w)));var h=Q._activing;if(h){var s=Q.editing?Q.editing.type:null;"ctrlPoint"===s?h.editingCtrl={pairId:Q.editing.pairId,type:h.hltype}:"realPoint"===s&&(h.editingCtrl=!1)}var a=Q.highlight,D=A.Default.isCtrlDown(w);if(!a||_d()){var W=Q._interactor.gv;if(!W.setFocus(w)||W._scrolling)return;return W.isPannable()&&Dp(w)&&!D&&(Q._pan={tx:W.tx(),ty:W.ty()},$.fi({kind:"beginPan",event:w})),void 0}if("changeRealPoint"===a.type){var O,f=Q.activing?Q.activing.point:null,n=Q.activing?Q.activing.selections:null;if(D&&Q.activing)f===a.point?(n?(Q.activing={point:n[0]},n.length>1&&(n.splice(0,1),Q.activing.selections=n)):Q.activing=null,Q.editing=null):n&&(O=n.indexOf(a.point))>=0?(n.length>1?n.splice(O,1):delete Q.activing.selections,Q.editing=null):n?(n.push(f),Q.activing={point:a.point,selections:n}):Q.activing={point:a.point,selections:[f]};else if(n)f===a.point||((O=n.indexOf(a.point))>=0?(n.splice(O,1,f),Q.activing={point:a.point,selections:n}):Q.activing={point:a.point});else{var k;f===a.point&&(k=Q.activing.status),Q.activing={point:a.point},k&&(Q.activing.status=k)}$.fi({kind:"beginEditPoint",event:w})}},zd.prototype.insertKnot=function(){var B=this,H=B.highlight,Z=B.screenInfo.curve;Z.insertKnot(H.bezier,H.point.t),B._writeToHt()},zd.prototype._writeToHt=function(){var C,L,G,s,O=this,Y=O.screenInfo.curve,t=Y.toHtShape(),D=t.points,B=[],f=t.segments,_=O._interactor.gv,k=O.target,V=k instanceof A.Edge,i=Df.getDataMatrix(k).invert();s=k instanceof A.Polyline,s&&(G=k.getElevation());for(var x=0,M=D.length;M>x;x++)C=D[x],L=Df.toWorldPosition(_,C),L=i.apply(L),C.e!=e&&C.e!==G&&(L.e=C.e),B.push(L);if(k._writing=!0,V){k.s("edge.type","points"),k.setStyle("edge.segments",f),k.setStyle("edge.points",B.slice(1,B.length-1)),k.setStyle("edge.source.offset.x",0),k.setStyle("edge.source.offset.y",0),k.setStyle("edge.target.offset.x",0),k.setStyle("edge.target.offset.y",0);var W=O._nextChangeEdgeHost;delete O._nextChangeEdgeHost,W&&("source"===W.type?k.setSource(W.host):k.setTarget(W.host)),O._writeEdgeHostAnchor("source",B[0]),O._writeEdgeHostAnchor("target",B[B.length-1])}else B.length?(k.setSegments(f),k.setPoints(B,!0)):k.removeFromDataModel();delete k._writing},zd.prototype._writeEdgeHostAnchor=function(B,V){var A=this,U=A.target,d=A._calcHostAnchor(U,B,V);U.s("edge."+B+".anchor.x",d.x),U.s("edge."+B+".anchor.y",d.y)},zd.prototype._calcHostAnchor=function(g,I,V,W){W||(W="source"===I?g.getSource():g.getTarget());var O=W.getRotation(),Q=W.getAnchor(),N=this._interactor.gv;if(Fr(W,N)&&(O=0),O){var s=W.getMatrix(),Y=s.tfi(V),w=W.getSize();return{x:Y.x/w.width+Q.x,y:Y.y/w.height+Q.y}}var K=yd(N,W),f={x:(V.x-K.x)/K.width,y:(V.y-K.y)/K.height};return f},zd.prototype._handlePanning=function(O){var X=this,Q=X._pan;if(Q){Q.started=!0;var r=X._interactor,i=r.gv,h=r._lastClientPoint,t=Ao(O);i.setTranslate(Q.tx+t.x-h.x,Q.ty+t.y-h.y),X.gatherSingleTarget(r.gv,X.target),r._42(),r.fi({kind:"betweenPan",event:O})}},zd.prototype.handleEdit=function(H,q){var Q=this,N=Q.editing;if(Q._pan)return Q._handlePanning(q),void 0;if(N){N.inEdit=!0;var p,j,Z,z=Q._interactor._getLogicalPoint(q),o=A.Default.isCtrlDown(q),d=A.Default.isShiftDown(q),P=N.type,D=Q.activing;if(Q._guideInfo=null,"ctrlPoint"===P&&d){var F=Q.editing.direction.clone();p=D.point;var b=F.dot(z.clone().sub(p));z=F.setLength(b).add(p)}else if("ctrlPoint"===P||"realPoint"===P){var F;if("realPoint"===P&&d){var h=Q.editing.shiftGuide;j=h.point;var a=Math.abs(z.x-j.x),x=Math.abs(z.y-j.y);a>x&&a>h.limit&&"y"===h.dir&&(h.dir="x"),x>a&&x>h.limit&&"x"===h.dir&&(h.dir="y"),F=h.dir,"x"===F?(z.y=j.y,h.limit=Math.max(h.limit,a)):"y"===F&&(z.x=j.x,h.limit=Math.max(h.limit,x))}var w=Q._isEditEdgeSourceTarget();if(w){var t=Q._editEdgeSourceTarget(w,z,o);t&&(Z=t.tipText)}else if(!o){var R=Q._guidingToEdit(z,F),$="realPoint"===P?Q._interactor.gridGuide.findClosest(z,F,!0):null,J=1/0,C=1/0;$&&($.x&&(J=$.x),$.y&&(C=$.y));var V=!1;R&&(R.xList&&(Math.abs(R.x)<=Math.abs(J)?(V=!0,J=R.x):delete R.xList),R.yList&&(Math.abs(R.y)<=Math.abs(C)?(V=!0,C=R.y):delete R.yList),V&&(Q._guideInfo=R)),isFinite(J)&&(z.x+=J),isFinite(C)&&(z.y+=C),V&&(R.v=z)}}var Y=Q.screenInfo.curve;if("realPoint"===N.type){p=N.point,p.e!==e&&(z.e=p.e),Y.moveRealPoint(p,z),N.point=z,Q.highlight.point=z;var u=D.status,L=D.selections;if(Q.activing={point:z,status:u},L){var r=z.clone().sub(p),E=0;L.forEach(function(Q){var J=Q.clone().add(r);Y.moveRealPoint(Q,J),L[E++]=J}),Q.activing.selections=L}}else if("ctrlPoint"===N.type){var B=D.pairs,k=B[N.pairId];Y.moveCtrlPoint(k,z,N.ctrlType);var g=D.status,I=Df.Curve.PointType;if((g===I.Mirrored||g===I.Asymmetric)&&k.c1&&k.c2){var p=new Df.Math.Vector2(D.point),X="c1"===N.ctrlType?"c2":"c1";if(g===Df.Curve.PointType.Mirrored)Y.moveCtrlPoint(k,p.clone().multiplyScalar(2).sub(z),X);else if(g===I.Asymmetric){var b=k[X].clone().sub(p).length(),s=p.clone().sub(k[N.ctrlType]).setLength(b).add(p);isNaN(s.x)||Y.moveCtrlPoint(k,s,X)}}D._firePointChange()}else if("elevation"===N.type){j=N.startPoint;var _=j.e+(j.y-z.y)/H._zoom;Q._setCurrentPointImpl("e",_),D._firePointChange(),Z="E: "+Df.toFixed(_)}var U=A.Default.getLogicalPoint(q,Q._interactor._canvas);if(U.x+=Df.Icons.TipShiftX,U.y+=Df.Icons.TipShiftY,!Z){var T=Df.toWorldPosition(H,z);Z=""+Df.toFixed(T.x)+", "+Df.toFixed(T.y)}Q.tipInfo={helperPos:U,text:Z,size:Z.length},Q._writeToHt(),Q._interactor.fi({kind:"betweenEditPoint",event:q})}},zd.prototype._setCurrentPointImpl=function(U,G){var P=this,z=P._activing;if(!z)return!1;var w=P.target;if(!w)return!1;var J=z.getCurrentEditingPoint();if(!J)return!1;var k=z.editingCtrl;if(!k)var j=J.clone();if("e"===U)J.e=G;else{var v;if("x"===U||"y"===U){var N=z._lastFirePoint;v="x"===U?{x:G,y:N?N.y:0}:{x:N?N.x:0,y:G}}else"object"==typeof U?(v=U,U.e!==e&&(J.e=U.e)):(v={x:arguments[0],y:arguments[1]},arguments[2]!==e&&(J.e=arguments[2]));var h=Df.getDataMatrix(w);v=Df.toScreenPosition(P._interactor.gv,h.apply(v)),J.x=v.x,J.y=v.y}if(!k){var M=j.multiplyScalar(-1).add(J);J.e&&j.e&&(M.e=J.e-j.e),P.screenInfo.curve.moveCtrlDueToRealPointMovement(J,M)}return!0},zd.prototype.setCurrentPoint=function(p,H){return this._setCurrentPointImpl(p,H)?(this._writeToHt(),!0):!1},zd.prototype._isEditEdgeSourceTarget=function(){var g=this,Q=g.target;if(!(Q instanceof A.Edge))return!1;var t=g.editing.point,h=g.screenInfo.curve._curves;return t===h[0]._p1?"source":t===h[h.length-1]._p4?"target":!1},zd.prototype._editEdgeSourceTarget=function(t,C,w){var M,H=this,f=H.target;if(M="source"===t?f.getSource():f.getTarget()){var p=H._interactor.gv,U=Df.toWorldPosition(p,C),e=H._calcHostAnchor(f,t,U,M);if(!w){var m=H._interactor.getStyle("anchorRound"),l=H._interactor.getStyle("anchorSensitivity");e.x=Df.roundTo(e.x,m,l),e.y=Df.roundTo(e.y,m,l)}if(H._interactor.getStyle("edgeHostDetectPerFrame")||e.x<0||e.x>1||e.y<0||e.y>1){var X=p.getDataAt(U,function(G){return p.isSelectable(G)?Yq(G)?!0:!1:!1});if(X){var K=H._calcHostAnchor(f,t,U,X);M=X,H._nextChangeEdgeHost={type:t,host:X},e=K,w||(e.x=Df.roundTo(e.x,m,l),e.y=Df.roundTo(e.y,m,l))}}if(!w){var R=uo(p,M,0,0,0,e.x,e.y),i=Df.toScreenPosition(p,R);C.x=i.x,C.y=i.y}return H._edgeHostGuideInfo=Df.getTargetCornersOnScreen(p,M),{host:M,anchor:e,tipText:""+e.x.toFixed(2)+", "+e.y.toFixed(2)}}},zd.prototype._guidingToEdit=function(t,f){var D,i,Y=this;if(D=Y.screenInfo.curve){i=D._curves;var b,u,Z,p,$,E,Q,G,W=1/0,o=1/0,w=[];for(Y.editing&&"realPoint"===Y.editing.type&&(G=Y.editing.point),$=0,E=2*i.length;E>$;$++)Q=i[Math.floor($/2)][$%2?"_p4":"_p1"],w.indexOf(Q)>=0||(w.push(Q),G&&G===Q||(Z=Q.x-t.x,p=Q.y-t.y,Math.abs(Z)<Math.abs(W)?(W=Z,b=[Q]):Z===W&&b.push(Q),Math.abs(p)<Math.abs(o)?(o=p,u=[Q]):p===o&&u.push(Q)));var A=Y._interactor.getStyle("smartGuideSensitivity");if((Math.abs(W)>A||"y"===f)&&(b=null),(Math.abs(o)>A||"x"===f)&&(u=null),b||u){var S=!1,k={};if(b&&(S=!0,k.xList=b,k.x=W),u&&(S=!0,k.yList=u,k.y=o),S)return k}}},zd.prototype._46O=function(A){var s=this;s.editing&&(s.editing=null,s._interactor.fi({kind:"endEditPoint",event:A})),s._guideInfo=null,s._edgeHostGuideInfo=null,s._pan&&(s._pan=null,s._interactor.fi({kind:"endPan",event:A})),s.tipInfo=null},zd.prototype._canDeletePoint=function(v,s){var c=this.target;if(!(c instanceof A.Edge))return!0;var _=v._curves[0],E=v._curves[v._curves.length-1];return _._p1===s||E._p4===s?!1:!0},zd.prototype.handleDelete=function(){var S=this;if(S.activing&&S.screenInfo){var v=A.Default.isShiftDown(),Q=S.screenInfo.curve;S._canDeletePoint(Q,S.activing.point)&&Q.deleteRealPoint(S.activing.point,v),S.activing.selections&&S.activing.selections.forEach(function(I){S._canDeletePoint(Q,I)&&Q.deleteRealPoint(I,v)}),S.activing=null,delete S.editing,delete S.tipInfo,delete S._pan,S._writeToHt(),S._interactor.fp("deleteShapePoint",!1,!0)}},zd.prototype.handleDoubleClick=function(C){var X=this,$=X._interactor._getLogicalPoint(C);if(X.screenInfo&&X._checkEditRealPoint($)){var M=X.getCurrentSelectintStatus(),o=Df.Curve.PointType;return M=M===o.Mirrored?o.Straight:o.Mirrored,X.setCurrentSelectionStatus(M),X._interactor._42(),!0}},zd.prototype._drawHighlight=function(C){var U=this,b=U.highlight;if(b){var n=b.bezier,h=U._interactor;n&&Df.Icons.DrawIcon(h,C,Df.Icons.ShapeHighlightCurve,[n._p1.x,n._p1.y,n._p2.x,n._p2.y,n._p3.x,n._p3.y,n._p4.x,n._p4.y]);var z=b.point;z&&"insertKnot"===b.type&&Df.Icons.DrawIcon(h,C,Df.Icons.ShapeHighlighPoint,z)}},zd.prototype._drawGuide=function(P){var z=this,Z=z._guideInfo;if(Z){var j,D,r,p,G=Z.v;for(j=0;2>j;j++)if(p=0===j?Z.xList:Z.yList)for(D=0,r=p.length;r>D;D++)Df.Icons.DrawIcon(z._interactor,P,Df.Icons.ShapeGuideLine,[G.x,G.y,p[D].x,p[D].y])}},zd.prototype._drawCurrentPoint=function(q){var L=this;if(L.activing){var B=L.activing,h=L.getCurrentSelectintStatus(),b=L._interactor;if(h!==Df.Curve.PointType.Straight){var y=B.pairs;B.hlpair,B.hltype;var V=B.selections,r=B.editingCtrl;if(y&&!V){var A,F,l;for(F=0,l=y.length;l>F;F++)A=y[F],r&&F===r.pairId&&A[r.type]?Df.Icons.DrawIcon(b,q,Df.Icons.ShapeActivingCtrl,{point:A.point,c1:A.c1,c2:A.c2,hl:r.type}):Df.Icons.DrawIcon(b,q,Df.Icons.ShapeActivingCtrl,A)}}Df.Icons.DrawIcon(b,q,Df.Icons.ShapeHighlighRealPoint,L.activing.point),V&&V.forEach(function(B){Df.Icons.DrawIcon(b,q,Df.Icons.ShapeHighlighRealPoint,B)})}},zd.prototype.clear=function(){var n=this;n.editing=null,n._guideInfo=null,n.activing=null,n.highlight=null},zd.prototype._42=function(Z){var U=this;U.info={},U.editing||(U.screenInfo=null);var O=U._interactor;if(!O.editDetail)return U.clear(),void 0;if(!U.target||!U._interactor.gv.isSelected(U.target)||!U._interactor.gv.isVisible(U.target))return O.editDetail=!1,U.clear(),void 0;if(U.gatherSingleTarget(O.gv,U.target),Df.Icons.DrawIcon(O,Z,Df.Icons.ShapeBgCurve,U.screenInfo),U._drawHighlight(Z),U._drawCurrentPoint(Z),U._getRealPoint().forEach(function(Q){Df.Icons.DrawIcon(O,Z,Df.Icons.ShapePoint,Q)}),U._drawGuide(Z),U.tipInfo&&Df.Icons.DrawIcon(O,Z,Df.Icons.TipHelper,U.tipInfo),U._edgeHostGuideInfo&&Df.Icons.DrawIcon(O,Z,Df.Icons.NodeHoverGuide,U._edgeHostGuideInfo),U._interactor.getStyle("curveElevationVisible")&&U.target instanceof A.Polyline&&U.activing){var n=U.activing.getCurrentEditingPoint();n&&Df.Icons.DrawIcon(O,Z,Df.Icons.EdgeElevationGuide,n)}},zd.prototype._getRealPoint=function(){var f=this.screenInfo,l=f.P,x=f.S,$=-1,R=[];return x.each(function(N){var t=1;if(3===N)t=2;else if(4===N)t=3;else if(5===N)return;$+=t,R.push({x:l[2*$],y:l[2*$+1]})}),R};var ec=Df.MoveHelper=function(b){var W=this;W.catalog="Move",W._interactor=b};ec.prototype={},ec.prototype.constructor=ec,ec.prototype.calcShift=function(P,S,b){var n,u,L=this,E=L._interactor.gv,N=E.lp(S);if("beginMove"===P&&L._gatherGridInfo(b._lastLogicalPoint||N),n=L._target){var K=n.downPosition;if(K){var z=L._interactor.getStyle("moveSensitivity")/E._zoom;if(K.distanceTo(N)<z)return{x:0,y:0};delete n.downPosition}var D;u=A.Default.isShiftDown(S),u&&(N=L._dealShiftDown(N),D=n.shiftGuide.dir);var W,r=n.rawPos={x:n.pos.x+N.x-n.lp.x,y:n.pos.y+N.y-n.lp.y};if(A.Default.isCtrlDown(S)){if(W=L._calcShiftByAddon(),L._target.node instanceof Df.Group){var U=L._target.node;U._position.x+=W.x,U._position.y+=W.y}return W}for(var a,I=n.x+r.x,C=n.y+r.y,B={x:I,y:C},M={x:I+n.w/2,y:C+n.h/2},g={x:I+n.w,y:C+n.h},t=L._interactor.rectGuide,e=L._interactor.gridGuide,y=[t.findClosest(B,D),t.findClosest(M,D),t.findClosest(g,D),e.findClosest(B,D),e.findClosest(M,D),e.findClosest(g,D)],F=1/0,q=1/0,R=0,c=y.length;c>R;R++)a=y[R],a&&(I=a.x,C=a.y,isFinite(I)&&Math.abs(I)<Math.abs(F)&&(F=I),isFinite(C)&&Math.abs(C)<Math.abs(q)&&(q=C));if(isFinite(F)||(F=0),isFinite(q)||(q=0),W=L._calcShiftByAddon(F,q),L._target.node instanceof Df.Group){var U=L._target.node;U._position.x+=W.x,U._position.y+=W.y}var Z=n.node;if(!Fr(Z,E)){var J=r.x+F,p=r.y+q;L._interactor.rectGuide.gatherLines({node:Z,x:n.x+J,y:n.y+p,w:n.w,h:n.h},D)}return W}},ec.prototype._calcShiftByAddon=function(R,y){var g=this._target,H=g.rawPos,r=g.node.getPosition();return R=R||0,y=y||0,{x:H.x-r.x+R,y:H.y-r.y+y}},ec.prototype._dealShiftDown=function(I){var D=this,F=D._target.shiftGuide,q=D._target.lp,z=Math.abs(I.x-q.x),O=Math.abs(I.y-q.y);z>O&&z>F.limit&&"y"===F.dir&&(F.dir="x"),O>z&&O>F.limit&&"x"===F.dir&&(F.dir="y");var u=F.dir;return"x"===u?(I.y=q.y,F.limit=Math.max(F.limit,z)):"y"===u&&(I.x=q.x,F.limit=Math.max(F.limit,O)),I},ec.prototype._gatherGridInfo=function(W){var T,O=this,h=O._interactor,z=h._getValidSelection();if(1===z.length){if(T=z[0],!T.getRect)return O._target=null,void 0}else if(T=Df.Group.findOrCreateGroup(z),!T)return O._target=null,void 0;var t=T.getPosition(),H=T.getRect();O._target={node:T,x:H.x-t.x,y:H.y-t.y,w:H.width,h:H.height,lp:{x:W.x,y:W.y},pos:{x:t.x,y:t.y},shiftGuide:{dir:"x",limit:0},downPosition:new Df.Math.Vector2(W)},h.rectGuide.gatherRects()},ec.prototype.clear=function(){var I=this;I._interactor.rectGuide.clear(),I._interactor._42()};var Lr="directional",md="point",Dj="spot",mn="light.color",Sr=function(_,r){se(r)&&Qg.test(r)?dr(_,r):Vc(r)&&r.modelType?Sd(_,r):sj[_]=r},$o=function(z){if(Vc(z))return z;var g=sj[z];return z&&g===e&&Qg.test(z)&&(hq&&hq[z]||dr(z,z)),g};vf(r,{graph3dViewAttributes:J,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:I/60,graph3dViewEditHelperDisabled:!1,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:Qn,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewFovy:I/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewHeadlightRange:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewFogDisabled:!0,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewDashDisabled:!0,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,setShape3dModel:Sr,getShape3dModel:$o,createMatrix:function(C,_){Ji(C)||(C=[C]);for(var g=C.length-1;g>=0;g--){var L=C[g];_=fj(L.mat,L.s3,L.r3,L.rotationMode,L.t3,_)}return _},transformVec:function(t,B){return Nq(t,B)},createBoxModel:function(){return{vs:yb,ns:Hj,uv:ul,is:Xo}},createRoundRectModel:function(A,W){return vp.roundRect(A,W)},createStarModel:function(J,o){return vp.star(J,o)},createRectModel:function($,b){return vp.rect($,b)},createTriangleModel:function(d,t){return vp.triangle(d,t)},createRightTriangleModel:function(T,p){return vp.rightTriangle(T,p)},createParallelogramModel:function(q,T){return vp.parallelogram(q,T)},createTrapezoidModel:function(w,R){return vp.trapezoid(w,R)},createSmoothSphereModel:function(r,x,O,L,W,$,h){return bb(new Ec(r,x,O,L,W,$,h))},createSphereModel:function(P,M,c,F,a,t){return P?uf(P,M,c,F,a,t):r.createSmoothSphereModel()},createSmoothConeModel:function(s,V,c,G,R){return zk(s,V,c,G,R)},createConeModel:function(V,y,U,b,P,I){return V?al(V,y,U,b,P,I):zk(I)},createSmoothCylinderModel:function(n,I,E,h,N,g,V,a){return bb(new bo(n,I,E,h,N,g,V,a))},createCylinderModel:function(l,z,n,$,M,e,g){return l?Am(l,z,n,$,M,e,g):Lg(e,g)},createSmoothTorusModel:function(Z,j,l,I,y,A){return bb(new Cb(Z,j,l,I,y,A))},createTorusModel:function(x,q,m,u,K,l,N){return x?Ab(x,q,m,u,K,l,N):wj(l,N)},createExtrusionModel:function(g,E,t,e,R,G,i,u){return ri(g,E,t,e,R,G,i,u)},createSmoothRingModel:function(U,J,h,c,t,g){for(var a=[],o=0;o<U.length-1;o+=2)a.push({x:U[o],y:U[o+1]});for(U=rg(a,J,h)[0],a=[],o=0;o<U.length;o++){var T=U[o];a.push(new Rq(T.x,0,T.y))}return bb(new qm(a,g,c,t))},createTextGeometry:function(n,D){return bb(new fp(n,D))},loadFontFace:function(C,s){r.xhrLoad(C,function(b){if(!b)return s();var c;try{c=JSON.parse(b)}catch(H){c=JSON.parse(b.substring(65,b.length-2))}$h.loadFace(c),s&&s(c.familyName.toLowerCase())},s?null:{sync:!0})},getRotationFromMatrix4:function(G,Q){var o=W,e=G[0],X=G[4],d=G[8],T=G[1],O=G[5],b=G[9],U=G[2],E=G[6],I=G[10];Q=Q||"xyz",Q=Q[2]+Q[1]+Q[0],Q=Q.toUpperCase();var J={};if("XYZ"===Q)J._y=Math.asin(o(d,-1,1)),Math.abs(d)<.99999?(J._x=Math.atan2(-b,I),J._z=Math.atan2(-X,e)):(J._x=Math.atan2(E,O),J._z=0);else if("YXZ"===Q)J._x=Math.asin(-o(b,-1,1)),Math.abs(b)<.99999?(J._y=Math.atan2(d,I),J._z=Math.atan2(T,O)):(J._y=Math.atan2(-U,e),J._z=0);else if("ZXY"===Q)J._x=Math.asin(o(E,-1,1)),Math.abs(E)<.99999?(J._y=Math.atan2(-U,I),J._z=Math.atan2(-X,O)):(J._y=0,J._z=Math.atan2(T,e));else if("ZYX"===Q)J._y=Math.asin(-o(U,-1,1)),Math.abs(U)<.99999?(J._x=Math.atan2(E,I),J._z=Math.atan2(T,e)):(J._x=0,J._z=Math.atan2(-X,O));else if("YZX"===Q)J._z=Math.asin(o(T,-1,1)),Math.abs(T)<.99999?(J._x=Math.atan2(-b,O),J._y=Math.atan2(-U,e)):(J._x=0,J._y=Math.atan2(d,I));else{if("XZY"!==Q)return null;J._z=Math.asin(-o(X,-1,1)),Math.abs(X)<.99999?(J._x=Math.atan2(E,O),J._y=Math.atan2(d,e)):(J._x=Math.atan2(-b,I),J._y=0)}return[J._x,J._y,J._z]},createRingModel:function(X,W,g,Y,A,T,R,a,e,h){for(var i=[],v=0;v<X.length-1;v+=2)i.push({x:X[v],y:X[v+1]});T=T||r.shapeSide,R=R||0,a=a||T;var B,Z,E,V,K,d,L,G,F,N,v,z,I,b,y,m,f,H,_=[],t=[],M=e?[]:J,D=e?[]:J,o=h?[]:J,$=h?[]:J,P=Y?[]:J,l=Y?[]:J,w=A?[]:J,S=A?[]:J,X=rg(i,W,g),q=un(X),n=0,c=2*Math.PI/T;return X.forEach(function(x){if(E=x.length,E>1){if(V=x[0],Y)for(d=V.x,G=V.y,v=R;a>v;v++)z=v+1,I=v*c,b=z*c,y=C(I),m=j(I),f=C(b),H=j(b),P.push(y*d,G,-m*d,f*d,G,-H*d,0,G,0),l.push(.5-.5*y,.5-.5*m,.5-.5*f,.5-.5*H,.5,.5);for(N=0;E>N;N++){for(K=x[N],d=V.x,L=K.x,G=V.y,F=K.y,B=n/q,n+=ii(V,K),Z=n/q,v=R;a>v;v++)z=v+1,I=v*c,b=z*c,y=C(I),m=j(I),f=C(b),H=j(b),_.push(y*L,F,-m*L,f*L,F,-H*L,y*d,G,-m*d,f*L,F,-H*L,f*d,G,-H*d,y*d,G,-m*d),t.push(v/T,Z,z/T,Z,v/T,B,z/T,Z,z/T,B,v/T,B),e&&v===R&&(M.push(0,G,0,0,F,0,y*L,F,-m*L,y*L,F,-m*L,y*d,G,-m*d,0,G,0),D.push(0,.5-G,0,.5-F,2*L,.5-F,2*L,.5-F,2*d,.5-G,0,.5-G)),h&&z===a&&(o.push(0,G,0,f*L,F,-H*L,0,F,0,f*L,F,-H*L,0,G,0,f*d,G,-H*d),$.push(1,.5-G,1-2*L,.5-F,1,.5-F,1-2*L,.5-F,1,.5-G,1-2*d,.5-G));V=K}if(A)for(d=V.x,G=V.y,v=R;a>v;v++)z=v+1,I=v*c,b=z*c,y=C(I),m=j(I),f=C(b),H=j(b),w.push(f*d,G,-H*d,y*d,G,-m*d,0,G,0),S.push(.5-.5*f,.5+.5*H,.5-.5*y,.5+.5*m,.5,.5)}}),{vs:_,uv:t,bottom_vs:w,bottom_uv:S,top_vs:P,top_uv:l,from_vs:M,from_uv:D,to_vs:o,to_uv:$}}},!0),vf(P,{"3d.move.mode":e,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"shape.border.gradient.color":e,"edge.gradient.color":e,"edge.source.t3":e,"edge.target.t3":e,"light.type":md,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":I/4,"light.range":0,"light.exponent":1,"light.intensity":1,"wf.visible":!1,"wf.width":1,"wf.color":Md,"wf.short":!1,"wf.mat":e,"wf.geometry":!1,batch:e,"transparent.mask":!1,brightness:e,"select.brightness":.7,"repeat.uv.length":e,alphaTest:.4,"label.face":Im,"label.t3":e,"label.r3":e,"label.texture.scale":2,"label.rotationMode":ff,"label.light":!1,"label.blend":e,"label.reverse.flip":!1,"label.reverse.color":vo,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":Im,"label2.t3":e,"label2.r3":e,"label2.texture.scale":2,"label2.rotationMode":ff,"label2.light":!1,"label2.blend":e,"label2.reverse.flip":!1,"label2.reverse.color":vo,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":Im,"note.t3":e,"note.r3":e,"note.texture.scale":2,"note.rotationMode":ff,"note.light":!1,"note.blend":e,"note.reverse.flip":!1,"note.reverse.color":vo,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":Im,"note2.t3":e,"note2.r3":e,"note2.texture.scale":2,"note2.rotationMode":ff,"note2.light":!1,"note2.blend":e,"note2.reverse.flip":!1,"note2.reverse.color":vo,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,shape3d:e,"shape3d.color":Yb,"shape3d.top.color":e,"shape3d.bottom.color":e,"shape3d.from.color":e,"shape3d.to.color":e,"shape3d.image":e,"shape3d.top.image":e,"shape3d.bottom.image":e,"shape3d.from.image":e,"shape3d.to.image":e,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":e,"shape3d.side.to":e,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":e,"shape3d.opacity":e,"shape3d.reverse.flip":!1,"shape3d.reverse.color":vo,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":e,"shape3d.uv.scale":e,"shape3d.top.uv.offset":e,"shape3d.top.uv.scale":e,"shape3d.bottom.uv.offset":e,"shape3d.bottom.uv.scale":e,"shape3d.from.uv.offset":e,"shape3d.from.uv.scale":e,"shape3d.to.uv.offset":e,"shape3d.to.uv.scale":e,"shape3d.top.cap":e,"shape3d.bottom.cap":e,"shape3d.start.angle":0,"shape3d.sweep.angle":l,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"shape3d.autorotate":!1,"shape3d.fixSizeOnScreen":e,"shape3d.image.cache":!1,"shape3d.alwaysOnTop":!1,"all.light":!0,"all.visible":!0,"all.color":Yb,"all.image":e,"all.blend":e,"all.opacity":e,"all.reverse.flip":!1,"all.reverse.color":vo,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":e,"all.uv.offset":e,"all.uv.scale":e,"all.discard.selectable":!0,mat:e,"left.mat":e,"right.mat":e,"top.mat":e,"bottom.mat":e,"front.mat":e,"back.mat":e},!0);var Oh,Np=!1,Be=[0,0,0,0],Xl={left:[1/255,0,0,1],right:[2/255,0,0,1],top:[3/255,0,0,1],bottom:[4/255,0,0,1],front:[5/255,0,0,1],back:[6/255,0,0,1],m:{1:fh,2:um,3:Wc,4:Wb,5:Im,6:Id}},jp=function(S,L,$,V){if(L.getFaceVisible(S,$)){Zk(L,ao(S,L.getFaceMat(S,$)||L.getMat(S)));var M=L._26I;L.getFaceReverseCull(S,$)?M.enable(M.CULL_FACE):M.disable(M.CULL_FACE),lp(M,L._prg.uFixPickReverseColor,Xl[$]),bc(M),zi(M,V,6),Zc(M),Jm(L)}},Om=function(y){return y instanceof ep},mq=function(A){return[A.x,A.e||0,A.y]},Oi=function(p,F,$){for(var F=Gj(F),J=F[0],y=F[1],j=F[2];$--;)p.push(J,y,j)},ke=function(P,h,F){for(var h=Gj(h),w=h[0],c=h[1],s=h[2],r=h[3];F--;)P.push(w,c,s,r)},ub=function(V,Y,Q){if(Y)for(var k,O,D,s=Y[0],G=Y[1],K=Y[2],e=Y[4],u=Y[5],J=Y[6],B=Y[8],q=Y[9],a=Y[10],n=Y[12],R=Y[13],_=Y[14],E=Q.length,b=0,b=0;E>b;b+=3)k=Q[b],O=Q[b+1],D=Q[b+2],V.push(s*k+e*O+B*D+n,G*k+u*O+q*D+R,K*k+J*O+a*D+_);else im(V,Q)},We=function(z,t){var $=t.s("light.intensity"),b=Gj(t.s(mn)),N=b[0],K=b[1],r=b[2];1!==$&&(N*=$,K*=$,r*=$),z.push(N,K,r,t.s("light.disabled")?1:0)},Zb=function(X,b,A){lp(b,A.uHeadlightRange,X._headlightRange);var W=X._headlightIntensity,S=Gj(X._headlightColor);1!==W&&(S=[S[0]*W,S[1]*W,S[2]*W]),lp(b,A.uHeadlightColor,[S[0],S[1],S[2],X._headlightDisabled?1:0]);var B=X._59O,y=X._spots,f=X._dirs;if(B.length){var g=[],M=[],e=[];B.forEach(function(v){We(g,v),im(M,X._transformPointToViewSpace(v.p3())),e.push(v.s("light.range"))}),b.uniform4fv(A.uPointColor,g),b.uniform1fv(A.uPointRange,e),b.uniform3fv(A.uPointPosition,M)}if(y.length){var J=[],n=[],O=[],k=[],i=[],I=[];y.forEach(function(Q){We(J,Q),im(n,X._transformPointToViewSpace(Q.p3())),im(i,X._transformDirectionToViewSpace(Q.p3(),Q.s("light.center"))),O.push(Q.s("light.range")),k.push(C(Q.s("light.angle")/2)),I.push(Q.s("light.exponent"))}),b.uniform4fv(A.uSpotColor,J),b.uniform1fv(A.uSpotRange,O),b.uniform1fv(A.uSpotAngle,k),b.uniform1fv(A.uSpotExponent,I),b.uniform3fv(A.uSpotPosition,n),b.uniform3fv(A.uSpotDirection,i)}if(f.length){var R=[],D=[];f.forEach(function(K){We(R,K),im(D,X._transformDirectionToViewSpace(K.p3()))}),b.uniform4fv(A.uDirColor,R),b.uniform3fv(A.uDirDirection,D)}},Km=function(x){return x>0&&0===(x-1&x)},yh=function(s){return s=S(0,c(I,s)),s=S(Oo,c(I-Oo,s))},Yg=function(){return.05+O()/2},Ek=function(I,S,h,T){var r,b=I.getEye();return I.isOrtho()?(r=$r(I.getCenter(),b),r[0]+=T[0],r[1]+=T[1],r[2]+=T[2]):r=b,fq(S,h,T,r)},fq=function(D,u,r,S){var A=hl(D,u),o=$r(S,r,!0),g=hl(o,u);if(k(g)<Oo)return J;var y=(A-hl(r,u))/g;return[r[0]+o[0]*y,r[1]+o[1]*y,r[2]+o[2]*y]},gq=function(s,e){return{x:2*s.x-e.x,y:2*s.y-e.y}},Ye=function(P,_,r,G){var $,d;if(!P)return $=f(_.y-r.y,r.x-_.x),{x:_.x+G*j($),y:_.y+G*C($)};if(!r)return $=f(P.y-_.y,_.x-P.x),{x:_.x+G*j($),y:_.y+G*C($)};var I=$r([P.x,P.y,0],[_.x,_.y,0],!0),N=$r([r.x,r.y,0],[_.x,_.y,0],!0),n=-(I[0]+N[0])/2,J=-(I[1]+N[1])/2,X=Z(n*n+J*J);if(Oo>X)return $=f(P.y-_.y,_.x-P.x),{x:_.x+G*j($),y:_.y+G*C($)};var D=P.x-_.x,l=P.y-_.y,u=r.x-_.x,h=r.y-_.y,O=Z(D*D+l*l),T=Z(u*u+h*h);$=R(hl(I,N))/2,d=I[1]*N[0]-I[0]*N[1]>0?-1:1,n/=X,J/=X;var H=G/j($),o=S(O,T)/C($);X=Math.min(H,o);var v={x:_.x+d*X*n,y:_.y+d*X*J};return r.b&&H>T/C($)&&(v.adjust=!0),v},oo=function(n){var f=n[1],h=n[2],j=n[3],c=n[6],S=n[7],U=n[11];n[1]=n[4],n[2]=n[8],n[3]=n[12],n[4]=f,n[6]=n[9],n[7]=n[13],n[8]=h,n[9]=c,n[11]=n[14],n[12]=j,n[13]=S,n[14]=U},rf=function(a){var b=a[0],r=a[1],j=a[2],$=a[3],Q=a[4],X=a[5],U=a[6],z=a[7],n=a[8],u=a[9],Z=a[10],v=a[11],A=a[12],e=a[13],p=a[14],t=a[15],k=b*X-r*Q,x=b*U-j*Q,q=b*z-$*Q,d=r*U-j*X,P=r*z-$*X,y=j*z-$*U,G=n*e-u*A,I=n*p-Z*A,_=n*t-v*A,c=u*p-Z*e,W=u*t-v*e,R=Z*t-v*p,O=k*R-x*W+q*c+d*_-P*I+y*G;return O?(O=1/O,a[0]=(X*R-U*W+z*c)*O,a[1]=(j*W-r*R-$*c)*O,a[2]=(e*y-p*P+t*d)*O,a[3]=(Z*P-u*y-v*d)*O,a[4]=(U*_-Q*R-z*I)*O,a[5]=(b*R-j*_+$*I)*O,a[6]=(p*q-A*y-t*x)*O,a[7]=(n*y-Z*q+v*x)*O,a[8]=(Q*W-X*_+z*G)*O,a[9]=(r*_-b*W-$*G)*O,a[10]=(A*P-e*q+t*k)*O,a[11]=(u*q-n*P-v*k)*O,a[12]=(X*I-Q*c-U*G)*O,a[13]=(b*c-r*I+j*G)*O,a[14]=(e*x-A*d-p*k)*O,a[15]=(n*d-u*x+Z*k)*O,void 0):J},_o=function(W,P){if(P){var d=P[0],K=P[1],x=P[2];W[12]=W[0]*d+W[4]*K+W[8]*x+W[12],W[13]=W[1]*d+W[5]*K+W[9]*x+W[13],W[14]=W[2]*d+W[6]*K+W[10]*x+W[14],W[15]=W[3]*d+W[7]*K+W[11]*x+W[15]}},up=function(J,W){if(W){var r=W[0],H=W[1],d=W[2];J[0]=J[0]*r,J[1]=J[1]*r,J[2]=J[2]*r,J[3]=J[3]*r,J[4]=J[4]*H,J[5]=J[5]*H,J[6]=J[6]*H,J[7]=J[7]*H,J[8]=J[8]*d,J[9]=J[9]*d,J[10]=J[10]*d,J[11]=J[11]*d}},ho=function(y,d,k){var u=d[0],a=d[1],t=d[2],M=d[3],U=d[4],$=d[5],K=d[6],l=d[7],C=d[8],F=d[9],T=d[10],m=d[11],n=d[12],w=d[13],Q=d[14],c=d[15],i=k[0],p=k[1],L=k[2],x=k[3];return y[0]=i*u+p*U+L*C+x*n,y[1]=i*a+p*$+L*F+x*w,y[2]=i*t+p*K+L*T+x*Q,y[3]=i*M+p*l+L*m+x*c,i=k[4],p=k[5],L=k[6],x=k[7],y[4]=i*u+p*U+L*C+x*n,y[5]=i*a+p*$+L*F+x*w,y[6]=i*t+p*K+L*T+x*Q,y[7]=i*M+p*l+L*m+x*c,i=k[8],p=k[9],L=k[10],x=k[11],y[8]=i*u+p*U+L*C+x*n,y[9]=i*a+p*$+L*F+x*w,y[10]=i*t+p*K+L*T+x*Q,y[11]=i*M+p*l+L*m+x*c,i=k[12],p=k[13],L=k[14],x=k[15],y[12]=i*u+p*U+L*C+x*n,y[13]=i*a+p*$+L*F+x*w,y[14]=i*t+p*K+L*T+x*Q,y[15]=i*M+p*l+L*m+x*c,y},Ip=function(K,X,B,q){var m,$,C,i,y,U,r,V,s,u,g=X[0],n=X[1],p=X[2],A=q[0],R=q[1],O=q[2],P=B[0],N=B[1],a=B[2];return k(g-P)<Oo&&k(n-N)<Oo&&k(p-a)<Oo?Kr(K):(r=g-P,V=n-N,s=p-a,u=1/Z(r*r+V*V+s*s),r*=u,V*=u,s*=u,m=R*s-O*V,$=O*r-A*s,C=A*V-R*r,u=Z(m*m+$*$+C*C),u?(u=1/u,m*=u,$*=u,C*=u):(m=0,$=0,C=0),i=V*C-s*$,y=s*m-r*C,U=r*$-V*m,u=Z(i*i+y*y+U*U),u?(u=1/u,i*=u,y*=u,U*=u):(i=0,y=0,U=0),K[0]=m,K[1]=i,K[2]=r,K[3]=0,K[4]=$,K[5]=y,K[6]=V,K[7]=0,K[8]=C,K[9]=U,K[10]=s,K[11]=0,K[12]=-(m*g+$*n+C*p),K[13]=-(i*g+y*n+U*p),K[14]=-(r*g+V*n+s*p),K[15]=1,K)
},In=function($,o,e,W,Z){var S=1/n(o/2),O=1/(W-Z);return $[0]=S/e,$[1]=0,$[2]=0,$[3]=0,$[4]=0,$[5]=S,$[6]=0,$[7]=0,$[8]=0,$[9]=0,$[10]=(Z+W)*O,$[11]=-1,$[12]=0,$[13]=0,$[14]=2*Z*W*O,$[15]=0,$},sm=function(p,I,O,F,y,_,z){var J=1/(I-O),b=1/(F-y),X=1/(_-z);return p[0]=-2*J,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=-2*b,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=2*X,p[11]=0,p[12]=(I+O)*J,p[13]=(y+F)*b,p[14]=(z+_)*X,p[15]=1,p},Fe=function(K,Z){var B=Z[0],s=Z[1],X=Z[2],E=Z[3],m=B*B+s*s+X*X+E*E,O=m?1/m:0;return K[0]=-B*O,K[1]=-s*O,K[2]=-X*O,K[3]=E*O,K},Ii=function(z,y){var D=y[0]+y[5]+y[10],b=0;return D>0?(b=2*Math.sqrt(D+1),z[3]=.25*b,z[0]=(y[6]-y[9])/b,z[1]=(y[8]-y[2])/b,z[2]=(y[1]-y[4])/b):y[0]>y[5]&y[0]>y[10]?(b=2*Math.sqrt(1+y[0]-y[5]-y[10]),z[3]=(y[6]-y[9])/b,z[0]=.25*b,z[1]=(y[1]+y[4])/b,z[2]=(y[8]+y[2])/b):y[5]>y[10]?(b=2*Math.sqrt(1+y[5]-y[0]-y[10]),z[3]=(y[8]-y[2])/b,z[0]=(y[1]+y[4])/b,z[1]=.25*b,z[2]=(y[6]+y[9])/b):(b=2*Math.sqrt(1+y[10]-y[0]-y[5]),z[3]=(y[1]-y[4])/b,z[0]=(y[8]+y[2])/b,z[1]=(y[6]+y[9])/b,z[2]=.25*b),z},dc=function(v,n,w){var M=n[0],F=n[1],C=n[2],N=n[3],y=M+M,j=F+F,S=C+C,e=M*y,A=M*j,s=M*S,W=F*j,J=F*S,p=C*S,r=N*y,I=N*j,k=N*S;return v[0]=1-(W+p),v[1]=A+k,v[2]=s-I,v[3]=0,v[4]=A-k,v[5]=1-(e+p),v[6]=J+r,v[7]=0,v[8]=s+I,v[9]=J-r,v[10]=1-(e+W),v[11]=0,v[12]=w[0],v[13]=w[1],v[14]=w[2],v[15]=1,v},kj=r.getRotationFromMatrix4,Xi=function(){var J=[0,0,0],X=[0,0,0],p=[0,0,0],g=function(L,q,S){L[0]=q[1]*S[2]-q[2]*S[1],L[1]=q[2]*S[0]-q[0]*S[2],L[2]=q[0]*S[1]-q[1]*S[0]},a=function(P){return P[0]*P[0]+P[1]*P[1]+P[2]*P[2]},l=function(v){var h=Math.sqrt(a(v));v[0]/=h,v[1]/=h,v[2]/=h},h=function(L,o,g){L[0]=o[0]-g[0],L[1]=o[1]-g[1],L[2]=o[2]-g[2]};return function(u,T,v){var j=Ln();return h(p,u,T),0===a(p)&&(p[2]=1),l(p),g(J,v,p),0===a(J)&&(1===Math.abs(v[2])?p[0]+=1e-4:p[2]+=1e-4,l(p),g(J,v,p)),l(J),g(X,p,J),j[0]=J[0],j[4]=X[0],j[8]=p[0],j[1]=J[1],j[5]=X[1],j[9]=p[1],j[2]=J[2],j[6]=X[2],j[10]=p[2],j}}(),nf=function(v,L){return Ip(L?L:Ln(),v._eye,v._center,v._up)},Le=function(Y){var q=Y.getAspect(),s=Y._near,f=Y._far,v=Ln();if(Y._ortho){var x=Y._orthoWidth/2,u=x/q;sm(v,-x,x,-u,u,s,f)}else In(v,Y._fovy,q,s,f);return v},Ac=function(a,H){if(!a)return J;var x=0,O=1,z=2,A=[],T=0,g=a.length,U=g/3;if(H){for(;g>T;T++)A[T]=0;for(T=0;T<H.length;T+=3){var h=[],M=[],u=[];h[x]=a[3*H[T+1]+x]-a[3*H[T]+x],h[O]=a[3*H[T+1]+O]-a[3*H[T]+O],h[z]=a[3*H[T+1]+z]-a[3*H[T]+z],M[x]=a[3*H[T+2]+x]-a[3*H[T+1]+x],M[O]=a[3*H[T+2]+O]-a[3*H[T+1]+O],M[z]=a[3*H[T+2]+z]-a[3*H[T+1]+z],u[x]=h[O]*M[z]-h[z]*M[O],u[O]=h[z]*M[x]-h[x]*M[z],u[z]=h[x]*M[O]-h[O]*M[x];for(var F=0;3>F;F++)A[3*H[T+F]+x]+=u[x],A[3*H[T+F]+O]+=u[O],A[3*H[T+F]+z]+=u[z]}}else for(T=0;U>T;T+=3){var h=[],M=[],u=[];h[x]=a[3*(T+1)+x]-a[3*T+x],h[O]=a[3*(T+1)+O]-a[3*T+O],h[z]=a[3*(T+1)+z]-a[3*T+z],M[x]=a[3*(T+2)+x]-a[3*(T+1)+x],M[O]=a[3*(T+2)+O]-a[3*(T+1)+O],M[z]=a[3*(T+2)+z]-a[3*(T+1)+z],u[x]=h[O]*M[z]-h[z]*M[O],u[O]=h[z]*M[x]-h[x]*M[z],u[z]=h[x]*M[O]-h[O]*M[x];for(var F=0;3>F;F++)A[3*(T+F)+x]=u[x],A[3*(T+F)+O]=u[O],A[3*(T+F)+z]=u[z]}for(T=0;g>T;T+=3){var C=[];C[x]=A[T+x],C[O]=A[T+O],C[z]=A[T+z];var S=Z(C[x]*C[x]+C[O]*C[O]+C[z]*C[z]);0===S&&(S=Oo),C[x]=C[x]/S,C[O]=C[O]/S,C[z]=C[z]/S,A[T+x]=C[x],A[T+O]=C[O],A[T+z]=C[z]}return new Jg(A)},Zi=function(X,C,O,s){if(O||(O=X.createTexture()),C){var o=X.TEXTURE_2D,T=X.REPEAT,i=X.CLAMP_TO_EDGE,$=X.TEXTURE_MIN_FILTER;s!==X.NEAREST&&(s=X.LINEAR),Tl(X,O),X.texImage2D(o,0,X.RGBA,X.RGBA,X.UNSIGNED_BYTE,C),Og(X,X.TEXTURE_MAG_FILTER,s),Km(C.width)&&Km(C.height)&&!C.clampToEdge?(Og(X,X.TEXTURE_WRAP_S,T),Og(X,X.TEXTURE_WRAP_T,T),Og(X,$,X.LINEAR_MIPMAP_LINEAR),X.generateMipmap(o)):(Og(X,X.TEXTURE_WRAP_S,i),Og(X,X.TEXTURE_WRAP_T,i),Og(X,$,s)),Tl(X,J)}return O},ne=function(e,b){var O=new Uint8Array(3);return b=b||e.createTexture(),Tl(e,b),Og(e,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGB,1,1,0,e.RGB,e.UNSIGNED_BYTE,O),b},gh=function(N){N._26I&&N._prg&&(N._26I.deleteProgram(N._prg),N._prg=J)},Ag=function(j,Y,M,U){var S=j.createShader(M);return j.shaderSource(S,U),j.compileShader(S),j.attachShader(Y,S),S},di=function(A){return A.createBuffer()},Tl=function(c,k){c.bindTexture(c.TEXTURE_2D,k)},wl=function(R,L){R.bindFramebuffer(R.FRAMEBUFFER,L)},Og=function(k,y,r){k.texParameteri(k.TEXTURE_2D,y,r)},jf=function(N,b){if(b){var b=Gj(b);N.clearColor(b[0],b[1],b[2],b[3])}},Rb=function(C,O){lp(C,O.uFix,!0),Ef(C,O.aNormal)},vj=function(W,S){lp(W,S.uFix,!1),Pe(W,S.aNormal)},Uh=function(b,v,E,p,$,O,t,q){b._picking||(E?(lp(b,v.uBlend,!0),lp(b,v.uBlendColor,E)):lp(b,v.uBlend,!1),lp(b,v.uLight,p==J?!0:p),On($)&&1!==$&&lp(b,v.uPartOpacity,$),lp(b,v.uReverseFlip,O==J?!1:O),lp(b,v.uFixPickReverseColor,t||vo)),q?b.enable(b.CULL_FACE):b.disable(b.CULL_FACE)},Wg=function(y,c){y._picking||lp(y,c.uPartOpacity,1)},bc=function(z,b,W,h,E,u,C,I,Y){if(!W)return z.activeTexture(z.TEXTURE0),Tl(z,z._emptyTexture),z.activeTexture(z.TEXTURE1),Tl(z,z._emptyBlendTexture),void 0;lp(z,b.uTexture,!0),lp(z,b.uDiscardSelectable,Kb(h)?h:!0),Pe(z,b.aUv),xp(z,E,u,b.aUv,2),Y?(lp(z,b.uBlendTexture,!0),z.activeTexture(z.TEXTURE1),Tl(z,Y),z.uniform1i(b.uBlendSampler,1)):(lp(z,b.uBlendTexture,!1),z.activeTexture(z.TEXTURE1),Tl(z,z._emptyBlendTexture)),z.activeTexture(z.TEXTURE0),Tl(z,W),z.uniform1i(b.uSampler,0);var l=[0,0,1,1];C&&(l[0]=C[0],l[1]=C[1]),I&&(l[2]=I[0],l[3]=I[1]),lp(z,b.uOffsetScale,l)},Zc=function(s,V,d){s.activeTexture(s.TEXTURE0),Tl(s,J),s.activeTexture(s.TEXTURE1),Tl(s,J),d&&(Ef(s,V.aUv),lp(s,V.uTexture,!1),lp(s,V.uBlendTexture,!1))},Nh=function(o,B,T,E,I,d){!T||y||m||o.lineWidth(T),E&&!o._picking&&lp(o,B.uFixPickReverseColor,E),I&&xp(o,I,d,B.aPosition)},mo=function(y,g,W,L){Oh&&(L=y[Oh]),y.drawArrays(L==J?y.TRIANGLES:L,g,W);var _=y._renderInfo;_&&(_.calls++,_.vertices+=W,(L==J||L===y.TRIANGLES)&&(_.faces+=W/3),L===y.LINES&&(_.lines+=W/2))},zi=function(A,F,I,y){Oh&&(y=A[Oh]),A.drawElements(y==J?A.TRIANGLES:y,I,A.UNSIGNED_SHORT,F==J?0:2*F);var B=A._renderInfo;B&&(B.calls++,B.vertices+=I,(y==J||y===A.TRIANGLES)&&(B.faces+=I/3),y===A.LINES&&(B.lines+=I/2))},sb=function(k,b,O,o,D){var C=k.ARRAY_BUFFER;k.bindBuffer(C,b),O&&k.bufferData(C,O,k.STATIC_DRAW),o!=J&&k.vertexAttribPointer(o,D?D:3,k.FLOAT,!1,0,0)},xp=function(g,O,I,V,h){return I?(nl(g,g.ARRAY_BUFFER,O,I),V!=J&&g.vertexAttribPointer(V,h?h:3,g.FLOAT,!1,0,0),void 0):sb(g,O,I,V,h)},Yn=function(X,N,T){var _=X.ELEMENT_ARRAY_BUFFER;X.bindBuffer(_,N),T&&X.bufferData(_,T,X.STATIC_DRAW)},Hp=function(v,K,E){nl(v,v.ELEMENT_ARRAY_BUFFER,K,E)},nl=function(f,C,D,b){var D,L=b.glBuf,i=f._id;L&&(D=L[i])&&D._buf?f.bindBuffer(C,D._buf):(D={_buf:di(f)},f._bufPool.push(D),f.bindBuffer(C,D._buf),f.bufferData(C,b,f.STATIC_DRAW),L||(L=b.glBuf={}),L[i]=D),D._fid=f._renderInfo.frame},lp=function(F,d,X){if(X!=J&&d!=J){X=Gj(X);var s=X.length;3===s?F.uniform3fv(d,X):4===s?F.uniform4fv(d,X):16===s?F.uniformMatrix4fv(d,!1,X):Kb(X)?F.uniform1i(d,X?1:0):2===s?F.uniform2fv(d,X):F.uniform1f(d,X)}},Pe=function(M,S){S!=J&&S>=0&&M.enableVertexAttribArray(S)},Ef=function(j,Q){Q!=J&&Q>=0&&j.disableVertexAttribArray(Q)},Jm=function(V,d){var M=V.getGL(),W=V._prg;V._7O=V._8O.pop(),d&&(lp(M,W.uMVMatrix,V._7O),V._6O=d,lp(M,W.uNMatrix,d))},Kk=function(x,k){return k||(k=Ln()),ok(k,x),rf(k),oo(k),k},Zk=function(h,w){var W=h.getGL(),R=h._prg,s=h._7O;w&&(h._8O.push(Gp(s)),ho(s,s,w)),lp(W,R.uMVMatrix,s),lp(W,R.uNMatrix,Kk(s,h._6O))},Bf=function(L,_,H,Q,h,b){if(H){if(Q){var U=H.value++,X=2147483648|U,B=[(255&X>>16)/255,(255&X>>8)/255,(255&X)/255,(255&X>>24)/255];H[U]={data:h,part:b}}else B=Be;return lp(L,_.uFixPickReverseColor,B),B}},zl=function(){var h={center:function(P,N,J,v,K){var C=-N[1]/2,L={x:-N[0]/2,y:C,width:N[0],height:N[1]},H=Dh(P,L,J);return[H.x+v,-H.y-K,Yg()]},front:function(d,l,Z,O,N){var A=-l[1]/2,W={x:-l[0]/2,y:A,width:l[0],height:l[1]},D=Dh(d,W,Z);return[D.x+O,-D.y-N,l[2]/2+Yg()]},back:function(m,d,f,N,I){var k=-d[0]/2,n=-d[1]/2,O={x:k,y:n,width:d[0],height:d[1]},y=Dh(m,O,f);return[-y.x-N,-y.y-I,-d[2]/2-Yg()]},left:function(z,F,r,O,B){var M=-F[1]/2,n={x:-F[2]/2,y:M,width:F[2],height:F[1]},$=Dh(z,n,r);return[-F[0]/2-Yg(),-$.y-B,$.x+O]},right:function(k,U,u,B,J){var p=-U[2]/2,A=-U[1]/2,Z={x:p,y:A,width:U[2],height:U[1]},Y=Dh(k,Z,u);return[U[0]/2+Yg(),-Y.y-J,-Y.x-B]},top:function(G,X,h,i,P){var q={x:-X[0]/2,y:-X[2]/2,width:X[0],height:X[2]},f=Dh(G,q,h);return[f.x+i,X[1]/2+Yg(),f.y+P]},bottom:function(L,u,c,M,a){var w=-u[2]/2,t={x:-u[0]/2,y:w,width:u[0],height:u[2]},F=Dh(L,t,c);return[F.x+M,-u[1]/2-Yg(),-F.y-a]}};return function(l,u,K,m,Y,o){return h[m](l,u,K,Y||0,o||0)}}(),Jc=function(R,N,P,s,Y,d,X,H,m,b){if(Y&&(N[0]+=Y[0],N[1]+=Y[1],N[2]+=Y[2]),_o(R,P),H){var L=Ln();if(Oq(L,m,b),Nq(N,L),_o(R,N),R.auto=H,R.pos=Nq([0,0,0],R),d){var i=R.mat2=Ln();Oq(i,d,X)}}else Oq(R,m,b),_o(R,N),s===fh?Qc(R,-$):s===um?Qc(R,$):s===Wc?Kl(R,-$):s===Wb?Kl(R,$):s===Id&&Qc(R,I),Oq(R,d,X);return R},Kh=function(f,x){var C=x.auto,X=x.mat2,D=f.gv;if(C){var v,t=Ln(),j=[0,0,0,0];v="string"==typeof C?[C.indexOf("x")<0?D._eye[0]:D._center[0],C.indexOf("y")<0?D._eye[1]:D._center[1],C.indexOf("z")<0?D._eye[2]:D._center[2]]:D._eye,Ii(j,Ip(Ln(),v,D._center,D._up)),dc(t,Fe(j,j),x.pos),X&&ho(t,t,X),Zk(D,t)}else Zk(D,x)},Ul=function(b,O,S,h,a){var E=b.s,d=b.gv,o=d.getGL(),Z=d._prg,m=d._buffer,X=d._1O;Zi(o,cn,X),Kh(b,S),Uh(o,Z,E(O+".blend"),E(O+".light"),E(O+".opacity"),E(O+".reverse.flip"),E(O+".reverse.color"),E(O+".reverse.cull")),bc(o,Z,X,a,m.uv,dq),xp(o,m.vs,h,Z.aPosition),xp(o,m.ns,ci,Z.aNormal),Hp(o,m.is,Ad),zi(o,0,Ad.length),Zc(o,Z,X),Wg(o,Z),Jm(d)},Hr=function(l,k,R){var S=l.gv,H=l.data,T=l[k]={blend:S.getBodyColor(H)||S.getFaceBlend(H,k),light:S.getFaceLight(H,k),color:S.getFaceColor(H,k),opacity:S.getFaceOpacity(H,k),transparent:S.getFaceTransparent(H,k),reverseFlip:S.getFaceReverseFlip(H,k),reverseColor:S.getFaceReverseColor(H,k),reverseCull:S.getFaceReverseCull(H,k),texture:S.getFaceImage(H,k),blendTexture:S.getFaceBlendImage(H,k),discardSelectable:S.getFaceDiscardSelectable(H,k)};if("csg"!==k){T.uv=S.getFaceUv(H,k)||R&&R[k+"Uv"],T.uvScale=S.getFaceUvScale(H,k)||R&&R[k+"UvScale"],T.uvOffset=S.getFaceUvOffset(H,k)||R&&R[k+"UvOffset"];var u=S.getFaceMat(H,k);u&&(T.mat=ao(H,u))}return T},Sl=function(O,u,s,A,T){if(A){if(!T(A.transparent))return;var P=O.data,X=O.gv,W=X._buffer,v=X.getTexture(A.texture,P),B=X.getTexture(A.blendTexture,P);bc(u,s,v,A.discardSelectable,W.uv,A.tuv,A.uvOffset,A.uvScale,B),Uh(u,s,A.blend,A.light,A.opacity,A.reverseFlip,A.reverseColor,A.reverseCull),lp(u,s.uDiffuse,A.color),xp(u,W.vs,A.vs,s.aPosition),xp(u,W.ns,A.ns,s.aNormal),mo(u,0,A.vs.length/3),Wg(u,s),Zc(u,s,v)}},lo=function(R,x,y,z,w,h){var L,E,T,c,u,I,t,$,K,o,v,e=[z-x,w-y],H=R?R.length:0;for(T=0;H>T;T++){for(c=2,L=R[T],u=L[0],I=L[1];c+1<L.length;){if(t=L[c],$=L[c+1],E=kb(x,y,z,w,u,I,t,$,!0)){K=[t-u,$-I],o=ii(K),K[0]/=o,K[1]/=o,o=hl(e,K),o=o>0?h:-h,v=[K[0]*o,K[1]*o];break}u=t,I=$,c+=2}if(v)break}if(v)for(z=x+v[0],w=y+v[1],T=0;H>T;T++)for(c=2,L=R[T],u=L[0],I=L[1];c+1<L.length;){if(t=L[c],$=L[c+1],E=kb(x,y,z,w,u,I,t,$,!0))return[0,0];u=t,I=$,c+=2}return v?v:[z-x,w-y]},nc=A.graph3d={},Gg=function(K,R,T){js(u+".graph3d."+K,R,T)},or="~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh!gjeof$!~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj!ITBE!gfegj$!!gjeof$!~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!!gjeof$!~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!~<wVb!>!wVs|*fsvuyfUeofmCv)gj~<x{/fmbdTuftggPv!+!wVb!,!zy/fmbdTuftggPv!>!wVw|*fsvuyfUv)gj~<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVs!3dfw!hojzsbw<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<fmbdTuftggPv!5dfw!nspgjov<fsvuyfUeofmCv!mppc!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",ik="~~<eJ!>!spmpDhbsG`mh~<spmpDsfmqnbTwv!>+!eJ<*wVs!-sfmqnbTeofmCv)E3fsvuyfu!>!spmpDsfmqnbTwv!5dfw|!*fsvuyfUeofmCv)!gj!!gjeof$!~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~!gjeof$!<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg<x/esppDhbsG`mh0{/esppDhbsG`mh!>!iuqfe!ubpmg!HPG!gfegj$!!gjeof$!~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTv)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTv!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQv!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEv)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~!gjeof$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!~<spmpd!>!eJ|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw<*yfusfWw.)f{jmbnspo!>!F!4dfw<*mbnspOw)f{jmbnspo!>!O!4dfw!gjeof$!<ftvggjEv!>!spmpd!ftmf$!~<ftvggjEv!>!spmpd|ftmf~<spmpDidubCw!>!spmpd|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!<spmpd!5dfw|!ftmf~!gjeof$!~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*!fdobutjEitbEv!?!*!fdobutjEqbHitbEv!-fdobutjEfojMw!)epn!%%!itbEv)!gj!ITBE!gfegj$!!gjeof$!<spmpDftsfwfSldjQyjGv!>!eJ!ftmf$!~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*yjGv)gj<eJ!5dfw|ftmf~~!<esbdtje!|!*1/1!>>!b/spmpDhbsG`mh)!gj!gjeof$!<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh!ftmf$!~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*ldjQv)gj~~~!<esbdtje!|!*utfUbiqmBv!>=!b/spmpDwv)!gj!!!!|!ftmf~~!<esbdtje!|!*1/1!>>!b/spmpDwv)!gj!!!!|!*uofsbqtobsUv)!gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov<spmpDhpGv!5dfw!nspgjov!HPG!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<spmpDuihjmebfIv!5dfw!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<wVs!3dfw!hojzsbw<sfmqnbTeofmCv!E3sfmqnbt!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUeofmCv!mppc!nspgjov<fsvuyfUv!mppc!nspgjov<uofsbqtobsUv!mppc!nspgjov<utfUbiqmBv!ubpmg!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov!YJGFSQ!gjeof$!!gjeof$!!<ubpmg!qnvjefn!opjtjdfsq!!ftmf$!!<ubpmg!qihji!opjtjdfsq!!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!!TF`MH!gfegj$!";vf(r,{setBatchInfo:function(x,t){kg[x]=t},getBatchInfo:function(u){return kg[u]}},!0);var Hi=[1,1,1],Si=[1,0,0,0,0,1,0,1,1,1,1,0],Lj=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],Oj=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],Di=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],Ah=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],fm=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],sq=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],ys=function(h,Q){nm(h,Q,"_batchModelMap","_batchIndexMap"),Ob(h,Q,"_wireframeModelMap","_wireframeIndexMap"),Ob(h,Q,"_polylineModelMap","_polylineIndexMap"),Ob(h,Q,"_wireframeModelMapSwap","_wireframeIndexMapSwap"),Ob(h,Q,"_polylineModelMapSwap","_polylineIndexMapSwap")},nm=function(u,v,i,x){if(!v)return u[i]={},u[x]={},void 0;var O=v._id,D=u[x],p=D[O];if(p){var U=u[i],q=p.batch,k=U[q],G=k.ds,L=p.index;if(k.invalidate=!0,delete D[O],G.splice(L,1),If(G))return delete U[q],void 0;for(var c=p.begin,o=p.size,Q=3*c,S=3*o,K=4*c,$=4*o,T=k.vs,M=k.ps,Z=k.uv,z=k.cs,d=k.bs,R=k.rs,E=k.ns,Y=k.ls;L<G.length;L++)p=D[G[L]._id],p.index--,p.begin-=o;T.splice(Q,S),M.splice(K,$),Z&&Z.splice(2*c,2*o),z&&z.splice(K,$),d&&d.splice(Q,S),R&&R.splice(c,o),E&&E.splice(Q,S),Y&&Y.splice(c,o)}},Ob=nm,Jq=function(e,r,V,g){if(!g)return J;var G=r[g];if(!G){var L=kg[g]||fs,y=L.image?[]:J;G=r[g]={vs:[],ns:[],uv:y,cs:y?J:L.color?J:[],bs:L.blend?[]:J,ps:[],rs:L.brightness?[]:J,ds:[]}}return G.invalidate=!0,e[V._id]={index:G.ds.length,begin:G.vs.length/3,batch:g},G.ds.push(V),G},Xe=function(h,U){return U!=J&&1!==U?[h[0]*U,h[1]*U,h[2]*U,h[3]]:h},So=function(W,C,I){var D=W.getBrightness(C),O=Gj(I.color||"white"),m=O[3]<1,N=Math.ceil(I.width)||1,l=(m?"T":"O")+N,M=W._wireframeIndexMap,U=W._wireframeModelMap,d=U[l];d||(d=U[l]={vs:[],cs:[],ps:[],ds:[],T:m,W:N});var n,Q=W.getData3dUI(C),g=rq(Q);if(I.geometry){if(!g)return;if(n=Ce(g),!n)return}else n=I.short?dp:Qo;d.invalidate=!0;var w=d.vs,E=d.cs,v=d.ds,h=M[C._id]={index:v.length,begin:w.length/3,batch:l};v.push(C);var _=ao(C,I.mat),X=Q._calcAnchorMat(C);X&&ho(_,_,X),ub(w,_,n);var c=h.size=w.length/3-h.begin;ke(E,Xe(O,D),c)},xe=function(U,Q,x,C,S,G,T,H,g){var n=U.getBrightness(Q);n==J&&(n=1);var P=Xe(Gj(C),n),p=P[3]<1;G=Math.ceil(G)||1;var c=(p?"T":"O")+G;if(T){var j=T[0],d=(T[1]||j)+j;c+="-"+j+"-"+d,g&&(c+="-"+fk(g)+"-"+n,g=Xe(Gj(g),n))}var e=U._polylineIndexMap,h=U._polylineModelMap,F=h[c];F||(F=h[c]={vs:[],cs:[],ps:[],ds:[],ls:T?[]:J,T:p,W:G},T&&(F.D=j,F.G=d,F.A=g)),F.invalidate=!0;var b,f=F.vs,s=F.cs,q=F.ds,w=F.ls,E=e[Q._id]={index:q.length,begin:f.length/3,batch:c};q.push(Q),im(f,x);var R,N=E.size=f.length/3-E.begin,X=x.length,l=0,K=[];if(T||S)for(b=0;X>b;b+=6)R=ii([x[b],x[b+1],x[b+2]],[x[b+3],x[b+4],x[b+5]]),K.push(R),l+=R;if(l&&S){var Y,y=Xe(Gj(S),n),D=[y[0]-P[0],y[1]-P[1],y[2]-P[2],y[3]-P[3]],m=0;for(b=0;X>b;b+=6)Y=m/l,ke(s,[P[0]+D[0]*Y,P[1]+D[1]*Y,P[2]+D[2]*Y,P[3]+D[3]*Y],1),m+=K[b/6],Y=m/l,ke(s,[P[0]+D[0]*Y,P[1]+D[1]*Y,P[2]+D[2]*Y,P[3]+D[3]*Y],1)}else ke(s,P,N);if(T)for(m=H||0,b=0;X>b;b+=6)w.push(m),m+=K[b/6],w.push(m)},qf=function(u,B,E){if(B)for(var M=4*B.begin,q=E[B.batch].ps,f=0;f<B.size;f++)q[M++]=u[0],q[M++]=u[1],q[M++]=u[2],q[M++]=u[3]},Sc=function(Z,Y){var h=Y+["32"],Q=Z[Y],y=Z[h];Q?y&&y.length===Q.length?(y.set(Q),y.glBuf=null):Z[h]=new Jg(Q):delete Z[h]},Oe=function(R,t,J,P,l,e,v,w,f){if(Ji(J))J.forEach(function(W){Oe(R,t,W,P,l,e,v,w,f)});else if(se(J))Oe(R,t,rq(P,J),P,l,e,v,w,f);else if(Vc(J)){var q,d=dg(J.mat,t,R),o=dg(J.s3,t,R),c=dg(J.t3,t,R),x=dg(J.r3,t,R);if((o||x||c||d)&&(q=fj(d,o,x,dg(J.rotationMode,t,R),c),e.push(q)),J.shape3d)Oe(R,t,J.shape3d,P,l,e,v,w,J);else{var z=P.s;f=f||fs;var K=e[0],X=e.length,s=z("shape3d.color",J.color,f.color);if(l||(l=z("shape3d.blend",J.blend,f.blend)),X>1){K=Gp(K);for(var I=1;X>I;I++)ho(K,K,e[I])}J.vs&&z(wo,J.visible,f.visible)&&kp(K,v,w,J.vs,J.uv,J.is,l,s),J.top_vs&&z(Cr,J.topVisible,f.topVisible)&&kp(K,v,w,J.top_vs,J.top_uv,J.top_is,l,z("shape3d.top.color",J.topColor,f.topColor)||s),J.bottom_vs&&z(Mi,J.bottomVisible,f.bottomVisible)&&kp(K,v,w,J.bottom_vs,J.bottom_uv,J.bottom_is,l,z("shape3d.bottom.color",J.bottomColor,f.bottomColor)||s),J.from_vs&&z(No,J.fromVisible,f.fromVisible)&&kp(K,v,w,J.from_vs,J.from_uv,J.from_is,l,z("shape3d.from.color",J.fromColor,f.fromColor)||s),J.to_vs&&z(sg,J.toVisible,f.toVisible)&&kp(K,v,w,J.to_vs,J.to_uv,J.to_is,l,z("shape3d.to.color",J.toColor,f.toColor)||s)}q&&e.pop()}},kp=function(y,W,D,z,d,S,k,o){var b,i=W.cs,l=W.uv,V=W.bs;if(S){b=S.length;for(var C=0;b>C;C++){var a=S[C];ub(D,y,[z[3*a],z[3*a+1],z[3*a+2]]),l&&im(l,[d[2*a],d[2*a+1]])}}else b=z.length/3,ub(D,y,z),l&&im(l,d);i&&ke(i,o,b),V&&(k?Oi(V,k,b):im(V,Hi,b))},sd=function(M,z,k,C){var T=[];C?Oe(M.gv,M.data,C,M,M.getBodyColor(),[z],k,T):(Bd(M,fh,z,k,T),Bd(M,um,z,k,T),Bd(M,Im,z,k,T),Bd(M,Id,z,k,T),Bd(M,Wc,z,k,T),Bd(M,Wb,z,k,T),Bd(M,"csg",z,k,T)),T.length&&(im(k.vs,T),im(k.ns,Ac(T)))},Bd=function(Y,R,F,H,I){var _=Y[R];if(_){var m=_.tuv;if(m){var G,S,y,d,W=_.uvScale,r=_.uvOffset;if(W)for(G=m.length,S=W[0],y=W[1],d=0;G>d;d+=2)m[d]*=S,m[d+1]*=y;if(r)for(G=m.length,S=r[0],y=r[1],d=0;G>d;d+=2)m[d]+=S,m[d+1]+=y}kp(F,H,I,_.vs,m,J,_.blend,_.color)}},ic=function(t,F,c,b,l,U,A,y){var d,L=c.cs,f=c.uv,$=c.bs;if(t.getFaceVisible(F,U)){var g=t.getFaceMat(F,U);if(g&&(l=ao(F,g)),ub(A,l,y),L&&ke(L,t.getFaceColor(F,U),6),f){var m=t.getFaceUv(F,U)||b[U+"Uv"],r=t.getFaceUvScale(F,U)||b[U+"UvScale"],n=t.getFaceUvOffset(F,U)||b[U+"UvOffset"];m=m?[m[6],m[7],m[0],m[1],m[2],m[3],m[2],m[3],m[4],m[5],m[6],m[7]]:Si;var Z=m[0],a=m[1],R=m[2],K=m[3],P=m[4],o=m[5],u=m[6],H=m[7],O=m[8],h=m[9],s=m[10],w=m[11];if(r){var x=r[0],G=r[1];Z*=x,a*=G,R*=x,K*=G,P*=x,o*=G,u*=x,H*=G,O*=x,h*=G,s*=x,w*=G}if(n){var v=n[0],C=n[1];Z+=v,a+=C,R+=v,K+=C,P+=v,o+=C,u+=v,H+=C,O+=v,h+=C,s+=v,w+=C}f.push(Z,a,R,K,P,o,u,H,O,h,s,w)}$&&(d=t.getBodyColor(F)||t.getFaceBlend(F,U),d?Oi($,d,6):im($,Hi,6))}},Ig=function(p,S,e,B){var Z=p.getGL(),m=p._prg,L=p._buffer;if(!Ep(S)){Zk(p),Rb(Z,m);for(var I in S){var b=S[I];if(!(B&&!b.T||!B&&b.T)){b.invalidate?(b.invalidate=!1,Sc(b,"vs"),Sc(b,"cs"),Sc(b,"ls"),Sc(b,"ps")):e&&Sc(b,"ps");var X=b.vs32,O=e?b.ps32:b.cs32;Nh(Z,m,b.W,J,L.vs,X);var v=b.D,l=!p._dashDisabled&&v;lp(Z,m.uAlphaTest,P.alphaTest),l&&(lp(Z,m.uDash,!0),lp(Z,m.uDashDistance,v),lp(Z,m.uDashGapDistance,b.G),Pe(Z,m.aLineDistance),xp(Z,L.lineDistance,b.ls32,m.aLineDistance,1),lp(Z,m.uDiffuse,b.A||Bm));var Y=!p._batchColorDisabled;Y&&(lp(Z,m.uBatchColor,!0),Pe(Z,m.aBatchColor),xp(Z,L.batchColor,O,m.aBatchColor,4)),bc(Z),mo(Z,0,X.length/3,Z.LINES),Zc(Z),Y&&(lp(Z,m.uBatchColor,!1),Ef(Z,m.aBatchColor)),l&&(lp(Z,m.uDash,!1),Ef(Z,m.aLineDistance))}}vj(Z,m)}},Hl=function(V,z,K){var w,U,k,n,g,m,I,q,_,S,F,$=V.getGL(),B=V._prg,y=V._buffer,Y=V._batchModelMap;if(!Ep(Y)){Zk(V);for(w in Y)if(U=kg[w]||fs,!(K&&!U.transparent||!K&&U.transparent)&&(k=Y[w],z||!U.transparentMask)){var E=K&&U.autoSort!==!1&&(V._33Q||k.invalidate);if(k.invalidate?(k.invalidate=!1,Sc(k,"vs"),Sc(k,"ns"),Sc(k,"cs"),Sc(k,"rs"),Sc(k,"ps"),Sc(k,"bs"),Sc(k,"uv")):z&&Sc(k,"ps"),g=k.vs32,m=z?k.ps32:k.cs32,_=k.uv32,I=k.bs32,q=k.rs32,F=g.length/3,E&&(k.is=po(g,V.getEye())),F){n=U.light,S=V.getTexture(U.image),Uh($,B,J,U.light,U.opacity,U.reverseFlip,U.reverseColor,U.reverseCull),m?V._batchColorDisabled||(lp($,B.uBatchColor,!0),Pe($,B.aBatchColor),xp($,y.batchColor,m,B.aBatchColor,4)):lp($,B.uDiffuse,U.color);var O=U.alphaTest;lp($,B.uAlphaTest,O===e?P.alphaTest:O);var W=I&&!V._batchBlendDisabled;W&&(lp($,B.uBatchBlend,!0),Pe($,B.aBatchBlend),xp($,y.batchBlend,I,B.aBatchBlend));var j=q&&!V._batchBrightnessDisabled;j&&(lp($,B.uBatchBrightness,!0),Pe($,B.aBatchBrightness),xp($,y.batchBrightness,q,B.aBatchBrightness,1)),_?bc($,B,S,U.discardSelectable,y.uv,_,U.uvOffset,U.uvScale):bc($),xp($,y.vs,g,B.aPosition),xp($,y.ns,k.ns32,B.aNormal),k.is?(Yn($,y.is,k.is),zi($,0,F)):mo($,0,F),_?Zc($,B,S):Zc($),m&&!V._batchColorDisabled&&(lp($,B.uBatchColor,!1),Ef($,B.aBatchColor)),W&&(lp($,B.uBatchBlend,!1),Ef($,B.aBatchBlend)),j&&(lp($,B.uBatchBrightness,!1),Ef($,B.aBatchBrightness)),Wg($,B)}}}},po=function(s,H){for(var e=s.length/3,Y=new Array(e),f=e/3,_=new Array(f),U=0;f>U;U++)_[U]=U;_.sort(function(G,i){var l=9*G,F=[(s[l]+s[l+3]+2*s[l+6])/4,(s[l+1]+s[l+4]+2*s[l+7])/4,(s[l+2]+s[l+5]+2*s[l+8])/4];l=9*i;var w=[(s[l]+s[l+3]+2*s[l+6])/4,(s[l+1]+s[l+4]+2*s[l+7])/4,(s[l+2]+s[l+5]+2*s[l+8])/4],d=ii(H,F)-ii(H,w);return d>0?-1:0>d?1:0});for(var U=0;f>U;U++){var k=3*U,r=3*_[U];Y[k]=r,Y[k+1]=r+1,Y[k+2]=r+2}return new rm(Y)},Ne={obj:function(U,Y){var M={mat:U.mat,s3:U.s3,r3:U.r3,rotationMode:U.rotationMode,t3:U.t3,cube:U.cube==J?!0:U.cube,center:U.center==J?!0:U.center,ignoreMtls:U.ignoreMtls,ignoreTransparent:U.ignoreTransparent,ignoreColor:U.ignoreColor,ignoreImage:U.ignoreImage,ignoreNormal:U.ignoreNormal,prefix:U.prefix,flipY:U.flipY,flipFace:U.flipFace,reverseFlipMtls:U.reverseFlipMtls,finishFunc:function(E,m){if(E){var m=[];for(var j in E){var B=E[j];m.rawS3=B.rawS3,m.push(B),U.eachModel&&U.eachModel(j,B)}m.json=U,Y(m)}else Y()}};r.loadObj(U.obj,U.mtl,M)}};r.getModelTypeHandlers=function(){return Ne},r.setModelTypeHandler=function(C,c){Ne[C]=c},r.getModelTypeHandler=function(i){return Ne[i]},r.handleModelLoaded=function(){},r.handleUnfoundModel=function(){};var hq=J,Ur=J,yg=function(G){hq&&!G._loadingModelView_&&(Ur||(Ur={}),Ur[G._loadingModelView_=Vb()]=G)},dr=function(V,C){hq||(hq={});var x=hq[V];if(x){if(x.url===C)return;x.request.onload=gi,x.request.onerror=gi}var A=new XMLHttpRequest;if(hq[V]={request:A,url:C},A.overrideMimeType&&A.overrideMimeType("text/plain"),C=r.beforeLoadURL(C),C.data){var t=r.parse(C.data);Sd(V,t,C)}else A.open("GET",encodeURI(C),!0),A.onload=function(i){if(200===this.status||0===this.status){var d=r.parse(i.target.response||i.target.responseText);Sd(V,d,C)}else $e(V,r.handleUnfoundModel(V,C)||J)},A.onerror=function(){$e(V,r.handleUnfoundModel(V,C)||J)},A.send(null)},Sd=function(n,f,d){var S=f.modelType;if(!S)return $e(n,f),r.handleModelLoaded(n,f),void 0;var H=r.getModelTypeHandler(S);if(H){var I=function(C){C?($e(n,C),r.handleModelLoaded(n,C)):$e(n,r.handleUnfoundModel(n,d)||J)};H(f,I)}else $e(n,r.handleUnfoundModel(n,d)||J)},$e=function(O,W){if(sj[O]=W,delete hq[O],Ep(hq)&&(hq=J,Ur)){for(var n in Ur){var M=Ur[n];M._2O&&(M._2O={}),M.invalidateAll&&M.invalidateAll(e,"modelLoaded",O),M.redraw&&M.redraw(),M.iv(),delete M._loadingModelView_}Ur=J}if(W&&Ur)for(var n in Ur){var M=Ur[n];M.invalidateAll&&M.invalidateAll(e,"modelLoading",O),M.redraw&&M.redraw(),M.iv()}},dq=new Jg([0,0,0,1,1,1,1,0]),ci=new Jg([0,0,1,0,0,1,0,0,1,0,0,1]),Ad=new rm([0,1,2,2,3,0]),yb=new Jg([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),Xo=new rm([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),ul=new Jg([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),Hj=Ac(yb,Xo),Qo=(new Jg([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new rm([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5]),dp=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],uf=function(x,X,c,O,y,E){E=E||16,x=x||16,X=X||0,c=c||x;var m,Q,f,g,h,U,n,b,s=.5,R=[],V=[],e=l/x,o=I/E;for(m=0;E>m;m++)for(h=m+1,g=m*o,b=h*o,Q=X;c>Q;Q++)U=Q+1,f=Q*e,n=U*e,R.push(s*j(g)*C(f),s*C(g),-s*j(g)*j(f),s*j(b)*C(n),s*C(b),-s*j(b)*j(n),s*j(g)*C(n),s*C(g),-s*j(g)*j(n),s*j(g)*C(f),s*C(g),-s*j(g)*j(f),s*j(b)*C(f),s*C(b),-s*j(b)*j(f),s*j(b)*C(n),s*C(b),-s*j(b)*j(n)),V.push(Q/x,m/E,U/x,h/E,U/x,m/E,Q/x,m/E,Q/x,h/E,U/x,h/E);if(O){var L=[],B=[];for(f=X*e,m=0;E>m;m++)h=m+1,g=m*o,b=h*o,L.push(0,0,0,s*j(b)*C(f),s*C(b),-s*j(b)*j(f),s*j(g)*C(f),s*C(g),-s*j(g)*j(f)),B.push(0,.5,X/x,h/E,X/x,m/E)}if(y){var W=[],d=[];for(f=c*e,m=0;E>m;m++)h=m+1,g=m*o,b=h*o,W.push(0,0,0,s*j(g)*C(f),s*C(g),-s*j(g)*j(f),s*j(b)*C(f),s*C(b),-s*j(b)*j(f)),d.push(1,.5,c/x,m/E,c/x,h/E)}return{vs:R,uv:V,from_vs:L,from_uv:B,to_vs:W,to_uv:d}},wj=function(V,i,s){V=V||.17,i=i||12,s=s||18,0>V?V=0:V>.25&&(V=.25);var w,q,P,A,W,T,H,R=.5,a=[],X=[],o=[],E=l/s,z=l/i,v=R-V;for(q=0;i>=q;q++)for(A=-I+q*z,T=C(A),W=j(A),w=0;s>=w;w++)P=w*E,H=v+V*T,a.push(C(P)*H,W*V,-j(P)*H),X.push(w/s,1-q/i);for(q=0;i>q;q++){var O=q*(s+1),u=(q+1)*(s+1);for(w=0;s>w;w++)o.push(O+w,u+w+1,u+w,O+w,O+w+1,u+w+1)}return{vs:a,uv:X,is:o}},Ab=function($,S,U,d,t,M,o){o=o||12,$=$||18,S=S||0,U=U||$,M=M||.17,0>M?M=0:M>.25&&(M=.25);var c,z,D,B,R,P,k,a,A,L,p=.5,h=[],i=[],n=l/$,K=l/o,H=p-M;for(D=0;o>D;D++)for(B=D+1,k=-I+D*K,a=-I+B*K,c=S;U>c;c++)z=c+1,R=c*n,P=z*n,A=H+M*C(k),L=H+M*C(a),h.push(C(R)*A,j(k)*M,-j(R)*A,C(P)*A,j(k)*M,-j(P)*A,C(P)*L,j(a)*M,-j(P)*L,C(R)*A,j(k)*M,-j(R)*A,C(P)*L,j(a)*M,-j(P)*L,C(R)*L,j(a)*M,-j(R)*L),i.push(c/$,1-D/o,z/$,1-D/o,z/$,1-B/o,c/$,1-D/o,z/$,1-B/o,c/$,1-B/o);if(d){var v=[],_=[];for(D=0;o>D;D++)B=D+1,k=-I+D*K,a=-I+B*K,R=S*n,A=H+M*C(k),L=H+M*C(a),v.push(C(R)*A,j(k)*M,-j(R)*A,C(R)*L,j(a)*M,-j(R)*L,C(R)*H,0,-j(R)*H),_.push(.5+.5*C(k),.5-.5*j(k),.5+.5*C(a),.5-.5*j(a),.5,.5)}if(t){var Y=[],W=[];for(D=0;o>D;D++)B=D+1,k=-I+D*K,a=-I+B*K,R=U*n,A=H+M*C(k),L=H+M*C(a),Y.push(C(R)*A,j(k)*M,-j(R)*A,C(R)*H,0,-j(R)*H,C(R)*L,j(a)*M,-j(R)*L),W.push(.5-.5*C(k),.5-.5*j(k),.5,.5,.5-.5*C(a),.5-.5*j(a))}return{vs:h,uv:i,from_vs:v,from_uv:_,to_vs:Y,to_uv:W}},Lg=function(r,D){for(var o,i,L,y=.5,X=16,V=[],E=[],k=[],n=l/X,F=0;X>=F;F++)o=F*n,i=C(o)*y,L=j(o)*y,V.push(i,-y,L,i,y,L),E.push(1-F/X,1,1-F/X,0);for(F=0;X>F;F++)k.push(2*F,2*F+1,2*F+3,2*F,2*F+3,2*F+2);if(D){var K=[],q=[],B=[];for(K.push(0,-y,0),q.push(.5,.5),F=0;X>=F;F++)o=F*n,i=C(o),L=j(o),K.push(i*y,-y,-L*y),q.push(.5+.5*i,.5+.5*L);
for(F=0;X>F;F++)B.push(0,F+2,F+1)}if(r){var z=[],J=[],H=[];for(z.push(0,y,0),J.push(.5,.5),F=0;X>=F;F++)o=F*n,i=C(o),L=j(o),z.push(i*y,y,-L*y),J.push(.5+.5*i,.5-.5*L);for(F=0;X>F;F++)H.push(0,F+1,F+2)}return{vs:V,uv:E,is:k,bottom_vs:K,bottom_uv:q,bottom_is:B,top_vs:z,top_uv:J,top_is:H}},Am=function(m,t,Q,M,H,w,L){m=m||12,t=t||0,Q=Q||m;for(var v,Z,q,c,_,A,F,b,h=.5,n=[],$=[],X=l/m,s=t;Q>s;s++)v=s+1,Z=s*X,q=v*X,c=C(Z)*h,_=j(Z)*h,A=C(q)*h,F=j(q)*h,n.push(c,-h,-_,A,-h,-F,c,h,-_,A,-h,-F,A,h,-F,c,h,-_),$.push(s/m,1,v/m,1,s/m,0,v/m,1,v/m,0,s/m,0);if(L){var V=[],S=[];for(s=t;Q>s;s++)Z=X*s,q=X*(s+1),c=C(Z),_=j(Z),A=C(q),F=j(q),V.push(c*h,-h,-_*h,0,-h,0,A*h,-h,-F*h),S.push(.5+.5*c,.5+.5*_,.5,.5,.5+.5*A,.5+.5*F)}if(w){var k=[],o=[];for(s=t;Q>s;s++)Z=X*s,q=X*(s+1),c=C(Z),_=j(Z),A=C(q),F=j(q),k.push(c*h,h,-_*h,A*h,h,-F*h,0,h,0),o.push(.5+.5*c,.5-.5*_,.5+.5*A,.5-.5*F,.5,.5)}if(M){var g=[],W=[];Z=X*t,c=C(Z)*h,_=j(Z)*h,b=t/m,g.push(0,h,0,0,-h,0,c,-h,-_,c,-h,-_,c,h,-_,0,h,0),W.push(0,0,0,1,b,1,b,1,b,0,0,0)}if(H){var R=[],E=[];Z=X*Q,c=C(Z)*h,_=j(Z)*h,b=Q/m,R.push(0,-h,0,0,h,0,c,h,-_,c,h,-_,c,-h,-_,0,-h,0),E.push(1,1,1,0,b,0,b,0,b,1,1,1)}return{vs:n,uv:$,bottom_vs:V,bottom_uv:S,top_vs:k,top_uv:o,from_vs:g,from_uv:W,to_vs:R,to_uv:E}},zk=function(R,S,b,E,w){S=S||18,b=b||0,E=E==J?l:E,w=w==J?.5:w;for(var X,r,N,P,I,m,e=[0,.5,.75,.875,.9375],F=[],y=[],g=[],s=E/S,A=0;A<e.length;A++){var p=0===A%2?0:.5;for(X=0;S>=X;X++)r=(X+p)*s+b,N=1-e[A],F.push(C(r)*w*N,-w+2*e[A]*w,-j(r)*w*N),y.push((X+p)/S,N)}for(A=0;A<e.length-1;A++){var h=A*(S+1),O=(A+1)*(S+1);for(X=0;S>X;X++)g.push(h+X,O+X+1,O+X,h+X,h+X+1,O+X+1)}for(m=F.length/3-(S+1),X=0;S>X;X++)F.push(0,w,0),y.push((X+.5)/S,0);for(X=0;S>X;X++)g.push(m+X,m+X+1,m+(S+1)+X);if(R){var v=[],c=[],u=[];for(v.push(0,-w,0),c.push(.5,.5),X=0;S>=X;X++)r=X*s+b,P=C(r),I=j(r),v.push(P*w,-w,-I*w),c.push(.5+.5*P,.5+.5*I);for(X=0;S>X;X++)u.push(0,X+2,X+1)}return{vs:F,uv:y,is:g,bottom_vs:v,bottom_uv:c,bottom_is:u}},al=function(y,P,R,d,i,O){y=y||16,P=P||0,R=R||y;for(var G=.5,_=[],u=[],U=l/y,e=P;R>e;e++){var z=e+1,h=U*e,v=U*z;_.push(C(h)*G,-G,-j(h)*G,C(v)*G,-G,-j(v)*G,0,G,0),u.push(e/y,1,z/y,1,(e+z)/2/y,0)}if(O){var L=[],M=[];for(e=P;R>e;e++){h=U*e,v=U*(e+1);var p=C(h),B=j(h),q=C(v),Y=j(v);L.push(p*G,-G,-B*G,0,-G,0,q*G,-G,-Y*G),M.push(.5+.5*p,.5+.5*B,.5,.5,.5+.5*q,.5+.5*Y)}}if(d){var t=[],c=[];h=U*P,t.push(0,G,0,0,-G,0,C(h)*G,-G,-j(h)*G),c.push(0,0,0,1,P/y,1)}if(i){var S=[],s=[];h=U*R,S.push(0,-G,0,0,G,0,C(h)*G,-G,-j(h)*G),s.push(1,1,1,0,R/y,1)}return{vs:_,uv:u,bottom_vs:L,bottom_uv:M,from_vs:t,from_uv:c,to_vs:S,to_uv:s}},ri=function(J,h,j,l,W,V,c,I){for(var A=[],G=0;G<J.length-1;G+=2)A.push({x:J[G],y:J[G+1]});return hs(A,h,j,l,W,V,c,I,!1)},vp={roundRect:function(M,i){return ri([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],M,i,3)},star:function(_,Q){return ri([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],_,Q)},rect:function(b,r){return ri([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],b,r)},billboard:function(){return{vs:[-.5,.5,0,-.5,-.5,0,.5,.5,0,.5,.5,0,-.5,-.5,0,.5,-.5,0],uv:[0,0,0,1,1,0,1,0,0,1,1,1],ns:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1]}},plane:function(){return{vs:[-.5,0,-.5,-.5,0,.5,.5,0,-.5,.5,0,-.5,-.5,0,.5,.5,0,.5],uv:[0,0,0,1,1,0,1,0,0,1,1,1],ns:[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]}},triangle:function(G,t){return ri([0,-.5,.5,.5,-.5,.5],[1,2,2,5],G,t)},rightTriangle:function(j,q){return ri([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],j,q)},parallelogram:function(c,w){return ri([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],c,w)},trapezoid:function(t,q){return ri([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],t,q)}},Ub={sphere:1,cylinder:1,cone:1,torus:1},qp={torus:1,sphere:1},Ir=vf(Se(vp),{cylinder:1}),Dg=vf(Se(vp),{cylinder:1,cone:1}),xg=function(C,z,N){var $,d=dg(C.mat,N,z),J=dg(C.s3,N,z),M=dg(C.t3,N,z),Q=dg(C.r3,N,z);return(J||Q||M||d)&&($=Gp(z._6O),Zk(z,fj(d,J,Q,dg(C.rotationMode,N,z),M))),$},zp=function(e,x,A,S,X,V,Q){if(Ji(A))A.forEach(function(w){zp(e,x,w,S,X,V,Q)});else if(se(A))zp(e,x,rq(S,A),S,X,V,Q);else if(Vc(A))if(A.shape3d){var D=xg(A,e,x);zp(e,x,A.shape3d,S,X,V,A),D&&Jm(e,D)}else Ri(e,x,A,S.s,X,V,Q)},Ri=function(f,y,g,H,C,M,t){if(t=t||fs,!M||M(H("shape3d.transparent",g.transparent,t.transparent))){var q=xg(g,f,y);Pf(g);var m=f._26I,U=f._prg,P=f._buffer,D=H("shape3d.color",g.color,t.color);C||(C=H("shape3d.blend",g.blend,t.blend));var w,x=g.opacity==J?t.opacity:g.opacity,e=H("shape3d.opacity");w=e!=J&&x!=J?x*e:x!=J?x:e,Uh(m,U,C,H("shape3d.light",g.light,t.light),w,H("shape3d.reverse.flip",g.reverseFlip,t.reverseFlip),H("shape3d.reverse.color",g.reverseColor,t.reverseColor),H("shape3d.reverse.cull",g.reverseCull,t.reverseCull)),g.vs&&H(wo,g.visible,t.visible)&&fl(m,U,P,D,f.getTexture(H("shape3d.image",g.image,t.image),y),H("shape3d.discard.selectable",g.discardSelectable,t.discardSelectable),g.vs,g.uv,g.ns,g.is,H("shape3d.uv.offset",g.uvOffset,t.uvOffset),H("shape3d.uv.scale",g.uvScale,t.uvScale)),g.top_vs&&H(Cr,g.topVisible,t.topVisible)&&fl(m,U,P,H("shape3d.top.color",g.topColor,t.topColor)||D,f.getTexture(H("shape3d.top.image",g.topImage,t.topImage),y),H("shape3d.top.discard.selectable",g.topDiscardSelectable,t.topDiscardSelectable),g.top_vs,g.top_uv,g.top_ns,g.top_is,H("shape3d.top.uv.offset",g.topUvOffset,t.topUvOffset),H("shape3d.top.uv.scale",g.topUvScale,t.topUvScale)),g.bottom_vs&&H(Mi,g.bottomVisible,t.bottomVisible)&&fl(m,U,P,H("shape3d.bottom.color",g.bottomColor,t.bottomColor)||D,f.getTexture(H("shape3d.bottom.image",g.bottomImage,t.bottomImage),y),H("shape3d.bottom.discard.selectable",g.bottomDiscardSelectable,t.bottomDiscardSelectable),g.bottom_vs,g.bottom_uv,g.bottom_ns,g.bottom_is,H("shape3d.bottom.uv.offset",g.bottomUvOffset,t.bottomUvOffset),H("shape3d.bottom.uv.scale",g.bottomUvScale,t.bottomUvScale)),g.from_vs&&H(No,g.fromVisible,t.fromVisible)&&fl(m,U,P,H("shape3d.from.color",g.fromColor,t.fromColor)||D,f.getTexture(H("shape3d.from.image",g.fromImage,t.fromImage),y),H("shape3d.from.discard.selectable",g.fromDiscardSelectable,t.fromDiscardSelectable),g.from_vs,g.from_uv,g.from_ns,g.from_is,H("shape3d.from.uv.offset",g.fromUvOffset,t.fromUvOffset),H("shape3d.from.uv.scale",g.fromUvScale,t.fromUvScale)),g.to_vs&&H(sg,g.toVisible,t.toVisible)&&fl(m,U,P,H("shape3d.to.color",g.toColor,t.toColor)||D,f.getTexture(H("shape3d.to.image",g.toImage,t.toImage),y),H("shape3d.to.discard.selectable",g.toDiscardSelectable,t.toDiscardSelectable),g.to_vs,g.to_uv,g.to_ns,g.to_is,H("shape3d.to.uv.offset",g.toUvOffset,t.toUvOffset),H("shape3d.to.uv.scale",g.toUvScale,t.toUvScale)),Wg(m,U),q&&Jm(f,q)}},fl=function(O,o,A,p,J,t,$,v,P,Z,C,F){$&&(lp(O,o.uDiffuse,p),v?bc(O,o,J,t,A.uv,v,C,F):bc(O),xp(O,A.vs,$,o.aPosition),xp(O,A.ns,P,o.aNormal),Z?(Hp(O,A.is,Z),zi(O,0,Z.length)):mo(O,0,$.length/3),v?Zc(O,o,J):Zc(O))},rq=function(F,S){var v=F.s;if(S||(S=v(qb)),!S)return J;var D=$o(S);if(D)return D;if("text"===S){var m={amount:v("shape3d.text.amount"),size:v("shape3d.text.size"),font:v("shape3d.text.font"),style:v("shape3d.text.style"),weight:v("shape3d.text.weight"),fill:v("shape3d.text.fill"),curveSegments:v("shape3d.text.curveSegments"),spacing:v("shape3d.text.spacing")},c=F.gv.getShape3dText(F.data),O=c;for(var h in m)O+="_"+(m[h]===e?"U":m[h]);return F._cachedTextKey===O?F._cachedTextGeometry:(F._cachedTextKey=O,F._cachedTextGeometry=r.createTextGeometry(c,m))}var h=S;if(Ub[S]){var Q=v("shape3d.side"),T=v("shape3d.side.from"),H=v("shape3d.side.to"),U=v(No),p=v(sg);3>Q?(Q=0,T=0,H=0,U=!1,p=!1):((T==J||0>T)&&(T=0),(H==J||H>Q)&&(H=Q),0===T&&H===Q&&(U=!1,p=!1)),h+="-"+Q+"-"+T+"-"+H+"-"+U+"-"+p}if(Ir[S]){var f=v(Cr);h+="-"+f}if(Dg[S]){var w=v(Mi);h+="-"+w}if("torus"===S){var R=v("shape3d.torus.radius");0>R?R=0:R>.25&&(R=.25),h+="-"+R}if(qp[S]){var s=v(Ki);h+="-"+s}return D=ag[h],D||("box"===S?D=r.createBoxModel():vp[S]?D=vp[S](f,w):"sphere"===S?D=r.createSphereModel(Q,T,H,U,p,s):S===hr?D=r.createCylinderModel(Q,T,H,U,p,f,w):"cone"===S?D=r.createConeModel(Q,T,H,U,p,w):"torus"===S&&(D=r.createTorusModel(Q,T,H,U,p,R,s)),ag[h]=D),D},Pf=function(){var $=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],X=["is","top_is","bottom_is","from_is","to_is"];return K=cg(or.substr(or.indexOf("^#")+2)),vn(r[Kp(ts+$[15]+"n"+$[16])]())&&ob()?function(K){K&&!K._complete_&&(K._complete_=!0,K.vs&&If(K.ns)&&(K.ns=Ac(K.vs,K.is)),K.top_vs&&If(K.top_ns)&&(K.top_ns=Ac(K.top_vs,K.top_is)),K.bottom_vs&&If(K.bottom_ns)&&(K.bottom_ns=Ac(K.bottom_vs,K.bottom_is)),K.from_vs&&If(K.from_ns)&&(K.from_ns=Ac(K.from_vs,K.from_is)),K.to_vs&&If(K.to_ns)&&(K.to_ns=Ac(K.to_vs,K.to_is)),$.forEach(function(Z){var t=K[Z];Ji(t)&&(K[Z]=new Jg(t))}),X.forEach(function(X){var T=K[X];Ji(T)&&(K[X]=new rm(T))}))}:void 0}(),Ib=function(t,C){var k=t[C];Ji(k)&&(t[C]=new Jg(k))};vf(Xp,{_25Q:function(j){j._16O=function(s,w,Q,D,v,E,I,U,y){var o=this.info;if(o){var b,T,x,z,g,h,W=Ln();if(wk[w]?(b=o.p3,T=o.c1,x=o.c2):jb[w]?(T=o.s1||o.c1,x=o.s2||o.c2):(T=o.t1||o.c1,x=o.t2||o.c2),b)h=zl(w,oc,Q,D,U,y);else{var Y=$r(x,T),c=ii(T,x);z=[0,-f(Y[2],Y[0]),t(Y[1]/c)],g="zyx",b=[(T[0]+x[0])/2,(T[1]+x[1])/2,(T[2]+x[2])/2],h=zl(w,[c,0,0],Q,D,U,y)}return Jc(W,h,b,D,v,E,I,s,z,g)}return od},j._80o=function(r,j,t){var y=this,i=y.shapeModel;if(i){var f=y.gv;Zk(f),zp(f,y.data,i,y,y.getBodyColor(),t)}},j.createLineModel=function(b,z,I,F,D){for(var T=this,e=T.s,M=Ih(b,z,e(Ki)),t=[],l=0;l<M.length;l++){var S=M[l],L=S.length;if(L>1){var K=S[0];t.push(K.x,K.y,K.z);for(var v=1;L-1>v;v++)K=S[v],t.push(K.x,K.y,K.z),t.push(K.x,K.y,K.z);K=S[L-1],t.push(K.x,K.y,K.z)}}var o,P,U,a=e(F+".color"),$=e(D),W=0;return $&&(P=e(D+".color"),o=e(D+".pattern"),W=e(D+".offset"),U=a),xe(T.gv,T.data,t,P||a,U?J:e(F+".gradient.color"),I,o||e(F+".pattern"),W,U),M},j.createTubeModel=function(O,s,R,r){for(var u=this,Z=u.s,X=Z("shape3d.side")||ap,h=Z("shape3d.start.angle"),N=Z("shape3d.sweep.angle"),V=Z(Cr)?Z("shape3d.top.cap"):J,c=Z(Mi)?Z("shape3d.bottom.cap"):J,P="flat"===V,F="flat"===c,g=P&&(r?r.uv:Z("shape3d.top.image")),v=F&&(r?r.uv:Z("shape3d.bottom.image")),G=r?r.uv:Z("shape3d.image"),f={vs:[],uv:G?[]:J,top_vs:P?[]:J,top_uv:g?[]:J,bottom_vs:F?[]:J,bottom_uv:v?[]:J},l=Ih(O,s,Z(Ki),R),q=0,z=l.length;z>q;q++)rs(f,l[q],Z(Pl),R,X,h,N,V,c);if(r){var I=[];Oe(u.gv,u.data,f,u,u.getBodyColor(),[],r,I),I.length&&(im(r.vs,I),im(r.ns,Ac(I)))}else u.shapeModel=f;return l},j.getCache=function(){var B=this.info;if(B){var D=B.list;if(D){var y=B.cache;return y||(y=B.cache=zo(D)),y}}return J}}});var Rl=function(h,y){for(var v,e=0,s=h.length,a=0,l=s-1;l>=a;)if(e=N(a+(l-a)/2),v=h[e].length-y,0>v)a=e+1;else{if(!(v>0)){l=e;break}l=e-1}e=l;var D=h[e],M=D.point;return e===s-1||D.length===y||(M=(new Rq).subVectors(h[e+1].point,M).normalize().multiplyScalar(y-D.length).add(M)),{point:M,tangent:D.tangent}},zo=function(m){for(var b,j,l=[],H=0,s=0;s<m.length;s++){for(var o=m[s],y=0;y<o.length;y++){b=o[y],j&&(H+=j.distanceTo(b));var V=new Rq,g=o[y+1];g?V.subVectors(g,b):j?V.subVectors(b,j):V.x=1,V.normalize(),l.push({point:b,length:H,tangent:V}),j=b}j=null}return l},Ih=function(u,B,H,A){H=H||Pn;for(var W=[],v=0,T=u.size();T>v;v++){var m=u.get(v);W.push(new Rq(m.x,m.e||0,m.y))}B&&(Mj(B)&&(B=B._as),B.length||(B=null));for(var i,C,V,y,o,X=[],p=0,N=0,G=B?B.length:T;G>N;N++)if(o=B?B[N]:0===N?1:2,1===o)X.push(V=[]),V.push(W[p++]);else if(2===o||5===o)if(y=2===o?W[p++]:V[0],A){var F=B?B[N+1]:G>N+1?2:J;if(2===F||5===F){var D=V[V.length-1],j=2===F?W[p]:V[0],O=(new Rq).subVectors(D,y),t=(new Rq).subVectors(j,y),k=O.length(),x=t.length();if(k&&x)if(A>k/2&&A>x/2)V.push(y);else for(O.multiplyScalar(c(A,k/2)/k).add(y),t.multiplyScalar(c(A,x/2)/x).add(y),i=new cj(O,y,t).getPoints(H),C=0;H>=C;C++)V.push(i[C])}else V.push(y)}else V.push(y);else if(3===o)for(i=new cj(V[V.length-1],W[p++],W[p++]).getPoints(H),C=1;H>=C;C++)V.push(i[C]);else if(4===o)for(i=new Gb(V[V.length-1],W[p++],W[p++],W[p++]).getPoints(H),C=1;H>=C;C++)V.push(i[C]);return X},wc=function(U){for(var c,f,g=new Rq,N=[],B=[],L=[],z=0,H=U.length;H>z;z++)c=U[z],f=U[z+1],f?g.subVectors(f,c):g.subVectors(c,U[z-1]),N.push(g.normalize().clone());var x,V,a,Y,$=new Rq,o=new Rq,w=new Pc,I=1e-4,D=Number.MAX_VALUE,F=N[0],p=B[0]=new Rq,A=L[0]=new Rq;for(V=k(F.x),a=k(F.y),Y=k(F.z),D>=V&&(D=V,$.set(1,0,0)),D>=a&&(D=a,$.set(0,1,0)),D>=Y&&$.set(0,0,1),o.crossVectors(F,$).normalize(),p.crossVectors(F,o),A.crossVectors(F,p),z=1;H>z;z++)B[z]=B[z-1].clone(),L[z]=L[z-1].clone(),o.crossVectors(N[z-1],N[z]),o.length()>I&&(o.normalize(),x=R(_k(N[z-1].dot(N[z]),-1,1)),B[z].applyMatrix4(w.makeRotationAxis(o,x))),L[z].crossVectors(N[z],B[z]);return{B:L,T:N,N:B}},rs=function(){var E=function(u){for(var c=1;c<arguments.length;c++){var s=arguments[c];u.push(s.x,s.y,s.z)}},T=function(c){for(var R=1;R<arguments.length;R++){var $=arguments[R].uv;c.push($[0],$[1])}},P=function(n,v,$,f,F){var u=-f*C(F),m=f*j(F);return new Rq(n.x+u*$.x+m*v.x,n.y+u*$.y+m*v.y,n.z+u*$.z+m*v.z)},i=function(q,E,z,B,o,L,A,X){A=A||l;for(var e=[],s=A/o,O=0;o>=O;O++){var M=P(q,E,z,B,O*s+L);e.push(M),X!=J&&(M.uv=[X,O/o])}return e},w=function(J,Z,W,q,S,h,x,d,n){n=n||l;var r=Z?J.top_vs:J.bottom_vs;if(r)for(var G=Z?J.top_uv:J.bottom_uv,M=n/x,D=0;x>D;D++){var R,X;Z?(R=D*M+d,X=(D+1)*M+d):(X=D*M+d,R=(D+1)*M+d),E(r,P(W,q,S,h,R),P(W,q,S,h,X),W),G&&G.push(.5-.5*C(R),.5-.5*j(R),.5-.5*C(X),.5-.5*j(X),.5,.5)}};return function(X,g,v,A,t,L,B,c,N){var y=g.length;if(y>1){var r,k,Y,H,l,b,F,V=wc(g),q=V.T,m=V.N,K=V.B;"flat"===c&&w(X,!0,g[0],K[0],m[0],A,t,L,B),"flat"===N&&w(X,!1,g[y-1],K[y-1],m[y-1],A,t,L,B);var s,Q,x=[],$=o(t/2),O="round"===c,_="round"===N,u=g[0],j=q[0],S=K[0],R=m[0],G=g[y-1],D=q[y-1],h=K[y-1],d=m[y-1];if(O){for(Y=1;$>=Y;Y++)m.splice(0,0,R),K.splice(0,0,S),q.splice(0,0,j),Q=-Y/$*A,g.splice(0,0,j.clone().multiplyScalar(Q).add(u)),x[$-Y]=Z(A*A-Q*Q);y+=$}if(_){for(Y=1;$>=Y;Y++)m.push(d),K.push(h),q.push(D),Q=Y/$*A,g.push(D.clone().multiplyScalar(Q).add(G)),x[g.length-1]=Z(A*A-Q*Q);y+=$}if(X.uv){var z=0,P=0,U=[];for(v&&(z=v),l=g[0],U[0]=0,Y=1;y>Y;Y++)H=g[Y],U[Y]=l.distanceTo(H),l=H,v||(z+=U[Y]);for(s=[],Y=0;y>Y;Y++)P+=U[Y],s[Y]=z?P/z:0}for(Y=0;y>Y;Y++){if(H=g[Y],b=K[Y],F=m[Y],r=i(H,b,F,x[Y]===e?A:x[Y],t,L,B,s?s[Y]:J),k)for(var M=0;t>M;M++){var n=k[M],a=k[M+1]||k[0],p=r[M],I=r[M+1]||r[0];E(X.vs,a,n,p,p,I,a),X.uv&&T(X.uv,a,n,p,p,I,a)}k=r}}}}();vf(r,{getLineLength:function(Z){return Z[Z.length-1].length},getLineOffset:function(Y,r){return Rl(Y,r)},getLineCacheInfo:function(q,O,K,Q){return zo(Ih(q,O,K,Q))}});var ep=A.Light=function(){Vp(ep,this),this.s(mn,P[mn]),this.s(qb,"sphere"),this.s3(20,20,20)};bi("Light",Xk,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(t,Q,j){ep.superClass.onStyleChanged.apply(this,arguments),t===mn&&this.s("shape3d.color",j)}});var $p=nc.Graph3dView=function(X,v){var U=this;U._attributes=v||r.graph3dViewAttributes,U._25I={},U._view=Eq(1,U);var A=U._canvas=Rk(U._view);A.addEventListener("webglcontextlost",function(V){V.preventDefault(),gh(U),U._26I&&U._doBufferGC(U._26I,!0),U._26I=J,U._1o.texture=J,U._35O=!0},!1),A.addEventListener("webglcontextrestored",function(){U._35O=!1,U.iv()},!1),U._batchIndexMap={},U._batchModelMap={},U._wireframeIndexMap={},U._wireframeModelMap={},U._wireframeIndexMapSwap={},U._wireframeModelMapSwap={},U._polylineIndexMap={},U._polylineIndexMap={},U._polylineIndexMapSwap={},U._polylineIndexMapSwap={},U._8O=[],U._7O=Ln(),U._6O=Ln(),U._1o=new Ch(U),U._30O=new Hd(U),U._31O=new xl(U),U._32O=new hm(U),U._33Q=!0,U._eye=Se(r.graph3dViewEye),U._center=Se(r.graph3dViewCenter),U._up=Se(r.graph3dViewUp),U._lightChanged=!1,U._59O=[],U._spots=[],U._dirs=[],U._frameId=0,U.overlappingBox=new kh(U),U.dm(X?X:new hd),U.setInteractors([new Ui(U)])},Bj={fogDisabled:1,dashDisabled:1,batchColorDisabled:1,batchBlendDisabled:1,batchBrightnessDisabled:1},Mo=0;Gg("Graph3dView",h,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","editHelperDisabled","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable",Kq,Kn,"firstPersonMode",go,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightColor","headlightIntensity","headlightDisabled","ortho","orthoWidth","fovy","near","far",tq,$i,"up","aspect","fogDisabled","fogColor","fogNear","fogFar","dashDisabled","batchColorDisabled","batchBlendDisabled","batchBrightnessDisabled"],_editable:!1,_editHelperDisabled:r.graph3dViewEditHelperDisabled,_devicePixelRatio:e,_boundaries:e,_moveStep:r.graph3dViewMoveStep,_rotateStep:r.graph3dViewRotateStep,_pannable:r.graph3dViewPannable,_rotatable:r.graph3dViewRotatable,_walkable:r.graph3dViewWalkable,_resettable:r.graph3dViewResettable,_zoomable:r.graph3dViewZoomable,_firstPersonMode:r.graph3dViewFirstPersonMode,_mouseRoamable:r.graph3dViewMouseRoamable,_gridVisible:r.graph3dViewGridVisible,_gridSize:r.graph3dViewGridSize,_gridGap:r.graph3dViewGridGap,_gridColor:r.graph3dViewGridColor,_originAxisVisible:r.graph3dViewOriginAxisVisible,_centerAxisVisible:r.graph3dViewCenterAxisVisible,_axisXColor:r.graph3dViewAxisXColor,_axisYColor:r.graph3dViewAxisYColor,_axisZColor:r.graph3dViewAxisZColor,_ortho:r.graph3dViewOrtho,_orthoWidth:r.graph3dViewOrthoWidth,_fovy:r.graph3dViewFovy,_near:r.graph3dViewNear,_far:r.graph3dViewFar,_headlightColor:r.graph3dViewHeadlightColor,_headlightIntensity:r.graph3dViewHeadlightIntensity,_headlightRange:r.graph3dViewHeadlightRange,_headlightDisabled:r.graph3dViewHeadlightDisabled,_rectSelectable:r.graph3dViewRectSelectable,_rectSelectBackground:r.graph3dViewRectSelectBackground,_editSizeColor:r.graph3dViewEditSizeColor,_autoMakeVisible:lq,_fogDisabled:r.graph3dViewFogDisabled,_fogColor:r.graph3dViewFogColor,_fogNear:r.graph3dViewFogNear,_fogFar:r.graph3dViewFogFar,_dashDisabled:r.graph3dViewDashDisabled,_batchColorDisabled:r.graph3dViewBatchColorDisabled,_batchBlendDisabled:r.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:r.graph3dViewBatchBrightnessDisabled,setEye:function(P,W,o){1===arguments.length&&(W=P[1],o=P[2],P=P[0]);var X=this._eye;X[0]=P,X[1]=W,X[2]=o,this.fp(tq,J,X)},setCenter:function(P,S,T){1===arguments.length&&(S=P[1],T=P[2],P=P[0]);var Z=this._center;Z[0]=P,Z[1]=S,Z[2]=T,this.fp($i,J,Z)},setUp:function(Y,H,f){1===arguments.length&&(H=Y[1],f=Y[2],Y=Y[0]);var g=this._up;g[0]=Y,g[1]=H,g[2]=f,this.fp("up",J,g)},isTransparentMask:function(g){return g.s("transparent.mask")},getAspect:function(){var u=this,w=u._aspect;return w?w:u.getWidth()/u.getHeight()},getCanvas:function(){return this._canvas},setDataModel:function(E){var K=this,j=K._dataModel,S=K._selectionModel;j!==E&&(j&&(j.ump(K.handleDataModelPropertyChange,K),j.umm(K.handleDataModelChange,K),j.umd(K.handleDataPropertyChange,K),S||j.sm().ums(K.handleSelectionChange,K)),K._dataModel=E,E.mp(K.handleDataModelPropertyChange,K),E.mm(K.handleDataModelChange,K),E.md(K.handleDataPropertyChange,K),S?S._21I(E):E.sm().ms(K.handleSelectionChange,K),K.invalidateAll(!0),K.invalidateLight(),K.fp(Rc,j,E),K._canvas.style.background=E.getBackground()||"")},handleDataModelPropertyChange:function(m){if("background"===m.property){var B=this._canvas.style.background,Y=m.newValue||"";this._canvas.style.background=Y,this.fp("canvasBackground",B,Y)}},handleDataPropertyChange:function(v){var V=v.data;this.invalidateData(V),Om(V)&&"s:light.type"===v.property&&this.invalidateLight()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(D){var m=this,u=D.property;m.iv(),m._18Q=J,"eye"===u?m._33Q=!0:"devicePixelRatio"===u?m._42(J,m._devicePixelRatio||Gh):Bj[u]&&gh(m)},_5O:function(m){var K=m._22Q();return K?new K(this,m):J},getData3dUI:function(j){var w=this._25I[j._id];return w===e&&(w=this._5O(j),this._25I[j._id]=w),w},invalidateAll:function(m){var n=this;if(m){for(var s in n._25I){var D=n._25I[s];D&&D.dispose()}n._25I={},n.iv(),ys(n)}else n.dm().each(function(w){n.invalidateData(w)})},invalidateSelection:function(){var D=this;D.sm().each(function(M){D.invalidateData(M)})},invalidateData:function(f){var a=this,K=a.getData3dUI(f);K&&(K.iv(),a.iv()),ys(a,f)},getShape3dText:function(T){return T.getStyle("shape3d.text")||this.getLabel(T)},invalidateBatch:function(X){var o=this,y=o._batchModelMap,p=y[X],k=[],J={};if(p){p.ds.forEach(function(X){var C=o.getData3dUI(X);C&&C.iv(),delete o._batchIndexMap[X._id],k.push(X._id)}),delete y[X];for(var j,Q,K,Y,b,H,G,L,A,s=["_wireframeModelMap","_polylineModelMap","_wireframeModelMapSwap","_polylineModelMapSwap"],h=["_wireframeIndexMap","_polylineIndexMap","_wireframeIndexMapSwap","_polylineIndexMapSwap"],$=0;$<s.length;$++){var z=o[s[$]],Z=o[h[$]];for(J={},L=0;L<k.length;L++){var B=Z[k[L]];if(B){delete Z[k[L]],A=B.batch,j=z[A];var W=B.begin,T=B.size,m=3*W,R=3*T,x=4*W,I=4*T;for(Q=j.ds,K=j.vs,Y=j.cs,b=j.ps,H=j.ls,G=B.index,j.invalidate=!0,Q[G]=e,G=m;m+R>G;G++)K[G]=e;for(G=x;x+I>G;G++)Y[G]=e;for(G=x;x+I>G;G++)b[G]=e;if(H)for(G=m;m+R>G;G++)H[G]=e;J[A]=!0}}for(A in J){j=z[A],Q=j.ds,K=j.vs,Y=j.cs,b=j.ps,H=j.ls;var P=[];for(G=0;G<Q.length;G++)Q[G]!==e&&P.push(Q[G]);if(0===P.length)delete z[A];else{for(j.ds=P,P=[],G=0;G<K.length;G++)K[G]!==e&&P.push(K[G]);for(j.vs=P,P=[],G=0;G<Y.length;G++)Y[G]!==e&&P.push(Y[G]);for(j.cs=P,P=[],G=0;G<b.length;G++)b[G]!==e&&P.push(b[G]);if(j.ps=P,H){for(P=[],G=0;G<H.length;G++)H[G]!==e&&P.push(H[G]);j.ls=P}}}}o.iv()}},handleDataModelChange:function(b){var e=this,C=b.kind,h=b.data;if("add"===C)e.invalidateData(h),zj(h)&&h.getEdgeGroup()&&h.getEdgeGroup().eachSiblingEdge(e.invalidateData,e),Om(h)&&e.invalidateLight();else if(C===Jn){var B=h._id,u=e._25I[B];u&&(u.dispose(),delete e._25I[B],e.iv()),h===e._currentSubGraph&&e.setCurrentSubGraph(J),ys(e,h),Om(h)&&e.invalidateLight()}else C===Jb&&(e.invalidateAll(!0),e.setCurrentSubGraph(J),ys(e),e.invalidateLight())},toCanvas:function(G){var H=this,b=H.getGL();if(H.validate(),G){var D=b.getParameter(b.COLOR_CLEAR_VALUE);jf(b,G)}H._42(J,1);var W=H.getWidth(),h=H.getHeight(),v=new Uint8Array(4*W*h),p=Rk(),K=p.getContext("2d");b.readPixels(0,0,W,h,b.RGBA,b.UNSIGNED_BYTE,v),Er(p,W,h,1);for(var m=K.getImageData(0,0,W,h),x=m.data,j=0;j<x.length;j+=4){var f=j/4,B=N(f/W),i=f-B*W;f=4*((h-1-B)*W+i),x[f]=v[j],x[f+1]=v[j+1],x[f+2]=v[j+2],x[f+3]=v[j+3]}return K.putImageData(m,0,0),G&&jf(b,D),H._42(J,H._devicePixelRatio||Gh),p},toDataURL:function(O,N){var D=this,c=D.getGL();if(D.validate(),O){var P=c.getParameter(c.COLOR_CLEAR_VALUE);jf(c,O)}D._42(J,1);var i=D._canvas.toDataURL(N||"image/png",1);return O&&jf(c,P),D._42(J,D._devicePixelRatio||Gh),i},getGL:function(){var m=this,C=m._26I,l=m._prg;if(!C)try{m._2O={},C=m._26I=m._canvas.getContext("webgl",m._attributes)||m._canvas.getContext("experimental-webgl",m._attributes),C._emptyTexture=ne(C),C._emptyBlendTexture=ne(C),C._bufPool=[],C._id=++Mo,m._buffer={vs:di(C),ns:di(C),is:di(C),uv:di(C),batchColor:di(C),batchBlend:di(C),batchBrightness:di(C),lineDistance:di(C)},m._1O=Zi(C);var O=m._cube={vs:di(C),ns:di(C),is:di(C),uv:di(C)};sb(C,O.vs,yb),sb(C,O.ns,Hj),sb(C,O.uv,ul),Yn(C,O.is,Xo)}catch(D){}if(C&&!l){if(l=m._prg=C.createProgram(),!l)return J;var G=m._dirs.length,j=m._spots.length,L=m._59O.length,p=["uPMatrix","uMVMatrix","uNMatrix","uViewMatrix","aNormal","aUv","uOffsetScale","uDiffuse","uBlend","uBlendColor","uBrightness","uPartOpacity","uAlphaTest","uTransparent","uTexture","uBlendTexture","uSampler","uBlendSampler","uDiscardSelectable","uFix","uPick","uReverseFlip","uFixPickReverseColor","uBatchBrightness","aBatchBrightness","uBatchColor","aBatchColor","uBatchBlend","aBatchBlend","uDash","aLineDistance","uDashDistance","uDashGapDistance","uLight","uHeadlightRange","uHeadlightColor","uFogColor","uFogNear","uFogFar"];G&&p.push("uDirColor","uDirDirection"),j&&p.push("uSpotColor","uSpotRange","uSpotAngle","uSpotExponent","uSpotPosition","uSpotDirection"),L&&p.push("uPointColor","uPointRange","uPointPosition"),jf(C,[0,0,0,0]),C.clearDepth(1),C.enable(C.DEPTH_TEST),C.depthFunc(C.LEQUAL),C.enable(C.BLEND),C.blendFuncSeparate(C.SRC_ALPHA,C.ONE_MINUS_SRC_ALPHA,C.ONE,C.ONE_MINUS_SRC_ALPHA),Np||(or=cg(or.substring(0,or.indexOf("^#"))),ik=cg(ik),Np=!0);var s=["#define MAX_DIR "+G,"#define MAX_SPOT "+j,"#define MAX_POINT "+L,m._fogDisabled?"":"#define FOG",m._dashDisabled?"":"#define DASH",m._batchColorDisabled?"":"#define BATCHCOLOR",m._batchBlendDisabled?"":"#define BATCHBLEND",m._batchBrightnessDisabled?"":"#define BATCHBRIGHTNESS",""].join("\n"),X=Ag(C,l,C.VERTEX_SHADER,or.replace("PREFIX",s)),e=Ag(C,l,C.FRAGMENT_SHADER,ik.replace("PREFIX",s));y?p.push("aPosition"):(l.aPosition=0,C.bindAttribLocation(l,0,"aPosition")),C.linkProgram(l),p.forEach(function(T){l[T]=/^u/.test(T)?C.getUniformLocation(l,T):C.getAttribLocation(l,T)}),C.useProgram(l),C.deleteShader(X),C.deleteShader(e)}return C},getBrightness:function(X){var _=X.s("brightness"),n=this.isSelected(X)?X.s("select.brightness"):J;return _==J?n:n==J?_:_*n},getWireframe:function(u){var w=u.s("wf.visible"),d=u.s("wf.width");return w===!0||d>0&&"selected"===w&&this.isSelected(u)?{color:u.s("wf.color"),width:d,"short":u.s("wf.short"),mat:u.s("wf.mat")}:void 0},_transformPointToViewSpace:function(T){var q=[T[0],T[1],T[2]];return Nq(q,this._viewMatrix),q},_transformDirectionToViewSpace:function(h,g){var V=[h[0],h[1],h[2]];Nq(V,this._viewMatrix);var S=g?[g[0],g[1],g[2]]:[0,0,0];Nq(S,this._viewMatrix);var d=S[0]-V[0],Y=S[1]-V[1],R=S[2]-V[2],Z=Math.sqrt(d*d+Y*Y+R*R);return Z?[d/Z,Y/Z,R/Z]:[d,Y,R]},getWireframeGeometry:function(v){return v.s("wf.geometry")?{color:v.s("wf.color"),width:v.s("wf.width"),mat:v.s("wf.mat"),geometry:!0}:void 0},getBodyColor:function(U){return U.s("body.color")},getMat:function(m){return m.getMat?m.getMat():m.s("mat")},getFaceMat:function(D,L){return D.getFaceMat?D.getFaceMat(L):D.s(L+".mat")},getFaceBlend:function(s,c){return s.s(c+".blend")||s.s("all.blend")},getFaceColor:function(N,A){return N.s(A+".color")||N.s("all.color")},getFaceImage:function(X,r){return X.s(r+".image")||X.s("all.image")},getFaceBlendImage:function(s,A){return s.s(A+".blend.image")||s.s("all.blend.image")},getFaceDiscardSelectable:function(U,v){var X=U.s(v+".discard.selectable");return X==J?U.s("all.discard.selectable"):X},getFaceUv:function(h,Q){return h.s(Q+".uv")||h.s("all.uv")},getFaceUvOffset:function(R,O){return R.s(O+".uv.offset")||R.s("all.uv.offset")},getFaceUvScale:function(n,F){return n.s(F+".uv.scale")||n.s("all.uv.scale")},getFaceLight:function(z,r){var X=z.s(r+".light");return X==J?z.s("all.light"):X},getFaceVisible:function(e,U){var i=e.s(U+".visible");return i==J?e.s("all.visible"):i},getFaceOpacity:function(n,b){var z=n.s(b+".opacity");return z==J?n.s("all.opacity"):z},getFaceTransparent:function(Z,W){var t=Z.s(W+".transparent");return t==J?Z.s("all.transparent"):t},getFaceReverseColor:function(A,D){return A.s(D+".reverse.color")||A.s("all.reverse.color")},getFaceReverseFlip:function(g,z){var o=g.s(z+".reverse.flip");return o==J?g.s("all.reverse.flip"):o},getFaceReverseCull:function(w,s){var r=w.s(s+".reverse.cull");return r==J?w.s("all.reverse.cull"):r},getTextureMap:function(){return this._2O},deleteTexture:function(A){var S=this,z=S._2O[A];z&&(delete S._2O[A],S.getGL().deleteTexture(z))},invalidateShape3dCachedImage:function(v){var X=v._shape3dCachedImage;X&&(this.getGL().deleteTexture(X),delete v._shape3dCachedImage)},getTexture:function(G,O){if(!G)return J;var q=this,e=q.getGL(),i=q._2O[G];if(!i){var j=$l(G);if(j)if(j.tagName){if(j.dynamic)return Zi(e,j,q._1O);i=q._2O[G]=Zi(e,j)}else{var a=O&&O.s("shape3d.image.cache");if(a&&O._shape3dCachedImage&&(i=O._shape3dCachedImage),!i){var U=O&&O.s("shape3d.fixSizeOnScreen"),x=U?e.NEAREST:e.LINEAR;if(!U&&O&&O.s("shape3d.vector.dynamic")){var Q=q.getData3dUI(O);U=Q.getVectorDynamicSize()}var h=O.s("shape3d.texture.scale")||1,D=U&&U[0]>0?U[0]:h*Sf(j,O),N=U&&U[1]>0?U[1]:h*tk(j,O);if(D>=1&&N>=1){D*=devicePixelRatio,N*=devicePixelRatio;var I=vd(D,N);nk(I,j,0,0,D,N,O,q),I.restore(),a&&$f(j,O)?(i=O._shape3dCachedImage=Zi(e,cn,null,x),cn=null):i=Zi(e,cn,q._1O,x)}}}}return i},redraw:function(){this.iv()},validateImpl:function(){var C=this;if(C._lightChanged){C._lightChanged=!1;var N=[],m=[],z=[];C.dm().each(function(Z){if(Om(Z)){var n=Z.s("light.type");n===md?N.push(Z):n===Dj?m.push(Z):n===Lr&&z.push(Z)}}),(N.length!==C._59O.length||m.length!==C._spots.length||z.length!==C._dirs.length)&&gh(C),C._59O=N,C._spots=m,C._dirs=z}C._42(),C._1o.iv()},getRenderInfo:function(){var E=this.getGL();return E?E._renderInfo:void 0},showDebugTip:function(){var Y=this,h=Y._debugDiv;if(!h){h=Y._debugDiv=F.createElement("div"),h.style.position="absolute",h.style.overflow="hidden",h.style.backgroundColor="white",h.style.color="black";var g=Y.getView();Y._79O?g.insertBefore(h,Y._79O):g.appendChild(h),Y._debugTipTimerId=setInterval(function(){var N=Y.getRenderInfo();if(N){var k=Y.getGL()._bufPool,a=k.length-(k._ivCount||0),t="Draw Calls: "+N.calls+"<br/>"+"Vertices: "+N.vertices+"<br/>"+"Faces: "+N.faces+"<br/>"+"Lines: "+N.lines+"<br/>"+"Buffer Count: "+a;h.innerHTML=t}},10)}},hideDebugTip:function(){var O=this,Z=O._debugDiv;Z&&(delete O._debugDiv,cancelAnimationFrame(O._debugTipTimerId),delete O._debugTipTimerId,O.getView().removeChild(Z))},_42:function(s,K){var T=this;if(!T._35O&&(!bq||Ql(bq))){var I,v;s&&(s instanceof Xk?v=s:I=s);var a=T._canvas,H=T.getWidth(),m=T.getHeight(),o=T.getGL(),R=T._prg;if(o){if(K?s||Er(a,H,m,K):(K=T._devicePixelRatio||Gh,s||H===a.clientWidth&&m===a.clientHeight||Er(a,H,m,K)),o.viewport(0,0,H*K,m*K),o._renderInfo={calls:0,vertices:0,faces:0,lines:0,frame:++T._frameId},T.overlappingBox.clear(),T._81O=J,o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),lp(o,R.uBrightness,1),lp(o,R.uOpacity,1),lp(o,R.uPartOpacity,1),o._picking=!!s,lp(o,R.uPick,!!s),lp(o,R.uTexture,!1),lp(o,R.uBlendTexture,!1),lp(o,R.uAlphaTest,P.alphaTest),lp(o,R.uTransparent,!1),lp(o,R.uFix,!1),lp(o,R.uBatchColor,!1),lp(o,R.uBatchBlend,!1),lp(o,R.uBatchBrightness,!1),lp(o,R.uPMatrix,T._projectMatrix=Le(T)),lp(o,R.uViewMatrix,nf(T,T._7O)),T._viewMatrix=Gp(T._7O),s||(Zb(T,o,R),T._fogDisabled||(lp(o,R.uFogColor,T._fogColor),lp(o,R.uFogNear,T._fogNear),lp(o,R.uFogFar,T._fogFar))),Pe(o,R.aPosition),Pe(o,R.aNormal),Ef(o,R.aUv),Ef(o,R.aBatchColor),Ef(o,R.aBatchBlend),Ef(o,R.aBatchBrightness),Ef(o,R.aLineDistance),v){var n=o.getParameter(o.COLOR_CLEAR_VALUE);o.clearColor(0,0,0,0),o.disable(o.BLEND),Ef(o,R.aNormal),sb(o,T._cube.vs,J,R.aPosition),Yn(o,T._cube.is),jp(v,T,fh,0),jp(v,T,Im,6),jp(v,T,um,12),jp(v,T,Id,18),jp(v,T,Wc,24),jp(v,T,Wb,30),Pe(o,R.aNormal),jf(o,n)}else if(I){I.value=2;var n=o.getParameter(o.COLOR_CLEAR_VALUE);o.clearColor(0,0,0,0),o.disable(o.BLEND),T._95I(o,R,I),Hl(T,I),Ig(T,T._polylineModelMap,I),Ig(T,T._wireframeModelMap,I),lp(o,R.uTransparent,!0),T._95I(o,R,I,!0),Hl(T,I,!0),Ig(T,T._polylineModelMap,I,!0),Ig(T,T._wireframeModelMap,I,!0),lp(o,R.uTransparent,!1),o.clear(o.DEPTH_BUFFER_BIT),T._swapLineMap(),T._95I(o,R,I,!1,!0),Ig(T,T._polylineModelMap,I),Ig(T,T._wireframeModelMap,I),T._swapLineMap(),o.disable(o.DEPTH_TEST),T._30O._42(o,R,I),o.enable(o.DEPTH_TEST),jf(o,n)}else o.disable(o.BLEND),T.drawSky(o,R),T._31O._42(o,R),T._95I(o,R),Hl(T),Ig(T,T._polylineModelMap),Ig(T,T._wireframeModelMap),o.enable(o.BLEND),lp(o,R.uTransparent,!0),o.depthMask(!1),T._95I(o,R,J,!0),Hl(T,J,!0),Ig(T,T._polylineModelMap,J,!0),Ig(T,T._wireframeModelMap,J,!0),o.depthMask(!0),lp(o,R.uTransparent,!1),o.clear(o.DEPTH_BUFFER_BIT),T._swapLineMap(),T._95I(o,R,J,!1,!0),Ig(T,T._polylineModelMap),Ig(T,T._wireframeModelMap),T._swapLineMap(),o.disable(o.DEPTH_TEST),o.disable(o.BLEND),T._32O._42(o,R),T._30O._42(o,R),o.enable(o.DEPTH_TEST);sb(o,J),Yn(o,J),T._33Q=!1,T._doBufferGC(o)}}},setBufferGCInterval:function(D){this._bufferGCInterval=D
},_doBufferGC:function(b,T){var c=b._bufPool,_=c.length;if(_){var u,A,l=b._renderInfo.frame,K=this._bufferGCInterval||10,n=0;for(u=0;_>u;u++)A=c[u],A?(T||l-A._fid>K)&&(n++,b.deleteBuffer(A._buf),A._buf=null,c[u]=null):n++;if(n>_/2&&n>128){var g=[];for(u=0;_>u;u++)c[u]&&g.push(c[u]);b._bufPool=g}else c._ivCount=n}},_swapLineMap:function(){var z=this;B=z._polylineModelMap,z._polylineModelMap=z._polylineModelMapSwap,z._polylineModelMapSwap=B,B=z._wireframeModelMap,z._wireframeModelMap=z._wireframeModelMapSwap,z._wireframeModelMapSwap=B,B=z._polylineIndexMap,z._polylineIndexMap=z._polylineIndexMapSwap,z._polylineIndexMapSwap=B,B=z._wireframeIndexMap,z._wireframeIndexMap=z._wireframeIndexMapSwap,z._wireframeIndexMapSwap=B},_updateSkyBoxPosition:function(r){if(this._skyBox&&r&&"eye"===r.property){var n=r.newValue;this._skyBox.p3(n[0],n[1],n[2]),this.invalidateData(this._skyBox)}},setSkyBox:function(i){this._skyBox=i,this.ump(this._updateSkyBoxPosition,this),this.invalidateAll(),i&&(this.mp(this._updateSkyBoxPosition,this),this._updateSkyBoxPosition())},drawSky:function(q,d,V){var u=this,C=u._skyBox;if(C){var O=u._headlightIntensity,Y=Gj(u._headlightColor),d=u._prg;1!==O&&(Y=[Y[0]*O,Y[1]*O,Y[2]*O]),lp(q,d.uHeadlightColor,[Y[0],Y[1],Y[2],1]);var s=u.getData3dUI(C);s&&s._42(q,d,V,function(){return!0}),q.clear(q.DEPTH_BUFFER_BIT),lp(q,d.uHeadlightColor,[Y[0],Y[1],Y[2],u._headlightDisabled?1:0])}},_95I:function(n,Q,m,F,R){function A(H){if(!!H.s("shape3d.alwaysOnTop")==!!R&&J.isVisible(H)&&(!M||_)){if(!m&&J.isTransparentMask(H))return;var E=J.getData3dUI(H);E&&E._42(n,Q,m,$)}}var J=this,$=function(x){return F?x:!x};J.sky&&n.clear(n.DEPTH_BUFFER_BIT),J.dm().each(A)},getLogicalPoint:function(j){return es(j,this._canvas)},isRectOverlapping:function(l){var c=this.getData3dUI(l);return c._rectOverlapping},getHitFaceInfo:function(q){q.target&&(q=this.lp(q));var F=this.getDataInfoAt(q);if(F){var W=this._1o.face(F.data,vk(q.x,q.y));if(W)return{data:F.data,face:W}}return J},unproject:function(o,l){var O=this,k=O.getWidth(),X=O.getHeight(),u=o.target?O.lp(o):o,w=u.x-k/2,J=u.y-X/2,f=2*(w/k),F=2*(-1*J/X);l=l||0;var V=Ln(),P=Le(O),h=nf(O);ho(V,P,h),rf(V);var e=cp([f,F,l,1],V);return[e[0]/e[3],e[1]/e[3],e[2]/e[3]]},getDataAt:function(v){var n=this.getDataInfoAt(v);return n?n.data:J},getDataInfoAt:function(J,G){return J.target&&(J=this.lp(J)),this._1o.get(vk(J.x,J.y,G),!0)},getDatasInRect:function(Q){return this._1o.get(Q)},setEditable:function(s){var C=this,G=C._editable;C._editable=s,this.fp(Tp,G,s)},isEditable:function(v){var u=this;return u._editable?Yq(v)?v.s("3d.editable")?u._editableFunc?u._editableFunc(v):!0:!1:!1:!1},isSelectable:function(v){return v.s("3d.selectable")&&this.sm().isSelectable(v)},isMovable:function(Y){var A=this;return zj(Y)&&Y.getStyle(pk)!==co?!1:Y.s("3d.movable")?A._movableFunc?A._movableFunc(Y):!0:!1},isSizeEditable:function(z){return Yq(z)?this._sizeEditableFunc?this._sizeEditableFunc(z):!0:!1},isRotationEditable:function(C){return Yq(C)&&C.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(C):!0:!1},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(g){this.setZoom(dn,g)},zoomOut:function(t){this.setZoom(1/dn,t)},setZoom:function(e,G){if(1!==e){var E=this;if(E._ortho)return E.setOrthoZoom(e,G),void 0;E._14o&&E._14o.stop(!0);var O=1/e,C=E._eye,u=E._center,$=u[0]+(C[0]-u[0])*O-C[0],p=u[1]+(C[1]-u[1])*O-C[1],a=u[2]+(C[2]-u[2])*O-C[2];if(!(ii(C,u)<E._moveStep&&1>O)){if(G=Qp(G)){var Y=Se(C);return G.action=function(z){E.fi({kind:E._zooming?"betweenZoom":"beginZoom"}),E._zooming=1,C[0]=Y[0]+$*z,C[1]=Y[1]+p*z,C[2]=Y[2]+a*z,E.fp(tq,J,C)},G._37o=function(){delete E._14o,delete E._zooming,E.fi({kind:"endZoom"}),E.onZoomEnded()},E._14o=Bi(G)}C[0]+=$,C[1]+=p,C[2]+=a,E.fp(tq,J,C)}}},setOrthoZoom:function(F,L){if(1!==F){var g=this;g._14o&&g._14o.stop(!0);var P=g._orthoWidth,D=P/F-P;if(!(P<g._moveStep&&F>1))return(L=Qp(L))?(L.action=function(H){g.fi({kind:g._zooming?"betweenZoom":"beginZoom"}),g._zooming=1,g.setOrthoWidth(P+D*H)},L._37o=function(){delete g._14o,delete g._zooming,g.fi({kind:"endZoom"}),g.onZoomEnded()},g._14o=Bi(L)):(g.setOrthoWidth(P/F),void 0)}},getPositionInfo:function(j){var f=this,_=f._eye,N=f._center,k=f.getAspect(),F=j?hl($r(N,_,!0),$r(j,_)):ii(_,N);if(f._ortho){var D=f._orthoWidth;return{length:F,height:D/k,width:D}}var G=2*n(f._fovy/2)*F;return{length:F,height:G,width:G*k}},getCenterInfo:function(){var T=this;return T._81O||(T._81O=T.getPositionInfo()),Se(T._81O)},rotate:function(A,I,b,X){var m=this;if(A||I){X==J&&(X=m._firstPersonMode),m._88O&&m._88O.stop(!0);var P=m._center,l=m._eye,r=m.getCenterInfo().length,K=X?P:l,q=X?l:P,c=$r(K,q),$=f(c[0],c[2]),g=f(Z(c[0]*c[0]+c[2]*c[2]),c[1]),D=X?$i:tq;return X&&(I=-I),(b=Qp(b))?(b.action=function(z){m.fi({kind:m._rotating?"betweenRotate":"beginRotate"}),m._rotating=1;var V=$+A*z,b=g+I*z;b=yh(b),c[0]=r*j(b)*j(V),c[1]=r*C(b),c[2]=r*j(b)*C(V),K[0]=q[0]+c[0],K[1]=q[1]+c[1],K[2]=q[2]+c[2],m.fp(D,J,K)},b._37o=function(){delete m._88O,delete m._rotating,m.fi({kind:"endRotate"}),m.onRotateEnded()},m._88O=Bi(b)):($+=A,g+=I,g=yh(g),c[0]=r*j(g)*j($),c[1]=r*C(g),c[2]=r*j(g)*C($),K[0]=q[0]+c[0],K[1]=q[1]+c[1],K[2]=q[2]+c[2],m.fp(D,J,K),void 0)}},pan:function(N,S,e,K){if(N||S){var k=this;K==J&&(K=k._firstPersonMode),k._89O&&k._89O.stop(!0);var G=nf(k),U=[G[0]*N,G[4]*N,G[8]*N],c=[G[1]*S,G[5]*S,G[9]*S],j=U[0]+c[0],$=U[1]+c[1],L=U[2]+c[2],M=k._center,r=k._eye;if(K){var Q=lo(k.getBoundaries(),r[0],r[2],r[0]+j,r[2]+L,Z(j*j+L*L));j=Q[0],L=Q[1]}if(e=Qp(e)){var R=Se(r),b=Se(M);return e.action=function(Q){k.fi({kind:k._panning?"betweenPan":"beginPan"}),k._panning=1,M[0]=b[0]+j*Q,M[1]=b[1]+$*Q,M[2]=b[2]+L*Q,r[0]=R[0]+j*Q,r[1]=R[1]+$*Q,r[2]=R[2]+L*Q,k.fp(tq,J,r),k.fp($i,J,M)},e._37o=function(){delete k._89O,delete k._panning,k.fi({kind:"endPan"}),k.onPanEnded()},k._89O=Bi(e)}M[0]+=j,M[1]+=$,M[2]+=L,r[0]+=j,r[1]+=$,r[2]+=L,k.fp(tq,J,r),k.fp($i,J,M)}},walk:function(z,O,l){if(z){var c=this;l==J&&(l=c._firstPersonMode),c._90O&&c._90O.stop(!0);var P=c._center,V=c._eye,s=$r(P,V,!0);if(l){var X=lo(c.getBoundaries(),V[0],V[2],V[0]+s[0]*z,V[2]+s[2]*z,k(z));if(z=ii(X),!z)return;s=[X[0]/z,0,X[1]/z]}if(O=Qp(O)){var n=Se(V),E=Se(P);return O.action=function(j){c.fi({kind:c._walking?"betweenWalk":"beginWalk"}),c._walking=1;var Q=z*j;V[0]=n[0]+s[0]*Q,V[1]=n[1]+s[1]*Q,V[2]=n[2]+s[2]*Q,P[0]=E[0]+s[0]*Q,P[1]=E[1]+s[1]*Q,P[2]=E[2]+s[2]*Q,c.fp(tq,J,V),c.fp($i,J,P)},O._37o=function(){delete c._90O,delete c._walking,c.fi({kind:"endWalk"}),c.onWalkEnded()},c._90O=Bi(O)}V[0]+=s[0]*z,V[1]+=s[1]*z,V[2]+=s[2]*z,P[0]+=s[0]*z,P[1]+=s[1]*z,P[2]+=s[2]*z,c.fp(tq,J,V),c.fp($i,J,P)}},handleScroll:function(X,$){X.preventDefault();var R=this,a=R._moveStep;R.isFirstPersonMode()?R.isPannable()&&R.pan(0,$>0?a:-a):R.isZoomable()&&R.setZoom(0>$?1/Li:Li)},handlePinch:function(d,Y){this.isZoomable()&&this.setZoom(Y>d?1/Fg:Fg)},reset:function(){this.setCenter(r.graph3dViewCenter),this.setEye(r.graph3dViewEye),this.setUp(r.graph3dViewUp)},moveSelection:function(g,w,m){var v=this;v.dm().beginTransaction(),ih(this.sm().toSelection(this.isMovable,this),g,w,m),v.dm().endTransaction()},getMoveMode:function(T,i){var L=i.s("3d.move.mode");if(L)return L;var w="88",X="89",g="90";return Cm(T)||rc[w]&&rc[X]&&rc[g]?"xyz":rc[w]&&rc[X]?"xy":rc[w]&&rc[g]?"xz":rc[X]&&rc[g]?"yz":rc[w]?"x":rc[X]?"y":rc[g]?"z":"xz"},handleTick:function(){var u=this,K=!1,X=u._moveStep,z=X,w=!1,V=!0,P=u._rotateStep*(V?-1:1);if(u.isWalkable()||(z=0),u.isPannable()||(X=0),u.isRotatable()||(P=0),u._32Q){var B=(mj()-u._32Q)/50;z*=B,X*=B,P*=B}u._31Q&&(Lo(u._31Q),delete u._31Q,delete u._32Q),eh()&&(K=!0,u.pan(-X,0,w,V)),sc()&&(K=!0,u.pan(X,0,w,V)),_g()&&(K=!0,Cm()?u.pan(0,X,w,V):u.walk(z,w,V)),em()&&(K=!0,Cm()?u.pan(0,-X,w,V):u.walk(-z,w,V)),Jf()&&(K=!0,u.rotate(-P,0,w,V)),Yk()&&(K=!0,u.rotate(P,0,w,V)),mk()&&(K=!0,u.rotate(0,-P/2,w,V)),Vn()&&(K=!0,u.rotate(0,P/2,w,V)),K&&(u._32Q=mj(),u._31Q=id(u.handleTick,u))},handleKeyDown:function(Q){var R=this;!dh(Q)&&gs[Q.keyCode]?R.handleTick():Eh(Q)?R.selectAll():As(Q)?R.handleDelete(Q):_d(Q)&&this.isResettable()&&R.reset()},checkDoubleClickOnNote:function(p,g,Z){var R=this;if(Z===Hb){if(g.s("note.toggleable"))return g.s(Vd,!g.s(Vd)),R.fi({kind:"toggleNote",event:p,data:g,part:Z}),!0}else if(Z===Ar&&g.s("note2.toggleable"))return g.s(El,!g.s(El)),R.fi({kind:"toggleNote2",event:p,data:g,part:Z}),!0;return!1},checkDoubleClickOnRotation:function(T,k,o){return o===li?(k.setRotationX(0),!0):o===nh?(k.setRotationY(0),!0):o===pj?(k.setRotationZ(0),!0):!1},onRotateEnded:function(){},onWalkEnded:function(){},toViewPosition:function(x){var O=this,j=O.getWidth()/2,E=O.getHeight()/2,v=O._18Q;return v&&v._wh===j/E||(v=Le(O),O._18Q=ho(v,v,nf(O)),O._18Q._wh!==j/E),x=cp([x[0],x[1],x[2],1],v),{x:j+j*x[0]/x[3],y:E-E*x[1]/x[3]}},getHitPosition:function(U,q,c){var M=this,i=M.getWidth(),z=M.getHeight(),I=U.target?M.lp(U):U,F=I.x-i/2,h=I.y-z/2,T=M.getCenterInfo(),P=nf(M);q=q?q:[0,0,0],c=c?c:[0,1,0],F=F/i*T.width,h=-1*h/z*T.height;var r=[P[0]*F,P[4]*F,P[8]*F],b=[P[1]*h,P[5]*h,P[9]*h],L=[r[0]+b[0],r[1]+b[1],r[2]+b[2]],S=M.getCenter(),K=Ek(M,q,c,[L[0]+S[0],L[1]+S[1],L[2]+S[2]]);return K?K:[0,0,0]},getLineLength:function(o){this.validate();var k=this.getData3dUI(o);if(k&&k.getCache){var G=k.getCache();if(G)return G[G.length-1].length}return 0},getLineOffset:function(K,O){var s=this.getData3dUI(K);if(s&&s.getCache){var r=s.getCache();if(r)return Rl(r,O)}return J},isLabelVisible:function(){return!0},isNoteVisible:function(){return!0}});var cb=nc.Interactor=function(Q){this.gv=Q};Gg("Interactor",h,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()}});var Ui=nc.DefaultInteractor=function(D){Vp(Ui,this,[D])};Gg("DefaultInteractor",cb,{handle_contextmenu:function(q){pm(q)},handle_mousewheel:function(h){this.gv.handleScroll(h,h.wheelDelta/40)},handle_DOMMouseScroll:function(s){2===s.axis&&this.gv.handleScroll(s,-s.detail)},handle_keydown:function(t){this.gv.handleKeyDown(t)},handle_mousedown:function(W){this.handle_touchstart(W)},handle_touchstart:function(f){pm(f);var K=this,Q=K.gv,X=Dp(f),k=Q.getDataInfoAt(f),b=k?k.data:J,t=k?k.part:J,d=Q.sm(),F=Zg(f),U=yj(f);Q.setFocus(f)&&(K._62O=J,K._57I=J,b?dh(f)?d.co(b)?d.rs(b):d.as(b):d.co(b)||d.ss(b):X&&(dh(f)?Q.isRectSelectable()&&(K._62O=Hf):K._57I=Ao(f)),K._31Q&&(Lo(K._31Q),delete K._31Q,delete K._32Q),K._62O||(Q.isFirstPersonMode()&&(Cm(f)||U>2?K._62O="pan":Q.isMouseRoamable()||s?(K._62O="roaming",K.foward=F&&Dp(f),K._32Q=mj(),K._31Q=id(K.tick,K)):X||(K._62O="roaming")),K._62O||(X&&F&&Nf[t]?(K._62O=t,K.p3=b.p3()):X&&F&&Yq(b)&&Q.isSelected(b)&&Q.isMovable(b)?(K._62O="move",K.p3=b.p3(),K.movedata=b):s&&(U>2?K._62O="pan":2===U&&(K.dist=Lh(f),K._62O="pinch")))),K.point=Q.lp(f),Vk(K,f),qi(f)?Q.handleDoubleClick(f,b,t):Q.handleClick(f,b,t))},tick:function(){var A=this,r=A.gv,j=r._moveStep;A.point&&r.isWalkable()&&(A._32Q&&(j*=(mj()-A._32Q)/50),r.walk(A.foward?j:-j),A._32Q=mj(),A._31Q=id(A.tick,A))},handle_mouseup:function(v){this.handle_touchend(v)},handle_touchend:function(s){var y=this._57I;y&&(ii(y,Ao(s))<=1&&this.gv.sm().cs(),this._57I=J)},handleWindowMouseMove:function(W){this.handleWindowTouchMove(W)},handleWindowTouchMove:function(p){var s,j,d=this,L=d.gv,W=d._62O,B=d.point,U=L.dm(),_=L.lp(p),b=_.x-B.x,V=_.y-B.y,t=-l*b/L.getWidth(),u=-l*V/L.getHeight();if("roaming"===W)d.rotate(p,t/2,u/2);else if(W===li||W===nh||W===pj)L._86O||U.beginTransaction(),L.fi({kind:L._86O?"betweenEditRotation":"beginEditRotation",event:p}),L._86O=1,L.sm().each(function(Y){if(Yq(Y)&&L.isRotationEditable(Y)){var T=k(t)>k(u)?t:u;W===li?Y.setRotationX(Y.getRotationX()+T):W===nh?Y.setRotationY(Y.getRotationY()+T):W===pj&&Y.setRotationZ(Y.getRotationZ()+T)}});else if("move"===W||Nf[W]){W===xr||W===de||W===Xc?(L._87O||U.beginTransaction(),L.fi({kind:L._87O?"betweenEditSize":"beginEditSize",event:p}),L._87O=1):(L._moving||U.beginTransaction(),L.fi({kind:L._moving?"betweenMove":"beginMove",event:p}),L._moving=1);var M,P=d.p3,h=L.getPositionInfo(P),F=nf(L);M=W===vr?"x":W===hk?"y":W===bj?"z":W===xr?"sx":W===de?"sy":W===Xc?"sz":L.getMoveMode(p,d.movedata),b=b/L.getWidth()*h.width,V=-1*V/L.getHeight()*h.height;var m,T,O=[F[0]*b,F[4]*b,F[8]*b],I=[F[1]*V,F[5]*V,F[9]*V],R=O[0]+I[0],w=O[1]+I[1],Y=O[2]+I[2],f=[P[0]+R,P[1]+w,P[2]+Y],K=$r(L.getEye(),f,!0);if("xyz"===M?(m=f,L.moveSelection(R,w,Y)):"xz"===M?(m=Ek(L,P,[0,1,0],f),m&&L.moveSelection(m[0]-P[0],0,m[2]-P[2])):"xy"===M?(m=Ek(L,P,[0,0,1],f),m&&L.moveSelection(m[0]-P[0],m[1]-P[1],0)):"yz"===M?(m=Ek(L,P,[1,0,0],f),m&&L.moveSelection(0,m[1]-P[1],m[2]-P[2])):"x"===M||"sx"===M?(K[0]=0,m=Ek(L,P,K,f),m&&(T=m[0]-P[0],"x"===M?L.moveSelection(T,0,0):L.sm().each(function(v){Yq(v)&&L.isSizeEditable(v)&&(s=S(Oo,v.getWidth()+T),j=s/v.getWidth(),v.setWidth(s),Cm(p)&&(v.setHeight(v.getHeight()*j),v.setTall(v.getTall()*j)))}))):"y"===M||"sy"===M?(K[1]=0,m=Ek(L,P,K,f),m&&(T=m[1]-P[1],"y"===M?L.moveSelection(0,T,0):L.sm().each(function(e){Yq(e)&&L.isSizeEditable(e)&&(s=S(Oo,e.getTall()+T),j=s/e.getTall(),e.setTall(s),Cm(p)&&(e.setHeight(e.getHeight()*j),e.setWidth(e.getWidth()*j)))}))):("z"===M||"sz"===M)&&(K[2]=0,m=Ek(L,P,K,f),m&&(T=m[2]-P[2],"z"===M?L.moveSelection(0,0,T):L.sm().each(function(A){Yq(A)&&L.isSizeEditable(A)&&(s=S(Oo,A.getHeight()+T),j=s/A.getHeight(),A.setHeight(s),Cm(p)&&(A.setTall(A.getTall()*j),A.setWidth(A.getWidth()*j)))}))),!m)return;d.p3=m}else if(W===Hf){var n=d.div;n||(n=d.div=cd(),tf(d.getView(),n),n.op=B,n.style.background=L.getRectSelectBackground()),L.fi({kind:L._rectSelecting?"betweenRectSelect":"beginRectSelect",event:p}),L._rectSelecting=1,n.rect=Pk(n.op,_),zq(n,n.rect)}else if("pinch"===W&&2===yj(p)){L.fi({kind:L._pinching?"betweenPinch":"beginPinch",event:p}),L._pinching=1;var T=Lh(p);L.handlePinch(T,d.dist),d.dist=T}else"pan"===W||Cm(p)?d.pan(p,b,V):L.isFirstPersonMode()||(Dp(p)?d.rotate(p,t,u):(d.pan(p,b,0),L.isWalkable()&&(L.fi({kind:L._walking?"betweenWalk":"beginWalk",event:p}),L._walking=1,L.walk(V/L.getHeight()*L.getCenterInfo().height))));d.point=_},pan:function(m,Y,P){var G=this.gv;if(G.isPannable()){var C=G.getCenterInfo(),J=Y/G.getWidth()*C.width,$=-1*P/G.getHeight()*C.height;G.fi({kind:G._panning?"betweenPan":"beginPan",event:m}),G._panning=1,G.pan(-J,-$)}},rotate:function(J,w,M){var _=this.gv;_.isRotatable()&&(_.fi({kind:_._rotating?"betweenRotate":"beginRotate",event:J}),_._rotating=1,_.rotate(w,M))},handleWindowMouseUp:function(j){this.handleWindowTouchEnd(j)},handleWindowTouchEnd:function(m){var i=this,P=i.gv,k=P.dm(),_=i.div;if(_){var H=P.getDatasInRect(_.rect);if(!H.isEmpty()){var U=P.sm(),t=U.toSelection();H.each(function(_){U.co(_)?t.remove(_):t.add(_)}),U.ss(t)}Aq(_)}P._moving&&(delete P._moving,P.fi({kind:"endMove",event:m}),P.onMoveEnded(),k.endTransaction()),P._panning&&(delete P._panning,P.fi({kind:"endPan",event:m}),P.onPanEnded()),P._rotating&&(delete P._rotating,P.fi({kind:"endRotate",event:m}),P.onRotateEnded()),P._86O&&(delete P._86O,P.fi({kind:"endEditRotation",event:m}),k.endTransaction()),P._87O&&(delete P._87O,P.fi({kind:"endEditSize",event:m}),k.endTransaction()),P._pinching&&(delete P._pinching,P.fi({kind:"endPinch",event:m}),P.onPinchEnded()),P._rectSelecting&&(delete P._rectSelecting,P.fi({kind:"endRectSelect",event:m}),P.onRectSelectEnded()),P._walking&&(delete P._walking,P.fi({kind:"endWalk",event:m}),P.onWalkEnded()),i.dist=i.point=i._62O=i.p3=i.movedata=i.div=i._57I=i._32Q=i._31Q=i.foward=J}});var Ch=function(d){this.gv=d};js(Ch,h,{_iv:!0,iv:function(){this._iv=!0},face:function($,q){var I=this,S=I.gv.getGL();if(!S||!Yq($))return J;var n=q.x,M=q.width,G=q.height,O=I.height-q.y-G,c=N(M/2),r=new Uint8Array(4*M*G),F=0;for(I.iv(),I.validate($),wl(S,I.frame),S.readPixels(n,O,M,G,S.RGBA,S.UNSIGNED_BYTE,r),wl(S,J),I.iv();c>=F;F++)for(var o=c-F,h=c+F,T=o;h>=T;T++)for(var Y=o;h>=Y;Y++)if(T===o||T===h||Y===o||Y===h){var v=Xl.m[r[4*(T*M+Y)]];if(v)return v}},get:function(C,Q){this.validate();var R=this,s=R.gv.getGL();if(!s)return J;var I,p,D=C.x,o=C.width,B=C.height,t=R.height-C.y-B,Z=N(o/2),m=new Uint8Array(4*o*B),K=0,E=m.length,U=Q?J:new Cq,j=Q?J:{};if(wl(s,R.frame),s.readPixels(D,t,o,B,s.RGBA,s.UNSIGNED_BYTE,m),wl(s,J),Q){for(;Z>=K;K++)for(var v=Z-K,l=Z+K,x=v;l>=x;x++)for(var M=v;l>=M;M++)if((x===v||x===l||M===v||M===l)&&(I=R.info(m,4*(x*o+M))))return I}else for(;E>K;K+=4)I=R.info(m,K),I&&(p=I.data,j[p._id]||(U.add(p),j[p._id]=p));return U},info:function(h,N){return this.colorMap[(h[N]<<16)+(h[N+1]<<8)+h[N+2]+((127&h[N+3])<<24)]},validate:function(d){var R=this,A=R.gv,k=A.getGL();if(k){var S=A.getWidth(),s=A.getHeight(),r=k.RGBA,Y=k.TEXTURE_2D,T=k.RENDERBUFFER,e=k.FRAMEBUFFER;R.texture||(R.texture=Zi(k),R.render=k.createRenderbuffer(),R.frame=k.createFramebuffer()),(R.width!==S||R.height!==s)&&(Tl(k,R.texture),k.texImage2D(Y,0,r,S,s,0,r,k.UNSIGNED_BYTE,J),Og(k,k.TEXTURE_MIN_FILTER,k.LINEAR),k.bindRenderbuffer(T,R.render),k.renderbufferStorage(T,k.DEPTH_COMPONENT16,S,s),wl(k,R.frame),k.framebufferTexture2D(e,k.COLOR_ATTACHMENT0,Y,R.texture,0),k.framebufferRenderbuffer(e,k.DEPTH_ATTACHMENT,T,R.render),Tl(k,J),k.bindRenderbuffer(T,J),wl(k,J),R.width=S,R.height=s),R._iv&&(R._iv=!1,wl(k,R.frame),A._42(d||(R.colorMap={}),1),wl(k,J))}}});var xl=function(g){this.gv=g};js(xl,h,{gap:0,size:0,_42:function(P,z){var B=this,a=B.gv,f=a._gridGap,K=a._gridSize;if(a._gridVisible){if(B.gap!==f||B.size!==K){for(var h=[],y=a._gridSize/2,Q=f*y,g=0;2*y+1>g;g++){var p=6*g,$=6*(2*y+1)+p;h[p]=-Q,h[p+1]=0,h[p+2]=-Q+g*f,h[p+3]=Q,h[p+4]=0,h[p+5]=-Q+g*f,h[$]=-Q+g*f,h[$+1]=0,h[$+2]=-Q,h[$+3]=-Q+g*f,h[$+4]=0,h[$+5]=Q}B.vs=new Jg(h),B.gap=f,B.size=K}Zk(a),Rb(P,z),bc(P),Nh(P,z,1,a._gridColor,a._buffer.vs,B.vs),mo(P,0,B.vs.length/3,P.LINES),Zc(P),vj(P,z)}else B.vs=B.gap=B.size=J}});var hm=function(n){this.gv=n};js(hm,h,{_42:function(k,q){var o=this.gv,N=o._buffer.vs,Q=o._axisXColor,v=o._axisYColor,M=o._axisZColor,x=o._originAxisVisible,U=o._centerAxisVisible;if(x||U){var Y=y?k.TRIANGLES:k.TRIANGLE_FAN,j=k.LINES;if(Zk(o),Rb(k,q),bc(k),x){var $=o.getCenterInfo(),z=c($.width,$.height)/5,C=.8*z,u=.05*z;Nh(k,q,1.5,Q,N,new Jg([0,0,0,z,0,0,C,u,0,C,0,u,C,-u,0,C,0,-u,C,u,0,0,0,0,0,z,0,u,C,0,0,C,u,-u,C,0,0,C,-u,u,C,0,0,0,0,0,0,z,u,0,C,0,u,C,-u,0,C,0,-u,C,u,0,C])),mo(k,0,2,j),mo(k,1,6,Y),Nh(k,q,J,v),mo(k,7,2,j),mo(k,8,6,Y),Nh(k,q,J,M),mo(k,14,2,j),mo(k,15,6,Y)}if(U){var W=o._center,A=W[0],m=W[1],l=W[2],$=o.getPositionInfo(W);z=c($.width,$.height)/20,Nh(k,q,1.5,Q,N,new Jg([A,m,l,A+z,m,l,A,m,l,A,m+z,l,A,m,l,A,m,l+z])),mo(k,0,2,j),Nh(k,q,J,v),mo(k,2,2,j),Nh(k,q,J,M),mo(k,4,2,j)}Zc(k),vj(k,q)}}});var Hd=function(i){this.gv=i},vr="edit_tx",hk="edit_ty",bj="edit_tz",li="edit_rx",nh="edit_ry",pj="edit_rz",xr="edit_sx",de="edit_sy",Xc="edit_sz",Nf={};Nf[vr]=1,Nf[hk]=1,Nf[bj]=1,Nf[li]=1,Nf[nh]=1,Nf[pj]=1,Nf[xr]=1,Nf[de]=1,Nf[Xc]=1,js(Hd,h,{_42:function(A,I,x){var G=this,H=G.gv,b=H.sm().ld();if(H.isEditable(b)&&!H.isEditHelperDisabled()&&Yq(b)&&(!H.isFirstPersonMode()||!H.isMouseRoamable()&&!s)){Zk(H);var i,y,C=H.isMovable(b),L=H.isRotationEditable(b),z=H.isSizeEditable(b),Y=H._axisXColor,V=H._axisYColor,p=H._axisZColor,n=H._editSizeColor,Z=H.getCenterInfo(),F=c(Z.width,Z.height)/10,K=F/(x?5:10),q=.7*F,j=.4*q,h=b.p3(),T=h[0],$=h[1],_=h[2];i=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],C&&G._17O(A,I,b,x,vr,Y,i,[T,$-K,_,T+q,$-K,_,T+q,$,_,T+q,$,_,T,$,_,T,$-K,_,T,$-K,_+K,T+q,$-K,_+K,T+q,$-K,_,T+q,$-K,_,T,$-K,_,T,$-K,_+K]),y=T+q,z&&G._17O(A,I,b,x,xr,n,i,[y,$-K,_,y+j,$-K,_,y+j,$,_,y+j,$,_,y,$,_,y,$-K,_,y,$-K,_+K,y+j,$-K,_+K,y+j,$-K,_,y+j,$-K,_,y,$-K,_,y,$-K,_+K]),y+=j,L&&G._17O(A,I,b,x,li,Y,i,[y,$-K,_,y+j,$-K,_,y+j,$,_,y+j,$,_,y,$,_,y,$-K,_,y,$-K,_+K,y+j,$-K,_+K,y+j,$-K,_,y+j,$-K,_,y,$-K,_,y,$-K,_+K]),i=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],C&&G._17O(A,I,b,x,hk,V,i,[T,$,_,T,$+q,_,T-K,$+q,_,T-K,$+q,_,T-K,$,_,T,$,_,T,$,_,T,$,_-K,T,$+q,_-K,T,$+q,_-K,T,$+q,_,T,$,_]),y=$+q,z&&G._17O(A,I,b,x,de,n,i,[T,y,_,T,y+j,_,T-K,y+j,_,T-K,y+j,_,T-K,y,_,T,y,_,T,y,_,T,y,_-K,T,y+j,_-K,T,y+j,_-K,T,y+j,_,T,y,_]),y+=j,L&&G._17O(A,I,b,x,nh,V,i,[T,y,_,T,y+j,_,T-K,y+j,_,T-K,y+j,_,T-K,y,_,T,y,_,T,y,_,T,y,_-K,T,y+j,_-K,T,y+j,_-K,T,y+j,_,T,y,_]),i=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],C&&G._17O(A,I,b,x,bj,p,i,[T,$,_,T,$,_+q,T,$-K,_+q,T,$-K,_+q,T,$-K,_,T,$,_,T,$-K,_,T-K,$-K,_,T-K,$-K,_+q,T-K,$-K,_+q,T,$-K,_+q,T,$-K,_]),y=_+q,z&&G._17O(A,I,b,x,Xc,n,i,[T,$,y,T,$,y+j,T,$-K,y+j,T,$-K,y+j,T,$-K,y,T,$,y,T,$-K,y,T-K,$-K,y,T-K,$-K,y+j,T-K,$-K,y+j,T,$-K,y+j,T,$-K,y]),y+=j,L&&G._17O(A,I,b,x,pj,p,i,[T,$,y,T,$,y+j,T,$-K,y+j,T,$-K,y+j,T,$-K,y,T,$,y,T,$-K,y,T-K,$-K,y,T-K,$-K,y+j,T-K,$-K,y+j,T,$-K,y+j,T,$-K,y])}},_17O:function(A,Y,d,c,L,h,K,W){var n=this.gv._buffer;Bf(A,Y,c,!0,d,L),Uh(A,Y,J,!0,J,!0,J,!1),lp(A,Y.uDiffuse,h),sb(A,n.vs,new Jg(W),Y.aPosition),sb(A,n.ns,new Jg(K),Y.aNormal),bc(A),mo(A,0,12),Zc(A),Wg(A,Y)}});var Mc=function(o,g){this.gv=o,this.s=function(f,S,H){return S==J&&(S=H),S==J?g.getStyle(f):dg(S,g,o)},this.data=g};js(Mc,h,{I3d:!0,ms_icons:1,_iv:!0,iv:function(){this._iv=!0},_42:function(Z,q,X,s){var B=this,y=B.data;if(!(y instanceof Ij)){var L,O,n,f,S,h,V,r=B.gv,e=y._id,H=B.s("shape3d.alwaysOnTop")?null:B.s("batch"),P=r._batchIndexMap,$=r._batchModelMap,j=r.isSelectable(y),z=r.getBrightness(y),E=z!=J&&1!==z;if(B.needValidate(Z)){if(n=Jq(P,$,y,H),B.validate(n,H?kg[H]||fs:J),n&&(f=P[e],S=f.size=n.vs.length/3-f.begin,V=n.rs))for(z=E?z:1,h=0;S>h;h++)V.push(z);if(Yq(y)){var C=r.getWireframeGeometry(y);if(C)So(r,y,C);else{var c=r.getWireframe(y);c&&So(r,y,c)}}B.labelInfo=B.label2Info=B.noteInfo=B.note2Info=B._38o=J,B._24O(ld,"getLabel"),B._24O(rh,"getLabel2"),B._26O(Hb,"getNote"),B._26O(Ar,"getNote2"),B._15O(),B._iv=!1}E&&lp(Z,q.uBrightness,z),lp(Z,q.uAlphaTest,B.s("alphaTest")),O=Bf(Z,q,X,j,y,Eo),O&&(qf(O,P[e],$),qf(O,r._polylineIndexMap[e],r._polylineModelMap),qf(O,r._wireframeIndexMap[e],r._wireframeModelMap)),P[e]||B._80o(Z,q,s),r.isLabelVisible(y)&&((L=B.labelInfo)&&(Bf(Z,q,X,j,y,ld),B._28O(L,ld,s)),(L=B.label2Info)&&(Bf(Z,q,X,j,y,rh),B._28O(L,rh,s))),r.isNoteVisible(y)&&((L=B.noteInfo)&&(Bf(Z,q,X,j,y,Hb),B._29O(L,Hb,s)),(L=B.note2Info)&&(Bf(Z,q,X,j,y,Ar),B._29O(L,Ar,s))),(L=B._38o)&&B._99O(Z,q,L,X,j,s),E&&lp(Z,q.uBrightness,1)}},needValidate:function(){return this._iv},validate:function(){},_16O:function(){return od},_80o:function(){},dispose:function(){},_calcAnchorMat:function(T){if(T.hasOwnProperty("_anchor")||T.hasOwnProperty("_anchorElevation")){var Z=T.getAnchor3d(),y={x:Z.x-.5,y:Z.y-.5,z:Z.z-.5},E=Ln();return _o(E,[-y.x,-y.y,-y.z]),E}},getBodyColor:function(f){var p=this.data,K=this.gv.getBodyColor(p);return K?K:f?p.getStyle(f):J},_24O:function(G,F){var V=this,n=V.data,B=V.gv,w=V.s,O=B[F](n);if(O!=J){var t=w(G+".scale"),u=w(G+".max"),M=V[G+"Info"]={label:O,textureScale:w(G+".texture.scale"),color:B[F+"Color"](n),font:w(G+".font"),align:w(G+".align"),background:B[F+"Background"](n)},p=M.rect=bp(M,O);u>0&&u<p.width&&(M.labelWidth=p.width,p.width=u),p.x=p.y=0,p.width*=t,p.height*=t,M.mat=V._16O(w(G+".autorotate"),w(G+".position"),p,w(G+".face"),w(G+".t3"),w(G+".r3"),w(G+".rotationMode"));var k=p.width/2,f=p.height/2;M.vs=new Jg([-k,f,0,-k,-f,0,k,-f,0,k,f,0]),p.width/=t,p.height/=t}},_26O:function(Y,D){var M=this,n=M.data,O=M.gv,Q=M.s,f=O[D](n);if(f!=J){var l=Q(Y+".scale"),c=this[Y+"Info"]={note:f,textureScale:Q(Y+".texture.scale"),expanded:Q(Y+".expanded"),font:Q(Y+".font"),color:Q(Y+".color"),align:Q(Y+".align"),borderWidth:Q(Y+".border.width"),borderColor:Q(Y+".border.color"),background:O[D+"Background"](n)};if(c.expanded){var X=Q(Y+".max"),k=bp(c,f);k.width+=6,k.height+=2,X>0&&X<k.width&&(c.labelWidth=k.width,k.width=X);var $={x:-k.width/2,y:-8-k.height,width:k.width,height:k.height+8}}else $={x:-6,y:-18,width:12,height:18};c.mat=M._16O(Q(Y+".autorotate"),Q(Y+".position"),J,Q(Y+".face"),Q(Y+".t3"),Q(Y+".r3"),Q(Y+".rotationMode")),c.rect=$,1!==l&&($=Se($),$.x*=l,$.height*=l,$.y=-$.height,$.width*=l);var V=$.x,B=$.y,K=$.width,U=$.height;c.vs=new Jg([V,-B,0,V,-B-U,0,V+K,-B-U,0,V+K,-B,0])}},_28O:function(X,y,t){if(t(this.s(y+".transparent"))){var L=X.rect,i=X.textureScale,x=L.width*i,m=L.height*i;if(x>=1&&m>=1){var l=vd(x,m);1!==i&&(l.translate(l,L.x,L.y),l.scale(i,i),l.translate(l,-L.x,-L.y)),gf(l,X),l.restore(),Ul(this,y,X.mat,X.vs,!0)}}},_29O:function(n,D,X){if(X(this.s(D+".transparent"))){var W=n.rect,h=n.textureScale,R=W.x,d=W.y,B=W.width*h,C=W.height*h;if(B>=1&&C>=1){W.x=W.y=0;var L=vd(B,C);1!==h&&L.scale(h,h),Hh(L,n),L.restore(),W.x=R,W.y=d,Ul(this,D,n.mat,n.vs,!1)}}},_99O:function(s,R,n,K,x,e){if(n){var q=this,j=q.gv,u=q.data,p=j._buffer,H=j._1O,v=n.icons;for(var k in v){var g=v[k],V=n.rects[k];if(V&&e(dg(g.transparent,u,j))){Bf(s,R,K,x,u,k);var o=dg(g.shape3d,u,j),X=o?[o]:dg(g.names,u,j),C=X?X.length:0,E=dg(g.textureScale,u,j)||1,Y=dg(g.light,u,j);Y==J&&(Y=o?!0:!1),Uh(s,R,dg(g.blend,u,j),Y,dg(g.opacity,u,j),dg(g.reverseFlip,u,j),dg(g.reverseColor,u,j),dg(g.reverseCull,u,j));for(var b=0;C>b;b++){var D=X[b],I=V[b];if(Kh(q,I.mat),o)zp(j,u,rq(q,o),q);else{var c=$l(D);if(c){var O=I.width*E,i=I.height*E;if(O>=1&&i>=1){var S=vd(O,i);Ck(S,c,dg(g.stretch,u,j),0,0,O,i,u,j),S.restore(),Zi(s,cn,H),bc(s,R,H,dg(g.discardSelectable,u,j),p.uv,dq),sb(s,p.vs,I.vs,R.aPosition),xp(s,p.ns,ci,R.aNormal),Hp(s,p.is,Ad),zi(s,0,Ad.length),Zc(s,R,H)}}}Jm(j)}Wg(s,R)}}}}});var _e=function(W,n){Vp(_e,this,[W,n])};js(_e,Mc,{_16O:function(A,X,J,U,m,r,o,O,y){var l=this.data,L=l.getFinalScale3d(),c=zl(X,L,J,U,O,y);if(l.hasOwnProperty("_anchor")||l.hasOwnProperty("_anchorElevation")){var G=l.getAnchor3d();c[0]-=(G.x-.5)*L[0],c[1]-=(G.y-.5)*L[1],c[2]-=(G.z-.5)*L[2]}return Jc(Ln(),c,l.p3(),U,m,r,o,A,l.r3(),l.getRotationMode())},clear:function(){var S=this;S.faceMat=S.mat=S.shapeModel=S.left=S.right=S.front=S.back=S.top=S.bottom=S.csg=J},needValidate:function(i){if(this._iv)return this._validateFrameId=i._renderInfo.frame,!0;if(this.s("shape3d.autorotate")||this.s("shape3d.fixSizeOnScreen")||this.s("hide.overlapping.group")){var C=i._renderInfo.frame;if(this._validateFrameId!==C)return this._validateFrameId=C,!0}return!1},validate:function(H,Q){var g=this,i=g.gv,n=g.data,U=rq(g);g._updateAutoRotation(),g._updateFixSize2d(),g._updateOverlapping(),(this.s("shape3d.autorotate")||this.s("shape3d.fixSizeOnScreen"))&&(Ob(i,n,"_wireframeModelMap","_wireframeIndexMap"),Ob(i,n,"_wireframeModelMapSwap","_wireframeIndexMapSwap"));var l=ao(n,i.getMat(n),U?g.s("shape3d.scaleable"):!0),C=g._calcAnchorMat(n);if(C&&ho(l,l,C),g.clear(),H){var t=[];U?Oe(i,n,U,g,g.getBodyColor(),[l],H,t):(ic(i,n,H,Q,l,fh,t,Lj),ic(i,n,H,Q,l,um,t,Oj),ic(i,n,H,Q,l,Wc,t,Di),ic(i,n,H,Q,l,Wb,t,Ah),ic(i,n,H,Q,l,Im,t,fm),ic(i,n,H,Q,l,Id,t,sq)),t.length&&(im(H.vs,t),im(H.ns,Ac(t)))}else g.mat=l,(g.shapeModel=U)||(g._cubeUvs=null,g.vf(fh,0),g.vf(um,16),g.vf(Im,8),g.vf(Id,24),g.vf(Wc,32),g.vf(Wb,40))},_updateAutoRotation:function(){var l=this,S=l.s("shape3d.autorotate");if(S){var v,t=l.gv,u=l.data;v="string"==typeof S?[S.indexOf("x")<0?t._eye[0]:t._center[0],S.indexOf("y")<0?t._eye[1]:t._center[1],S.indexOf("z")<0?t._eye[2]:t._center[2]]:t._eye;var R=t._center,E=[v[0]-R[0],v[1]-R[1],v[2]-R[2]],N=u.p3(),s=Xi([N[0]+E[0],N[1]+E[1],N[2]+E[2]],N,t._up),G=u.r3(),C=kj(s,u.getRotationMode());Math.abs(G[0]-C[0])<1e-5&&Math.abs(G[1]-C[1])<1e-5&&Math.abs(G[2]-C[2])<1e-5||u.r3(C)}},_updateFixSize2d:function(){var a=this,i=a.data,A=a.s("shape3d.fixSizeOnScreen");if(!A)return i._dynamicScale3d&&delete i._dynamicScale3d,void 0;var W=a.gv;i.getFinalScale3d();var j=ao(i,W.getMat(i)),w=Nq([0,0,0],j),f=W.toViewPosition(w);if(!isNaN(f.x)&&!isNaN(f.y)){var J=Nq([1,0,0],j),r=W.toViewPosition(J),m=Nq([0,1,0],j),s=W.toViewPosition(m),F=r.x-f.x,E=s.y-f.y,v=i._dynamicScale3d||[1,1,1],U=$l(i.s("shape3d.image")),X=A[0]>0?A[0]:U?Sf(U,a):20,u=A[1]>0?A[1]:U?tk(U,a):20,T=Math.abs(F/X),V=Math.abs(E/u);Math.abs(T-1)<.001&&Math.abs(V-1)<.001||(i._dynamicScale3d=[v[0]/T,v[1]/V,v[2]])}},_updateOverlapping:function(){var M=this,W=M.s("hide.overlapping.group");if(!W)return M._rectOverlapping&&(M._rectOverlapping=e),void 0;var A,S,z,s=M.gv,L=M.data,B=ao(L,s.getMat(L)),u=1/0,k=1/0,w=-1/0,d=-1/0,E=L.getAnchor3d(),n=E.x,D=E.y,x=E.z;for(A=0;8>A;A++){if(S=Nq([(A>>2)-n,(1&A>>1)-D,(1&A)-x],B),z=s.toViewPosition(S),isNaN(z.x)||isNaN(z.y))return;u=Math.min(u,z.x),w=Math.max(w,z.x),k=Math.min(k,z.y),d=Math.max(d,z.y)}var F={x:u,y:k,w:w-u,h:d-k};M._rectOverlapping=s.overlappingBox.isOverlapping(W,F)},getVectorDynamicSize:function(){var b,i=this,R=i.s("shape3d"),t=i.data;if("billboard"===R||"plane"===R||(b=t._currentCubeElementId)!=J){var C,m,n=i.gv,W=ao(t,n.getMat(t)),p=function(w,U){var Y=n.toViewPosition(Nq(w,W)),y=n.toViewPosition(Nq(U,W)),i=Y.x-y.x,r=Y.y-y.y;return Math.min(2048,Math.sqrt(i*i+r*r))};if("billboard"===R)C=p([-.5,0,0],[.5,0,0]),m=p([0,-.5,0],[0,.5,0]);else if("plane"===R)C=p([-.5,0,0],[.5,0,0]),m=p([0,0,-.5],[0,0,.5]);else if(t._currentCubeElementId!=J){var z=3*Xo[b+1],w=3*Xo[b],c=3*Xo[b+2];C=p([yb[z],yb[z+1],yb[z+2]],[yb[c],yb[c+1],yb[c+2]]),m=p([yb[z],yb[z+1],yb[z+2]],[yb[w],yb[w+1],yb[w+2]])}return[C,m]}},vf:function(p,C){var u=this;if(u.gv.getFaceVisible(u.data,p)){var Q=Hr(u,p);Q.mat&&(u.faceMat=!0);var t=Q.uv;if(t){var L=u._cubeUvs;L||(L=u._cubeUvs=new Jg([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]));for(var k=0;8>k;k++)L[C+k]=t[k]}return Q}},_80o:function(d,V,H){var O=this;if(O._rectOverlapping)return!0;var b=O.gv,F=O.data,I=b._cube,U=O.shapeModel;Zk(b,O.mat),U?zp(b,F,U,O,O.getBodyColor(),H):(sb(d,I.vs,J,V.aPosition),sb(d,I.ns,J,V.aNormal),Yn(d,I.is),O._18O(d,V,O.left,0,H),O._18O(d,V,O.front,6,H),O._18O(d,V,O.right,12,H),O._18O(d,V,O.back,18,H),O._18O(d,V,O.top,24,H),O._18O(d,V,O.bottom,30,H)),Jm(b),O.faceMat&&(O._18O(d,V,O.left,0,H,!0),O._18O(d,V,O.front,6,H,!0),O._18O(d,V,O.right,12,H,!0),O._18O(d,V,O.back,18,H,!0),O._18O(d,V,O.top,24,H,!0),O._18O(d,V,O.bottom,30,H,!0))},_18O:function(t,i,S,B,A,I){if(S){if(!A(S.transparent))return;if(I&&!S.mat||!I&&S.mat)return;I&&Zk(this.gv,S.mat);var a=this,v=a.data;v._currentCubeElementId=B;var O=a.gv,y=O.getTexture(S.texture,v),s=S.uv,K=S.uvScale,k=S.uvOffset,h=S.discardSelectable;y?s?bc(t,i,y,h,O._buffer.uv,a._cubeUvs,k,K):bc(t,i,y,h,O._cube.uv,J,k,K):bc(t),Uh(t,i,S.blend,S.light,S.opacity,S.reverseFlip,S.reverseColor,S.reverseCull),lp(t,i.uDiffuse,S.color),zi(t,B,6),Wg(t,i),Zc(t,i,y),I&&Jm(O),v._currentCubeElementId=null}}});var Xr=function(x,C){Vp(Xr,this,[x,C])};js(Xr,Mc,{_25Q:1,validate:function(G){var h=this,L=h.gv,H=h.data,R=h.s,K=R("edge.width"),T=H._40I,d=H._41I;if(h.shapeModel=h.info=J,T&&d){var W,q,Q,D,Y,b,w,U,O,g,p=H.isLooped(),t=R(pk),f=r.getEdgeType(t);if(f){var a=f(H,am(h,L,H,p,t),L,h._19Q);if(!a.points||a.points.isEmpty())return;b=h.info={},w=a.segments,Y=a.points,U=Y.size();for(var m=T.getElevation(),n=d.getElevation(),V=0;U>V;V++){var N=Y.get(V);N.e==J&&(N.e=m+(n-m)*V/(U-1))}O=mq(Y.get(0)),g=mq(Y.get(U-1));var Z=U%2;0===Z?(b.c1=mq(Y.get(U/2-1)),b.c2=mq(Y.get(U/2))):b.p3=mq(Y.get((U-Z)/2)),b.s1=O,b.s2=mq(Y.get(1)),b.t1=mq(Y.get(U-2)),b.t2=g}else{Y=new Cq,b=h.info={};var E=R("edge.offset"),k=R("edge.center"),y=R("edge.source.t3"),F=R("edge.target.t3"),u=T.p3(),C=d.p3();if(y&&(u[0]+=y[0],u[1]+=y[1],u[2]+=y[2]),F&&(C[0]+=F[0],C[1]+=F[1],C[2]+=F[2]),t===co){w=R("edge.segments");var I=b.points=R(mg)||Bo;if(U=I.size()){O=mq(I.get(0)),g=mq(I.get(U-1)),!k&&E&&(Q=$r(O,u,!0),E=c(E,ii(u,O)),u=[u[0]+Q[0]*E,u[1]+Q[1]*E,u[2]+Q[2]*E],Q=$r(C,g,!0),E=c(E,ii(g,C)),C=[C[0]-Q[0]*E,C[1]-Q[1]*E,C[2]-Q[2]*E]);var Z=U%2;0===Z?(W=mq(I.get(U/2-1)),q=mq(I.get(U/2))):b.p3=mq(I.get((U-Z)/2)),b.s1=u,b.s2=O,b.t1=g,b.t2=C}else!k&&E&&(Q=$r(C,u,!0),D=ii(u,C),E=Cg(E,D),u=[u[0]+Q[0]*E,u[1]+Q[1]*E,u[2]+Q[2]*E],C=[C[0]-Q[0]*E,C[1]-Q[1]*E,C[2]-Q[2]*E]),W=u,q=C;Y.add({x:u[0],y:u[2],e:u[1]}),Y.addAll(I),Y.add({x:C[0],y:C[2],e:C[1]})}else{var z=am(h,L,H,p,t);if(h._19Q||(z=-z),p){var j=u[0],S=u[1],A=u[2],i=T.getTall()/2+z;W=[j-z,S+i,A],q=[j+z,S+i,A],Y.add({x:j-z,y:A,e:S}),Y.add({x:j-z,y:A,e:S+i}),Y.add({x:j+z,y:A,e:S+i}),Y.add({x:j+z,y:A,e:S})
}else{Q=$r(C,u,!0),D=ii(u,C);var v={x:u[0],y:u[2]},l={x:C[0],y:C[2]},P=Ye(J,v,l,z),B=P.x-v.x,$=P.y-v.y;E=Cg(E,D),Q[0]*=E,Q[1]*=E,Q[2]*=E,W=[u[0]+Q[0]+B,u[1]+Q[1],u[2]+Q[2]+$],q=[C[0]-Q[0]+B,C[1]-Q[1],C[2]-Q[2]+$],k?(Y.add({x:u[0],y:u[2],e:u[1]}),Y.add({x:W[0],y:W[2],e:W[1]}),Y.add({x:q[0],y:q[2],e:q[1]}),Y.add({x:C[0],y:C[2],e:C[1]})):(Y.add({x:W[0],y:W[2],e:W[1]}),Y.add({x:q[0],y:q[2],e:q[1]}))}}b.c1=W,b.c2=q}b.list=R(qb)===hr?h.createTubeModel(Y,w,K/2,G):h.createLineModel(Y,w,K,"edge","edge.dash")}}});var Wp=function(L,W){Vp(Wp,this,[L,W])};js(Wp,_e,{_80o:function(K,B,m){var i=this,k=i.gv,Y=i.shapeModel;Zk(k,i.mat),Y?zp(k,i.data,Y,i,i.getBodyColor(),m):(Sl(i,K,B,i.left,m),Sl(i,K,B,i.front,m),Sl(i,K,B,i.right,m),Sl(i,K,B,i.back,m),Sl(i,K,B,i.top,m),Sl(i,K,B,i.bottom,m)),Jm(k)},validate:function(F,g){var a,e,h=this,G=h.s,Q=h.data,A=Q.p3(),O=Q._thickness/2,M=Q.isClosePath(),W=Q.getPoints(),k=Q.getSegments(),m=G(Ki),f=F&&F.uv;if(h.clear(),0>O)e=h.shapeModel=hs(W,k,G(Cr),G(Mi),m,G(Pl),Q.getTall(),Q.getShapeElevation(),M),G(wo)?G("shape3d.image")||delete e.uv:(delete e.vs,delete e.ns,delete e.uv),G("shape3d.top.image")||delete e.top_uv,G("shape3d.bottom.image")||delete e.bottom_uv;else if(G(qb)===hr)a=rg(W,k,m,M),e=h.shapeModel={vs:[]},G("shape3d.image")&&(e.uv=[],e.sum=G(Pl)||un(a)||1,e.len=0),G(Cr)&&!M&&(e.top_vs=[],G("shape3d.top.image")&&(e.top_uv=[])),G(Mi)&&!M&&(e.bottom_vs=[],G("shape3d.bottom.image")&&(e.bottom_uv=[])),h._12O(a,O);else{var t,l,N,x,u,w,b,r,E,y;if(a=rg(W,k,m,M),u=h.vf(Im,f,!1,g),O&&(w=h.vf(Id,f,!1,g),b=M?J:h.vf(fh,f,!1,g),r=M?J:h.vf(um,f,!1,g),E=h.vf(Wc,f,!1,g),y=h.vf(Wb,f,!1,g)),O){for(var s=0,j=a.length;j>s;s++)a[s]=h._tryRemoveBezierPoints(a[s],O);h._12O(a,O)}else u&&a.forEach(function(j){if(x=j.length,x>0)for(t=j[0],N=1;x>N;N++)l=j[N],h.addV(u.vs,t,l),t=l});h._20Q(a),F||(u&&(u.ns=Ac(u.vs),Ib(u,"vs"),Ib(u,Ni)),O&&(w&&(w.ns=Ac(w.vs),Ib(w,"vs"),Ib(w,Ni)),b&&(b.ns=Ac(b.vs),Ib(b,"vs"),Ib(b,Ni)),r&&(r.ns=Ac(r.vs),Ib(r,"vs"),Ib(r,Ni)),E&&(E.ns=Ac(E.vs),Ib(E,"vs"),Ib(E,Ni)),y&&(y.ns=Ac(y.vs),Ib(y,"vs"),Ib(y,Ni))))}var n=h.mat=Ln();_o(n,A),Oq(n,Q.r3(),Q.getRotationMode());var $=Q.getScale3d(),L=Q._dynamicScale3d;L&&($[0]*=L[0],$[1]*=L[1],$[2]*=L[2]),up(n,$),_o(n,Ak(A)),F&&(sd(h,n,F,e),h.clear())},_20Q:function(T){var Q,b,p,m,S,n,O,$=this,I=$.front,F=$.back,h=$.top,H=$.bottom,U=I?I.tuv:J,X=F?F.tuv:J,e=h?h.tuv:J,Z=H?H.tuv:J,r=0;(U||X||e||Z)&&(Q=$.s(Pl)||un(T)||1,T.forEach(function(z){if(b=z.length,b>0)for(n=z[0],p=1;b>p;p++)O=z[p],m=r/Q,r+=ii(n,O),S=r/Q,$._14O(I,m,S),$._14O(F,1-S,1-m),$._14O(h,m,S),$._14O(H,m,S),n=O}))},_14O:function(G,n,o){if(G){var X=G.uv,S=G.tuv;if(S){if(X)var e=X[0]+(X[6]-X[0])*n,j=X[1]+(X[7]-X[1])*n,k=X[2]+(X[4]-X[2])*n,L=X[3]+(X[5]-X[3])*n,f=X[2]+(X[4]-X[2])*o,s=X[3]+(X[5]-X[3])*o,x=X[0]+(X[6]-X[0])*o,u=X[1]+(X[7]-X[1])*o;else e=n,j=0,k=n,L=1,f=o,s=1,x=o,u=0;S.push(k,L,f,s,x,u,x,u,e,j,k,L)}}},_13O:function(V){var o=V.uv,i=V.tuv;i&&(o?i.push(o[2],o[3],o[4],o[5],o[6],o[7],o[6],o[7],o[0],o[1],o[2],o[3]):i.push(0,1,1,1,1,0,1,0,0,0,0,1))},_tryRemoveBezierPoints:function(f,E){var $=f.length;if(4>$)return f;var F,T,U,K,e,Y,H=!1,d=function(R){return f[R]},J=function(h){return f[$-1-h]};for(e=0;1>=e;e++)for(Y=e?J:d,T=Y(0),U=Y(1),F=2;$-1>F;F++)if(K=Y(F),!K.remove)if(K.b){var r=Ye(T,U,K,E);r.adjust?(K.remove=!0,H=!0):(T=U,U=K)}else T=U,U=K;if(!H)return f;var L=[];for(F=0;$>F;F++)f[F].remove||L.push(f[F]);return L},_12O:function(W,q){var P,r,I,Q,n,m=this;W.forEach(function(B){if(n=B.length,n>0)for(P={p:B[0],n:!0},Q=1;n>Q;Q++)r=B[Q],I=n-1>Q?B[Q+1]:J,m.addPoint(P,r,I,q,B)})},addPoint:function(l,j,u,t,f){var h,Q,q,L,s,D,c,H,p,o=this,m=l.p,M=l.f,Z=l.b,F=o.s("shape3d.side")||ap,S=o.s("shape3d.start.angle"),I=o.s("shape3d.sweep.angle"),T=o.shapeModel,W=o.data.isClosePath();if(l.n&&(l.n=!1,M=W&&f.length>2?Ye(f[f.length-2],m,j,t):Ye(J,m,j,t),Z=gq(m,M),T?T.top_vs&&o._10O(Z,M,F,S,I,T.top_vs,T.top_uv):(h=o.left)&&(o.addV(h.vs,Z,M),o._13O(h))),Q=u?Ye(m,j,u,t):W&&f.length>2?Ye(m,j,f[1],t):Ye(m,j,J,t),q=gq(j,Q),T){var z,G,x=T.vs,$=T.uv,y=T.sum;for($&&(z=T.len/y,T.len+=ii(m,j),G=T.len/y),D=o._9O(Z,M,F,S,I),c=o._9O(q,Q,F,S,I),H=0;F>H;H++)p=H+1,im(x,D[p]),im(x,c[H]),im(x,D[H]),im(x,c[H]),im(x,D[p]),im(x,c[p]),$&&(L=H/F,s=p/F,$.push(z,s,G,L,z,L,G,L,z,s,G,s));!u&&T.bottom_vs&&o._10O(q,Q,F,S,I,T.bottom_vs,T.bottom_uv,!0)}else!u&&(h=o.right)&&(o.addV(h.vs,Q,q),o._13O(h)),(h=o.front)&&o.addV(h.vs,M,Q),(h=o.back)&&o.addV(h.vs,q,Z),(h=o.top)&&o.addH(h.vs,M,Q,q,Z,!0),(h=o.bottom)&&o.addH(h.vs,Z,q,Q,M);l.p=j,l.f=Q,l.b=q},_10O:function(y,H,I,i,K,e,c,b){var J,R,g=this,E=g.data,t=g._9O(y,H,I,i,K),Q=(y.x+H.x)/2,m=(y.y+H.y)/2,Y=E.getShapeElevation(),f=0;for(f=0;I>f;f++)b?(im(e,t[f]),im(e,t[f+1])):(im(e,t[f+1]),im(e,t[f])),im(e,[Q,Y,m]),c&&(b?(J=l*(f+1)/I+i,R=l*f/I+i):(J=l*f/I+i,R=l*(f+1)/I+i),c.push(.5-.5*C(R),.5-.5*j(R),.5-.5*C(J),.5-.5*j(J),.5,.5))},_9O:function(i,s,b,f,g){var B,h,J=this,T=J.data,U=[],Z=(i.x+s.x)/2,R=(i.y+s.y)/2,y=T.getTall()/2,m=T.getShapeElevation(),o=0;for(g=g||l;b>=o;o++)B=g*o/b+f,h=C(B),U.push([Z+(i.x-Z)*h,m+y*j(B),R+(i.y-R)*h]);return U},addV:function(r,c,M){var S=c.x,W=c.y,Q=M.x,K=M.y,E=this.data,F=E.getShapeElevation(),f=E.getTall()/2;r.push(S,F-f,W,Q,F-f,K,Q,F+f,K,Q,F+f,K,S,F+f,W,S,F-f,W)},addH:function(u,Z,D,l,d,E){var v=this.data,C=v.getTall()/2,$=v.getShapeElevation()+(E?C:-C);u.push(Z.x,$,Z.y,D.x,$,D.y,l.x,$,l.y,l.x,$,l.y,d.x,$,d.y,Z.x,$,Z.y)},vf:function(W,G,D,N){var s,C=this,V=C.gv.getFaceVisible(C.data,W);return(D||V)&&(s=Hr(C,W,N),s.vs=[],s.tuv=V&&(s.texture||G)?[]:J,s.visible=V),s}});var ll=function(A,u){Vp(ll,this,[A,u])};js(ll,Mc,{_25Q:1,validate:function(z){var E=this,y=E.data,g=E.s,V=y.getPoints(),f=V.size();if(E.shapeModel=E.info=J,f>1){var S=E.info={},v=y.getSegments(),L=y.getThickness(),I=mq(V.get(0)),C=mq(V.get(f-1)),O=f%2;0===O?(S.c1=mq(V.get(f/2-1)),S.c2=mq(V.get(f/2))):S.p3=mq(V.get((f-O)/2)),S.s1=I,S.s2=mq(V.get(1)),S.t1=mq(V.get(f-2)),S.t2=C,S.list=g(qb)===hr?E.createTubeModel(V,v,L/2,z):E.createLineModel(V,v,L,"shape.border","shape.dash")}var s=y.p3(),k=E.mat=Ln();_o(k,s),Oq(k,y.r3(),y.getRotationMode());var P=y.getScale3d(),h=y._dynamicScale3d;h&&(P[0]*=h[0],P[1]*=h[1],P[2]*=h[2]),up(k,P),_o(k,Ak(s))},_80o:function(F,k,w){var Y=this,M=Y.shapeModel;if(M){var V=Y.gv;Zk(V,Y.mat),zp(V,Y.data,M,Y,Y.getBodyColor(),w),Jm(V)}}}),vf(r,{accordionViewExpandIcon:tn(tp),accordionViewCollapseIcon:tn(tp,!0),accordionViewLabelColor:Lp,accordionViewLabelFont:ee,accordionViewTitleBackground:cr,accordionViewSelectBackground:Md,accordionViewSelectWidth:3,accordionViewSeparatorColor:e,splitViewDividerSize:1,splitViewDividerBackground:cr,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:_i,rect:[2,2,12,12],background:tp}]},propertyViewLabelColor:qd,propertyViewLabelSelectColor:Lp,propertyViewLabelFont:ee,propertyViewExpandIcon:tn(jq),propertyViewCollapseIcon:tn(jq,!0),propertyViewBackground:io,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:sl,propertyViewColumnLineColor:sl,propertyViewSelectBackground:Md,listViewLabelColor:qd,listViewLabelSelectColor:Lp,listViewLabelFont:ee,listViewRowLineVisible:!1,listViewRowLineColor:sl,listViewSelectBackground:Md,treeViewLabelColor:qd,treeViewLabelSelectColor:Lp,treeViewLabelFont:ee,treeViewExpandIcon:tn(Wf),treeViewCollapseIcon:tn(Wf,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:sl,treeViewSelectBackground:Md,treeViewDoubleClickToToggle:!0,tableViewLabelColor:qd,tableViewLabelSelectColor:Lp,tableViewLabelFont:ee,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:sl,tableViewColumnLineColor:sl,tableViewSelectBackground:Md,treeTableViewLabelColor:qd,treeTableViewLabelSelectColor:Lp,treeTableViewLabelFont:ee,treeTableViewExpandIcon:tn(Wf),treeTableViewCollapseIcon:tn(Wf,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:sl,treeTableViewColumnLineColor:sl,treeTableViewSelectBackground:Md,tableHeaderLabelColor:qd,tableHeaderLabelFont:ee,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:Jo,tableHeaderBackground:io,tableHeaderMoveBackground:nr,tableHeaderInsertColor:Md,tableHeaderSortDescIcon:re(jq,!0),tableHeaderSortAscIcon:re(jq),tabViewTabGap:1,tabViewLabelColor:Lp,tabViewLabelFont:ee,tabViewTabBackground:cr,tabViewSelectWidth:3,tabViewSelectBackground:Md,tabViewMoveBackground:nr,tabViewInsertColor:Md,toolbarLabelColor:qd,toolbarLabelSelectColor:Lp,toolbarLabelFont:ee,toolbarBackground:io,toolbarSelectBackground:Md,toolbarItemGap:8,toolbarSeparatorColor:yf},!0);var Yc={translateX:1,sortColumn:1},gc={sortable:1,sortOrder:1,sortFunc:1},sr={focusData:1},Bg={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},Mm={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},_r=function(w,g){g.add(w),w.hasChildren()&&w.eachChild(function(C){_r(C,g)})},Fb=function(y,t,z,T,$,d,L,H,U,k,q){var N,M=z.getValueType(k),W=z.getAlign(k);if(z.getEnumValues(k)){var s=z.toEnumLabel(t,k),Q=Tn||0,x=0,v=d,l=r.getTextSize(T,s).width;return N=$l(z.toEnumIcon(t,k)),N&&(x=d+Tn/2,"center"===W?x+=(H-(Q+l))/2:"right"===W&&(x=x+H-(Q+l)),Mf(y,N,x,L+U/2,k,q),v=x+Tn/2),s!=J&&(N?yc(y,s,T,$,v,L,H-(v-d),U):yc(y,s,T,$,d,L,H,U,W)),void 0}return t=z.formatValue(t),t!=J?M===Lf?(Wl(y,d,L,H,U,t),void 0):M===yr||!M&&Kb(t)?(N=$l(t?Dd:Xq),Mf(y,N,d+H/2,L+U/2,k,q),void 0):(yc(y,t,T,$,d,L,H,U,W),void 0):void 0},Dk=function(w,h){var B=h.view,r=bf(w),M=h.column||h.property;B.getDataModel().beginTransaction(),h.editor=w,w.info=h,B.setCurrentEditor(w),B.getView().insertBefore(r,B._79O),zq(w,h.editorRect),w.setFocus?w.setFocus():Mr(w),w.commitValue=function(){w._17Q&&(w=w._17Q),B.setValue(h.data,M,w.getValue?w.getValue():w.value),w.close&&w.close(),Aq(r)},M.onEditorCreated&&M.onEditorCreated(h)},jj=function(V,D,X,b,A){var N=vm(V,X),P=D.value,$=D.view,y=A.getValueType(D.data);return N.onblur=N.onchange=function(){$.endEditing()},"input"===V?(P=A.formatValue(P),P!=J&&(N.value=P),N.onkeydown=function(G){Un(G)&&$.endEditing()},(y===ts||y===ug)&&N.addEventListener(Nn,r.numberListener,!1)):V===Hf&&b.forEach(function(j){var e=F.createElement("option");e.innerHTML=A.toEnumLabel(j),e.value=j,A.isEnumEqual(P,j)&&(e.selected=!0),tf(N,e)}),Dk(N,D),N},Ke=A.widget={},qe=function(T,O,S){js(u+".widget."+T,O,S)};vf(Xp,{ms_value:function(F){F.getValue=function(J){var K=this.getItemById(J),g=K.element;return se(g)?g:g?g.getValue?g.getValue():g.value:K.selected},F.setValue=function(y,k){var n=this.getItemById(y),w=n.element;w&&!se(w)?w.setValue?w.setValue(k):w.value=k:Kb(k)?(n.selected=k,this.iv()):(n.element=k,this.iv())},F.v=function($,Z){var a=this;if(2===arguments.length)a.setValue($,Z);else{if(!Vc($))return a.getValue($);for(var i in $)a.setValue(i,$[i])}return a}},_46o:function(q){q._icon=J,q._accessType=J,q._valueType=J,q._editable=!1,q._batchEditable=!0,q._align=fh,q._nullable=!0,q._emptiable=!1,q.setParent=nn,q.formatValue=function(h){var N=this,C=N._valueType;return N.getEnumValues()?N.toEnumLabel(h):C===yr?!!h:h!=J&&C===ts?Q(h):h},q.setEnum=function(M,$,S,P,o,H,q){var _=this;M&&!Ji(M)&&M.values&&(P=M.editable,S=M.icons,$=M.labels,o=M.strict,H=M.maxHeight,q=M.dropDownWidth,M=M.values),Mj(M)&&(M=M._as),Mj($)&&($=$._as),Mj(S)&&(S=S._as),_._enumValues=M,_._enumLabels=$,_._enumIcons=S,_._enumEditable=P,_._enumStrict=o==J?!0:o,_._enumMaxHeight=H,_._enumDropDownWidth=q,M&&M.length&&On(M[0])&&(_._valueType=ug),_.fp("enum",!1,!0)},q.getEnumDropDownWidth=function(){return this._enumDropDownWidth},q.getEnumMaxHeight=function(){return this._enumMaxHeight},q.isEnumEditable=function(){return this._enumEditable},q.getEnumValues=function(){return this._enumValues},q.getEnumLabels=function(){return this._enumLabels},q.getEnumIcons=function(){return this._enumIcons},q.isEnumStrict=function(){return this._enumStrict},q.isEnumEqual=function(M,v){return this._enumStrict?M===v:M==v},q.toEnumLabel=function(Y,l){var j=this,b=j.getEnumValues(l),d=j.getEnumLabels(l);if(b&&d)for(var O=0;O<b.length;O++)if(j.isEnumEqual(Y,b[O]))return d[O];return Y},q.toEnumIcon=function(c,T){var b=this,S=b.getEnumValues(T),I=b.getEnumIcons(T);if(S&&I)for(var $=0;$<S.length;$++)if(b.isEnumEqual(c,S[$]))return I[$];return e}},_45o:function(W){W._87o=function(H,i,s,Z,F,c){if(H){var K=this,A=K._90I,o=cd(1);K._columnLineVisible&&(F-=1),K._rowLineVisible&&(c-=1),0>=F||0>=c||(K._90I||(A=K._90I={}),A[i]||(A[i]=new Cq),zq(o,K.tx()+s,K.ty()+Z,F,c),tf(o,H),K._view.insertBefore(o,K._79O),H.onParentAdded&&H.onParentAdded(o),A[i].add(o))}},W._76o=function(){var V=this,P=V._90I;if(P){for(var c in P)P[c].each(function(H){Aq(H)});delete V._90I}},W._77o=function(q){var E=this;if(E._90I){var Y=E._90I[q];Y&&(Y.each(function(N){Aq(N)}),delete E._90I[q])}}},_47o:function(y){y.getValue=function(U,i){return i.getValue?i.getValue(U,i,this):kn(U,i.getAccessType(),i.getName())},y.setValue=function(d,z,U){if(z.isEmptiable(d)||""!==U||(U=e),z.isNullable(d)||U!=J){var h=this,H=z.getName(d),K=z.getAccessType(d),s=z.getValueType(d);s===ts&&se(U)?U=L(U):s===ug&&se(U)?U=parseFloat(U):s===yr&&se(U)&&(U="true"===U),h._batchEditable&&z._batchEditable&&h.isSelected(d)?h.sm().each(function(m){z.setValue?z.setValue(m,z,U,h):ai(m,K,H,U)}):z.setValue?z.setValue(d,z,U,h):ai(d,K,H,U)}},y.setCurrentEditor=function(Y){this.endEditing(),this._currentEditor=Y,this.redraw()},y.isEditing=function(v,Q){var H=this,c=H._currentEditor;if(!c)return!1;if(Q){var J=c.info;return J?(J.column||J.property)===Q&&J.data===v:!1}return!0},y.endEditing=function(){var T=this,l=T._currentEditor;l&&(delete T._currentEditor,l.commitValue&&l.commitValue(l.info),T.redraw(),T.getDataModel().endTransaction())},y.beginEditing=function(E){this.endEditing();var T=this,n=E.column||E.property;if(n.beginEditing)n.beginEditing(E);else{var U=E.data,f=E.value,p=T.getSelectBackground(U),z=n.getEnumValues(U),k=n.getSlider(U),W=n.getColorPicker(U);if(k){var q=xi(Ke.Slider,k);return q.setValue(f),q.getView().onblur=function(){T.endEditing()},q.isInstant()&&(q.onValueChanged=function(){T.setValue(U,n,q.getValue())}),Dk(q,E),void 0}if(W||n.getValueType(U)===Lf){var $=xi(Ke.ColorPicker,W);return $.setValue(f),$.onClosed=function(){T.endEditing()},$.isInstant()&&($.onValueChanged=function(w,X){T.setValue(U,n,X)}),Dk($,E),$.open(),void 0}if(z){if(Ke.ComboBox){var Z=new Ke.ComboBox;Z.setValue(f),Z.setValues(z),Z.setLabels(n.getEnumLabels(U)),Z.setIcons(n.getEnumIcons(U)),Z.setEditable(n.isEnumEditable(U)),Z.setStrict(n.isEnumStrict(U)),Z.setMaxHeight(n.getEnumMaxHeight(U)),Z.setDropDownWidth(n.getEnumDropDownWidth(U)),Z.onClosed=function(){T.endEditing()},Dk(Z,E),Z.open()}else jj(Hf,E,p,z,n);return}var M=n.getValueType(U);if(M===yr||Kb(f))return T.setValue(U,n,!f),void 0;if(n.getItemEditor(U)){var m=tr(n.getItemEditor(U)),s=new m(U,n,T,E),V=s.getView();return V._17Q=s,s.setValue(f),He(V),Dk(V,E),s.editBeginning&&s.editBeginning(),void 0}jj("input",E,p,J,n)}}},_44o:function(J){J.init=function(q){var B=this,Y=B.th=new gn(q),u=B._view=Eq(1,B);B.tv=B._tableView=q,tf(u,Y.getView()),tf(u,q.getView()),Y.mp(function(L){L.property===sh&&B.iv()}),B.iv()},J.getTableView=function(){return this.tv},J.getTableHeader=function(){return this.th},J.getDataModel=function(){return this.tv.dm()},J.getColumnModel=function(){return this.tv.getColumnModel()},J.setColumns=function(X){this.tv.setColumns(X)},J.addColumns=function(D){this.tv.addColumns(D)},J.endEditing=function(){this.tv.endEditing()},J.validateImpl=function(){var N=this,F=N.th,c=vq(F),Q={x:0,y:0,width:N.getWidth(),height:c};zq(F,Q),Q.y=c,Q.height=S(0,N.getHeight()-c),zq(N.tv,Q)}},ms_vs:function(_){_._41o=function(){return this._29I.height<this._59I},_._43o=function(){var M=this;M._41o()&&(M._58I||(U(function(){M._94O()},iq),M.iv()),M._58I=new Date)},_._94O=function(){var x=this;if(x._58I){var T=new Date;T.getTime()-x._58I.getTime()>=iq?(delete x._58I,x.iv()):U(function(){x._94O()},iq)}},_._93I=function(){var K=this,u=K._27I;if(K._58I||!K._autoHideScrollBar){u||tf(K._79O,u=K._27I=cd());var p=K._29I,e=p.height,j=K._59I,O=K.getScrollBarSize(),F=p.width-O-2,P=e*(-K.ty()/j),X=e*(e/j),M=u.style;j>e?(Lc>X&&(P=P+X/2-Lc/2,0>P&&(P=0),P+Lc>e&&(P=e-Lc),X=Lc),M.visibility=xq,M.background=K.getScrollBarColor(),M.borderRadius=O/2+dm,zq(u,F,P,O,X)):M.visibility=hg}else u&&(u.style.visibility=hg)}},ms_hs:function(v){v._40o=function(){return this._29I.width<this._91I},v._42o=function(){var Z=this;Z._40o()&&(Z._95O||(U(function(){Z._94I()},iq),Z.iv()),Z._95O=new Date)},v._94I=function(){var z=this;if(z._95O){var B=new Date;B.getTime()-z._95O.getTime()>=iq?(delete z._95O,z.iv()):U(function(){z._94I()},iq)}},v._92I=function(){var x=this,d=x._28I;if(x._95O||!x._autoHideScrollBar){d||tf(x._79O,d=x._28I=cd());var M=x._29I,D=M.width,L=x._91I,y=x.getScrollBarSize(),K=M.height-y-2,P=D*(-x.tx()/L),g=D*(D/L),w=d.style;L>D?(Lc>g&&(P=P+g/2-Lc/2,0>P&&(P=0),P+Lc>D&&(P=D-Lc),g=Lc),w.visibility=xq,w.background=x.getScrollBarColor(),w.borderRadius=y/2+dm,zq(d,P,K,g,y)):w.visibility=hg}else d&&(d.style.visibility=hg)}}}),yp(Dd,Ro(16,16,[{type:Yf,rect:[1,1,14,14],background:Md},{type:qo,rect:[1,1,14,14],width:1,color:Wk},{type:el,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),yp(Xq,Ro(16,16,{type:qo,rect:[1,1,14,14],width:1,color:Wk})),yp(ti,Ro(16,16,[{type:wn,rect:[2,2,12,12],borderWidth:1,borderColor:Wk,background:"#FFF"},{type:wn,rect:[4,4,8,8],background:Md}])),yp(Ok,Ro(16,16,{type:wn,rect:[2,2,12,12],borderWidth:1,borderColor:Wk})),Xp._15Q=function(v){v._29I=Rd,v._59I=0,v._91I=0,v._5o=function(I){var v=this;v._30I=new Cq,v._rows=new Cq,v._rowMap={},v._31I=0,v._14I=0,v._view=Eq(1,v),v._canvas=Rk(v._view),tf(v._view,v._79O=cd()),v.dm(I?I:new hd)},v.getCheckIcon=function(f){var W=this.sm(),u=W.co(f);return W.sg()?$l(u?ti:Ok):$l(u?Dd:Xq)},v.checkData=function(q){var w=this.sm(),Y=w.co(q);w.sg()&&Y||(this._32o=1,Y?w.rs(q):w.as(q),delete this._32o)},v.getDataAt=function(T){T.target&&(T=this.lp(T));var O=N(T.y/this._rowHeight),E=this._rows;return 0>O||O>=E.size()?J:E.get(O)},v.onDataDoubleClicked=function(){},v.onDataClicked=function(){},v.adjustTranslateX=function(){return 0},v.adjustTranslateY=function(M){var J=this.getHeight()-this._59I;return J>M&&(M=J),M>0?0:Q(M)},v.onPropertyChanged=function(R){var z=this,x=R.property;Bg[x]?z.ivm():sr[x]||z.redraw(),x===xj?z._42o():x===Cf&&z._43o()},v.getLabel=function(q){return q.toLabel()},v.getLabelFont=function(){return this._labelFont},v.getLabelColor=function(J){var L=this;if(L.isCheckMode()){if(L._focusData===J)return L._labelSelectColor}else if(L.isSelected(J))return L._labelSelectColor;return L._labelColor},v.getStartRowIndex=function(){return this._31I},v.getEndRowIndex=function(){return this._14I},v.getRowDatas=function(){return this._rows},v.getRowIndex=function(S){return this._rowMap[S._id]},v.getRowSize=function(){return this._rows.size()},v.getViewRect=function(){return Se(this._29I)},v.isVisible=function(W){return this._visibleFunc?this._visibleFunc(W):!0},v.getCurrentSortFunc=function(){return this._sortFunc},v.setDataModel=function(J){var X=this,u=X._dataModel,z=X._selectionModel;u!==J&&(u&&(u.umm(X.handleDataModelChange,X),u.umd(X.handleDataPropertyChange,X),u.umh(X.handleHierarchyChange,X),z||u.sm().ums(X.handleSelectionChange,X)),X._dataModel=J,J.mm(X.handleDataModelChange,X),J.md(X.handleDataPropertyChange,X),J.mh(X.handleHierarchyChange,X),z?z._21I(J):J.sm().ms(X.handleSelectionChange,X),X.fp("dataModel",u,J))},v.validateModel=function(){var A=this;A._rows.clear(),A._rowMap={},A.buildChildren(A._dataModel._roots);var y=A._rows=A._rows.toList(A.isVisible,A),l=0,V=A.getCurrentSortFunc(),D=y.size();for(V&&y.sort(V);D>l;l++)A._rowMap[y.get(l)._id]=l},v.buildChildren=function(_){var G=this;_.each(function(M){G._rows.add(M),G.buildChildren(M._children)})},v.handleDataModelChange=function(){this.ivm()},v.handleDataPropertyChange=function(j){"parent"===j.property?this.ivm():this.invalidateData(j.data)},v.handleHierarchyChange=function(){this.ivm()},v.handleSelectionChange=function(z){z.datas.each(this.invalidateData,this),this.onSelectionChanged(z)},v.onSelectionChanged=function(x){var R=this,O=R.sm();!R.isAutoMakeVisible()||1!==O.size()||"set"!==x.kind&&"append"!==x.kind||R._32o||R.makeVisible(O.ld())},v.handleBackgroundClick=function(y){Dp(y)&&!this.isCheckMode()&&this.sm().cs()},v.makeVisible=function(Z){Z&&(this._23I=Z,this.iv())},v.scrollToIndex=function(N){var Q=this,p=Q._29I,k=p.height,K=Q._rowHeight,D=K*N;N>=0&&N<Q._rows.size()&&k>0&&(D+K>p.y+k?Q.ty(-D+k-K):D<p.y&&Q.ty(-D))},v.autoScroll=function(L,y){var C=this,o=C._rowHeight,m=o,l=o/4,X=C._29I,T=C.lp(L),V={x:C.tx(),y:C.ty()};return o>0&&X&&(T.x-X.x<m?C.translate(l,0):X.x+X.width-T.x<m&&C.translate(-l,0),T.y-X.y<m?C.translate(0,l):X.y+X.height-T.y<m&&C.translate(0,-l)),V.x=C.tx()-V.x,V.y=C.ty()-V.y,y&&(y.x+=V.x,y.y+=V.y),V},v.getTopRowOrderSelection=function(){var P=this.sm().getTopSelection(),F={},R=new Cq;return P.each(function(o){F[o._id]=o}),this._rows.each(function(i){F[i._id]&&R.add(i)}),R},v.getRowOrderSelection=function(){var c=new Cq;return this._rows.each(function(y){this.isSelected(y)&&c.add(y)},this),c},v.ivm=function(){this.invalidateModel()},v.invalidateModel=function(){var g=this;g._96I||(g._96I=1,g._32I=1,delete g._24I),g.iv()},v.redraw=function(){var J=this;J._32I||(J._32I=1,delete J._24I,J.iv())},v.invalidateData=function(u){var I=this;Y?I.redraw():I._32I||(I._24I||(I._24I={}),I._24I[u._id]=u,I.iv())},v.getFocusData=function(){return this._focusData},v.setFocusDataById=function(L){this.setFocusData(this.dm().getDataById(L))},v.setFocusData=function(T){var U=this,b=U._focusData;b!==T&&(U._focusData=T,U.fp("focusData",b,T),b&&U.invalidateData(b),T&&(U.invalidateData(T),U.isAutoMakeVisible()&&U.makeVisible(T)))},v.drawRowBackground=function(L,S,l,R,V,b,p){var g=this,P=g.isCheckMode();(S===g._focusData&&P||l&&!P)&&Wl(L,R,V,b,p,g.getSelectBackground(S))},v.drawData=function(B,W,r){var m=this,H=m._rowHeight,x=H*r,E=m._29I,w=E.x,j=E.width;B.save(),B.beginPath(),B.rect(w,x,j,H),B.clip(),m._87o(m.drawRow(B,W,m.isSelected(W),w,x,j,H),r,w,x,j,H),B.restore(),m._rowLineVisible&&Wl(B,w,x+H-1,j,1,m._rowLineColor)},v._12I=function(k){var c=this,x=c._31I,B=c._29I,C=B.x,y=B.y,I=B.width,e=B.height;for(k.beginPath(),k.rect(C,y,I,e),k.clip(),k.clearRect(C,y,I,e),c._76o(),c._93db(k);x<c._14I;x++)c.drawData(k,c._rows.get(x),x);c._92db(k)},v._13I=function(g){for(var $,z=this,Z=z._rowHeight,X=z._29I,v=X.x,Y=X.width,N=z._31I,i=z._30I;N<z._14I;N++)$=z._rows.get(N),z._24I[$._id]&&i.add({data:$,index:N});i.isEmpty()||(g.beginPath(),i.each(function(x){g.rect(v,x.index*Z,Y,Z)}),g.clip(),i.each(function(w){g.clearRect(v,w.index*Z,Y,Z)}),i.each(function(r){z._77o(r.index)}),z._93db(g),i.each(function(j){z.drawData(g,j.data,j.index)}),z._92db(g),i.clear())},v.validateImpl=function(){var j=this,l=j._canvas,c=j.getWidth(),D=j.getHeight(),R=j._rowHeight,K=j._32I;(c!==l.clientWidth||D!==l.clientHeight)&&(Er(l,c,D),K=1);var P=M&&!_;j._96I&&!P&&j.validateModel();var G=j._29I,Z={x:-j.tx(),y:-j.ty(),width:c,height:D},H=j._rows.size(),T=Bb(l),f=j._23I;K||ce(Z,G)||(K=1),j._29I=Z,j._59I=H*R,j._31I=N(Z.y/R),j._14I=o((Z.y+Z.height)/R),j._31I<0&&(j._31I=0),j._14I>H&&(j._14I=H),j._99I&&K&&j._99I(),Gl(T,j.tx(),j.ty(),1),K?j._12I(T):j._24I&&j._13I(T),j._93I(),j._92I(),T.restore(),j._32I=j._24I=j._96I=J,f&&(j.scrollToIndex(j.getRowIndex(f)),delete j._23I),j.tx(j.tx()),j.ty(j.ty())}},Xp._48o=function(P){P._rootVisible=!0,P._rootData=J,P._35o=function(){this._expandMap={},this._levelMap={}},P.validateModel=function(){var y=this,W=y._rootData;y._rows.clear(),y._levelMap={},y._rowMap={},y._currentLevel=0,W?y._rootVisible?y.isVisible(W)&&y.buildData(W):y.buildChildren(W):y.buildChildren(),delete y._currentLevel},P.buildData=function(y){var r=this,W=y._id,f=r._rows;r._rowMap[W]=f.size(),f.add(y),r._levelMap[W]=r._currentLevel,r.isExpanded(y)&&(r._currentLevel++,r.buildChildren(y),r._currentLevel--)},P.buildChildren=function(k){var T=this,V=k?k._children:T._dataModel._roots,W=T.getCurrentSortFunc();W&&T.isChildrenSortable(k)?V.toList(T.isVisible,T).sort(W).each(T.buildData,T):V.each(function(Y){T.isVisible(Y)&&T.buildData(Y)})},P.getLevel=function(n){return this._levelMap[n._id]},P.getToggleIcon=function(w){var v=this,X=v._loader,D=v._collapseIcon;return X&&!X.isLoaded(w)?D:w.hasChildren()?v.isExpanded(w)?v._expandIcon:D:J},P.isCheckMode=function(){return this._checkMode!=J},P.isChildrenSortable=function(){return!0},P.handleDataModelChange=function(H){var w=this;H.kind===Jn?delete w._expandMap[H.data._id]:H.kind===Jb&&(w._expandMap={}),w.ivm()},P.toggle=function(m){var _=this;_.isExpanded(m)?_.collapse(m):_.expand(m)},P.isExpanded=function(x){return 1===this._expandMap[x._id]},P.expand=function(M){var T=this,f=T._loader;T.isExpanded(M)||(f&&!f.isLoaded(M)&&f.load(M),T._expandMap[M._id]=1,T.ivm(),T.onExpanded(M))},P.onExpanded=function(){},P.collapse=function(D){var o=this;o.isExpanded(D)&&(delete o._expandMap[D._id],o.ivm(),o.onCollapsed(D))},P.onCollapsed=function(){},P.expandAll=function(r){if(r)this.expand(r),r.eachChild(function(a){this.expandAll(a)},this);else{var b=this;b._dataModel.each(function(w){w.hasChildren()&&(b._expandMap[w._id]=1)}),b.ivm()}},P.collapseAll=function(){this._expandMap={},this.ivm()},P.makeVisible=function(U){if(U){var F=this;if(!F._rootData||U.isDescendantOf(F._rootData)){for(var h=U._parent;h;)F.expand(h),h=h._parent;F._23I=U,F.iv()}}},P.checkData=function(h){var Z,R=this,U=R._checkMode,O=R.sm(),S=O.co(h);if(!O.sg()||!S){if(R._32o=1,U===oq)S?O.rs(h):O.as(h);else if(U===Hm)Z=new Cq(h),Z.addAll(h._children);else if("descendant"===U)Z=new Cq,_r(h,Z);else if("all"===U&&(Z=new Cq,_r(h,Z),!S))for(var T=h._parent;T;)Z.add(T),T=T._parent;Z&&(S?O.rs(Z):O.as(Z)),delete R._32o}},P._97I=function(E,s,m,D,y,J,I){var Y=this,F=Y._indent,O=Y._levelMap[s._id],e=Y.getIconWidth(s),v=$l(Y.getToggleIcon(s));v?(D+=F*O,Mf(E,v,D+F/2,y+I/2,s,Y),D+=F):D+=F*(O+1),Y._checkMode&&(Mf(E,Y.getCheckIcon(s),D+F/2,y+I/2,s,Y),D+=F),Y.drawIcon(E,s,D,y,e,I),Y.drawLabel(E,s,D+e,y,I)}},Xp._14Q=function($){$.getIcon=function(n){return n.getIcon()},$.getIconWidth=function(I){return this.getIcon(I)?this._indent:0},$.drawIcon=function(M,L,x,m,a,E){if(a){var n=this,A=n.getBodyColor(L),T=$l(n.getIcon(L),A);T&&(E-=n.isRowLineVisible()?1:0,Ck(M,T,Re,x,m,a,E,L,n,A),Uj(M,n.getBorderColor(L),x,m,a,E))}},$.drawLabel=function(M,K,N,E,z){var g=this;yc(M,g.getLabel(K),g.getLabelFont(K),g.getLabelColor(K),N,E,0,z)}},Xp._50o=function(X){X._98I=function(){var q=this,$=q._39o=new hd;q._60I=new Cq,$.mm(q._17o,q),$.md(q._18o,q),$.mh(q._19o,q)},X.setColumns=function(j){this._39o.clear(),this.addColumns(j)},X.addColumns=function(y){var V=this._39o;y.forEach(function(J){if(!(J instanceof gr)){var n=tr(J.className);J=xi(n?n:gr,J)}V.add(J)})},X.onColumnClicked=function(){},X.onCheckColumnClicked=function(){},X._3Q=function(Y){for(var D,W=0,E=this._60I,z=E.size();z>W;W++)if(D=E.get(W),D.column===Y)return D;return J},X.getColumnAt=function(u){var n=this._4Q(u);return n?n.column:J},X._4Q=function(f){for(var a=this,h=f.target?a.lp(f).x:f.x,O=a._60I,X=0;X<O.size();X++){var L=O.get(X),V=L.startX;if(h>=V&&h<V+L.column.getWidth())return L}return J},X.getToolTip=function(W){var e=this,F=e.getDataAt(W),X=e.getColumnAt(W);return F&&X?X.getToolTip(F,e):J},X.adjustTranslateX=function(m){var B=this.getWidth()-this._91I;return B>m&&(m=B),m>0?0:Q(m)},X._99I=function(){var U=this,m=U._29I,I=U._60I;I.clear(),U._91I=0,U._39o._roots.each(function(M){if(M.isVisible()){var W=U._91I+M.getWidth();U._91I<=m.x+m.width&&W>=m.x&&I.add({column:M,startX:U._91I}),U._91I=W}})},X.drawData=function(L,V,r){var k=this,m=k._rowHeight,l=m*r,f=k.isSelected(V),e=k._29I,B=e.x,H=e.width;k.drawRowBackground(L,V,f,B,l,H,m),k._60I.each(function(A){var v=A.column,G=A.startX,M=v.getWidth();M>0&&!k.isEditing(V,v)&&(L.save(),L.beginPath(),L.rect(G,l,M,m),L.clip(),k._87o(k.drawCell(L,V,f,v,G,l,M,m),r,G,l,M,m),k._columnLineVisible&&Wl(L,G+M-1,l,1,m,k._columnLineColor),L.restore())}),k._rowLineVisible&&Wl(L,B,l+m-1,H,1,k._rowLineColor)},X.drawCell=function(u,h,t,k,L,H,I,p){var f=this;if(k.drawCell)return k.drawCell(u,h,t,k,L,H,I,p,f);var D=f.getValue(h,k);Fb(u,D,k,f.getLabelFont(h,k,D),f.getLabelColor(h,k,D),L,H,I,p,h,f)},X.getColumnModel=function(){return this._39o},X._17o=function(){this.redraw()},X._18o=function(V){var f=this;V.data===f._sortColumn&&gc[V.property]?f.ivm():(f._42o(),f.redraw())},X._19o=function(){this.redraw()},X.getCurrentSortFunc=function(){var I=this,f=I._sortColumn;if(f&&f.isSortable()){var T=f.getSortFunc(),F=sf===f.getSortOrder()?1:-1;return T||(T=Vj),function(G,l){return T.call(I,I.getValue(G,f),I.getValue(l,f),G,l)*F}}return I._sortFunc},X.isCellEditable=function(r,_){return!this.isCheckMode()&&this.isSelected(r)||this.isCheckMode()&&r===this._focusData?_.isEditable()&&this.isEditable():!1},X._37O=function(Y,P){if(Dp(P))for(var d=this,N=d.lp(P),X=d._60I,G=d._rowHeight,M=d._29I,a=M.x,O=M.y,S=M.width,V=M.height,_=0;_<X.size();_++){var y=X.get(_),b=y.startX,w=y.column,j=w.getWidth();if(w!==d._31o&&w!==d._4o&&d.isCellEditable(Y,w,P)&&N.x>=b&&N.x<b+j){var Q={x:b,y:d.getRowIndex(Y)*G,width:j,height:G},k={x:Q.x+d.tx(),y:Q.y+d.ty(),width:Q.width,height:Q.height},p=0,g=0;return Q.x<a?p=Q.x-a:Q.x+Q.width>a+S&&(p=Q.x+Q.width-a-S),p&&(d.tx(d.tx()-p),k.x-=p),Q.y<O?g=Q.y-O:Q.y+G>O+V&&(g=Q.y+G-O-V),g&&(d.ty(d.ty()-g),k.y-=g),d.beginEditing({data:Y,column:w,value:d.getValue(Y,w),event:P,rect:Q,editorRect:k,view:d}),void 0}}}},Ke.BaseItemEditor=function(X,W,I,w){this._data=X,this._column=W,this._master=I,this._editInfo=w},qe("BaseItemEditor",h,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var Fi=A.Tab=function(){Vp(Fi,this)};bi("Tab",Nd,{ms_ac:["view","closable","disabled"],_icon:J,_closable:!1,_disabled:!1,setParent:nn});var gr=A.Column=function(){Vp(gr,this)};bi("Column",Nd,{_46o:1,ms_ac:["accessType","valueType",xq,Tp,il,vs,"align",Lf,"sortOrder",th,"sortable","clickable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:sf,_sortFunc:J,_sortable:!0,_clickable:!0,setWidth:function(o){16>o&&(o=16);var B=this._width;this._width=o,this.fp(vs,B,o)},getToolTip:function(v,M){return this.formatValue(M.getValue(v,this))}});var pi=A.Property=function(){Vp(pi,this)};bi("Property",Nd,{_46o:1,ms_ac:["accessType","valueType",Tp,il,"categoryName",Lf,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:J,getToolTip:function(V,l,E){var e=this;return l?e.formatValue(E.getValue(V,e)):E.getPropertyName(e)}}),Ke.AccordionView=function(){var q=this;q._20o={},q._21o=new Cq,q._10o=J,q._9o=J,q._11o=J,q._view=Eq(0,q),q.iv()},qe("AccordionView",h,{ms_v:1,ms_fire:1,ms_ac:[ro,Gi,"titleHeight",Cn,fi,"titleBackground","selectWidth",Od,"orientation","separatorColor"],_expandIcon:r.accordionViewExpandIcon,_collapseIcon:r.accordionViewCollapseIcon,_titleHeight:Uk,_labelColor:r.accordionViewLabelColor,_labelFont:r.accordionViewLabelFont,_titleBackground:r.accordionViewTitleBackground,_selectBackground:r.accordionViewSelectBackground,_selectWidth:r.accordionViewSelectWidth,_orientation:"v",_separatorColor:r.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(p,R,d,B){var U=this,S=cd();if(U._20o[p])throw p+" already exists";S.onmousedown=pm,S.style.cursor=oi,S.addEventListener(s?qc:ds,function(J){pm(J)},!1),S.addEventListener(s?Rp:Yi,function(O){pm(O),Dp(O)&&(U._10o===p?U.collapse():U.expand(p))},!1),tf(U._view,S),U._20o[p]={content:R,div:S,canvas:Rk(S),icon:B},U._21o.add(p),d&&U.expand(p),U.iv()},remove:function(z){var l=this,Q=l._20o[z];Q&&(Aq(Q.div),delete l._20o[z],l._21o.remove(z),l.iv())},clear:function(){var A=this;A._20o={},A._21o.clear(),A.iv()},isExpanded:function(G){return this._10o===G},expand:function(s){var f=this;f._20o[s]&&f._10o!==s&&(f._10o=s,f.onExpanded(s),f.iv())
},onExpanded:function(){},collapse:function(){var c=this;c._10o&&(c.onCollapsed(c._10o),delete c._10o,c.iv())},onCollapsed:function(){},initCanvas:function(Q,E,c){Er(Q,E,c);var u=Bb(Q);return Gl(u,0,0,1),u.clearRect(0,0,E,c),u},drawTitle:function(D,o,p,l,r){var I=this,T=$l(r.icon),s=I.isExpanded(o),b=I._titleHeight,H=I._titleBackground,g=I._selectWidth,j=I._separatorColor,F=$l(s?I._expandIcon:I._collapseIcon),c=g+4;Wl(D,0,0,p,l,H),s&&g&&Wl(D,0,0,g,l,I._selectBackground),(s||I._21o.get(I._21o.size()-1)!==o)&&Wl(D,0,l-1,p,1,j?j:Co(H)),T&&(Mf(D,T,c+Sf(T)/2,b/2),c+=Sf(T)+2),yc(D,o,I.getLabelFont(o),I.getLabelColor(o),c,0,0,b),F&&Mf(D,F,p-Sf(F)/2-4,b/2)},validateImpl:function(){var U=this,N=U._view,d=0,F=0,x=U.getWidth(),V=U.getHeight(),G=U._titleHeight,p=U._21o.size()*G,J=U._11o,r=U._9o;delete U._11o,delete U._9o,U._21o.each(function(K){var t,T,b=U._20o[K],i=b.content,w=U._10o===K;Tq(U)?(zq(b.div,d,0,G,V),t=U.initCanvas(b.canvas,G,V),zs(t,0,V),so(t,-$),U.drawTitle(t,K,V,G,b),t.restore(),w?(T=S(0,x-p),i&&(U._11o=i,U._9o=bf(i),zq(i,d+G,0,T,V)),d+=G+T):d+=G):(zq(b.div,0,F,x,G),t=U.initCanvas(b.canvas,x,G),U.drawTitle(t,K,x,G,b),t.restore(),w?(T=S(0,V-p),i&&(U._11o=i,U._9o=bf(i),zq(i,0,F+G,x,T)),F+=G+T):F+=G)});var M=U._9o;J&&J!==U._11o&&J.endEditing&&J.endEditing(),M&&M!==r&&tf(N,M),r&&r!==M&&Aq(r)}}),Ke.SplitView=function(S,z,E,G){var h=this,d=h._dividerDiv=cd(),P=h._60O=Rk(),M=h._61O=Rk(),s=P.style,e=M.style;h._view=Eq(1,h),tf(h._view,d),s.msTouchAction=Zp,s.pointerEvents=Zp,s.cursor=oi,e.msTouchAction=Zp,e.pointerEvents=Zp,e.cursor=oi,S&&h.setLeftView(S),z&&h.setRightView(z),E&&h.setOrientation(E),G!=J&&h.setPosition(G),h.setStatus(Rj),new Yp(h)},qe("SplitView",h,{ms_v:1,ms_fire:1,ms_ac:["continuousLayout","dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_continuousLayout:!1,_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:r.splitViewDividerSize,_dividerBackground:r.splitViewDividerBackground,_dragOpacity:r.splitViewDragOpacity,_toggleIcon:r.splitViewToggleIcon,onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(u,l){var n=this,B=n._position;isNaN(u)||(l||(n._82O=0>u?-1:u>1?1:0),n._position=u,n.fp(wi,B,u))},getLeftView:function(){return this._leftView},setLeftView:function(e){var q=this,l=q._leftView,A=q._view;if(q._leftView!==e){if(l&&l!==q._rightView){var j=bf(l);j.parentNode===A&&Aq(j)}if(q._leftView=e,e){var y=bf(e);y.parentNode!==A&&A.insertBefore(y,q._dividerDiv)}q.fp("leftView",l,e)}},getRightView:function(){return this._rightView},setRightView:function(t){var q=this,$=q._rightView,Y=q._view;if(q._rightView!==t){if($&&$!==q._leftView){var g=bf($);g.parentNode===Y&&Aq(g)}if(q._rightView=t,t){var o=bf(t);o.parentNode!==Y&&Y.insertBefore(o,q._dividerDiv)}q.fp("rightView",$,t)}},validateImpl:function(){var C=this,H=C._draggable,v=C._position,e=C.getWidth(),l=C.getHeight(),j=C._dividerSize,E=C._dividerBackground,V=s?18:8,X=C._dividerDiv,o=C._82O,P=C._60O,d=C._61O,p=C._toggleIcon,m=C._status,G=X.style,J=null,_=s?20:4,x=p.comps[0];j>=V||0===j?C._coverDiv&&(Aq(C._coverDiv),delete C._coverDiv):C._coverDiv||(C._coverDiv=cd(),y&&(C._coverDiv.style.background=Qh),tf(X,C._coverDiv)),C._togglable?P.parentNode||(tf(X,P),tf(X,d)):(Aq(P),Aq(d));var R=C._coverDiv,O=C._leftView,i=C._rightView;if(Tq(C)){if(j>e&&(j=e),m===Rj)if(1===o)var n=c(v,e),L=S(0,e-j-n);else-1===o?(L=c(-v,e),n=S(0,e-j-L)):(n=Q((e-j)*v),L=S(0,e-j-n));else"cl"===m?(n=0,L=S(0,e-j)):"cr"===m&&(L=0,n=S(0,e-j));O&&zq(O,0,0,n,l),i&&zq(i,n+j,0,L,l),zq(X,n,0,j,l),C._22o=n,R&&(zq(R,j/2-V/2,0,V,l),R.style.cursor=H?Dn:""),X.style.cursor=H?Dn:"";var A=X.clientHeight/2,M=X.clientWidth;Er(P,M,M),zq(P,0,A-M-_,M,M),J=Bb(P),Gl(J,0,0,1),x.rotation=-$,nk(J,p,0,0,M,M),J.restore(),Er(d,M,M),zq(d,0,A+_,M,M),J=Bb(d),Gl(J,0,0,1),x.rotation=$,nk(J,p,0,0,M,M),J.restore()}else{if(j>l&&(j=l),m===Rj)if(1===o)var w=c(v,l),r=S(0,l-j-w);else-1===o?(r=c(-v,l),w=S(0,l-j-r)):(w=Q((l-j)*v),r=S(0,l-j-w));else"cl"===m?(w=0,r=S(0,l-j)):"cr"===m&&(r=0,w=S(0,l-j));O&&zq(O,0,0,e,w),i&&zq(i,0,w+j,e,r),zq(X,0,w,e,j),C._22o=w,R&&(zq(R,0,j/2-V/2,e,V),R.style.cursor=H?Qi:""),G.cursor=H?Qi:"";var b=X.clientWidth/2,M=X.clientHeight;Er(P,M,M),zq(P,b-M-_,0,M,M),J=Bb(P),Gl(J,0,0,1),x.rotation=0,nk(J,p,0,0,M,M),J.restore(),Er(d,M,M),zq(d,b+_,0,M,M),J=Bb(d),Gl(J,0,0,1),x.rotation=I,nk(J,p,0,0,M,M),J.restore()}G.background=E}});var Yp=function(t){this.sv=t,this.addListeners()};js(Yp,h,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(I){var e=this,X=e.sv,k=X._dividerDiv,u=X._60O,E=X._61O,C=X._status,L=I.target;if(L===u)C===Rj?X.setStatus("cl"):"cr"===C&&X.setStatus(Rj);else if(L===E)C===Rj?X.setStatus("cr"):"cl"===C&&X.setStatus(Rj);else if(Zg(I)&&(L===k||L===X._coverDiv)&&(pm(I),X.isDraggable())){X.getLeftView(),X.getRightView();var M=e.maskDiv=cd();if(M.style.left=0,M.style.top=0,M.style.width=X.getWidth()+"px",M.style.height=X.getHeight()+"px",X.getView().appendChild(M),!X.isContinuousLayout()){var $=e.resizeDiv=cd();$.style.left=k.style.left,$.style.top=k.style.top,$.style.width=k.style.width,$.style.height=k.style.height,$.style.opacity=X.getDragOpacity(),$.style.background=X.getDividerBackground(),tf(e.getView(),$)}e._lastAbsPosition=X._22o,e._86o=Tq(X)?Ao(I).x:Ao(I).y,Vk(e,I)}},handleWindowTouchMove:function(p){Zg(p)&&this.update(p,this.sv.isContinuousLayout())},handleWindowTouchEnd:function(m){var G=this;G.update(m,!0),G.sv.setStatus(Rj),G.maskDiv&&Aq(G.maskDiv),G.resizeDiv&&Aq(G.resizeDiv),G.maskDiv=G.resizeDiv=J},handle_mousedown:function(f){Dp(f)&&this.handle_touchstart(f)},handleWindowMouseMove:function(p){this.handleWindowTouchMove(p)},handleWindowMouseUp:function($){this.handleWindowTouchEnd($)},update:function(_,P){var s=this,q=s.sv,N=Tq(q)?q.getWidth():q.getHeight(),z=q._dividerSize,H=s._lastAbsPosition-s._86o;Tq(q)?(H+=Ao(_).x,H>N-z&&(H=N-z),0>H&&(H=0),s.resizeDiv&&(s.resizeDiv.style.left=H+dm)):(H+=Ao(_).y,H>N-z&&(H=N-z),0>H&&(H=0),s.resizeDiv&&(s.resizeDiv.style.top=H+dm)),P&&N!==z&&(1===q._82O?q.setPosition(H,1):-1===q._82O?q.setPosition(H-N+z,1):q.setPosition(H/(N-z),1))}}),Ke.TabView=function(){var m=this,G=m._view=Eq(1,m),Z=m._91O=cd(1),_=m._tabModel=new hd,k=_.sm(),e=m.invalidate;m._7o=new Cq,m._canvas=Rk(Z),tf(G,Z),tf(G,m._92O=cd(1)),k.setSelectionMode(ip),k.ms(e,m),_.mm(e,m),_.md(e,m),_.mh(e,m),new wh(m),m.iv()},qe("TabView",h,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",Cn,fi,"tabBackground","selectWidth",Od,"moveBackground","insertColor"],_tabPosition:Wc,_tabHeight:Uk,_tabGap:r.tabViewTabGap,_labelColor:r.tabViewLabelColor,_labelFont:r.tabViewLabelFont,_tabBackground:r.tabViewTabBackground,_selectWidth:r.tabViewSelectWidth,_selectBackground:r.tabViewSelectBackground,_moveBackground:r.tabViewMoveBackground,_insertColor:r.tabViewInsertColor,_movable:!0,getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(L,t,O){var k=new Fi,i=this._tabModel;return k.setName(L),k.setView(t),i.add(k),O&&i.sm().ss(k),k},getLabel:function(U){return U.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(I){this._23o=I,this.iv()},get:function(e){var a=this,d=a._tabModel;if(On(e))return d._roots.get(e);if(se(e)){var n;return d.each(function(V){e===a.getLabel(V)&&(n=V)}),n}return e instanceof Fi?e:J},select:function(o){this._tabModel.sm().ss(this.get(o))},remove:function(I){var w=this;if(I=w.get(I)){var F=w._tabModel,m=F._roots.indexOf(I);w._tabModel.remove(I),w._12Q(--m)}},getCurrentTab:function(){return this._8o},hideTabView:function(J,N){N.parentNode===this._92O&&(_q(N)?(N.style.display=_m,N._tab_=J):Aq(N),ns())},showTabView:function(b,i){_q(i)&&(i.style.display="block",i._tab_=b),i.parentNode!==this._92O&&(tf(this._92O,i),ns())},_24o:function(){var q,H=this,U=H._8o,Y=H._9o,b=H._tabModel.sm().ld();b&&(q=bf(b.getView())),q!==Y&&(Y&&(U.getView()&&U.getView().endEditing&&U.getView().endEditing(),H.hideTabView(U,Y)),q&&H.showTabView(b,q)),H._8o=b,H._9o=q,U!==b&&H.onTabChanged(U,b)},onTabClosing:function(){return!0},onTabChanged:function(){},onTabClosed:function(t,j){this._12Q(--j)},_12Q:function(r){var y=this,i=y._tabModel,G=i.size();if(G&&!i.sm().ld()){r==J&&(r=0),r>=G&&(r=G-1),0>r&&(r=0);for(var e=r;e>=0;e--){var D=y.get(e);if(!D.isDisabled())return y.select(D),D}for(e=r+1;G>e;e++)if(D=y.get(e),!D.isDisabled())return y.select(D),D}},getTabWidth:function(m){var H=4,q=$l(m.getIcon());q&&(H+=Sf(q,m)+4);var x=this.getLabel(m);return x&&(H+=cf(this.getLabelFont(m),x).width+4),m.isClosable()&&(H+=10),H},drawTab:function(R,Z,E,J,M,p,r){var H,B=this,t=B._tabPosition,n=E+4,h=B._selectWidth,c=$l(Z.getIcon()),X=Z.isDisabled(),a=B.getLabelColor(Z),k=B.getLabelFont(Z),T=B.getLabel(Z),w=B._selectBackground,U=t===fh+"-vertical",S=t===um+"-vertical";(U||S)&&(n=J+4),X&&(R.globalAlpha=Vi),Wl(R,E,J,M,p,r),Z===B._8o&&h&&(t===Wc?Wl(R,E,J+p-h,M,h,w):t===fh?Wl(R,E+M-h,J,h,p,w):t===um?Wl(R,E,J,h,p,w):U?Wl(R,E+M-h,J,h,p,w):S?Wl(R,E,J,h,p,w):Wl(R,E,J,M,h,w));var W=M/2;if(U&&(zs(R,W,J+p/2),so(R,I),zs(R,-W,-J-p/2)),c){var d=tk(c,Z),f=Sf(c,Z);if(U||S){var K=E+M/2,Q=n+d/2;zs(R,K,Q),so(R,$),zs(R,-K,-Q),Mf(R,c,E+M/2,n+d/2,Z,B),zs(R,K,Q),so(R,-$),zs(R,-K,-Q),n+=d+4}else Mf(R,c,n+f/2,J+p/2,Z,B),n+=f+4}return U||S?(zs(R,M/2,n+M/2),so(R,$),zs(R,-M/2,-n-M/2),yc(R,T,k,a,E,n,p,M),zs(R,M/2,n+M/2),so(R,-$),zs(R,-M/2,-n-M/2)):yc(R,T,k,a,n,J,M,p),U&&(zs(R,W,J+p/2),so(R,-I),zs(R,-W,-J-p/2)),Z.isClosable()&&(H=S?{x:E+M-12,y:J+p-12,width:12,height:12}:{x:E+M-12,y:J+2,width:12,height:12},this.drawCloseIcon(Z,R,a,H)),X&&(R.globalAlpha=1),H},drawCloseIcon:function(W,G,a,i){var m=i.x,Y=i.y;G.strokeStyle=a,G.lineWidth=1,G.beginPath(),G.moveTo(m+2,Y+8),G.lineTo(m+8,Y+2),G.moveTo(m+8,Y+8),G.lineTo(m+2,Y+2),G.stroke()},validateImpl:function(){var u=this;u._24o();var A,J=u._canvas,x=u._tabPosition,j=u._91O,U=u._92O,T=u._tabModel,l=u.getWidth(),w=u.getHeight(),b=u._tabHeight,d=u._7o,X=u._tabGap,B=x===Wc,s=x===fh,N=x===um,e=x===fh+"-vertical",Z=x===um+"-vertical",_=u._23o,O=0;if((s||N)&&T._roots.each(function(m){O=S(u.getTabWidth(m),O)}),B?(zq(j,0,0,l,b),A={x:0,y:b,width:l,height:S(0,w-b)}):s?(zq(j,0,0,O,w),A={x:O,y:0,width:S(0,l-O),height:w}):N?(zq(j,l-O,0,O,w),A={x:0,y:0,width:S(0,l-O),height:w}):e?(zq(j,0,0,b,w),A={x:b,y:0,width:S(0,l-b),height:w}):Z?(zq(j,l-b,0,b,w),A={x:0,y:0,width:S(0,l-b),height:w}):(zq(j,0,w-b,l,b),A={x:0,y:0,width:l,height:S(0,w-b)}),zq(U,A),e||Z){u._9o&&(A.x=0,zq(u._8o.getView(),A)),Er(J,b,w);var Q=Bb(J),K=0;if(Gl(Q,0,u.ty(),1),Q.clearRect(0,0,b,w),d.clear(),T._roots.each(function(L){var e,T=u.getTabWidth(L);_&&_.tab===L||(e=u.drawTab(Q,L,0,K,b,T,u._tabBackground)),d.add({_75o:e,tab:L,startY:K,endY:K+T,height:T}),K+=T+X}),u._23Q=S(0,K-X),_){var k=_.position;u.drawTab(Q,_.tab,0,_.startY,b,_.height,u._moveBackground),Wl(Q,0,k,b,1,u._insertColor)}Q.restore(),u.ty(u.ty())}else if(s||N){u._9o&&(A.x=0,zq(u._8o.getView(),A)),Er(J,O,w);var Q=Bb(J),K=0;if(Gl(Q,0,u.ty(),1),Q.clearRect(0,0,O,w),d.clear(),T._roots.each(function(v){var g;_&&_.tab===v||(g=u.drawTab(Q,v,0,K,O,b,u._tabBackground)),d.add({_75o:g,tab:v,startY:K,endY:K+b,height:b}),K+=b+X}),u._23Q=S(0,K-X),_){var k=_.position;u.drawTab(Q,_.tab,0,_.startY,O,_.height,u._moveBackground),Wl(Q,0,k,O,1,u._insertColor)}Q.restore(),u.ty(u.ty())}else{u._9o&&(A.y=0,zq(u._8o.getView(),A)),Er(J,l,b);var Q=Bb(J),E=0;if(Gl(Q,u.tx(),0,1),Q.clearRect(0,0,l,b),d.clear(),T._roots.each(function(a){var H,G=u.getTabWidth(a);_&&_.tab===a||(H=u.drawTab(Q,a,E,0,G,b,u._tabBackground)),d.add({_75o:H,tab:a,startX:E,endX:E+G,width:G}),E+=G+X}),u._64I=S(0,E-X),_){var k=_.position;u.drawTab(Q,_.tab,_.startX,0,_.width,b,u._moveBackground),Tj(Q,u._insertColor,k,0,b)}Q.restore(),u.tx(u.tx())}for(var g=[],D=U.children,i=0;i<D.length;i++){var a=D[i],r=a._tab_;r&&!T.contains(r)&&g.push(a)}g.forEach(function(T){U.removeChild(T)})}});var wh=function(V){this.tv=V,this.addListeners()};js(wh,h,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(K){this.handleScroll(K,10*(K.wheelDelta/40))},handle_DOMMouseScroll:function(z){this.handleScroll(z,10*-z.detail)},handleScroll:function(r,n){pm(r);var E=this.tv,N=E._tabPosition;!E._40o()||N!==Wc&&N!==Wb||E.tx(this.tv.tx()+n),!E._41o()||N!==fh&&N!==um&&N!==fh+"-vertical"&&N!==um+"-vertical"||E.ty(this.tv.ty()+n)},_8Q:function(V){var O,G,a=this.tv,o=a._tabPosition,x=a._7o;if(o===Wc||o===Wb){var c=a.lp(V).x;for(O=0;O<x.size();O++)if(G=x.get(O),G.startX<=c&&c<=G.endX)return G}else if(o===fh||o===um||o===fh+"-vertical"||o===um+"-vertical"){var k=a.lp(V).y;for(O=0;O<x.size();O++)if(G=x.get(O),G.startY<=k&&k<=G.endY)return G}return J},isClickable:function(s){var x=this.tv,Y=x._tabPosition,h=this._73o=this._8Q(s);return!x._40o()||Y!==Wc&&Y!==Wb?!x._41o()||Y!==fh&&Y!==um&&Y!==fh+"-vertical"&&Y!==um+"-vertical"?h&&(!h.tab.isDisabled()||x.isMovable()):!0:!0},handle_mousemove:function(m){var i=this;to?i._74o=i._8Q(m):i.getView().style.cursor=i.isClickable(m)?oi:""},handle_mousedown:function(s){this.handle_mousemove(s),this.handle_touchstart(s)},handle_touchstart:function(A){var D=this,c=D.tv,k=c._tabPosition;pm(A),Dp(A)&&D.isClickable(A)&&(k===Wc||k===Wb?(D.x=Ao(A).x,D.lp=c.lp(A),D.tx=c.tx()):(D.y=Ao(A).y,D.lp=c.lp(A),D.ty=c.ty()),Vk(D,A))},handleWindowMouseMove:function(H){this.handleWindowTouchMove(H)},handleWindowTouchMove:function(I){var $,e=this,K=e.tv,r=K._tabPosition,Z=e._73o;if(r===Wc||r===Wb){if($=Ao(I).x-e.x,!e._25o&&!e.moving&&k($)>2&&(K._40o()&&!dh(I)?e._25o=1:Z&&K.isMovable()&&(e.moving=1)),e._25o)K.tx(e.tx+$);else if(e.moving){var X=e.lp.x+$,d=K._tabGap/2;K._7o.each(function(F){var i=F.endX,H=X-F.startX<i-X;X>=F.startX&&i>=X&&K._7Q({tab:Z.tab,startX:Z.startX+$,width:Z.width,front:H,insertTab:F.tab,position:H?S(0,F.startX-d):c(K._64I,i+d)})})}}else if($=Ao(I).y-e.y,!e._25o&&!e.moving&&k($)>2&&(K._41o()&&!dh(I)?e._25o=1:Z&&K.isMovable()&&(e.moving=1)),e._25o)K.ty(e.ty+$);else if(e.moving){var u=e.lp.y+$,d=K._tabGap/2;K._7o.each(function(P){var Q=P.endY,s=u-P.startY<Q-u;u>=P.startY&&Q>=u&&K._7Q({tab:Z.tab,startY:Z.startY+$,height:Z.height,front:s,insertTab:P.tab,position:s?S(0,P.startY-d):c(K._23Q,Q+d)})})}},handleWindowMouseUp:function(U){this.handleWindowTouchEnd(U)},handleWindowTouchEnd:function(){var U=this,p=U.tv,M=p._tabPosition,d=p.getTabModel(),b=d._roots,N=U._73o;if(U.moving){var i=p._23o;if(i&&i.insertTab!==i.tab){var m=i.tab,$=b.remove(m),_=b.indexOf(i.insertTab);_>=0&&(i.front||_++,_<=b.size()&&(b.add(m,_),d._38I(m,$,_)))}p._7Q(J),delete U.moving}else if(!U._25o&&N){m=N.tab;var e=U._74o;if(!e||e.tab===m)if(!m.isDisabled()&&Pm(N._75o,U.lp)){var Z=function(){var V=b.indexOf(m);d.remove(m),p.onTabClosed(m,V)};p.onTabClosing(m,Z)&&Z()}else m.isDisabled()||p._8o===m||d.sm().ss(m)}U._25o=U._73o=U._74o=M===Wc||M===Wb?U.x=U.lp=U.tx=J:U.y=U.lp=U.ty=J}}),Ke.PropertyView=function(H){var A=this;A._view=Eq(1,A),A._canvas=Rk(A._view),tf(A._view,A._79O=cd()),A._rows=new Cq,A._28o=new Cq,A._26o={},A._26Q={};var E=A._propertyModel=new hd,O=A.ivm;E.mm(O,A),E.md(O,A),E.mh(O,A),A.dm(H?H:new hd),new Wq(A)},qe("PropertyView",h,{ms_ac:[Cn,pb,fi,Tp,il,"categorizable",oe,th,go,ro,Gi,Br,jl,vb,"selectRowIndex",Od,"background",us,si,Yl,Qm,jr],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:Rd,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:Tn,_background:r.propertyViewBackground,_expandIcon:r.propertyViewExpandIcon,_collapseIcon:r.propertyViewCollapseIcon,_scrollBarColor:ql,_scrollBarSize:sp,_autoHideScrollBar:dd,_selectBackground:r.propertyViewSelectBackground,_rowHeight:Nr,_rowLineVisible:r.propertyViewRowLineVisible,_rowLineColor:r.propertyViewRowLineColor,_10I:.5,_columnLineVisible:r.propertyViewColumnLineVisible,_columnLineColor:r.propertyViewColumnLineColor,_labelColor:r.propertyViewLabelColor,_labelSelectColor:r.propertyViewLabelSelectColor,_labelFont:r.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(i){0>i&&(i=0),i>1&&(i=1);var $=this,C=$._10I;$._10I=i,$.fp("columnPosition",C,i)},getPropertyName:function(V){return V.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(F,c,Q){return Q===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(Y,v){return v===this._selectRowIndex?this._labelSelectColor:Y.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(h){var B=this.getHeight()-this._59I;return B>h&&(h=B),h>0?0:Q(h)},isExpanded:function(X){if(!X)return!0;var P=this._26o[X];return P?P.isExpanded:!(this._26Q[X]===!1)},toggle:function(h){var I=this;I.isExpanded(h)?I.collapse(h):I.expand(h)},expandAll:function(){this.validate();for(var D in this._26o)this.expand(D)},expand:function(t){if(t&&t!==_m){var T=this,w=T._26o[t];w&&!w.isExpanded&&(w.isExpanded=!0,T.onExpanded(t),T.ivm())}},onExpanded:function(){},collapseAll:function(){this.validate();for(var w in this._26o)this.collapse(w)},collapse:function(k){if(k&&k!==_m){var c=this,j=c._26o[k];j&&j.isExpanded&&(j.isExpanded=!1,c.onCollapsed(k),c.ivm())}},onCollapsed:function(){},getCategoryName:function(Y){if(!this.isCategorizable())return _m;var I=Y.getCategoryName();return I?I:_m},getPropertyModel:function(){return this._propertyModel},handleSelectionChange:function(){this.ivm()},setDataModel:function(y){var w=this,T=w._dataModel;T!==y&&(T&&(T.umd(w.handlePropertyChange,w),w._selectionModel||T.sm().ums(w.handleSelectionChange,w)),w._dataModel=y,y.md(w.handlePropertyChange,w),w._selectionModel?w._selectionModel._21I(y):y.sm().ms(w.handleSelectionChange,w),w.fp(Rc,T,y))},isVisible:function(c){return this._visibleFunc?this._visibleFunc(c):!0},onPropertyChanged:function(C){var o=this,f=C.property;Mm[f]?o.ivm():o.iv(),f===Cf&&o._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:Bo},handlePropertyChange:function(X){this._27o===X.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){var W=this;W._96I||(W.setSelectRowIndex(-1),W._96I=1,W.iv())},redraw:function(){this.iv()},validateModel:function(){var w=this,n=w._rows,m=w._28o,A={},z=new Cq,y=w._27o;w.updateCurrentData(),y!==w._27o&&w.endEditing(),n.clear(),m.clear(),w.getRawProperties().each(function(d){if(w.isVisible(d)){z.add(d);var M=w.getCategoryName(d);A[M]||(m.add(M,M===_m?0:e),A[M]={isExpanded:w.isExpanded(M),properties:new Cq})}}),w._sortFunc&&z.sort(w._sortFunc);for(var L in w._26o)w._26Q[L]=w.isExpanded(L);w._26o=A,m.each(function(I){I!==_m&&n.add(I);var Z=A[I];Z.isExpanded&&z.each(function(r){w.getCategoryName(r)===I&&(Z.properties.add(r),n.add({property:r,data:w._27o}))},w)})},validateImpl:function(){var q=this;q._76o(),q._96I&&(q.validateModel(),delete q._96I);var D=q._canvas,G=q.getWidth(),r=q.getHeight(),I=-q.ty(),k=q._rowHeight,p=q._indent,y=G-p,i=q._rows,g=i.size(),E=q._9I=p+y*q._10I,R=q._59I=g*k;Er(D,G,r),q._29I={x:0,y:I,width:G,height:r},q._31I=N(I/k),q._14I=o((I+r)/k),q._31I<0&&(q._31I=0),q._14I>g&&(q._14I=g);var u,b=Bb(D),H=q._background;Gl(b,0,-I,1),b.beginPath(),b.rect(0,I,G,r),b.clip(),b.clearRect(0,I,G,r),q._93db(b),H&&Wl(b,0,0,p,R,H);for(var w=q._31I;w<q._14I;w++){var c=i.get(w),I=k*w;if(se(c))H&&Wl(b,p,I,y,k,H),u=$l(q.isExpanded(c)?q._expandIcon:q._collapseIcon),u&&Ck(b,u,Re,0,I,p,k),b.save(),b.beginPath(),b.rect(p,I,y,k),b.clip(),q.drawCategoryName(b,c,w,p,I,y,k),b.restore();else{var j=c.property,F=c.data,u=$l(j.getIcon()),Y=q._selectRowIndex===w?q.getSelectBackground():J;if(u&&Ck(b,u,Re,0,I,p,k),Y&&Wl(b,p,I,y,k,Y),b.save(),b.beginPath(),b.rect(p,I,E-p,k),b.clip(),q.drawPropertyName(b,j,w,p,I,E-p,k),b.restore(),!q.isEditing(F,j)){var _=E+1,P=G-E-1;b.save(),b.beginPath(),b.rect(_,I,P,k),b.clip(),q._87o(q.drawPropertyValue(b,j,q.getValue(F,j),w,_,I,P,k,F),w,_,I,P,k),b.restore()}}q._rowLineVisible&&Wl(b,p,I+k-1,y,1,q._rowLineColor)}q._columnLineVisible&&(Wl(b,E,0,1,R,q._columnLineColor),Wl(b,G-1,0,1,R)),q._92db(b),q._93I(),b.restore(),q.ty(q.ty())},drawCategoryName:function(L,I,b,E,X,H,V){yc(L,I,this.getCategoryFont(I),this.getCategoryColor(I),E,X,H,V)},drawPropertyName:function(Y,w,H,L,F,R,O){return w.drawPropertyName?(w.drawPropertyName(Y,w,H,L,F,R,O,this),void 0):(yc(Y,this.getPropertyName(w),this.getPropertyFont(w,H),this.getPropertyColor(w,H),L,F,R,O),void 0)},drawPropertyValue:function(o,f,J,D,u,t,X,L,G){return f.drawPropertyValue?f.drawPropertyValue(o,f,J,D,u,t,X,L,G,this):(Fb(o,J,f,this.getLabelFont(f,J,D),this.getLabelColor(f,J,D),u,t,X,L,G,this),void 0)},isPropertyEditable:function(d){return d.isEditable()&&this.isEditable()},setProperties:function(O){this._propertyModel.clear(),this.addProperties(O)},addProperties:function(y){if(y){var B=this._propertyModel;y.forEach(function(k){if(!(k instanceof pi)){var E=tr(k.className);k=xi(E?E:pi,k)}B.add(k)})}},getRowIndexAt:function(k){var m=this,r=N(m.lp(k).y/m._rowHeight);return r>=0&&r<m._rows.size()?r:-1},getPropertyAt:function(u){var e=this,_=e.getRowIndexAt(u);return _>=0?e._rows.get(_).property:J},getToolTip:function(n){var j=this,w=j.getPropertyAt(n),L=j._27o;return w&&L?w.getToolTip(L,j._9I<j.lp(n).x,j):J}});var Wq=function(E){this.pv=E,this.addListeners()};js(Wq,h,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(p){this.getView().style.cursor=p},clear:function(){var Z=this;Z._62O=Z.cp=Z.ty=Z.p=J,Z.setCursor(oq)},handle_mousedown:function(Z){this.handle_touchstart(Z)},handle_touchstart:function(r){var P=this,V=P.pv;pm(r),V.setFocus(r)&&(Dp(r)?(P.cp=Ao(r),P.ty=V.ty(),P.p=V.getColumnPosition(),P.handle_touchmove(r)):V.setSelectRowIndex(V.getRowIndexAt(r)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(C){this.handle_touchend(C)},handle_touchend:function(n){var k=this;if(k.cp&&!k._62O){var l=k.pv,r=l.lp(n),y=r.x,g=r.y,T=l._indent,R=l.getRowIndexAt(n),Z=l._9I;if(R>=0){var K=l._rowHeight,B=K*R,Y=l._rows.get(R),H=Y.property;if(se(Y))$l(l.isExpanded(Y)?l._expandIcon:l._collapseIcon)&&y>=0&&T>=y&&g>=B&&B+K>=g?l.toggle(Y):qi(n)&&l.toggle(Y);else if(y>Z&&l.isPropertyEditable(H,n)){var t={x:Z+1,y:B,width:l.getWidth()-Z-1,height:K},o={x:t.x+l.tx(),y:t.y+l.ty(),width:t.width,height:t.height},f=0,q=l._29I;t.y<q.y?f=t.y-q.y:t.y+K>q.y+q.height&&(f=t.y+K-q.y-q.height),f&&(l.ty(l.ty()-f),o.y-=f),l.beginEditing({data:Y.data,property:H,value:l.getValue(Y.data,H),event:n,rect:t,editorRect:o,view:l})}}l.setSelectRowIndex(R)}k.clear()},handleWindowMouseMove:function(m){this.handleWindowTouchMove(m)},handleWindowTouchMove:function(H){var b=this,p=b.pv,E=b.ty,X=b.cp,d=Ao(H),m=b._62O;if("p"===m)p.setTranslateY(E+d.y-X.y);else if("c"===m){var M=p.getWidth()-p._indent;if(M>16){var C=b.p-(X.x-d.x)/M,$=16/M;$>C&&(C=$),C>1-$&&(C=1-$),p.setColumnPosition(C)}}else"s"===m&&p.setTranslateY(E+(X.y-d.y)*p._59I/p._29I.height)},handle_mousemove:function(N){this.handle_touchmove(N)},handle_touchmove:function(g){if(!to&&Dp(g)){var Q=this,C=Q.pv,R=k(C.lp(g).x-C._9I)<=(s?8:3);Q.cp?Q._62O||(R?(Q._62O="c",Vk(Q)):k(Ao(g).y-Q.cp.y)>=2&&(Q._62O=Q.isV(g)?"s":"p",Vk(Q))):(R?Q.setCursor(Dn):Q.setCursor(oq),Q.isV(g)&&C._43o())}},isV:function(I){var t=this.pv,O=t._29I;return t._41o()&&O.x+O.width-t.lp(I).x<Hq},handle_mousewheel:function(g){this.handleScroll(g,g.wheelDelta/40)},handle_DOMMouseScroll:function(P){2===P.axis&&this.handleScroll(P,-P.detail)},handleScroll:function(R,g){var m=this.pv;pm(R),m.endEditing(),m.translate(0,g*m.getRowHeight())},handle_keydown:function($){var i=this.pv,w=i._rows.size(),O=i._selectRowIndex+(mk($)?-1:1);(mk($)||Vn($))&&(0>O&&(O=0),O>=w&&(O=w-1),i.setSelectRowIndex(O))}}),Ke.ListView=function(f){this._5o(f),new Jj(this)},qe("ListView",h,{ms_ac:[Cn,pb,fi,us,oe,si,Yl,th,go,Br,jl,vb,Kn,Od],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:Tn,_rowHeight:Nr,_rowLineVisible:r.listViewRowLineVisible,_rowLineColor:r.listViewRowLineColor,_scrollBarColor:ql,_scrollBarSize:sp,_autoMakeVisible:lq,_autoHideScrollBar:dd,_selectBackground:r.listViewSelectBackground,_labelColor:r.listViewLabelColor,_labelSelectColor:r.listViewLabelSelectColor,_labelFont:r.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(d){var l=this,Y=l._checkMode;l._checkMode=d,l.fp(yq,Y,d)},drawRow:function(J,Y,B,l,S,T,k){var p=this,V=0,$=p._indent,Z=p.getIconWidth(Y);p.drawRowBackground(J,Y,B,l,S,T,k),p._checkMode&&(Mf(J,$l(p.getCheckIcon(Y)),V+$/2,S+k/2,Y,p),V+=$),p.drawIcon(J,Y,V,S,Z,k),p.drawLabel(J,Y,V+Z,S,k)}});var Jj=function(n){this.list=n,this._lastSelectDataTime=mj(),this.addListeners()};js(Jj,h,{ms_listener:1,getView:function(){return this.list._view},clear:function(f){var I=this,L=I.list;f&&"d"===I._62O&&!I.dragCancel&&L.handleDragAndDrop(f,"end"),L.draggingData&&(L.draggingData=null,L.redraw()),I.dragCancel=I._62O=I._isV=I._isH=I.cp=I.tx=I.ty=J},handle_mousedown:function(d){this.handle_touchstart(d)},handle_touchstart:function(U){var s=this,Z=s.list;if(pm(U),Z.setFocus(U)){var N=Z.getDataAt(U);s.cp=Ao(U),s.tx=Z.tx(),s.ty=Z.ty(),Dp(U)?N&&Z.handleDragAndDrop&&!s.isV(U)&&!s.isH(U)&&(Z.draggingData=N,Z.redraw(),Z.handleDragAndDrop(U,"prepare")):(N&&s._33o(U,N),s.clear(U))}},handleWindowMouseUp:function(N){this.clear(N)},handleWindowTouchEnd:function(c){this.clear(c)},handle_mouseup:function(n){this.handle_touchend(n)},handle_touchend:function(x){var v=this,M=v.list;if(!v._isV&&!v._isH&&v.cp&&!v._62O){var f=M.getDataAt(x);f?(M.isCheckMode()?v._34o(x,f):v._33o(x,f),qi(x)?M.onDataDoubleClicked(f,x):M.onDataClicked(f,x)):M.handleBackgroundClick(x)}v.clear(x)},handleWindowMouseMove:function(K){this.handleWindowTouchMove(K)},handleWindowTouchMove:function(A){var m=this,Q=m.list,S=m._62O,o=m.tx,e=m.ty,D=m.cp,g=Ao(A),I=Q._29I;"p"===S?Q.setTranslate(o+g.x-D.x,e+g.y-D.y):"v"===S?Q.ty(e+(D.y-g.y)*Q._59I/I.height):"h"===S?Q.tx(o+(D.x-g.x)*Q._91I/I.width):"d"===S&&(m.dragCancel||Q.handleDragAndDrop(A,"between"))},handle_mousemove:function(X){this.handle_touchmove(X)},handle_touchmove:function(e){if(!to&&Dp(e)){var L=this,O=L.list;if(L._isV=L.isV(e),L._isH=L.isH(e),L.cp){if(!L._62O){if(ii(Ao(e),L.cp)<2)return;L._isV?L._62O="v":L._isH?L._62O="h":O.draggingData&&!this.dragCancel?(L._62O="d",O.handleDragAndDrop(e,"begin")):L._62O="p",L._62O&&"d"!==L._62O&&O.draggingData&&(O.draggingData=null,O.redraw()),Vk(L)}}else L._isV&&O._43o(),L._isH&&O._42o()}},isV:function(v){var u=this.list,t=u._29I;return u._41o()&&t.x+t.width-u.lp(v).x<Hq},isH:function(G){var C=this.list,b=C._29I;return C._40o()&&b.y+b.height-C.lp(G).y<Hq},handle_mousewheel:function(S){this.handleScroll(S,S.wheelDelta/40,S.wheelDelta!==S.wheelDeltaX)},handle_DOMMouseScroll:function(_){this.handleScroll(_,-_.detail,1)},handleScroll:function(K,U,g){var d=this.list;pm(K),d.endEditing&&d.endEditing(),g&&d._41o()?d.translate(0,U*d.getRowHeight()):d._40o()&&d.translate(10*U,0)},handle_keydown:function(q){if(!r.isInput(q.target)){var Y,f=this.list,T=f.sm(),s=f._rows,C=s.size();if(Eh(q))f.selectAll();else if(As(q))f.handleDelete&&f.handleDelete(q);else if(no(q))"d"!==this._62O||this.dragCancel||(f.handleDragAndDrop(q,"cancel"),this.dragCancel=!0);else if(_d(q))f.isCheckMode()&&(Y=f.getFocusData(),Y&&f.checkData(Y));else if(mk(q)||Vn(q)){var c=f.isCheckMode();if(Y=c?f.getFocusData():T.ld()){var M=f.getRowIndex(Y);M>=0&&(mk(q)?0!==M&&(Y=s.get(M-1),c?f.setFocusData(Y):T.ss(Y)):M!==C-1&&(Y=s.get(M+1),c?f.setFocusData(Y):T.ss(Y)))}else C>0&&(Y=s.get(0),c?f.setFocusData(Y):T.ss(Y))}}},_34o:function(b,H){var i=this.list,v=i.lp(b).x;return v>=0&&v<=i._indent?(i.checkData(H),void 0):(i.setFocusData(H),void 0)},_33o:function(h,j){var r=this.list,O=r.sm(),b=O.ld();if(dh(h))r.isSelected(j)?O.rs(j):O.as(j);else if(Cm(h))if(b)for(var w=r.getRowIndex(b),u=r.getRowIndex(j);w!==u;)w+=u>w?1:-1,O.as(r._rows.get(w));else O.ss(j);else if(Dp(h)){var a=mj();if(O.contains(j)){var P=a-this._lastSelectDataTime;r.handleDataDoubleSelect&&P>500&&1500>P&&r.handleDataDoubleSelect(h,j)}O.ss(j),this._lastSelectDataTime=a}else O.contains(j)||O.ss(j)}}),Ke.TreeView=function($){var i=this;i._35o(),i._5o($),new Pb(i)},qe("TreeView",h,{ms_ac:[Cn,pb,fi,"rootVisible",yq,"rootData",th,go,Br,jl,vb,oe,us,si,Yl,ro,Gi,Kn,Od,"loader","doubleClickToToggle"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:J,_indent:Tn,_rowHeight:Nr,_rowLineVisible:r.treeViewRowLineVisible,_rowLineColor:r.treeViewRowLineColor,_scrollBarColor:ql,_scrollBarSize:sp,_autoHideScrollBar:dd,_expandIcon:r.treeViewExpandIcon,_collapseIcon:r.treeViewCollapseIcon,_autoMakeVisible:lq,_selectBackground:r.treeViewSelectBackground,_labelColor:r.treeViewLabelColor,_labelSelectColor:r.treeViewLabelSelectColor,_labelFont:r.treeViewLabelFont,_doubleClickToToggle:r.treeViewDoubleClickToToggle,drawRow:function(K,c,O,J,n,W,x){var E=this;E.drawRowBackground(K,c,O,J,n,W,x),E._97I(K,c,O,0,n,W,x)},isOnToggleIcon:function(O){var f=this.getDataAt(O);if(f){var o=this.getIndent(),e=this.lp(O).x;if($l(this.getToggleIcon(f))){var H=o*this.getLevel(f);if(e>=H&&H+o>=e)return!0}}return!1}});var Pb=function(t){Vp(Pb,this,[t])};js(Pb,Jj,{toggle:function(K,r,q,Y){var D=this.list,F=D.lp(K).x;if($l(D.getToggleIcon(r))){var B=q*Y;if(F>=B&&B+q>=F)return D.toggle(r),!0}return D.isDoubleClickToToggle()&&qi(K)?(D.toggle(r),!0):!1},_34o:function(T,d){var z=this.list,W=z.lp(T).x,f=z._levelMap[d._id],t=z._indent,x=t*(f+1);return W>=x&&x+t>=W?(z.checkData(d),void 0):(this.toggle(T,d,t,f)||z.setFocusData(d),void 0)},_33o:function(D,R){var w=this,Z=w.list;w.toggle(D,R,Z._indent,Z.getLevel(R))||Pb.superClass._33o.call(w,D,R)},handle_keydown:function(y){if(Jf(y)||Yk(y)){var r=this.list,e=r._rows,j=r.isCheckMode(),V=r.sm(),S=j?r.getFocusData():V.ld();S?S.hasChildren()&&(Jf(y)?r.collapse(S):r.expand(S)):e.size()>0&&(S=e.get(0),j?r.setFocusData(S):V.ss(S))}else Pb.superClass.handle_keydown.call(this,y)}});var gd=Ke.TableView=function(I){this._98I(),this._5o(I),new Ci(this)};qe("TableView",h,{ms_ac:[Cn,pb,fi,"sortMode",Tp,il,us,si,Yl,Qm,jr,"sortColumn",th,go,Br,jl,vb,Kn,Od],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:Dl,_editable:!0,_batchEditable:!1,_rowHeight:Nr,_rowLineVisible:r.tableViewRowLineVisible,_rowLineColor:r.tableViewRowLineColor,_columnLineVisible:r.tableViewColumnLineVisible,_columnLineColor:r.tableViewColumnLineColor,_scrollBarColor:ql,_scrollBarSize:sp,_autoHideScrollBar:dd,_autoMakeVisible:lq,_selectBackground:r.tableViewSelectBackground,_labelColor:r.tableViewLabelColor,_labelSelectColor:r.tableViewLabelSelectColor,_labelFont:r.tableViewLabelFont,getCheckColumn:function(){var i=this;if(!i._31o){var l=i._31o=new gr;l.setEditable(!0),l.setWidth(40),l.getValue=i.getCheckColumValue,l.drawCell=i.drawCheckColumnCell}return i._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(t){var C=this,g=C._39o,T=C.getCheckColumn();t!==C.isCheckMode()&&(t?g.add(T,0):g.remove(T),C.fp(yq,!t,t))},getCheckColumValue:function(u,H,s){return s.isSelected(u)},drawCheckColumnCell:function(J,u,E,F,K,w,Z,n,p){Mf(J,p.getCheckIcon(u),K+Z/2,w+n/2,u,p)}});var Ci=function(K){Vp(Ci,this,[K])};js(Ci,Jj,{_34o:function(n,I){var y=this.list,X=y._31o;if(y.isCellEditable(I,X,n)){var e=y._3Q(X),J=y.lp(n).x;if(e&&J>=e.startX&&J<e.startX+X.getWidth())return y.checkData(I),void 0}y._37O(I,n),y.setFocusData(I)},_33o:function(n,U){this.list._37O(U,n),Ci.superClass._33o.apply(this,arguments)
}});var Cd=Ke.TreeTableView=function(n){var k=this,I=k._4o=new gr;k._35o(),k._98I(),k._5o(n),I.setDisplayName("Name"),I.setEditable(!0),I.setWidth(180),I.drawCell=en,I.getValue=Fo,k._39o.add(I),new ko(k)},en=function(a,k,l,Z,G,B,v,z,p){p._97I(a,k,l,G,B,v,z)},Fo=function(x,f,A){return A.getLabel(x)};qe("TreeTableView",h,{ms_ac:[Cn,pb,fi,"sortMode",Tp,il,oe,yq,"rootData","rootVisible",th,go,"sortColumn",ro,Gi,Br,jl,vb,Kn,Yl,us,si,Qm,jr,Od,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:Dl,_checkMode:J,_editable:!0,_batchEditable:!1,_indent:Tn,_rowHeight:Nr,_rowLineVisible:r.treeTableViewRowLineVisible,_rowLineColor:r.treeTableViewRowLineColor,_columnLineVisible:r.treeTableViewColumnLineVisible,_columnLineColor:r.treeTableViewColumnLineColor,_expandIcon:r.treeTableViewExpandIcon,_collapseIcon:r.treeTableViewCollapseIcon,_scrollBarColor:ql,_scrollBarSize:sp,_autoHideScrollBar:dd,_autoMakeVisible:lq,_selectBackground:r.treeTableViewSelectBackground,_labelColor:r.treeTableViewLabelColor,_labelSelectColor:r.treeTableViewLabelSelectColor,_labelFont:r.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}});var ko=function(r){Vp(ko,this,[r])};js(ko,Jj,{_34o:function(D,n){var b=this.list,G=b._4o,M=b._3Q(G),O=b.lp(D).x;if(M){var B=b._indent,o=M.startX+B*b.getLevel(n);if($l(b.getToggleIcon(n))&&O>=o&&o+B>=O)return b.toggle(n),void 0;if(b.isCellEditable(n,G)&&(o+=B,O>=o&&o+B>=O))return b.checkData(n),void 0}b._37O(n,D),b.setFocusData(n)},_33o:function(S,v){var V=this.list,g=V.lp(S).x;if($l(V.getToggleIcon(v))){var J=V._3Q(V._4o);if(J){var x=V._indent,O=J.startX+x*V.getLevel(v);if(g>=O&&O+x>=g)return V.toggle(v),void 0}}V._37O(v,S),ko.superClass._33o.apply(this,arguments)}});var gn=Ke.TableHeader=function(p){var u=this,R=u._view=Eq(1,u),o=u._39o=p.getColumnModel(),Q=u.iv;u.tv=u._tableView=p,u._60I=new Cq,u._canvas=Rk(R),R.style.background=r.tableHeaderBackground||"",R.style.height=af+dm,o.mm(Q,u),o.md(Q,u),o.mh(Q,u),p.mp(function(m){Yc[m.property]&&u.iv()},u),new lm(u),u.iv()};qe("TableHeader",h,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",Cn,fi,oe,"moveBackground","insertColor",Qm,jr,"resizable","movable"],_checkIcon:Xq,_movable:!0,_resizable:!0,_labelColor:r.tableHeaderLabelColor,_labelFont:r.tableHeaderLabelFont,_columnLineColor:r.tableHeaderColumnLineColor,_columnLineVisible:r.tableHeaderColumnLineVisible,_sortDescIcon:r.tableHeaderSortDescIcon,_sortAscIcon:r.tableHeaderSortAscIcon,_moveBackground:r.tableHeaderMoveBackground,_insertColor:r.tableHeaderInsertColor,_indent:Tn,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(v){return v.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(X){return X.getColor()||this._labelColor},getLabelAlign:function(f){return f._align},onPropertyChanged:function(){this.iv()},_5Q:function(A){this._61I=A,this.iv()},getLogicalPoint:function(v){return es(v,this._canvas,this.tv.tx())},validateImpl:function(){var v=this,K=v._canvas,S=v.getWidth(),E=v.getHeight(),l=v.tv,r=v._60I,o=v._61I,q=-l.tx(),w=0;(S!==K.clientWidth||E!==K.clientHeight)&&Er(K,S,E),r.clear(),v._39o._roots.each(function(i){if(i.isVisible()){var x=w+i.getWidth();q+S>=w&&x>=q&&r.add({column:i,startX:w}),w=x}});var s=Bb(K);if(Gl(s,-q,0,1),s.beginPath(),s.rect(q,0,S,E),s.clip(),s.clearRect(q,0,S,E),r.each(function(h){var O=h.column,n=h.startX,X=O.getWidth();X>0&&(s.save(),s.beginPath(),s.rect(n,0,X,E),s.clip(),o&&o.column===O||v.drawColumn(s,O,n,0,X,E),v._columnLineVisible&&Wl(s,n+X-1,0,1,E,v._columnLineColor),s.restore())}),o){var t=o.column,w=o.startX,U=o.position,x=t.getWidth();s.save(),s.beginPath(),s.rect(w,0,x,E),s.clip(),s.fillStyle=v._moveBackground,s.fill(),v.drawColumn(s,t,w,0,x,E),s.restore(),Tj(s,v._insertColor,U,0,E)}s.restore()},_6Q:function(I){var m=this.tv;return m._31o===I&&m.sm().getSelectionMode()===bk},drawColumn:function(j,K,L,g,Y,q){var w=this,X=w.tv,u=$l(K.getIcon()),l=w.getLabelAlign(K);if(w._6Q(K)){var z=$l(w._checkIcon);Mf(j,z,L+Y/2,g+q/2,K,w)}else{var M=w.getLabel(K),D=w.getLabelFont(K),n=w.getLabelColor(K),S=cf(D,M).width,i=u?w._indent:0;l===fh?(u&&Ck(j,u,Re,L,g,i,q),yc(j,M,D,n,L+i,g,Y,q,fh)):l===um?(u&&Ck(j,u,Re,L+Y-S-i,g,i,q),yc(j,M,D,n,L,g,Y,q,um)):(u&&Ck(j,u,Re,L+(Y-S-i)/2,g,i,q),yc(j,M,D,n,L+(Y-S+i)/2,g,0,q,fh))}if(K.isSortable()&&X.getSortColumn()===K&&(u=$l(K.getSortOrder()===sf?w._sortAscIcon:w._sortDescIcon))){var F=Sf(u,K)/2+2;Mf(j,u,l===um?L+F:L+Y-F,g+q/2,K,X)}}});var lm=function(j){var e=this;e.th=j,e.tv=j._tableView,e.addListeners()};js(lm,h,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(n){this.getView().style.cursor=n},handle_mousemove:function(P){if(!to){var t=this;delete t._29o,t.setCursor(oq);for(var X=t.th,W=X._60I,H=X.lp(P).x,u=W.size()-1;u>=0;u--){var C=W.get(u),f=C.column,b=C.startX+f.getWidth();if(X.isResizable()&&k(b-H)<=(s?10:3))return t._29o=C,t.setCursor(Dn),void 0;H>C.startX&&b>H&&(t._29o=C),(f.isClickable()||f.isSortable()||X.isMovable()||t.tv.getCheckColumn&&f===t.tv.getCheckColumn())&&H>C.startX&&b>H&&t.setCursor(oi)}}},handle_mousedown:function(n){this.handle_touchstart(n)},handle_touchstart:function(a){var D=this;pm(a),D.tv.endEditing(),D.handle_mousemove(a),D._29o&&(D.x=Ao(a).x,D.lx=D.th.lp(a).x,D.w=D._29o.column.getWidth(),Vk(D,a))},handleWindowMouseMove:function(D){this.handleWindowTouchMove(D)},handleWindowTouchMove:function(N){var u=this,I=u.th,f=u.getView().style.cursor,m=u._29o,c=Ao(N).x-u.x;if(u.resizing||u.moving||(f===Dn?u.resizing=1:I.isMovable()&&f===oi&&k(c)>2&&(u.moving=1)),u.resizing)m.column.setWidth(u.w+c);else if(u.moving){var X=u.lx+c;I._60I.each(function(l){var n=l.startX,Q=n+l.column.getWidth();if(X>=n&&Q>=X){var y={column:m.column,startX:m.startX+c,front:Q-X>X-n,insertColumn:l.column};y.position=y.front?n:Q,I._5Q(y)}})}},_16Q:function(X,Y){var Q=this,O=Q.tv,g=Q.th,N=g._checkIcon;if(g._6Q(X)){var f=$l(N),r=Q.lx,d=X.getWidth(),n=Sf(f,X);if(r>=Y+d/2-n&&Y+d/2+n>=r){g.setCheckIcon(N===Dd?Xq:Dd);var x=O.sm(),P=O._rows;return N===Dd?x.rs(P):x.ss(P),O.onCheckColumnClicked(X),!0}}return!1},handleWindowMouseUp:function(_){this.handleWindowTouchEnd(_)},handleWindowTouchEnd:function(Q){var b=this,f=b.tv,M=b.th,u=b._29o;if(b.moving){var R=M._61I;if(R&&R.insertColumn!==R.column){var x=R.column,w=f.getColumnModel()._roots,F=w.remove(x),o=w.indexOf(R.insertColumn);o>=0&&(R.front||o++,o<=w.size()&&(w.add(x,o),f.getColumnModel()._38I(x,F,o)))}M._5Q(J),delete b.moving}else if(!b.resizing&&u){x=u.column;var P=M.lp(Q).x,O=u.startX,m=!0;if(M.onColumnClicked){var E=M.onColumnClicked(x,Q,O);E===!1&&(m=!1)}if(m&&P>=O&&P<=O+x.getWidth()&&!b._16Q(x,O)){if(x.isSortable()){var r=f.getSortMode(),i=x.getSortOrder();r===Dl?f.getSortColumn()===x?(i===np&&f.setSortColumn(J),x.setSortOrder(i===sf?np:sf)):f.setSortColumn(x):"bistate"===r&&(f.getSortColumn()===x?x.setSortOrder(i===sf?np:sf):f.setSortColumn(x))}f.onColumnClicked(x,Q,O)}}b._29o=b.resizing=b.x=b.lx=b.w=J}}),Ke.TablePane=function(e){this.init(new gd(e))},qe("TablePane",h,{ms_v:1,_44o:1}),Ke.TreeTablePane=function(D){this.init(new Cd(D))},qe("TreeTablePane",h,{ms_v:1,_44o:1}),Ke.Toolbar=function(m){var n=this,q=n._view=Eq(1,n),u=q.style;u.background=r.toolbarBackground||"",u.height=Uk+dm,n._canvas=Rk(q),n._30o=new Cq,n._90I=new Cq,n.setItems(m||[]),q.handleGroupSelectedChanged=function(g){if(g.isSelected()){var y=g.getGroupId();null!=y&&n._items.forEach(function(p){var I=p.element;I&&I!==g&&I.setSelected&&I.getGroupId&&I.getGroupId()===y&&I.setSelected(!1)})}},new Uc(n)},qe("Toolbar",h,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[Qq,Cn,fi,pb,Od,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:r.toolbarLabelColor,_labelSelectColor:r.toolbarLabelSelectColor,_labelFont:r.toolbarLabelFont,_selectBackground:r.toolbarSelectBackground,_itemGap:r.toolbarItemGap,_separatorColor:r.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(c){var $=this.getItemInfoAt(c);return $?$.item.toolTip:J},getLabelColor:function(f){return f&&f.selected&&f.type!==Dd&&f.type!==bs?this._labelSelectColor:this._labelColor},onPropertyChanged:function(G){this.iv(),G.property===Qq&&this._items.forEach(function(K){qg(K)})},redraw:function(){this.iv()},addItem:function(P,n){var f=this._items;n==J?f.push(P):f.splice(n,0,P),this.fp(Qq,J,f)},removeItem:function($){if($)for(var o=this._items,y=0;y<o.length;y++)$===o[y]&&(o.splice(y,1),this.fp(Qq,J,o))},removeItemById:function(d){if(d!=J)for(var Y=this._items,k=0;k<Y.length;k++)if(d===Y[k].id){var B=Y.splice(k,1)[0];return this.fp(Qq,J,Y),B}},getItemById:function(Z){if(Z!=J)for(var R=this._items,M=0;M<R.length;M++){var O=R[M];if(Z===O.id)return O}},setItemVisible:function(z,q){var h=this.getItemById(z);h&&(h.visible=q)},getItemInfos:function(){return this._30o},getItemInfoAt:function(z){var H=this,K=0,E=H._30o,I=H.lp(z),g=I.x,$=I.y;if($>=0&&$<=H.getHeight())for(;K<E.size();K++){var e=E.get(K);if(e.startX<=g&&g<=e.endX)return e}return J},drawItem:function(b,z,N,j,X){if(z.visible===!1)return 0;if(jo(z.visible)&&!z.visible())return 0;var L=this,S=z.disabled;S&&(b.globalAlpha=Vi);var f=L.drawItemImpl(b,z,N,j,X),w=L._itemGap;return S&&(b.globalAlpha=1),this._currentItem!==z||"separator"===z||z.separator===!0||z.unfocusable||Uj(b,L._separatorColor,N-w/2,0,f+w,j),f},drawItemImpl:function($,C,P,q,z){var B=this,d=B._view,L=B._itemGap,H=q/2,w=C.type,f=C.element,e=C.label;se(f)&&(e=f,f=J);var Q,b=B.getLabelFont(C),Z=B.getLabelColor(C),D=C.selected,x=$l(C.icon),i=Sf(x,C),r=0,X=i+(e?cf(b,e).width:0);if("separator"===C||C.separator===!0)return Tj($,B._separatorColor,P,q/4,H),1;if(f){x&&Mf($,x,P+i/2,H,C,B),yc($,e,b,Z,P+i,0,0,q);var v=bf(f);z||B._90I.add(v),v.parentNode!==d&&tf(d,v),f.iv&&f.iv(),f.validate&&f.validate();var Y=v.getBoundingClientRect(),y=Y.width,S=v.style;return He(v),S.left=B.tx()+P+X+dm,S.top=(q-Y.height)/2+dm,X+y}return w===bs?Q=$l(D?ti:Ok):w===Dd&&(Q=$l(D?Dd:Xq)),Q?(r=Sf(Q,C),Mf($,Q,P+r/2,H,C,B),P+=r,X+=r):D&&Wl($,P-L/2,0,X+L,q,B.getSelectBackground(C)),x&&Mf($,x,P+i/2,H,C,B),yc($,e,b,Z,P+i,0,0,q),X},validateImpl:function(){var A=this,X=A._canvas,E=A.getWidth(),m=A.getHeight(),q=A._30o,B=A._items;Er(X,E,m);var $=Bb(X),U=A._itemGap,z=U/2;Gl($,A.tx(),0,1),$.clearRect(0,0,E,m);var _=A._90I;A._90I=new Cq,q.clear(),B.forEach(function(k){var p=A.drawItem($,k,z,m);q.add({item:k,startX:z,endX:z+p,width:p}),p&&(z+=p+U)}),_.each(function(U){A._90I.contains(U)||Aq(U)});var D=A._64I;A._64I=S(0,z),$.restore(),A._stickToRight?(A._65O=0,$=Bb(X),z=E-A._64I+U,Gl($,0,0,1),$.clearRect(0,0,E,m),q.clear(),B.forEach(function(x){var g=A.drawItem($,x,z,m,!0);q.add({item:x,startX:z,endX:z+g,width:g}),g&&(z+=g+U)}),$.restore()):A.tx(A.tx()),D!==A._64I&&A.onSumWidthChanged(D,A._64I)},onSumWidthChanged:function(){},handleClick:function(c,R){var q=this,i=c.type,z=c.action,X=c.groupId,P=c.selected;c.disabled||(X!=J?P||(c.selected=!0,this._items.forEach(function(I){I.groupId===X&&c!==I&&(I.selected=!1)}),z&&c.action(c,q,R)):i===Dd||"toggle"===i?(c.selected=!P,z&&c.action(c,q,R)):z&&c.action(c,q,R)),ns(),q.iv()}});var Uc=function(L){this.tb=L,this.addListeners()};js(Uc,h,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(u){this.handleScroll(u,10*(u.wheelDelta/40))},handle_DOMMouseScroll:function(I){this.handleScroll(I,10*-I.detail)},handleScroll:function(A,_){pm(A);var u=this.tb;u.isScrollable()&&!u._stickToRight&&(u.tx(u.tx()+_),$q())},handle_mousemove:function(l){var y=this;to||y.setItem(l)},handle_mouseout:function(k){var W=this;k.target===W.getView()?W.tb.setCurrentItem(J):W.handle_mousemove(k)},handle_mousedown:function(R){this.handle_mousemove(R),this.handle_touchstart(R)},handle_touchstart:function(G){var c=this,s=c.tb,K=G.target;Dp(G)&&(K===c.getView()||K===s._canvas)&&(pm(G),s.setFocus(G)&&(this.setItem(G,!0),(s.isScrollable()||c.info&&!c.info.item.disabled)&&(c.x=Ao(G).x,c.tx=s.tx(),Vk(c,G))))},handleWindowMouseMove:function(L){this.handleWindowTouchMove(L)},handleWindowTouchMove:function(Z){var d=this,f=d.tb;if(!f._stickToRight){var g=Ao(Z).x-d.x;!d._25o&&k(g)>2&&f.isScrollable()&&(d._25o=1),d._25o&&f.tx(d.tx+g)}},handleWindowMouseUp:function(L){this.handleWindowTouchEnd(L)},handleWindowTouchEnd:function(u){var d=this,X=d.tb,V=d.info,I=d.tb.getItemInfoAt(u);if(!d._25o&&V){var w=V.item;I&&I.item===w&&X.handleClick(w,u)}d._25o=d.x=d.tx=J,d.setItem()},setItem:function(d,I){var v=this,E=v.tb,$=v.info=d?E.getItemInfoAt(d):J,y=$?$.item:J;E.setCurrentItem(y),I&&y&&jo(y.onDown)&&y.onDown(d)}}),Ke.BorderPane=function(){this._view=Eq(1,this),this.iv()},qe("BorderPane",h,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(x,I){this._12o("leftView",x),I!=J&&this.setLeftWidth(I)},getRightView:function(){return this._rightView},setRightView:function(q,o){this._12o("rightView",q),o!=J&&this.setRightWidth(o)},getTopView:function(){return this._topView},setTopView:function(g,e){this._12o("topView",g),e!=J&&this.setTopHeight(e)},getBottomView:function(){return this._bottomView},setBottomView:function(a,p){this._12o("bottomView",a),p!=J&&this.setBottomHeight(p)},getCenterView:function(){return this._centerView},setCenterView:function(B){this._12o("centerView",B)},_12o:function(S,f){var N=this,O="_"+S,M=N._view,V=N[O];V!==f&&(V&&(V.getView?Aq(V.getView()):Aq(V)),N[O]=f,f&&(f.getView?tf(M,f.getView(),1):tf(M,f,1)),N.fp(S,V,f))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var C=this,F=C._topView,L=C._bottomView,E=C._leftView,P=C._rightView,Z=C._centerView,U=C.getWidth(),q=C.getHeight(),v=0,W=0,$=U,g=q,m=0,d=0,K=0,H=0;F&&(m=C._topHeight==J?vq(F):C._topHeight,W=m),L&&(d=C._bottomHeight==J?vq(L):C._bottomHeight,g=q-d),E&&(K=C._leftWidth==J?Ve(E):C._leftWidth,v=K),P&&(H=C._rightWidth==J?Ve(P):C._rightWidth,$=U-H);var A=S(0,$-v),V=S(0,g-W);F&&zq(F,0,0,U,m),L&&zq(L,0,g,U,d),E&&zq(E,0,W,K,V),P&&zq(P,$,W,H,V),Z&&zq(Z,v,W,A,V)}})}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);