#1, 在官网选择下载: https://caddyserver.com/download
#2, 选择脚本方式安装: One-step installer script (bash):
#        curl https://getcaddy.com | bash -s personal
#3, 脚本执行完成后，执行 which caddy，可以看到 caddy 已被
#        安装到了 /usr/local/bin/caddy；
#        caddy -version 查看版本号
#4, sudo setcap CAP_NET_BIND_SERVICE=+eip /usr/local/bin/caddy
#5, 运行 : caddy -port 44444 -conf  /home/wzw/project/go/src/html/8iris/7proxy-caddy/Caddyfile


# 3号机的caddy本身就是一个web服务器:44444 <-----这个端口号由运行caddy程序时的参数 -port 44444指定
ga111.ga:443 {
	root /home/wzw/project/go/src/html/8iris/7proxy-caddy/www
	tls     "/home/wzw/.acme.sh/ga111.ga/fullchain.cer"  "/home/wzw/.acme.sh/ga111.ga/ga111.ga.key"
#	log requests.log {
#		rotate_size 50  # Rotate after 50 MB
#		rotate_age  90  # Keep rotated files for 90 days
#		rotate_keep 20  # Keep at most 20 log files
#	}
}

# 2号机的fileserver:8888
#'/home/wzw/project/go/src/html/9fileserver(net.http)/fileserver-arm'
2.ga111.ga:443 {
	tls     "/home/wzw/.acme.sh/ga111.ga/fullchain.cer"  "/home/wzw/.acme.sh/ga111.ga/ga111.ga.key"
	proxy / 192.168.2.2:8888
}

# 2号机的徐高阳:8080
#22.ga111.ga:443 {
#        tls     "/home/wzw/.acme.sh/ga111.ga/fullchain.cer"  "/home/wzw/.acme.sh/ga111.ga/ga111.ga.key"
#        proxy / 192.168.2.2:8080
#}

# 2号机的实验室:80888
# '/home/wzw/project/go/src/laboratory:80888'
5.ga111.ga:443 {
        tls     "/home/wzw/.acme.sh/ga111.ga/fullchain.cer"  "/home/wzw/.acme.sh/ga111.ga/ga111.ga.key"
        proxy / 192.168.2.2:80888 {
               websocket
               transparent
               except static
       }
}

# 3号机的fileserver:8888
#'/home/wzw/project/go/src/html/9fileserver(net.http)/fileserver-arm'
3.ga111.ga:443 {
	tls     "/home/wzw/.acme.sh/ga111.ga/fullchain.cer"  "/home/wzw/.acme.sh/ga111.ga/ga111.ga.key"
	proxy / 192.168.2.3:8888
}

# 3号机的徐高阳:8080
#33.ga111.ga:443 {
#        tls     "/home/wzw/.acme.sh/ga111.ga/fullchain.cer"  "/home/wzw/.acme.sh/ga111.ga/ga111.ga.key"
#        proxy / 192.168.2.3:8080
#}


# 重定向到百度
4.ga111.ga:443 {
	tls     "/home/wzw/.acme.sh/ga111.ga/fullchain.cer"  "/home/wzw/.acme.sh/ga111.ga/ga111.ga.key"
	proxy / https://www.baidu.com
}

# 2号机的实验室:8080(暂停)
#5.ga111.ga:443 {
#        tls     "/home/wzw/.acme.sh/ga111.ga/fullchain.cer"  "/home/wzw/.acme.sh/ga111.ga/ga111.ga.key"
#        proxy / https://192.168.2.2:8080 {
#		websocket
#		transparent
#		except static
#	}



