A._movableFunc?A._movableFunc(Y):!0:!1},isSizeEditable:function(z){return Yq(z)?this._sizeEditableFunc?this._sizeEditableFunc(z):!0:!1},isRotationEditable:function(C){return Yq(C)&&C.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(C):!0:!1},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(g){this.setZoom(dn,g)},zoomOut:function(t){this.setZoom(1/dn,t)},setZoom:function(e,G){if(1!==e){var E=this;if(E._ortho)return E.setOrthoZoom(e,G),void 0;E._14o&&E._14o.stop(!0);var O=1/e,C=E._eye,u=E._center,$=u[0]+(C[0]-u[0])*O-C[0],p=u[1]+(C[1]-u[1])*O-C[1],a=u[2]+(C[2]-u[2])*O-C[2];if(!(ii(C,u)<E._moveStep&&1>O)){if(G=Qp(G)){var Y=Se(C);return G.action=function(z){E.fi({kind:E._zooming?"betweenZoom":"beginZoom"}),E._zooming=1,C[0]=Y[0]+$*z,C[1]=Y[1]+p*z,C[2]=Y[2]+a*z,E.fp(tq,J,C)},G._37o=function(){delete E._14o,delete E._zooming,E.fi({kind:"endZoom"}),E.onZoomEnded()},E._14o=Bi(G)}C[0]+=$,C[1]+=p,C[2]+=a,E.fp(tq,J,C)}}},setOrthoZoom:function(F,L){if(1!==F){var g=this;g._14o&&g._14o.stop(!0);var P=g._orthoWidth,D=P/F-P;if(!(P<g._moveStep&&F>1))return(L=Qp(L))?(L.action=function(H){g.fi({kind:g._zooming?"betweenZoom":"beginZoom"}),g._zooming=1,g.setOrthoWidth(P+D*H)},L._37o=function(){delete g._14o,delete g._zooming,g.fi({kind:"endZoom"}),g.onZoomEnded()},g._14o=Bi(L)):(g.setOrthoWidth(P/F),void 0)}},getPositionInfo:function(j){var f=this,_=f._eye,N=f._center,k=f.getAspect(),F=j?hl($r(N,_,!0),$r(j,_)):ii(_,N);if(f._ortho){var D=f._orthoWidth;return{length:F,height:D/k,width:D}}var G=2*n(f._fovy/2)*F;return{length:F,height:G,width:G*k}},getCenterInfo:function(){var T=this;return T._81O||(T._81O=T.getPositionInfo()),Se(T._81O)},rotate:function(A,I,b,X){var m=this;if(A||I){X==J&&(X=m._firstPersonMode),m._88O&&m._88O.stop(!0);var P=m._center,l=m._eye,r=m.getCenterInfo().length,K=X?P:l,q=X?l:P,c=$r(K,q),$=f(c[0],c[2]),g=f(Z(c[0]*c[0]+c[2]*c[2]),c[1]),D=X?$i:tq;return X&&(I=-I),(b=Qp(b))?(b.action=function(z){m.fi({kind:m._rotating?"betweenRotate":"beginRotate"}),m._rotating=1;var V=$+A*z,b=g+I*z;b=yh(b),c[0]=r*j(b)*j(V),c[1]=r*C(b),c[2]=r*j(b)*C(V),K[0]=q[0]+c[0],K[1]=q[1]+c[1],K[2]=q[2]+c[2],m.fp(D,J,K)},b._37o=function(){delete m._88O,delete m._rotating,m.fi({kind:"endRotate"}),m.onRotateEnded()},m._88O=Bi(b)):($+=A,g+=I,g=yh(g),c[0]=r*j(g)*j($),c[1]=r*C(g),c[2]=r*j(g)*C($),K[0]=q[0]+c[0],K[1]=q[1]+c[1],K[2]=q[2]+c[2],m.fp(D,J,K),void 0)}},pan:function(N,S,e,K){if(N||S){var k=this;K==J&&(K=k._firstPersonMode),k._89O&&k._89O.stop(!0);var G=nf(k),U=[G[0]*N,G[4]*N,G[8]*N],c=[G[1]*S,G[5]*S,G[9]*S],j=U[0]+c[0],$=U[1]+c[1],L=U[2]+c[2],M=k._center,r=k._eye;if(K){var Q=lo(k.getBoundaries(),r[0],r[2],r[0]+j,r[2]+L,Z(j*j+L*L));j=Q[0],L=Q[1]}if(e=Qp(e)){var R=Se(r),b=Se(M);return e.action=function(Q){k.fi({kind:k._panning?"betweenPan":"beginPan"}),k._panning=1,M[0]=b[0]+j*Q,M[1]=b[1]+$*Q,M[2]=b[2]+L*Q,r[0]=R[0]+j*Q,r[1]=R[1]+$*Q,r[2]=R[2]+L*Q,k.fp(tq,J,r),k.fp($i,J,M)},e._37o=function(){delete k._89O,delete k._panning,k.fi({kind:"endPan"}),k.onPanEnded()},k._89O=Bi(e)}M[0]+=j,M[1]+=$,M[2]+=L,r[0]+=j,r[1]+=$,r[2]+=L,k.fp(tq,J,r),k.fp($i,J,M)}},walk:function(z,O,l){if(z){var c=this;l==J&&(l=c._firstPersonMode),c._90O&&c._90O.stop(!0);var P=c._center,V=c._eye,s=$r(P,V,!0);if(l){var X=lo(c.getBoundaries(),V[0],V[2],V[0]+s[0]*z,V[2]+s[2]*z,k(z));if(z=ii(X),!z)return;s=[X[0]/z,0,X[1]/z]}if(O=Qp(O)){var n=Se(V),E=Se(P);return O.action=function(j){c.fi({kind:c._walking?"betweenWalk":"beginWalk"}),c._walking=1;var Q=z*j;V[0]=n[0]+s[0]*Q,V[1]=n[1]+s[1]*Q,V[2]=n[2]+s[2]*Q,P[0]=E[0]+s[0]*Q,P[1]=E[1]+s[1]*Q,P[2]=E[2]+s[2]*Q,c.fp(tq,J,V),c.fp($i,J,P)},O._37o=function(){delete c._90O,delete c._walking,c.fi({kind:"endWalk"}),c.onWalkEnded()},c._90O=Bi(O)}V[0]+=s[0]*z,V[1]+=s[1]*z,V[2]+=s[2]*z,P[0]+=s[0]*z,P[1]+=s[1]*z,P[2]+=s[2]*z,c.fp(tq,J,V),c.fp($i,J,P)}},handleScroll:function(X,$){X.preventDefault();var R=this,a=R._moveStep;R.isFirstPersonMode()?R.isPannable()&&R.pan(0,$>0?a:-a):R.isZoomable()&&R.setZoom(0>$?1/Li:Li)},handlePinch:function(d,Y){this.isZoomable()&&this.setZoom(Y>d?1/Fg:Fg)},reset:function(){this.setCenter(r.graph3dViewCenter),this.setEye(r.graph3dViewEye),this.setUp(r.graph3dViewUp)},moveSelection:function(g,w,m){var v=this;v.dm().beginTransaction(),ih(this.sm().toSelection(this.isMovable,this),g,w,m),v.dm().endTransaction()},getMoveMode:function(T,i){var L=i.s("3d.move.mode");if(L)return L;var w="88",X="89",g="90";return Cm(T)||rc[w]&&rc[X]&&rc[g]?"xyz":rc[w]&&rc[X]?"xy":rc[w]&&rc[g]?"xz":rc[X]&&rc[g]?"yz":rc[w]?"x":rc[X]?"y":rc[g]?"z":"xz"},handleTick:function(){var u=this,K=!1,X=u._moveStep,z=X,w=!1,V=!0,P=u._rotateStep*(V?-1:1);if(u.isWalkable()||(z=0),u.isPannable()||(X=0),u.isRotatable()||(P=0),u._32Q){var B=(mj()-u._32Q)/50;z*=B,X*=B,P*=B}u._31Q&&(Lo(u._31Q),delete u._31Q,delete u._32Q),eh()&&(K=!0,u.pan(-X,0,w,V)),sc()&&(K=!0,u.pan(X,0,w,V)),_g()&&(K=!0,Cm()?u.pan(0,X,w,V):u.walk(z,w,V)),em()&&(K=!0,Cm()?u.pan(0,-X,w,V):u.walk(-z,w,V)),Jf()&&(K=!0,u.rotate(-P,0,w,V)),Yk()&&(K=!0,u.rotate(P,0,w,V)),mk()&&(K=!0,u.rotate(0,-P/2,w,V)),Vn()&&(K=!0,u.rotate(0,P/2,w,V)),K&&(u._32Q=mj(),u._31Q=id(u.handleTick,u))},handleKeyDown:function(Q){var R=this;!dh(Q)&&gs[Q.keyCode]?R.handleTick():Eh(Q)?R.selectAll():As(Q)?R.handleDelete(Q):_d(Q)&&this.isResettable()&&R.reset()},checkDoubleClickOnNote:function(p,g,Z){var R=this;if(Z===Hb){if(g.s("note.toggleable"))return g.s(Vd,!g.s(Vd)),R.fi({kind:"toggleNote",event:p,data:g,part:Z}),!0}else if(Z===Ar&&g.s("note2.toggleable"))return g.s(El,!g.s(El)),R.fi({kind:"toggleNote2",event:p,data:g,part:Z}),!0;return!1},checkDoubleClickOnRotation:function(T,k,o){return o===li?(k.setRotationX(0),!0):o===nh?(k.setRotationY(0),!0):o===pj?(k.setRotationZ(0),!0):!1},onRotateEnded:function(){},onWalkEnded:function(){},toViewPosition:function(x){var O=this,j=O.getWidth()/2,E=O.getHeight()/2,v=O._18Q;return v&&v._wh===j/E||(v=Le(O),O._18Q=ho(v,v,nf(O)),O._18Q._wh!==j/E),x=cp([x[0],x[1],x[2],1],v),{x:j+j*x[0]/x[3],y:E-E*x[1]/x[3]}},getHitPosition:function(U,q,c){var M=this,i=M.getWidth(),z=M.getHeight(),I=U.target?M.lp(U):U,F=I.x-i/2,h=I.y-z/2,T=M.getCenterInfo(),P=nf(M);q=q?q:[0,0,0],c=c?c:[0,1,0],F=F/i*T.width,h=-1*h/z*T.height;var r=[P[0]*F,P[4]*F,P[8]*F],b=[P[1]*h,P[5]*h,P[9]*h],L=[r[0]+b[0],r[1]+b[1],r[2]+b[2]],S=M.getCenter(),K=Ek(M,q,c,[L[0]+S[0],L[1]+S[1],L[2]+S[2]]);return K?K:[0,0,0]},getLineLength:function(o){this.validate();var k=this.getData3dUI(o);if(k&&k.getCache){var G=k.getCache();if(G)return G[G.length-1].length}return 0},getLineOffset:function(K,O){var s=this.getData3dUI(K);if(s&&s.getCache){var r=s.getCache();if(r)return Rl(r,O)}return J},isLabelVisible:function(){return!0},isNoteVisible:function(){return!0}});var cb=nc.Interactor=function(Q){this.gv=Q};Gg("Interactor",h,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()}});var Ui=nc.DefaultInteractor=function(D){Vp(Ui,this,[D])};Gg("DefaultInteractor",cb,{handle_contextmenu:function(q){pm(q)},handle_mousewheel:function(h){this.gv.handleScroll(h,h.wheelDelta/40)},handle_DOMMouseScroll:function(s){2===s.axis&&this.gv.handleScroll(s,-s.detail)},handle_keydown:function(t){this.gv.handleKeyDown(t)},handle_mousedown:function(W){this.handle_touchstart(W)},handle_touchstart:function(f){pm(f);var K=this,Q=K.gv,X=Dp(f),k=Q.getDataInfoAt(f),b=k?k.data:J,t=k?k.part:J,d=Q.sm(),F=Zg(f),U=yj(f);Q.setFocus(f)&&(K._62O=J,K._57I=J,b?dh(f)?d.co(b)?d.rs(b):d.as(b):d.co(b)||d.ss(b):X&&(dh(f)?Q.isRectSelectable()&&(K._62O=Hf):K._57I=Ao(f)),K._31Q&&(Lo(K._31Q),delete K._31Q,delete K._32Q),K._62O||(Q.isFirstPersonMode()&&(Cm(f)||U>2?K._62O="pan":Q.isMouseRoamable()||s?(K._62O="roaming",K.foward=F&&Dp(f),K._32Q=mj(),K._31Q=id(K.tick,K)):X||(K._62O="roaming")),K._62O||(X&&F&&Nf[t]?(K._62O=t,K.p3=b.p3()):X&&F&&Yq(b)&&Q.isSelected(b)&&Q.isMovable(b)?(K._62O="move",K.p3=b.p3(),K.movedata=b):s&&(U>2?K._62O="pan":2===U&&(K.dist=Lh(f),K._62O="pinch")))),K.point=Q.lp(f),Vk(K,f),qi(f)?Q.handleDoubleClick(f,b,t):Q.handleClick(f,b,t))},tick:function(){var A=this,r=A.gv,j=r._moveStep;A.point&&r.isWalkable()&&(A._32Q&&(j*=(mj()-A._32Q)/50),r.walk(A.foward?j:-j),A._32Q=mj(),A._31Q=id(A.tick,A))},handle_mouseup:function(v){this.handle_touchend(v)},handle_touchend:function(s){var y=this._57I;y&&(ii(y,Ao(s))<=1&&this.gv.sm().cs(),this._57I=J)},handleWindowMouseMove:function(W){this.handleWindowTouchMove(W)},handleWindowTouchMove:function(p){var s,j,d=this,L=d.gv,W=d._62O,B=d.point,U=L.dm(),_=L.lp(p),b=_.x-B.x,V=_.y-B.y,t=-l*b/L.getWidth(),u=-l*V/L.getHeight();if("roaming"===W)d.rotate(p,t/2,u/2);else if(W===li||W===nh||W===pj)L._86O||U.beginTransaction(),L.fi({kind:L._86O?"betweenEditRotation":"beginEditRotation",event:p}),L._86O=1,L.sm().each(function(Y){if(Yq(Y)&&L.isRotationEditable(Y)){var T=k(t)>k(u)?t:u;W===li?Y.setRotationX(Y.getRotationX()+T):W===nh?Y.setRotationY(Y.getRotationY()+T):W===pj&&Y.setRotationZ(Y.getRotationZ()+T)}});else if("move"===W||Nf[W]){W===xr||W===de||W===Xc?(L._87O||U.beginTransaction(),L.fi({kind:L._87O?"betweenEditSize":"beginEditSize",event:p}),L._87O=1):(L._moving||U.beginTransaction(),L.fi({kind:L._moving?"betweenMove":"beginMove",event:p}),L._moving=1);var M,P=d.p3,h=L.getPositionInfo(P),F=nf(L);M=W===vr?"x":W===hk?"y":W===bj?"z":W===xr?"sx":W===de?"sy":W===Xc?"sz":L.getMoveMode(p,d.movedata),b=b/L.getWidth()*h.width,V=-1*V/L.getHeight()*h.height;var m,T,O=[F[0]*b,F[4]*b,F[8]*b],I=[F[1]*V,F[5]*V,F[9]*V],R=O[0]+I[0],w=O[1]+I[1],Y=O[2]+I[2],f=[P[0]+R,P[1]+w,P[2]+Y],K=$r(L.getEye(),f,!0);if("xyz"===M?(m=f,L.moveSelection(R,w,Y)):"xz"===M?(m=Ek(L,P,[0,1,0],f),m&&L.moveSelection(m[0]-P[0],0,m[2]-P[2])):"xy"===M?(m=Ek(L,P,[0,0,1],f),m&&L.moveSelection(m[0]-P[0],m[1]-P[1],0)):"yz"===M?(m=Ek(L,P,[1,0,0],f),m&&L.moveSelection(0,m[1]-P[1],m[2]-P[2])):"x"===M||"sx"===M?(K[0]=0,m=Ek(L,P,K,f),m&&(T=m[0]-P[0],"x"===M?L.moveSelection(T,0,0):L.sm().each(function(v){Yq(v)&&L.isSizeEditable(v)&&(s=S(Oo,v.getWidth()+T),j=s/v.getWidth(),v.setWidth(s),Cm(p)&&(v.setHeight(v.getHeight()*j),v.setTall(v.getTall()*j)))}))):"y"===M||"sy"===M?(K[1]=0,m=Ek(L,P,K,f),m&&(T=m[1]-P[1],"y"===M?L.moveSelection(0,T,0):L.sm().each(function(e){Yq(e)&&L.isSizeEditable(e)&&(s=S(Oo,e.getTall()+T),j=s/e.getTall(),e.setTall(s),Cm(p)&&(e.setHeight(e.getHeight()*j),e.setWidth(e.getWidth()*j)))}))):("z"===M||"sz"===M)&&(K[2]=0,m=Ek(L,P,K,f),m&&(T=m[2]-P[2],"z"===M?L.moveSelection(0,0,T):L.sm().each(function(A){Yq(A)&&L.isSizeEditable(A)&&(s=S(Oo,A.getHeight()+T),j=s/A.getHeight(),A.setHeight(s),Cm(p)&&(A.setTall(A.getTall()*j),A.setWidth(A.getWidth()*j)))}))),!m)return;d.p3=m}else if(W===Hf){var n=d.div;n||(n=d.div=cd(),tf(d.getView(),n),n.op=B,n.style.background=L.getRectSelectBackground()),L.fi({kind:L._rectSelecting?"betweenRectSelect":"beginRectSelect",event:p}),L._rectSelecting=1,n.rect=Pk(n.op,_),zq(n,n.rect)}else if("pinch"===W&&2===yj(p)){L.fi({kind:L._pinching?"betweenPinch":"beginPinch",event:p}),L._pinching=1;var T=Lh(p);L.handlePinch(T,d.dist),d.dist=T}else"pan"===W||Cm(p)?d.pan(p,b,V):L.isFirstPersonMode()||(Dp(p)?d.rotate(p,t,u):(d.pan(p,b,0),L.isWalkable()&&(L.fi({kind:L._walking?"betweenWalk":"beginWalk",event:p}),L._walking=1,L.walk(V/L.getHeight()*L.getCenterInfo().height))));d.point=_},pan:function(m,Y,P){var G=this.gv;if(G.isPannable()){var C=G.getCenterInfo(),J=Y/G.getWidth()*C.width,$=-1*P/G.getHeight()*C.height;G.fi({kind:G._panning?"betweenPan":"beginPan",event:m}),G._panning=1,G.pan(-J,-$)}},rotate:function(J,w,M){var _=this.gv;_.isRotatable()&&(_.fi({kind:_._rotating?"betweenRotate":"beginRotate",event:J}),_._rotating=1,_.rotate(w,M))},handleWindowMouseUp:function(j){this.handleWindowTouchEnd(j)},handleWindowTouchEnd:function(m){var i=this,P=i.gv,k=P.dm(),_=i.div;if(_){var H=P.getDatasInRect(_.rect);if(!H.isEmpty()){var U=P.sm(),t=U.toSelection();H.each(function(_){U.co(_)?t.remove(_):t.add(_)}),U.ss(t)}Aq(_)}P._moving&&(delete P._moving,P.fi({kind:"endMove",event:m}),P.onMoveEnded(),k.endTransaction()),P._panning&&(delete P._panning,P.fi({kind:"endPan",event:m}),P.onPanEnded()),P._rotating&&(delete P._rotating,P.fi({kind:"endRotate",event:m}),P.onRotateEnded()),P._86O&&(delete P._86O,P.fi({kind:"endEditRotation",event:m}),k.endTransaction()),P._87O&&(delete P._87O,P.fi({kind:"endEditSize",event:m}),k.endTransaction()),P._pinching&&(delete P._pinching,P.fi({kind:"endPinch",event:m}),P.onPinchEnded()),P._rectSelecting&&(delete P._rectSelecting,P.fi({kind:"endRectSelect",event:m}),P.onRectSelectEnded()),P._walking&&(delete P._walking,P.fi({kind:"endWalk",event:m}),P.onWalkEnded()),i.dist=i.point=i._62O=i.p3=i.movedata=i.div=i._57I=i._32Q=i._31Q=i.foward=J}});var Ch=function(d){this.gv=d};js(Ch,h,{_iv:!0,iv:function(){this._iv=!0},face:function($,q){var I=this,S=I.gv.getGL();if(!S||!Yq($))return J;var n=q.x,M=q.width,G=q.height,O=I.height-q.y-G,c=N(M/2),r=new Uint8Array(4*M*G),F=0;for(I.iv(),I.validate($),wl(S,I.frame),S.readPixels(n,O,M,G,S.RGBA,S.UNSIGNED_BYTE,r),wl(S,J),I.iv();c>=F;F++)for(var o=c-F,h=c+F,T=o;h>=T;T++)for(var Y=o;h>=Y;Y++)if(T===o||T===h||Y===o||Y===h){var v=Xl.m[r[4*(T*M+Y)]];if(v)return v}},get:function(C,Q){this.validate();var R=this,s=R.gv.getGL();if(!s)return J;var I,p,D=C.x,o=C.width,B=C.height,t=R.height-C.y-B,Z=N(o/2),m=new Uint8Array(4*o*B),K=0,E=m.length,U=Q?J:new Cq,j=Q?J:{};if(wl(s,R.frame),s.readPixels(D,t,o,B,s.RGBA,s.UNSIGNED_BYTE,m),wl(s,J),Q){for(;Z>=K;K++)for(var v=Z-K,l=Z+K,x=v;l>=x;x++)for(var M=v;l>=M;M++)if((x===v||x===l||M===v||M===l)&&(I=R.info(m,4*(x*o+M))))return I}else for(;E>K;K+=4)I=R.info(m,K),I&&(p=I.data,j[p._id]||(U.add(p),j[p._id]=p));return U},info:function(h,N){return this.colorMap[(h[N]<<16)+(h[N+1]<<8)+h[N+2]+((127&h[N+3])<<24)]},validate:function(d){var R=this,A=R.gv,k=A.getGL();if(k){var S=A.getWidth(),s=A.getHeight(),r=k.RGBA,Y=k.TEXTURE_2D,T=k.RENDERBUFFER,e=k.FRAMEBUFFER;R.texture||(R.texture=Zi(k),R.render=k.createRenderbuffer(),R.frame=k.createFramebuffer()),(R.width!==S||R.height!==s)&&(Tl(k,R.texture),k.texImage2D(Y,0,r,S,s,0,r,k.UNSIGNED_BYTE,J),Og(k,k.TEXTURE_MIN_FILTER,k.LINEAR),k.bindRenderbuffer(T,R.render),k.renderbufferStorage(T,k.DEPTH_COMPONENT16,S,s),wl(k,R.frame),k.framebufferTexture2D(e,k.COLOR_ATTACHMENT0,Y,R.texture,0),k.framebufferRenderbuffer(e,k.DEPTH_ATTACHMENT,T,R.render),Tl(k,J),k.bindRenderbuffer(T,J),wl(k,J),R.width=S,R.height=s),R._iv&&(R._iv=!1,wl(k,R.frame),A._42(d||(R.colorMap={}),1),wl(k,J))}}});var xl=function(g){this.gv=g};js(xl,h,{gap:0,size:0,_42:function(P,z){var B=this,a=B.gv,f=a._gridGap,K=a._gridSize;if(a._gridVisible){if(B.gap!==f||B.size!==K){for(var h=[],y=a._gridSize/2,Q=f*y,g=0;2*y+1>g;g++){var p=6*g,$=6*(2*y+1)+p;h[p]=-Q,h[p+1]=0,h[p+2]=-Q+g*f,h[p+3]=Q,h[p+4]=0,h[p+5]=-Q+g*f,h[$]=-Q+g*f,h[$+1]=0,h[$+2]=-Q,h[$+3]=-Q+g*f,h[$+4]=0,h[$+5]=Q}B.vs=new Jg(h),B.gap=f,B.size=K}Zk(a),Rb(P,z),bc(P),Nh(P,z,1,a._gridColor,a._buffer.vs,B.vs),mo(P,0,B.vs.length/3,P.LINES),Zc(P),vj(P,z)}else B.vs=B.gap=B.size=J}});var hm=function(n){this.gv=n};js(hm,h,{_42:function(k,q){var o=this.gv,N=o._buffer.vs,Q=o._axisXColor,v=o._axisYColor,M=o._axisZColor,x=o._originAxisVisible,U=o._centerAxisVisible;if(x||U){var Y=y?k.TRIANGLES:k.TRIANGLE_FAN,j=k.LINES;if(Zk(o),Rb(k,q),bc(k),x){var $=o.getCenterInfo(),z=c($.width,$.height)/5,C=.8*z,u=.05*z;Nh(k,q,1.5,Q,N,new Jg([0,0,0,z,0,0,C,u,0,C,0,u,C,-u,0,C,0,-u,C,u,0,0,0,0,0,z,0,u,C,0,0,C,u,-u,C,0,0,C,-u,u,C,0,0,0,0,0,0,z,u,0,C,0,u,C,-u,0,C,0,-u,C,u,0,C])),mo(k,0,2,j),mo(k,1,6,Y),Nh(k,q,J,v),mo(k,7,2,j),mo(k,8,6,Y),Nh(k,q,J,M),mo(k,14,2,j),mo(k,15,6,Y)}if(U){var W=o._center,A=W[0],m=W[1],l=W[2],$=o.getPositionInfo(W);z=c($.width,$.height)/20,Nh(k,q,1.5,Q,N,new Jg([A,m,l,A+z,m,l,A,m,l,A,m+z,l,A,m,l,A,m,l+z])),mo(k,0,2,j),Nh(k,q,J,v),mo(k,2,2,j),Nh(k,q,J,M),mo(k,4,2,j)}Zc(k),vj(k,q)}}});var Hd=function(i){this.gv=i},vr="edit_tx",hk="edit_ty",bj="edit_tz",li="edit_rx",nh="edit_ry",pj="edit_rz",xr="edit_sx",de="edit_sy",Xc="edit_sz",Nf={};Nf[vr]=1,Nf[hk]=1,Nf[bj]=1,Nf[li]=1,Nf[nh]=1,Nf[pj]=1,Nf[xr]=1,Nf[de]=1,Nf[Xc]=1,js(Hd,h,{_42:function(A,I,x){var G=this,H=G.gv,b=H.sm().ld();if(H.isEditable(b)&&!H.isEditHelperDisabled()&&Yq(b)&&(!H.isFirstPersonMode()||!H.isMouseRoamable()&&!s)){Zk(H);var i,y,C=H.isMovable(b),L=H.isRotationEditable(b),z=H.isSizeEditable(b),Y=H._axisXColor,V=H._axisYColor,p=H._axisZColor,n=H._editSizeColor,Z=H.getCenterInfo(),F=c(Z.width,Z.height)/10,K=F/(x?5:10),q=.7*F,j=.4*q,h=b.p3(),T=h[0],$=h[1],_=h[2];i=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],C&&G._17O(A,I,b,x,vr,Y,i,[T,$-K,_,T+q,$-K,_,T+q,$,_,T+q,$,_,T,$,_,T,$-K,_,T,$-K,_+K,T+q,$-K,_+K,T+q,$-K,_,T+q,$-K,_,T,$-K,_,T,$-K,_+K]),y=T+q,z&&G._17O(A,I,b,x,xr,n,i,[y,$-K,_,y+j,$-K,_,y+j,$,_,y+j,$,_,y,$,_,y,$-K,_,y,$-K,_+K,y+j,$-K,_+K,y+j,$-K,_,y+j,$-K,_,y,$-K,_,y,$-K,_+K]),y+=j,L&&G._17O(A,I,b,x,li,Y,i,[y,$-K,_,y+j,$-K,_,y+j,$,_,y+j,$,_,y,$,_,y,$-K,_,y,$-K,_+K,y+j,$-K,_+K,y+j,$-K,_,y+j,$-K,_,y,$-K,_,y,$-K,_+K]),i=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],C&&G._17O(A,I,b,x,hk,V,i,[T,$,_,T,$+q,_,T-K,$+q,_,T-K,$+q,_,T-K,$,_,T,$,_,T,$,_,T,$,_-K,T,$+q,_-K,T,$+q,_-K,T,$+q,_,T,$,_]),y=$+q,z&&G._17O(A,I,b,x,de,n,i,[T,y,_,T,y+j,_,T-K,y+j,_,T-K,y+j,_,T-K,y,_,T,y,_,T,y,_,T,y,_-K,T,y+j,_-K,T,y+j,_-K,T,y+j,_,T,y,_]),y+=j,L&&G._17O(A,I,b,x,nh,V,i,[T,y,_,T,y+j,_,T-K,y+j,_,T-K,y+j,_,T-K,y,_,T,y,_,T,y,_,T,y,_-K,T,y+j,_-K,T,y+j,_-K,T,y+j,_,T,y,_]),i=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],C&&G._17O(A,I,b,x,bj,p,i,[T,$,_,T,$,_+q,T,$-K,_+q,T,$-K,_+q,T,$-K,_,T,$,_,T,$-K,_,T-K,$-K,_,T-K,$-K,_+q,T-K,$-K,_+q,T,$-K,_+q,T,$-K,_]),y=_+q,z&&G._17O(A,I,b,x,Xc,n,i,[T,$,y,T,$,y+j,T,$-K,y+j,T,$-K,y+j,T,$-K,y,T,$,y,T,$-K,y,T-K,$-K,y,T-K,$-K,y+j,T-K,$-K,y+j,T,$-K,y+j,T,$-K,y]),y+=j,L&&G._17O(A,I,b,x,pj,p,i,[T,$,y,T,$,y+j,T,$-K,y+j,T,$-K,y+j,T,$-K,y,T,$,y,T,$-K,y,T-K,$-K,y,T-K,$-K,y+j,T-K,$-K,y+j,T,$-K,y+j,T,$-K,y])}},_17O:function(A,Y,d,c,L,h,K,W){var n=this.gv._buffer;Bf(A,Y,c,!0,d,L),Uh(A,Y,J,!0,J,!0,J,!1),lp(A,Y.uDiffuse,h),sb(A,n.vs,new Jg(W),Y.aPosition),sb(A,n.ns,new Jg(K),Y.aNormal),bc(A),mo(A,0,12),Zc(A),Wg(A,Y)}});var Mc=function(o,g){this.gv=o,this.s=function(f,S,H){return S==J&&(S=H),S==J?g.getStyle(f):dg(S,g,o)},this.data=g};js(Mc,h,{I3d:!0,ms_icons:1,_iv:!0,iv:function(){this._iv=!0},_42:function(Z,q,X,s){var B=this,y=B.data;if(!(y instanceof Ij)){var L,O,n,f,S,h,V,r=B.gv,e=y._id,H=B.s("shape3d.alwaysOnTop")?null:B.s("batch"),P=r._batchIndexMap,$=r._batchModelMap,j=r.isSelectable(y),z=r.getBrightness(y),E=z!=J&&1!==z;if(B.needValidate(Z)){if(n=Jq(P,$,y,H),B.validate(n,H?kg[H]||fs:J),n&&(f=P[e],S=f.size=n.vs.length/3-f.begin,V=n.rs))for(z=E?z:1,h=0;S>h;h++)V.push(z);if(Yq(y)){var C=r.getWireframeGeometry(y);if(C)So(r,y,C);else{var c=r.getWireframe(y);c&&So(r,y,c)}}B.labelInfo=B.label2Info=B.noteInfo=B.note2Info=B._38o=J,B._24O(ld,"getLabel"),B._24O(rh,"getLabel2"),B._26O(Hb,"getNote"),B._26O(Ar,"getNote2"),B._15O(),B._iv=!1}E&&lp(Z,q.uBrightness,z),lp(Z,q.uAlphaTest,B.s("alphaTest")),O=Bf(Z,q,X,j,y,Eo),O&&(qf(O,P[e],$),qf(O,r._polylineIndexMap[e],r._polylineModelMap),qf(O,r._wireframeIndexMap[e],r._wireframeModelMap)),P[e]||B._80o(Z,q,s),r.isLabelVisible(y)&&((L=B.labelInfo)&&(Bf(Z,q,X,j,y,ld),B._28O(L,ld,s)),(L=B.label2Info)&&(Bf(Z,q,X,j,y,rh),B._28O(L,rh,s))),r.isNoteVisible(y)&&((L=B.noteInfo)&&(Bf(Z,q,X,j,y,Hb),B._29O(L,Hb,s)),(L=B.note2Info)&&(Bf(Z,q,X,j,y,Ar),B._29O(L,Ar,s))),(L=B._38o)&&B._99O(Z,q,L,X,j,s),E&&lp(Z,q.uBrightness,1)}},needValidate:function(){return this._iv},validate:function(){},_16O:function(){return od},_80o:function(){},dispose:function(){},_calcAnchorMat:function(T){if(T.hasOwnProperty("_anchor")||T.hasOwnProperty("_anchorElevation")){var Z=T.getAnchor3d(),y={x:Z.x-.5,y:Z.y-.5,z:Z.z-.5},E=Ln();return _o(E,[-y.x,-y.y,-y.z]),E}},getBodyColor:function(f){var p=this.data,K=this.gv.getBodyColor(p);return K?K:f?p.getStyle(f):J},_24O:function(G,F){var V=this,n=V.data,B=V.gv,w=V.s,O=B[F](n);if(O!=J){var t=w(G+".scale"),u=w(G+".max"),M=V[G+"Info"]={label:O,textureScale:w(G+".texture.scale"),color:B[F+"Color"](n),font:w(G+".font"),align:w(G+".align"),background:B[F+"Background"](n)},p=M.rect=bp(M,O);u>0&&u<p.width&&(M.labelWidth=p.width,p.width=u),p.x=p.y=0,p.width*=t,p.height*=t,M.mat=V._16O(w(G+".autorotate"),w(G+".position"),p,w(G+".face"),w(G+".t3"),w(G+".r3"),w(G+".rotationMode"));var k=p.width/2,f=p.height/2;M.vs=new Jg([-k,f,0,-k,-f,0,k,-f,0,k,f,0]),p.width/=t,p.height/=t}},_26O:function(Y,D){var M=this,n=M.data,O=M.gv,Q=M.s,f=O[D](n);if(f!=J){var l=Q(Y+".scale"),c=this[Y+"Info"]={note:f,textureScale:Q(Y+".texture.scale"),expanded:Q(Y+".expanded"),font:Q(Y+".font"),color:Q(Y+".color"),align:Q(Y+".align"),borderWidth:Q(Y+".border.width"),borderColor:Q(Y+".border.color"),background:O[D+"Background"](n)};if(c.expanded){var X=Q(Y+".max"),k=bp(c,f);k.width+=6,k.height+=2,X>0&&X<k.width&&(c.labelWidth=k.width,k.width=X);var $={x:-k.width/2,y:-8-k.height,width:k.width,height:k.height+8}}else $={x:-6,y:-18,width:12,height:18};c.mat=M._16O(Q(Y+".autorotate"),Q(Y+".position"),J,Q(Y+".face"),Q(Y+".t3"),Q(Y+".r3"),Q(Y+".rotationMode")),c.rect=$,1!==l&&($=Se($),$.x*=l,$.height*=l,$.y=-$.height,$.width*=l);var V=$.x,B=$.y,K=$.width,U=$.height;c.vs=new Jg([V,-B,0,V,-B-U,0,V+K,-B-U,0,V+K,-B,0])}},_28O:function(X,y,t){if(t(this.s(y+".transparent"))){var L=X.rect,i=X.textureScale,x=L.width*i,m=L.height*i;if(x>=1&&m>=1){var l=vd(x,m);1!==i&&(l.translate(l,L.x,L.y),l.scale(i,i),l.translate(l,-L.x,-L.y)),gf(l,X),l.restore(),Ul(this,y,X.mat,X.vs,!0)}}},_29O:function(n,D,X){if(X(this.s(D+".transparent"))){var W=n.rect,h=n.textureScale,R=W.x,d=W.y,B=W.width*h,C=W.height*h;if(B>=1&&C>=1){W.x=W.y=0;var L=vd(B,C);1!==h&&L.scale(h,h),Hh(L,n),L.restore(),W.x=R,W.y=d,Ul(this,D,n.mat,n.vs,!1)}}},_99O:function(s,R,n,K,x,e){if(n){var q=this,j=q.gv,u=q.data,p=j._buffer,H=j._1O,v=n.icons;for(var k in v){var g=v[k],V=n.rects[k];if(V&&e(dg(g.transparent,u,j))){Bf(s,R,K,x,u,k);var o=dg(g.shape3d,u,j),X=o?[o]:dg(g.names,u,j),C=X?X.length:0,E=dg(g.textureScale,u,j)||1,Y=dg(g.light,u,j);Y==J&&(Y=o?!0:!1),Uh(s,R,dg(g.blend,u,j),Y,dg(g.opacity,u,j),dg(g.reverseFlip,u,j),dg(g.reverseColor,u,j),dg(g.reverseCull,u,j));for(var b=0;C>b;b++){var D=X[b],I=V[b];if(Kh(q,I.mat),o)zp(j,u,rq(q,o),q);else{var c=$l(D);if(c){var O=I.width*E,i=I.height*E;if(O>=1&&i>=1){var S=vd(O,i);Ck(S,c,dg(g.stretch,u,j),0,0,O,i,u,j),S.restore(),Zi(s,cn,H),bc(s,R,H,dg(g.discardSelectable,u,j),p.uv,dq),sb(s,p.vs,I.vs,R.aPosition),xp(s,p.ns,ci,R.aNormal),Hp(s,p.is,Ad),zi(s,0,Ad.length),Zc(s,R,H)}}}Jm(j)}Wg(s,R)}}}}});var _e=function(W,n){Vp(_e,this,[W,n])};js(_e,Mc,{_16O:function(A,X,J,U,m,r,o,O,y){var l=this.data,L=l.getFinalScale3d(),c=zl(X,L,J,U,O,y);if(l.hasOwnProperty("_anchor")||l.hasOwnProperty("_anchorElevation")){var G=l.getAnchor3d();c[0]-=(G.x-.5)*L[0],c[1]-=(G.y-.5)*L[1],c[2]-=(G.z-.5)*L[2]}return Jc(Ln(),c,l.p3(),U,m,r,o,A,l.r3(),l.getRotationMode())},clear:function(){var S=this;S.faceMat=S.mat=S.shapeModel=S.left=S.right=S.front=S.back=S.top=S.bottom=S.csg=J},needValidate:function(i){if(this._iv)return this._validateFrameId=i._renderInfo.frame,!0;if(this.s("shape3d.autorotate")||this.s("shape3d.fixSizeOnScreen")||this.s("hide.overlapping.group")){var C=i._renderInfo.frame;if(this._validateFrameId!==C)return this._validateFrameId=C,!0}return!1},validate:function(H,Q){var g=this,i=g.gv,n=g.data,U=rq(g);g._updateAutoRotation(),g._updateFixSize2d(),g._updateOverlapping(),(this.s("shape3d.autorotate")||this.s("shape3d.fixSizeOnScreen"))&&(Ob(i,n,"_wireframeModelMap","_wireframeIndexMap"),Ob(i,n,"_wireframeModelMapSwap","_wireframeIndexMapSwap"));var l=ao(n,i.getMat(n),U?g.s("shape3d.scaleable"):!0),C=g._calcAnchorMat(n);if(C&&ho(l,l,C),g.clear(),H){var t=[];U?Oe(i,n,U,g,g.getBodyColor(),[l],H,t):(ic(i,n,H,Q,l,fh,t,Lj),ic(i,n,H,Q,l,um,t,Oj),ic(i,n,H,Q,l,Wc,t,Di),ic(i,n,H,Q,l,Wb,t,Ah),ic(i,n,H,Q,l,Im,t,fm),ic(i,n,H,Q,l,Id,t,sq)),t.length&&(im(H.vs,t),im(H.ns,Ac(t)))}else g.mat=l,(g.shapeModel=U)||(g._cubeUvs=null,g.vf(fh,0),g.vf(um,16),g.vf(Im,8),g.vf(Id,24),g.vf(Wc,32),g.vf(Wb,40))},_updateAutoRotation:function(){var l=this,S=l.s("shape3d.autorotate");if(S){var v,t=l.gv,u=l.data;v="string"==typeof S?[S.indexOf("x")<0?t._eye[0]:t._center[0],S.indexOf("y")<0?t._eye[1]:t._center[1],S.indexOf("z")<0?t._eye[2]:t._center[2]]:t._eye;var R=t._center,E=[v[0]-R[0],v[1]-R[1],v[2]-R[2]],N=u.p3(),s=Xi([N[0]+E[0],N[1]+E[1],N[2]+E[2]],N,t._up),G=u.r3(),C=kj(s,u.getRotationMode());Math.abs(G[0]-C[0])<1e-5&&Math.abs(G[1]-C[1])<1e-5&&Math.abs(G[2]-C[2])<1e-5||u.r3(C)}},_updateFixSize2d:function(){var a=this,i=a.data,A=a.s("shape3d.fixSizeOnScreen");if(!A)return i._dynamicScale3d&&delete i._dynamicScale3d,void 0;var W=a.gv;i.getFinalScale3d();var j=ao(i,W.getMat(i)),w=Nq([0,0,0],j),f=W.toViewPosition(w);if(!isNaN(f.x)&&!isNaN(f.y)){var J=Nq([1,0,0],j),r=W.toViewPosition(J),m=Nq([0,1,0],j),s=W.toViewPosition(m),F=r.x-f.x,E=s.y-f.y,v=i._dynamicScale3d||[1,1,1],U=$l(i.s("shape3d.image")),X=A[0]>0?A[0]:U?Sf(U,a):20,u=A[1]>0?A[1]:U?tk(U,a):20,T=Math.abs(F/X),V=Math.abs(E/u);Math.abs(T-1)<.001&&Math.abs(V-1)<.001||(i._dynamicScale3d=[v[0]/T,v[1]/V,v[2]])}},_updateOverlapping:function(){var M=this,W=M.s("hide.overlapping.group");if(!W)return M._rectOverlapping&&(M._rectOverlapping=e),void 0;var A,S,z,s=M.gv,L=M.data,B=ao(L,s.getMat(L)),u=1/0,k=1/0,w=-1/0,d=-1/0,E=L.getAnchor3d(),n=E.x,D=E.y,x=E.z;for(A=0;8>A;A++){if(S=Nq([(A>>2)-n,(1&A>>1)-D,(1&A)-x],B),z=s.toViewPosition(S),isNaN(z.x)||isNaN(z.y))return;u=Math.min(u,z.x),w=Math.max(w,z.x),k=Math.min(k,z.y),d=Math.max(d,z.y)}var F={x:u,y:k,w:w-u,h:d-k};M._rectOverlapping=s.overlappingBox.isOverlapping(W,F)},getVectorDynamicSize:function(){var b,i=this,R=i.s("shape3d"),t=i.data;if("billboard"===R||"plane"===R||(b=t._currentCubeElementId)!=J){var C,m,n=i.gv,W=ao(t,n.getMat(t)),p=function(w,U){var Y=n.toViewPosition(Nq(w,W)),y=n.toViewPosition(Nq(U,W)),i=Y.x-y.x,r=Y.y-y.y;return Math.min(2048,Math.sqrt(i*i+r*r))};if("billboard"===R)C=p([-.5,0,0],[.5,0,0]),m=p([0,-.5,0],[0,.5,0]);else if("plane"===R)C=p([-.5,0,0],[.5,0,0]),m=p([0,0,-.5],[0,0,.5]);else if(t._currentCubeElementId!=J){var z=3*Xo[b+1],w=3*Xo[b],c=3*Xo[b+2];C=p([yb[z],yb[z+1],yb[z+2]],[yb[c],yb[c+1],yb[c+2]]),m=p([yb[z],yb[z+1],yb[z+2]],[yb[w],yb[w+1],yb[w+2]])}return[C,m]}},vf:function(p,C){var u=this;if(u.gv.getFaceVisible(u.data,p)){var Q=Hr(u,p);Q.mat&&(u.faceMat=!0);var t=Q.uv;if(t){var L=u._cubeUvs;L||(L=u._cubeUvs=new Jg([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]));for(var k=0;8>k;k++)L[C+k]=t[k]}return Q}},_80o:function(d,V,H){var O=this;if(O._rectOverlapping)return!0;var b=O.gv,F=O.data,I=b._cube,U=O.shapeModel;Zk(b,O.mat),U?zp(b,F,U,O,O.getBodyColor(),H):(sb(d,I.vs,J,V.aPosition),sb(d,I.ns,J,V.aNormal),Yn(d,I.is),O._18O(d,V,O.left,0,H),O._18O(d,V,O.front,6,H),O._18O(d,V,O.right,12,H),O._18O(d,V,O.back,18,H),O._18O(d,V,O.top,24,H),O._18O(d,V,O.bottom,30,H)),Jm(b),O.faceMat&&(O._18O(d,V,O.left,0,H,!0),O._18O(d,V,O.front,6,H,!0),O._18O(d,V,O.right,12,H,!0),O._18O(d,V,O.back,18,H,!0),O._18O(d,V,O.top,24,H,!0),O._18O(d,V,O.bottom,30,H,!0))},_18O:function(t,i,S,B,A,I){if(S){if(!A(S.transparent))return;if(I&&!S.mat||!I&&S.mat)return;I&&Zk(this.gv,S.mat);var a=this,v=a.data;v._currentCubeElementId=B;var O=a.gv,y=O.getTexture(S.texture,v),s=S.uv,K=S.uvScale,k=S.uvOffset,h=S.discardSelectable;y?s?bc(t,i,y,h,O._buffer.uv,a._cubeUvs,k,K):bc(t,i,y,h,O._cube.uv,J,k,K):bc(t),Uh(t,i,S.blend,S.light,S.opacity,S.reverseFlip,S.reverseColor,S.reverseCull),lp(t,i.uDiffuse,S.color),zi(t,B,6),Wg(t,i),Zc(t,i,y),I&&Jm(O),v._currentCubeElementId=null}}});var Xr=function(x,C){Vp(Xr,this,[x,C])};js(Xr,Mc,{_25Q:1,validate:function(G){var h=this,L=h.gv,H=h.data,R=h.s,K=R("edge.width"),T=H._40I,d=H._41I;if(h.shapeModel=h.info=J,T&&d){var W,q,Q,D,Y,b,w,U,O,g,p=H.isLooped(),t=R(pk),f=r.getEdgeType(t);if(f){var a=f(H,am(h,L,H,p,t),L,h._19Q);if(!a.points||a.points.isEmpty())return;b=h.info={},w=a.segments,Y=a.points,U=Y.size();for(var m=T.getElevation(),n=d.getElevation(),V=0;U>V;V++){var N=Y.get(V);N.e==J&&(N.e=m+(n-m)*V/(U-1))}O=mq(Y.get(0)),g=mq(Y.get(U-1));var Z=U%2;0===Z?(b.c1=mq(Y.get(U/2-1)),b.c2=mq(Y.get(U/2))):b.p3=mq(Y.get((U-Z)/2)),b.s1=O,b.s2=mq(Y.get(1)),b.t1=mq(Y.get(U-2)),b.t2=g}else{Y=new Cq,b=h.info={};var E=R("edge.offset"),k=R("edge.center"),y=R("edge.source.t3"),F=R("edge.target.t3"),u=T.p3(),C=d.p3();if(y&&(u[0]+=y[0],u[1]+=y[1],u[2]+=y[2]),F&&(C[0]+=F[0],C[1]+=F[1],C[2]+=F[2]),t===co){w=R("edge.segments");var I=b.points=R(mg)||Bo;if(U=I.size()){O=mq(I.get(0)),g=mq(I.get(U-1)),!k&&E&&(Q=$r(O,u,!0),E=c(E,ii(u,O)),u=[u[0]+Q[0]*E,u[1]+Q[1]*E,u[2]+Q[2]*E],Q=$r(C,g,!0),E=c(E,ii(g,C)),C=[C[0]-Q[0]*E,C[1]-Q[1]*E,C[2]-Q[2]*E]);var Z=U%2;0===Z?(W=mq(I.get(U/2-1)),q=mq(I.get(U/2))):b.p3=mq(I.get((U-Z)/2)),b.s1=u,b.s2=O,b.t1=g,b.t2=C}else!k&&E&&(Q=$r(C,u,!0),D=ii(u,C),E=Cg(E,D),u=[u[0]+Q[0]*E,u[1]+Q[1]*E,u[2]+Q[2]*E],C=[C[0]-Q[0]*E,C[1]-Q[1]*E,C[2]-Q[2]*E]),W=u,q=C;Y.add({x:u[0],y:u[2],e:u[1]}),Y.addAll(I),Y.add({x:C[0],y:C[2],e:C[1]})}else{var z=am(h,L,H,p,t);if(h._19Q||(z=-z),p){var j=u[0],S=u[1],A=u[2],i=T.getTall()/2+z;W=[j-z,S+i,A],q=[j+z,S+i,A],Y.add({x:j-z,y:A,e:S}),Y.add({x:j-z,y:A,e:S+i}),Y.add({x:j+z,y:A,e:S+i}),Y.add({x:j+z,y:A,e:S})
}else{Q=$r(C,u,!0),D=ii(u,C);var v={x:u[0],y:u[2]},l={x:C[0],y:C[2]},P=Ye(J,v,l,z),B=P.x-v.x,$=P.y-v.y;E=Cg(E,D),Q[0]*=E,Q[1]*=E,Q[2]*=E,W=[u[0]+Q[0]+B,u[1]+Q[1],u[2]+Q[2]+$],q=[C[0]-Q[0]+B,C[1]-Q[1],C[2]-Q[2]+$],k?(Y.add({x:u[0],y:u[2],e:u[1]}),Y.add({x:W[0],y:W[2],e:W[1]}),Y.add({x:q[0],y:q[2],e:q[1]}),Y.add({x:C[0],y:C[2],e:C[1]})):(Y.add({x:W[0],y:W[2],e:W[1]}),Y.add({x:q[0],y:q[2],e:q[1]}))}}b.c1=W,b.c2=q}b.list=R(qb)===hr?h.createTubeModel(Y,w,K/2,G):h.createLineModel(Y,w,K,"edge","edge.dash")}}});var Wp=function(L,W){Vp(Wp,this,[L,W])};js(Wp,_e,{_80o:function(K,B,m){var i=this,k=i.gv,Y=i.shapeModel;Zk(k,i.mat),Y?zp(k,i.data,Y,i,i.getBodyColor(),m):(Sl(i,K,B,i.left,m),Sl(i,K,B,i.front,m),Sl(i,K,B,i.right,m),Sl(i,K,B,i.back,m),Sl(i,K,B,i.top,m),Sl(i,K,B,i.bottom,m)),Jm(k)},validate:function(F,g){var a,e,h=this,G=h.s,Q=h.data,A=Q.p3(),O=Q._thickness/2,M=Q.isClosePath(),W=Q.getPoints(),k=Q.getSegments(),m=G(Ki),f=F&&F.uv;if(h.clear(),0>O)e=h.shapeModel=hs(W,k,G(Cr),G(Mi),m,G(Pl),Q.getTall(),Q.getShapeElevation(),M),G(wo)?G("shape3d.image")||delete e.uv:(delete e.vs,delete e.ns,delete e.uv),G("shape3d.top.image")||delete e.top_uv,G("shape3d.bottom.image")||delete e.bottom_uv;else if(G(qb)===hr)a=rg(W,k,m,M),e=h.shapeModel={vs:[]},G("shape3d.image")&&(e.uv=[],e.sum=G(Pl)||un(a)||1,e.len=0),G(Cr)&&!M&&(e.top_vs=[],G("shape3d.top.image")&&(e.top_uv=[])),G(Mi)&&!M&&(e.bottom_vs=[],G("shape3d.bottom.image")&&(e.bottom_uv=[])),h._12O(a,O);else{var t,l,N,x,u,w,b,r,E,y;if(a=rg(W,k,m,M),u=h.vf(Im,f,!1,g),O&&(w=h.vf(Id,f,!1,g),b=M?J:h.vf(fh,f,!1,g),r=M?J:h.vf(um,f,!1,g),E=h.vf(Wc,f,!1,g),y=h.vf(Wb,f,!1,g)),O){for(var s=0,j=a.length;j>s;s++)a[s]=h._tryRemoveBezierPoints(a[s],O);h._12O(a,O)}else u&&a.forEach(function(j){if(x=j.length,x>0)for(t=j[0],N=1;x>N;N++)l=j[N],h.addV(u.vs,t,l),t=l});h._20Q(a),F||(u&&(u.ns=Ac(u.vs),Ib(u,"vs"),Ib(u,Ni)),O&&(w&&(w.ns=Ac(w.vs),Ib(w,"vs"),Ib(w,Ni)),b&&(b.ns=Ac(b.vs),Ib(b,"vs"),Ib(b,Ni)),r&&(r.ns=Ac(r.vs),Ib(r,"vs"),Ib(r,Ni)),E&&(E.ns=Ac(E.vs),Ib(E,"vs"),Ib(E,Ni)),y&&(y.ns=Ac(y.vs),Ib(y,"vs"),Ib(y,Ni))))}var n=h.mat=Ln();_o(n,A),Oq(n,Q.r3(),Q.getRotationMode());var $=Q.getScale3d(),L=Q._dynamicScale3d;L&&($[0]*=L[0],$[1]*=L[1],$[2]*=L[2]),up(n,$),_o(n,Ak(A)),F&&(sd(h,n,F,e),h.clear())},_20Q:function(T){var Q,b,p,m,S,n,O,$=this,I=$.front,F=$.back,h=$.top,H=$.bottom,U=I?I.tuv:J,X=F?F.tuv:J,e=h?h.tuv:J,Z=H?H.tuv:J,r=0;(U||X||e||Z)&&(Q=$.s(Pl)||un(T)||1,T.forEach(function(z){if(b=z.length,b>0)for(n=z[0],p=1;b>p;p++)O=z[p],m=r/Q,r+=ii(n,O),S=r/Q,$._14O(I,m,S),$._14O(F,1-S,1-m),$._14O(h,m,S),$._14O(H,m,S),n=O}))},_14O:function(G,n,o){if(G){var X=G.uv,S=G.tuv;if(S){if(X)var e=X[0]+(X[6]-X[0])*n,j=X[1]+(X[7]-X[1])*n,k=X[2]+(X[4]-X[2])*n,L=X[3]+(X[5]-X[3])*n,f=X[2]+(X[4]-X[2])*o,s=X[3]+(X[5]-X[3])*o,x=X[0]+(X[6]-X[0])*o,u=X[1]+(X[7]-X[1])*o;else e=n,j=0,k=n,L=1,f=o,s=1,x=o,u=0;S.push(k,L,f,s,x,u,x,u,e,j,k,L)}}},_13O:function(V){var o=V.uv,i=V.tuv;i&&(o?i.push(o[2],o[3],o[4],o[5],o[6],o[7],o[6],o[7],o[0],o[1],o[2],o[3]):i.push(0,1,1,1,1,0,1,0,0,0,0,1))},_tryRemoveBezierPoints:function(f,E){var $=f.length;if(4>$)return f;var F,T,U,K,e,Y,H=!1,d=function(R){return f[R]},J=function(h){return f[$-1-h]};for(e=0;1>=e;e++)for(Y=e?J:d,T=Y(0),U=Y(1),F=2;$-1>F;F++)if(K=Y(F),!K.remove)if(K.b){var r=Ye(T,U,K,E);r.adjust?(K.remove=!0,H=!0):(T=U,U=K)}else T=U,U=K;if(!H)return f;var L=[];for(F=0;$>F;F++)f[F].remove||L.push(f[F]);return L},_12O:function(W,q){var P,r,I,Q,n,m=this;W.forEach(function(B){if(n=B.length,n>0)for(P={p:B[0],n:!0},Q=1;n>Q;Q++)r=B[Q],I=n-1>Q?B[Q+1]:J,m.addPoint(P,r,I,q,B)})},addPoint:function(l,j,u,t,f){var h,Q,q,L,s,D,c,H,p,o=this,m=l.p,M=l.f,Z=l.b,F=o.s("shape3d.side")||ap,S=o.s("shape3d.start.angle"),I=o.s("shape3d.sweep.angle"),T=o.shapeModel,W=o.data.isClosePath();if(l.n&&(l.n=!1,M=W&&f.length>2?Ye(f[f.length-2],m,j,t):Ye(J,m,j,t),Z=gq(m,M),T?T.top_vs&&o._10O(Z,M,F,S,I,T.top_vs,T.top_uv):(h=o.left)&&(o.addV(h.vs,Z,M),o._13O(h))),Q=u?Ye(m,j,u,t):W&&f.length>2?Ye(m,j,f[1],t):Ye(m,j,J,t),q=gq(j,Q),T){var z,G,x=T.vs,$=T.uv,y=T.sum;for($&&(z=T.len/y,T.len+=ii(m,j),G=T.len/y),D=o._9O(Z,M,F,S,I),c=o._9O(q,Q,F,S,I),H=0;F>H;H++)p=H+1,im(x,D[p]),im(x,c[H]),im(x,D[H]),im(x,c[H]),im(x,D[p]),im(x,c[p]),$&&(L=H/F,s=p/F,$.push(z,s,G,L,z,L,G,L,z,s,G,s));!u&&T.bottom_vs&&o._10O(q,Q,F,S,I,T.bottom_vs,T.bottom_uv,!0)}else!u&&(h=o.right)&&(o.addV(h.vs,Q,q),o._13O(h)),(h=o.front)&&o.addV(h.vs,M,Q),(h=o.back)&&o.addV(h.vs,q,Z),(h=o.top)&&o.addH(h.vs,M,Q,q,Z,!0),(h=o.bottom)&&o.addH(h.vs,Z,q,Q,M);l.p=j,l.f=Q,l.b=q},_10O:function(y,H,I,i,K,e,c,b){var J,R,g=this,E=g.data,t=g._9O(y,H,I,i,K),Q=(y.x+H.x)/2,m=(y.y+H.y)/2,Y=E.getShapeElevation(),f=0;for(f=0;I>f;f++)b?(im(e,t[f]),im(e,t[f+1])):(im(e,t[f+1]),im(e,t[f])),im(e,[Q,Y,m]),c&&(b?(J=l*(f+1)/I+i,R=l*f/I+i):(J=l*f/I+i,R=l*(f+1)/I+i),c.push(.5-.5*C(R),.5-.5*j(R),.5-.5*C(J),.5-.5*j(J),.5,.5))},_9O:function(i,s,b,f,g){var B,h,J=this,T=J.data,U=[],Z=(i.x+s.x)/2,R=(i.y+s.y)/2,y=T.getTall()/2,m=T.getShapeElevation(),o=0;for(g=g||l;b>=o;o++)B=g*o/b+f,h=C(B),U.push([Z+(i.x-Z)*h,m+y*j(B),R+(i.y-R)*h]);return U},addV:function(r,c,M){var S=c.x,W=c.y,Q=M.x,K=M.y,E=this.data,F=E.getShapeElevation(),f=E.getTall()/2;r.push(S,F-f,W,Q,F-f,K,Q,F+f,K,Q,F+f,K,S,F+f,W,S,F-f,W)},addH:function(u,Z,D,l,d,E){var v=this.data,C=v.getTall()/2,$=v.getShapeElevation()+(E?C:-C);u.push(Z.x,$,Z.y,D.x,$,D.y,l.x,$,l.y,l.x,$,l.y,d.x,$,d.y,Z.x,$,Z.y)},vf:function(W,G,D,N){var s,C=this,V=C.gv.getFaceVisible(C.data,W);return(D||V)&&(s=Hr(C,W,N),s.vs=[],s.tuv=V&&(s.texture||G)?[]:J,s.visible=V),s}});var ll=function(A,u){Vp(ll,this,[A,u])};js(ll,Mc,{_25Q:1,validate:function(z){var E=this,y=E.data,g=E.s,V=y.getPoints(),f=V.size();if(E.shapeModel=E.info=J,f>1){var S=E.info={},v=y.getSegments(),L=y.getThickness(),I=mq(V.get(0)),C=mq(V.get(f-1)),O=f%2;0===O?(S.c1=mq(V.get(f/2-1)),S.c2=mq(V.get(f/2))):S.p3=mq(V.get((f-O)/2)),S.s1=I,S.s2=mq(V.get(1)),S.t1=mq(V.get(f-2)),S.t2=C,S.list=g(qb)===hr?E.createTubeModel(V,v,L/2,z):E.createLineModel(V,v,L,"shape.border","shape.dash")}var s=y.p3(),k=E.mat=Ln();_o(k,s),Oq(k,y.r3(),y.getRotationMode());var P=y.getScale3d(),h=y._dynamicScale3d;h&&(P[0]*=h[0],P[1]*=h[1],P[2]*=h[2]),up(k,P),_o(k,Ak(s))},_80o:function(F,k,w){var Y=this,M=Y.shapeModel;if(M){var V=Y.gv;Zk(V,Y.mat),zp(V,Y.data,M,Y,Y.getBodyColor(),w),Jm(V)}}}),vf(r,{accordionViewExpandIcon:tn(tp),accordionViewCollapseIcon:tn(tp,!0),accordionViewLabelColor:Lp,accordionViewLabelFont:ee,accordionViewTitleBackground:cr,accordionViewSelectBackground:Md,accordionViewSelectWidth:3,accordionViewSeparatorColor:e,splitViewDividerSize:1,splitViewDividerBackground:cr,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:_i,rect:[2,2,12,12],background:tp}]},propertyViewLabelColor:qd,propertyViewLabelSelectColor:Lp,propertyViewLabelFont:ee,propertyViewExpandIcon:tn(jq),propertyViewCollapseIcon:tn(jq,!0),propertyViewBackground:io,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:sl,propertyViewColumnLineColor:sl,propertyViewSelectBackground:Md,listViewLabelColor:qd,listViewLabelSelectColor:Lp,listViewLabelFont:ee,listViewRowLineVisible:!1,listViewRowLineColor:sl,listViewSelectBackground:Md,treeViewLabelColor:qd,treeViewLabelSelectColor:Lp,treeViewLabelFont:ee,treeViewExpandIcon:tn(Wf),treeViewCollapseIcon:tn(Wf,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:sl,treeViewSelectBackground:Md,treeViewDoubleClickToToggle:!0,tableViewLabelColor:qd,tableViewLabelSelectColor:Lp,tableViewLabelFont:ee,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:sl,tableViewColumnLineColor:sl,tableViewSelectBackground:Md,treeTableViewLabelColor:qd,treeTableViewLabelSelectColor:Lp,treeTableViewLabelFont:ee,treeTableViewExpandIcon:tn(Wf),treeTableViewCollapseIcon:tn(Wf,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:sl,treeTableViewColumnLineColor:sl,treeTableViewSelectBackground:Md,tableHeaderLabelColor:qd,tableHeaderLabelFont:ee,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:Jo,tableHeaderBackground:io,tableHeaderMoveBackground:nr,tableHeaderInsertColor:Md,tableHeaderSortDescIcon:re(jq,!0),tableHeaderSortAscIcon:re(jq),tabViewTabGap:1,tabViewLabelColor:Lp,tabViewLabelFont:ee,tabViewTabBackground:cr,tabViewSelectWidth:3,tabViewSelectBackground:Md,tabViewMoveBackground:nr,tabViewInsertColor:Md,toolbarLabelColor:qd,toolbarLabelSelectColor:Lp,toolbarLabelFont:ee,toolbarBackground:io,toolbarSelectBackground:Md,toolbarItemGap:8,toolbarSeparatorColor:yf},!0);var Yc={translateX:1,sortColumn:1},gc={sortable:1,sortOrder:1,sortFunc:1},sr={focusData:1},Bg={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},Mm={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},_r=function(w,g){g.add(w),w.hasChildren()&&w.eachChild(function(C){_r(C,g)})},Fb=function(y,t,z,T,$,d,L,H,U,k,q){var N,M=z.getValueType(k),W=z.getAlign(k);if(z.getEnumValues(k)){var s=z.toEnumLabel(t,k),Q=Tn||0,x=0,v=d,l=r.getTextSize(T,s).width;return N=$l(z.toEnumIcon(t,k)),N&&(x=d+Tn/2,"center"===W?x+=(H-(Q+l))/2:"right"===W&&(x=x+H-(Q+l)),Mf(y,N,x,L+U/2,k,q),v=x+Tn/2),s!=J&&(N?yc(y,s,T,$,v,L,H-(v-d),U):yc(y,s,T,$,d,L,H,U,W)),void 0}return t=z.formatValue(t),t!=J?M===Lf?(Wl(y,d,L,H,U,t),void 0):M===yr||!M&&Kb(t)?(N=$l(t?Dd:Xq),Mf(y,N,d+H/2,L+U/2,k,q),void 0):(yc(y,t,T,$,d,L,H,U,W),void 0):void 0},Dk=function(w,h){var B=h.view,r=bf(w),M=h.column||h.property;B.getDataModel().beginTransaction(),h.editor=w,w.info=h,B.setCurrentEditor(w),B.getView().insertBefore(r,B._79O),zq(w,h.editorRect),w.setFocus?w.setFocus():Mr(w),w.commitValue=function(){w._17Q&&(w=w._17Q),B.setValue(h.data,M,w.getValue?w.getValue():w.value),w.close&&w.close(),Aq(r)},M.onEditorCreated&&M.onEditorCreated(h)},jj=function(V,D,X,b,A){var N=vm(V,X),P=D.value,$=D.view,y=A.getValueType(D.data);return N.onblur=N.onchange=function(){$.endEditing()},"input"===V?(P=A.formatValue(P),P!=J&&(N.value=P),N.onkeydown=function(G){Un(G)&&$.endEditing()},(y===ts||y===ug)&&N.addEventListener(Nn,r.numberListener,!1)):V===Hf&&b.forEach(function(j){var e=F.createElement("option");e.innerHTML=A.toEnumLabel(j),e.value=j,A.isEnumEqual(P,j)&&(e.selected=!0),tf(N,e)}),Dk(N,D),N},Ke=A.widget={},qe=function(T,O,S){js(u+".widget."+T,O,S)};vf(Xp,{ms_value:function(F){F.getValue=function(J){var K=this.getItemById(J),g=K.element;return se(g)?g:g?g.getValue?g.getValue():g.value:K.selected},F.setValue=function(y,k){var n=this.getItemById(y),w=n.element;w&&!se(w)?w.setValue?w.setValue(k):w.value=k:Kb(k)?(n.selected=k,this.iv()):(n.element=k,this.iv())},F.v=function($,Z){var a=this;if(2===arguments.length)a.setValue($,Z);else{if(!Vc($))return a.getValue($);for(var i in $)a.setValue(i,$[i])}return a}},_46o:function(q){q._icon=J,q._accessType=J,q._valueType=J,q._editable=!1,q._batchEditable=!0,q._align=fh,q._nullable=!0,q._emptiable=!1,q.setParent=nn,q.formatValue=function(h){var N=this,C=N._valueType;return N.getEnumValues()?N.toEnumLabel(h):C===yr?!!h:h!=J&&C===ts?Q(h):h},q.setEnum=function(M,$,S,P,o,H,q){var _=this;M&&!Ji(M)&&M.values&&(P=M.editable,S=M.icons,$=M.labels,o=M.strict,H=M.maxHeight,q=M.dropDownWidth,M=M.values),Mj(M)&&(M=M._as),Mj($)&&($=$._as),Mj(S)&&(S=S._as),_._enumValues=M,_._enumLabels=$,_._enumIcons=S,_._enumEditable=P,_._enumStrict=o==J?!0:o,_._enumMaxHeight=H,_._enumDropDownWidth=q,M&&M.length&&On(M[0])&&(_._valueType=ug),_.fp("enum",!1,!0)},q.getEnumDropDownWidth=function(){return this._enumDropDownWidth},q.getEnumMaxHeight=function(){return this._enumMaxHeight},q.isEnumEditable=function(){return this._enumEditable},q.getEnumValues=function(){return this._enumValues},q.getEnumLabels=function(){return this._enumLabels},q.getEnumIcons=function(){return this._enumIcons},q.isEnumStrict=function(){return this._enumStrict},q.isEnumEqual=function(M,v){return this._enumStrict?M===v:M==v},q.toEnumLabel=function(Y,l){var j=this,b=j.getEnumValues(l),d=j.getEnumLabels(l);if(b&&d)for(var O=0;O<b.length;O++)if(j.isEnumEqual(Y,b[O]))return d[O];return Y},q.toEnumIcon=function(c,T){var b=this,S=b.getEnumValues(T),I=b.getEnumIcons(T);if(S&&I)for(var $=0;$<S.length;$++)if(b.isEnumEqual(c,S[$]))return I[$];return e}},_45o:function(W){W._87o=function(H,i,s,Z,F,c){if(H){var K=this,A=K._90I,o=cd(1);K._columnLineVisible&&(F-=1),K._rowLineVisible&&(c-=1),0>=F||0>=c||(K._90I||(A=K._90I={}),A[i]||(A[i]=new Cq),zq(o,K.tx()+s,K.ty()+Z,F,c),tf(o,H),K._view.insertBefore(o,K._79O),H.onParentAdded&&H.onParentAdded(o),A[i].add(o))}},W._76o=function(){var V=this,P=V._90I;if(P){for(var c in P)P[c].each(function(H){Aq(H)});delete V._90I}},W._77o=function(q){var E=this;if(E._90I){var Y=E._90I[q];Y&&(Y.each(function(N){Aq(N)}),delete E._90I[q])}}},_47o:function(y){y.getValue=function(U,i){return i.getValue?i.getValue(U,i,this):kn(U,i.getAccessType(),i.getName())},y.setValue=function(d,z,U){if(z.isEmptiable(d)||""!==U||(U=e),z.isNullable(d)||U!=J){var h=this,H=z.getName(d),K=z.getAccessType(d),s=z.getValueType(d);s===ts&&se(U)?U=L(U):s===ug&&se(U)?U=parseFloat(U):s===yr&&se(U)&&(U="true"===U),h._batchEditable&&z._batchEditable&&h.isSelected(d)?h.sm().each(function(m){z.setValue?z.setValue(m,z,U,h):ai(m,K,H,U)}):z.setValue?z.setValue(d,z,U,h):ai(d,K,H,U)}},y.setCurrentEditor=function(Y){this.endEditing(),this._currentEditor=Y,this.redraw()},y.isEditing=function(v,Q){var H=this,c=H._currentEditor;if(!c)return!1;if(Q){var J=c.info;return J?(J.column||J.property)===Q&&J.data===v:!1}return!0},y.endEditing=function(){var T=this,l=T._currentEditor;l&&(delete T._currentEditor,l.commitValue&&l.commitValue(l.info),T.redraw(),T.getDataModel().endTransaction())},y.beginEditing=function(E){this.endEditing();var T=this,n=E.column||E.property;if(n.beginEditing)n.beginEditing(E);else{var U=E.data,f=E.value,p=T.getSelectBackground(U),z=n.getEnumValues(U),k=n.getSlider(U),W=n.getColorPicker(U);if(k){var q=xi(Ke.Slider,k);return q.setValue(f),q.getView().onblur=function(){T.endEditing()},q.isInstant()&&(q.onValueChanged=function(){T.setValue(U,n,q.getValue())}),Dk(q,E),void 0}if(W||n.getValueType(U)===Lf){var $=xi(Ke.ColorPicker,W);return $.setValue(f),$.onClosed=function(){T.endEditing()},$.isInstant()&&($.onValueChanged=function(w,X){T.setValue(U,n,X)}),Dk($,E),$.open(),void 0}if(z){if(Ke.ComboBox){var Z=new Ke.ComboBox;Z.setValue(f),Z.setValues(z),Z.setLabels(n.getEnumLabels(U)),Z.setIcons(n.getEnumIcons(U)),Z.setEditable(n.isEnumEditable(U)),Z.setStrict(n.isEnumStrict(U)),Z.setMaxHeight(n.getEnumMaxHeight(U)),Z.setDropDownWidth(n.getEnumDropDownWidth(U)),Z.onClosed=function(){T.endEditing()},Dk(Z,E),Z.open()}else jj(Hf,E,p,z,n);return}var M=n.getValueType(U);if(M===yr||Kb(f))return T.setValue(U,n,!f),void 0;if(n.getItemEditor(U)){var m=tr(n.getItemEditor(U)),s=new m(U,n,T,E),V=s.getView();return V._17Q=s,s.setValue(f),He(V),Dk(V,E),s.editBeginning&&s.editBeginning(),void 0}jj("input",E,p,J,n)}}},_44o:function(J){J.init=function(q){var B=this,Y=B.th=new gn(q),u=B._view=Eq(1,B);B.tv=B._tableView=q,tf(u,Y.getView()),tf(u,q.getView()),Y.mp(function(L){L.property===sh&&B.iv()}),B.iv()},J.getTableView=function(){return this.tv},J.getTableHeader=function(){return this.th},J.getDataModel=function(){return this.tv.dm()},J.getColumnModel=function(){return this.tv.getColumnModel()},J.setColumns=function(X){this.tv.setColumns(X)},J.addColumns=function(D){this.tv.addColumns(D)},J.endEditing=function(){this.tv.endEditing()},J.validateImpl=function(){var N=this,F=N.th,c=vq(F),Q={x:0,y:0,width:N.getWidth(),height:c};zq(F,Q),Q.y=c,Q.height=S(0,N.getHeight()-c),zq(N.tv,Q)}},ms_vs:function(_){_._41o=function(){return this._29I.height<this._59I},_._43o=function(){var M=this;M._41o()&&(M._58I||(U(function(){M._94O()},iq),M.iv()),M._58I=new Date)},_._94O=function(){var x=this;if(x._58I){var T=new Date;T.getTime()-x._58I.getTime()>=iq?(delete x._58I,x.iv()):U(function(){x._94O()},iq)}},_._93I=function(){var K=this,u=K._27I;if(K._58I||!K._autoHideScrollBar){u||tf(K._79O,u=K._27I=cd());var p=K._29I,e=p.height,j=K._59I,O=K.getScrollBarSize(),F=p.width-O-2,P=e*(-K.ty()/j),X=e*(e/j),M=u.style;j>e?(Lc>X&&(P=P+X/2-Lc/2,0>P&&(P=0),P+Lc>e&&(P=e-Lc),X=Lc),M.visibility=xq,M.background=K.getScrollBarColor(),M.borderRadius=O/2+dm,zq(u,F,P,O,X)):M.visibility=hg}else u&&(u.style.visibility=hg)}},ms_hs:function(v){v._40o=function(){return this._29I.width<this._91I},v._42o=function(){var Z=this;Z._40o()&&(Z._95O||(U(function(){Z._94I()},iq),Z.iv()),Z._95O=new Date)},v._94I=function(){var z=this;if(z._95O){var B=new Date;B.getTime()-z._95O.getTime()>=iq?(delete z._95O,z.iv()):U(function(){z._94I()},iq)}},v._92I=function(){var x=this,d=x._28I;if(x._95O||!x._autoHideScrollBar){d||tf(x._79O,d=x._28I=cd());var M=x._29I,D=M.width,L=x._91I,y=x.getScrollBarSize(),K=M.height-y-2,P=D*(-x.tx()/L),g=D*(D/L),w=d.style;L>D?(Lc>g&&(P=P+g/2-Lc/2,0>P&&(P=0),P+Lc>D&&(P=D-Lc),g=Lc),w.visibility=xq,w.background=x.getScrollBarColor(),w.borderRadius=y/2+dm,zq(d,P,K,g,y)):w.visibility=hg}else d&&(d.style.visibility=hg)}}}),yp(Dd,Ro(16,16,[{type:Yf,rect:[1,1,14,14],background:Md},{type:qo,rect:[1,1,14,14],width:1,color:Wk},{type:el,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),yp(Xq,Ro(16,16,{type:qo,rect:[1,1,14,14],width:1,color:Wk})),yp(ti,Ro(16,16,[{type:wn,rect:[2,2,12,12],borderWidth:1,borderColor:Wk,background:"#FFF"},{type:wn,rect:[4,4,8,8],background:Md}])),yp(Ok,Ro(16,16,{type:wn,rect:[2,2,12,12],borderWidth:1,borderColor:Wk})),Xp._15Q=function(v){v._29I=Rd,v._59I=0,v._91I=0,v._5o=function(I){var v=this;v._30I=new Cq,v._rows=new Cq,v._rowMap={},v._31I=0,v._14I=0,v._view=Eq(1,v),v._canvas=Rk(v._view),tf(v._view,v._79O=cd()),v.dm(I?I:new hd)},v.getCheckIcon=function(f){var W=this.sm(),u=W.co(f);return W.sg()?$l(u?ti:Ok):$l(u?Dd:Xq)},v.checkData=function(q){var w=this.sm(),Y=w.co(q);w.sg()&&Y||(this._32o=1,Y?w.rs(q):w.as(q),delete this._32o)},v.getDataAt=function(T){T.target&&(T=this.lp(T));var O=N(T.y/this._rowHeight),E=this._rows;return 0>O||O>=E.size()?J:E.get(O)},v.onDataDoubleClicked=function(){},v.onDataClicked=function(){},v.adjustTranslateX=function(){return 0},v.adjustTranslateY=function(M){var J=this.getHeight()-this._59I;return J>M&&(M=J),M>0?0:Q(M)},v.onPropertyChanged=function(R){var z=this,x=R.property;Bg[x]?z.ivm():sr[x]||z.redraw(),x===xj?z._42o():x===Cf&&z._43o()},v.getLabel=function(q){return q.toLabel()},v.getLabelFont=function(){return this._labelFont},v.getLabelColor=function(J){var L=this;if(L.isCheckMode()){if(L._focusData===J)return L._labelSelectColor}else if(L.isSelected(J))return L._labelSelectColor;return L._labelColor},v.getStartRowIndex=function(){return this._31I},v.getEndRowIndex=function(){return this._14I},v.getRowDatas=function(){return this._rows},v.getRowIndex=function(S){return this._rowMap[S._id]},v.getRowSize=function(){return this._rows.size()},v.getViewRect=function(){return Se(this._29I)},v.isVisible=function(W){return this._visibleFunc?this._visibleFunc(W):!0},v.getCurrentSortFunc=function(){return this._sortFunc},v.setDataModel=function(J){var X=this,u=X._dataModel,z=X._selectionModel;u!==J&&(u&&(u.umm(X.handleDataModelChange,X),u.umd(X.handleDataPropertyChange,X),u.umh(X.handleHierarchyChange,X),z||u.sm().ums(X.handleSelectionChange,X)),X._dataModel=J,J.mm(X.handleDataModelChange,X),J.md(X.handleDataPropertyChange,X),J.mh(X.handleHierarchyChange,X),z?z._21I(J):J.sm().ms(X.handleSelectionChange,X),X.fp("dataModel",u,J))},v.validateModel=function(){var A=this;A._rows.clear(),A._rowMap={},A.buildChildren(A._dataModel._roots);var y=A._rows=A._rows.toList(A.isVisible,A),l=0,V=A.getCurrentSortFunc(),D=y.size();for(V&&y.sort(V);D>l;l++)A._rowMap[y.get(l)._id]=l},v.buildChildren=function(_){var G=this;_.each(function(M){G._rows.add(M),G.buildChildren(M._children)})},v.handleDataModelChange=function(){this.ivm()},v.handleDataPropertyChange=function(j){"parent"===j.property?this.ivm():this.invalidateData(j.data)},v.handleHierarchyChange=function(){this.ivm()},v.handleSelectionChange=function(z){z.datas.each(this.invalidateData,this),this.onSelectionChanged(z)},v.onSelectionChanged=function(x){var R=this,O=R.sm();!R.isAutoMakeVisible()||1!==O.size()||"set"!==x.kind&&"append"!==x.kind||R._32o||R.makeVisible(O.ld())},v.handleBackgroundClick=function(y){Dp(y)&&!this.isCheckMode()&&this.sm().cs()},v.makeVisible=function(Z){Z&&(this._23I=Z,this.iv())},v.scrollToIndex=function(N){var Q=this,p=Q._29I,k=p.height,K=Q._rowHeight,D=K*N;N>=0&&N<Q._rows.size()&&k>0&&(D+K>p.y+k?Q.ty(-D+k-K):D<p.y&&Q.ty(-D))},v.autoScroll=function(L,y){var C=this,o=C._rowHeight,m=o,l=o/4,X=C._29I,T=C.lp(L),V={x:C.tx(),y:C.ty()};return o>0&&X&&(T.x-X.x<m?C.translate(l,0):X.x+X.width-T.x<m&&C.translate(-l,0),T.y-X.y<m?C.translate(0,l):X.y+X.height-T.y<m&&C.translate(0,-l)),V.x=C.tx()-V.x,V.y=C.ty()-V.y,y&&(y.x+=V.x,y.y+=V.y),V},v.getTopRowOrderSelection=function(){var P=this.sm().getTopSelection(),F={},R=new Cq;return P.each(function(o){F[o._id]=o}),this._rows.each(function(i){F[i._id]&&R.add(i)}),R},v.getRowOrderSelection=function(){var c=new Cq;return this._rows.each(function(y){this.isSelected(y)&&c.add(y)},this),c},v.ivm=function(){this.invalidateModel()},v.invalidateModel=function(){var g=this;g._96I||(g._96I=1,g._32I=1,delete g._24I),g.iv()},v.redraw=function(){var J=this;J._32I||(J._32I=1,delete J._24I,J.iv())},v.invalidateData=function(u){var I=this;Y?I.redraw():I._32I||(I._24I||(I._24I={}),I._24I[u._id]=u,I.iv())},v.getFocusData=function(){return this._focusData},v.setFocusDataById=function(L){this.setFocusData(this.dm().getDataById(L))},v.setFocusData=function(T){var U=this,b=U._focusData;b!==T&&(U._focusData=T,U.fp("focusData",b,T),b&&U.invalidateData(b),T&&(U.invalidateData(T),U.isAutoMakeVisible()&&U.makeVisible(T)))},v.drawRowBackground=function(L,S,l,R,V,b,p){var g=this,P=g.isCheckMode();(S===g._focusData&&P||l&&!P)&&Wl(L,R,V,b,p,g.getSelectBackground(S))},v.drawData=function(B,W,r){var m=this,H=m._rowHeight,x=H*r,E=m._29I,w=E.x,j=E.width;B.save(),B.beginPath(),B.rect(w,x,j,H),B.clip(),m._87o(m.drawRow(B,W,m.isSelected(W),w,x,j,H),r,w,x,j,H),B.restore(),m._rowLineVisible&&Wl(B,w,x+H-1,j,1,m._rowLineColor)},v._12I=function(k){var c=this,x=c._31I,B=c._29I,C=B.x,y=B.y,I=B.width,e=B.height;for(k.beginPath(),k.rect(C,y,I,e),k.clip(),k.clearRect(C,y,I,e),c._76o(),c._93db(k);x<c._14I;x++)c.drawData(k,c._rows.get(x),x);c._92db(k)},v._13I=function(g){for(var $,z=this,Z=z._rowHeight,X=z._29I,v=X.x,Y=X.width,N=z._31I,i=z._30I;N<z._14I;N++)$=z._rows.get(N),z._24I[$._id]&&i.add({data:$,index:N});i.isEmpty()||(g.beginPath(),i.each(function(x){g.rect(v,x.index*Z,Y,Z)}),g.clip(),i.each(function(w){g.clearRect(v,w.index*Z,Y,Z)}),i.each(function(r){z._77o(r.index)}),z._93db(g),i.each(function(j){z.drawData(g,j.data,j.index)}),z._92db(g),i.clear())},v.validateImpl=function(){var j=this,l=j._canvas,c=j.getWidth(),D=j.getHeight(),R=j._rowHeight,K=j._32I;(c!==l.clientWidth||D!==l.clientHeight)&&(Er(l,c,D),K=1);var P=M&&!_;j._96I&&!P&&j.validateModel();var G=j._29I,Z={x:-j.tx(),y:-j.ty(),width:c,height:D},H=j._rows.size(),T=Bb(l),f=j._23I;K||ce(Z,G)||(K=1),j._29I=Z,j._59I=H*R,j._31I=N(Z.y/R),j._14I=o((Z.y+Z.height)/R),j._31I<0&&(j._31I=0),j._14I>H&&(j._14I=H),j._99I&&K&&j._99I(),Gl(T,j.tx(),j.ty(),1),K?j._12I(T):j._24I&&j._13I(T),j._93I(),j._92I(),T.restore(),j._32I=j._24I=j._96I=J,f&&(j.scrollToIndex(j.getRowIndex(f)),delete j._23I),j.tx(j.tx()),j.ty(j.ty())}},Xp._48o=function(P){P._rootVisible=!0,P._rootData=J,P._35o=function(){this._expandMap={},this._levelMap={}},P.validateModel=function(){var y=this,W=y._rootData;y._rows.clear(),y._levelMap={},y._rowMap={},y._currentLevel=0,W?y._rootVisible?y.isVisible(W)&&y.buildData(W):y.buildChildren(W):y.buildChildren(),delete y._currentLevel},P.buildData=function(y){var r=this,W=y._id,f=r._rows;r._rowMap[W]=f.size(),f.add(y),r._levelMap[W]=r._currentLevel,r.isExpanded(y)&&(r._currentLevel++,r.buildChildren(y),r._currentLevel--)},P.buildChildren=function(k){var T=this,V=k?k._children:T._dataModel._roots,W=T.getCurrentSortFunc();W&&T.isChildrenSortable(k)?V.toList(T.isVisible,T).sort(W).each(T.buildData,T):V.each(function(Y){T.isVisible(Y)&&T.buildData(Y)})},P.getLevel=function(n){return this._levelMap[n._id]},P.getToggleIcon=function(w){var v=this,X=v._loader,D=v._collapseIcon;return X&&!X.isLoaded(w)?D:w.hasChildren()?v.isExpanded(w)?v._expandIcon:D:J},P.isCheckMode=function(){return this._checkMode!=J},P.isChildrenSortable=function(){return!0},P.handleDataModelChange=function(H){var w=this;H.kind===Jn?delete w._expandMap[H.data._id]:H.kind===Jb&&(w._expandMap={}),w.ivm()},P.toggle=function(m){var _=this;_.isExpanded(m)?_.collapse(m):_.expand(m)},P.isExpanded=function(x){return 1===this._expandMap[x._id]},P.expand=function(M){var T=this,f=T._loader;T.isExpanded(M)||(f&&!f.isLoaded(M)&&f.load(M),T._expandMap[M._id]=1,T.ivm(),T.onExpanded(M))},P.onExpanded=function(){},P.collapse=function(D){var o=this;o.isExpanded(D)&&(delete o._expandMap[D._id],o.ivm(),o.onCollapsed(D))},P.onCollapsed=function(){},P.expandAll=function(r){if(r)this.expand(r),r.eachChild(function(a){this.expandAll(a)},this);else{var b=this;b._dataModel.each(function(w){w.hasChildren()&&(b._expandMap[w._id]=1)}),b.ivm()}},P.collapseAll=function(){this._expandMap={},this.ivm()},P.makeVisible=function(U){if(U){var F=this;if(!F._rootData||U.isDescendantOf(F._rootData)){for(var h=U._parent;h;)F.expand(h),h=h._parent;F._23I=U,F.iv()}}},P.checkData=function(h){var Z,R=this,U=R._checkMode,O=R.sm(),S=O.co(h);if(!O.sg()||!S){if(R._32o=1,U===oq)S?O.rs(h):O.as(h);else if(U===Hm)Z=new Cq(h),Z.addAll(h._children);else if("descendant"===U)Z=new Cq,_r(h,Z);else if("all"===U&&(Z=new Cq,_r(h,Z),!S))for(var T=h._parent;T;)Z.add(T),T=T._parent;Z&&(S?O.rs(Z):O.as(Z)),delete R._32o}},P._97I=function(E,s,m,D,y,J,I){var Y=this,F=Y._indent,O=Y._levelMap[s._id],e=Y.getIconWidth(s),v=$l(Y.getToggleIcon(s));v?(D+=F*O,Mf(E,v,D+F/2,y+I/2,s,Y),D+=F):D+=F*(O+1),Y._checkMode&&(Mf(E,Y.getCheckIcon(s),D+F/2,y+I/2,s,Y),D+=F),Y.drawIcon(E,s,D,y,e,I),Y.drawLabel(E,s,D+e,y,I)}},Xp._14Q=function($){$.getIcon=function(n){return n.getIcon()},$.getIconWidth=function(I){return this.getIcon(I)?this._indent:0},$.drawIcon=function(M,L,x,m,a,E){if(a){var n=this,A=n.getBodyColor(L),T=$l(n.getIcon(L),A);T&&(E-=n.isRowLineVisible()?1:0,Ck(M,T,Re,x,m,a,E,L,n,A),Uj(M,n.getBorderColor(L),x,m,a,E))}},$.drawLabel=function(M,K,N,E,z){var g=this;yc(M,g.getLabel(K),g.getLabelFont(K),g.getLabelColor(K),N,E,0,z)}},Xp._50o=function(X){X._98I=function(){var q=this,$=q._39o=new hd;q._60I=new Cq,$.mm(q._17o,q),$.md(q._18o,q),$.mh(q._19o,q)},X.setColumns=function(j){this._39o.clear(),this.addColumns(j)},X.addColumns=function(y){var V=this._39o;y.forEach(function(J){if(!(J instanceof gr)){var n=tr(J.className);J=xi(n?n:gr,J)}V.add(J)})},X.onColumnClicked=function(){},X.onCheckColumnClicked=function(){},X._3Q=function(Y){for(var D,W=0,E=this._60I,z=E.size();z>W;W++)if(D=E.get(W),D.column===Y)return D;return J},X.getColumnAt=function(u){var n=this._4Q(u);return n?n.column:J},X._4Q=function(f){for(var a=this,h=f.target?a.lp(f).x:f.x,O=a._60I,X=0;X<O.size();X++){var L=O.get(X),V=L.startX;if(h>=V&&h<V+L.column.getWidth())return L}return J},X.getToolTip=function(W){var e=this,F=e.getDataAt(W),X=e.getColumnAt(W);return F&&X?X.getToolTip(F,e):J},X.adjustTranslateX=function(m){var B=this.getWidth()-this._91I;return B>m&&(m=B),m>0?0:Q(m)},X._99I=function(){var U=this,m=U._29I,I=U._60I;I.clear(),U._91I=0,U._39o._roots.each(function(M){if(M.isVisible()){var W=U._91I+M.getWidth();U._91I<=m.x+m.width&&W>=m.x&&I.add({column:M,startX:U._91I}),U._91I=W}})},X.drawData=function(L,V,r){var k=this,m=k._rowHeight,l=m*r,f=k.isSelected(V),e=k._29I,B=e.x,H=e.width;k.drawRowBackground(L,V,f,B,l,H,m),k._60I.each(function(A){var v=A.column,G=A.startX,M=v.getWidth();M>0&&!k.isEditing(V,v)&&(L.save(),L.beginPath(),L.rect(G,l,M,m),L.clip(),k._87o(k.drawCell(L,V,f,v,G,l,M,m),r,G,l,M,m),k._columnLineVisible&&Wl(L,G+M-1,l,1,m,k._columnLineColor),L.restore())}),k._rowLineVisible&&Wl(L,B,l+m-1,H,1,k._rowLineColor)},X.drawCell=function(u,h,t,k,L,H,I,p){var f=this;if(k.drawCell)return k.drawCell(u,h,t,k,L,H,I,p,f);var D=f.getValue(h,k);Fb(u,D,k,f.getLabelFont(h,k,D),f.getLabelColor(h,k,D),L,H,I,p,h,f)},X.getColumnModel=function(){return this._39o},X._17o=function(){this.redraw()},X._18o=function(V){var f=this;V.data===f._sortColumn&&gc[V.property]?f.ivm():(f._42o(),f.redraw())},X._19o=function(){this.redraw()},X.getCurrentSortFunc=function(){var I=this,f=I._sortColumn;if(f&&f.isSortable()){var T=f.getSortFunc(),F=sf===f.getSortOrder()?1:-1;return T||(T=Vj),function(G,l){return T.call(I,I.getValue(G,f),I.getValue(l,f),G,l)*F}}return I._sortFunc},X.isCellEditable=function(r,_){return!this.isCheckMode()&&this.isSelected(r)||this.isCheckMode()&&r===this._focusData?_.isEditable()&&this.isEditable():!1},X._37O=function(Y,P){if(Dp(P))for(var d=this,N=d.lp(P),X=d._60I,G=d._rowHeight,M=d._29I,a=M.x,O=M.y,S=M.width,V=M.height,_=0;_<X.size();_++){var y=X.get(_),b=y.startX,w=y.column,j=w.getWidth();if(w!==d._31o&&w!==d._4o&&d.isCellEditable(Y,w,P)&&N.x>=b&&N.x<b+j){var Q={x:b,y:d.getRowIndex(Y)*G,width:j,height:G},k={x:Q.x+d.tx(),y:Q.y+d.ty(),width:Q.width,height:Q.height},p=0,g=0;return Q.x<a?p=Q.x-a:Q.x+Q.width>a+S&&(p=Q.x+Q.width-a-S),p&&(d.tx(d.tx()-p),k.x-=p),Q.y<O?g=Q.y-O:Q.y+G>O+V&&(g=Q.y+G-O-V),g&&(d.ty(d.ty()-g),k.y-=g),d.beginEditing({data:Y,column:w,value:d.getValue(Y,w),event:P,rect:Q,editorRect:k,view:d}),void 0}}}},Ke.BaseItemEditor=function(X,W,I,w){this._data=X,this._column=W,this._master=I,this._editInfo=w},qe("BaseItemEditor",h,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var Fi=A.Tab=function(){Vp(Fi,this)};bi("Tab",Nd,{ms_ac:["view","closable","disabled"],_icon:J,_closable:!1,_disabled:!1,setParent:nn});var gr=A.Column=function(){Vp(gr,this)};bi("Column",Nd,{_46o:1,ms_ac:["accessType","valueType",xq,Tp,il,vs,"align",Lf,"sortOrder",th,"sortable","clickable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:sf,_sortFunc:J,_sortable:!0,_clickable:!0,setWidth:function(o){16>o&&(o=16);var B=this._width;this._width=o,this.fp(vs,B,o)},getToolTip:function(v,M){return this.formatValue(M.getValue(v,this))}});var pi=A.Property=function(){Vp(pi,this)};bi("Property",Nd,{_46o:1,ms_ac:["accessType","valueType",Tp,il,"categoryName",Lf,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:J,getToolTip:function(V,l,E){var e=this;return l?e.formatValue(E.getValue(V,e)):E.getPropertyName(e)}}),Ke.AccordionView=function(){var q=this;q._20o={},q._21o=new Cq,q._10o=J,q._9o=J,q._11o=J,q._view=Eq(0,q),q.iv()},qe("AccordionView",h,{ms_v:1,ms_fire:1,ms_ac:[ro,Gi,"titleHeight",Cn,fi,"titleBackground","selectWidth",Od,"orientation","separatorColor"],_expandIcon:r.accordionViewExpandIcon,_collapseIcon:r.accordionViewCollapseIcon,_titleHeight:Uk,_labelColor:r.accordionViewLabelColor,_labelFont:r.accordionViewLabelFont,_titleBackground:r.accordionViewTitleBackground,_selectBackground:r.accordionViewSelectBackground,_selectWidth:r.accordionViewSelectWidth,_orientation:"v",_separatorColor:r.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(p,R,d,B){var U=this,S=cd();if(U._20o[p])throw p+" already exists";S.onmousedown=pm,S.style.cursor=oi,S.addEventListener(s?qc:ds,function(J){pm(J)},!1),S.addEventListener(s?Rp:Yi,function(O){pm(O),Dp(O)&&(U._10o===p?U.collapse():U.expand(p))},!1),tf(U._view,S),U._20o[p]={content:R,div:S,canvas:Rk(S),icon:B},U._21o.add(p),d&&U.expand(p),U.iv()},remove:function(z){var l=this,Q=l._20o[z];Q&&(Aq(Q.div),delete l._20o[z],l._21o.remove(z),l.iv())},clear:function(){var A=this;A._20o={},A._21o.clear(),A.iv()},isExpanded:function(G){return this._10o===G},expand:function(s){var f=this;f._20o[s]&&f._10o!==s&&(f._10o=s,f.onExpanded(s),f.iv())
},onExpanded:function(){},collapse:function(){var c=this;c._10o&&(c.onCollapsed(c._10o),delete c._10o,c.iv())},onCollapsed:function(){},initCanvas:function(Q,E,c){Er(Q,E,c);var u=Bb(Q);return Gl(u,0,0,1),u.clearRect(0,0,E,c),u},drawTitle:function(D,o,p,l,r){var I=this,T=$l(r.icon),s=I.isExpanded(o),b=I._titleHeight,H=I._titleBackground,g=I._selectWidth,j=I._separatorColor,F=$l(s?I._expandIcon:I._collapseIcon),c=g+4;Wl(D,0,0,p,l,H),s&&g&&Wl(D,0,0,g,l,I._selectBackground),(s||I._21o.get(I._21o.size()-1)!==o)&&Wl(D,0,l-1,p,1,j?j:Co(H)),T&&(Mf(D,T,c+Sf(T)/2,b/2),c+=Sf(T)+2),yc(D,o,I.getLabelFont(o),I.getLabelColor(o),c,0,0,b),F&&Mf(D,F,p-Sf(F)/2-4,b/2)},validateImpl:function(){var U=this,N=U._view,d=0,F=0,x=U.getWidth(),V=U.getHeight(),G=U._titleHeight,p=U._21o.size()*G,J=U._11o,r=U._9o;delete U._11o,delete U._9o,U._21o.each(function(K){var t,T,b=U._20o[K],i=b.content,w=U._10o===K;Tq(U)?(zq(b.div,d,0,G,V),t=U.initCanvas(b.canvas,G,V),zs(t,0,V),so(t,-$),U.drawTitle(t,K,V,G,b),t.restore(),w?(T=S(0,x-p),i&&(U._11o=i,U._9o=bf(i),zq(i,d+G,0,T,V)),d+=G+T):d+=G):(zq(b.div,0,F,x,G),t=U.initCanvas(b.canvas,x,G),U.drawTitle(t,K,x,G,b),t.restore(),w?(T=S(0,V-p),i&&(U._11o=i,U._9o=bf(i),zq(i,0,F+G,x,T)),F+=G+T):F+=G)});var M=U._9o;J&&J!==U._11o&&J.endEditing&&J.endEditing(),M&&M!==r&&tf(N,M),r&&r!==M&&Aq(r)}}),Ke.SplitView=function(S,z,E,G){var h=this,d=h._dividerDiv=cd(),P=h._60O=Rk(),M=h._61O=Rk(),s=P.style,e=M.style;h._view=Eq(1,h),tf(h._view,d),s.msTouchAction=Zp,s.pointerEvents=Zp,s.cursor=oi,e.msTouchAction=Zp,e.pointerEvents=Zp,e.cursor=oi,S&&h.setLeftView(S),z&&h.setRightView(z),E&&h.setOrientation(E),G!=J&&h.setPosition(G),h.setStatus(Rj),new Yp(h)},qe("SplitView",h,{ms_v:1,ms_fire:1,ms_ac:["continuousLayout","dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_continuousLayout:!1,_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:r.splitViewDividerSize,_dividerBackground:r.splitViewDividerBackground,_dragOpacity:r.splitViewDragOpacity,_toggleIcon:r.splitViewToggleIcon,onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(u,l){var n=this,B=n._position;isNaN(u)||(l||(n._82O=0>u?-1:u>1?1:0),n._position=u,n.fp(wi,B,u))},getLeftView:function(){return this._leftView},setLeftView:function(e){var q=this,l=q._leftView,A=q._view;if(q._leftView!==e){if(l&&l!==q._rightView){var j=bf(l);j.parentNode===A&&Aq(j)}if(q._leftView=e,e){var y=bf(e);y.parentNode!==A&&A.insertBefore(y,q._dividerDiv)}q.fp("leftView",l,e)}},getRightView:function(){return this._rightView},setRightView:function(t){var q=this,$=q._rightView,Y=q._view;if(q._rightView!==t){if($&&$!==q._leftView){var g=bf($);g.parentNode===Y&&Aq(g)}if(q._rightView=t,t){var o=bf(t);o.parentNode!==Y&&Y.insertBefore(o,q._dividerDiv)}q.fp("rightView",$,t)}},validateImpl:function(){var C=this,H=C._draggable,v=C._position,e=C.getWidth(),l=C.getHeight(),j=C._dividerSize,E=C._dividerBackground,V=s?18:8,X=C._dividerDiv,o=C._82O,P=C._60O,d=C._61O,p=C._toggleIcon,m=C._status,G=X.style,J=null,_=s?20:4,x=p.comps[0];j>=V||0===j?C._coverDiv&&(Aq(C._coverDiv),delete C._coverDiv):C._coverDiv||(C._coverDiv=cd(),y&&(C._coverDiv.style.background=Qh),tf(X,C._coverDiv)),C._togglable?P.parentNode||(tf(X,P),tf(X,d)):(Aq(P),Aq(d));var R=C._coverDiv,O=C._leftView,i=C._rightView;if(Tq(C)){if(j>e&&(j=e),m===Rj)if(1===o)var n=c(v,e),L=S(0,e-j-n);else-1===o?(L=c(-v,e),n=S(0,e-j-L)):(n=Q((e-j)*v),L=S(0,e-j-n));else"cl"===m?(n=0,L=S(0,e-j)):"cr"===m&&(L=0,n=S(0,e-j));O&&zq(O,0,0,n,l),i&&zq(i,n+j,0,L,l),zq(X,n,0,j,l),C._22o=n,R&&(zq(R,j/2-V/2,0,V,l),R.style.cursor=H?Dn:""),X.style.cursor=H?Dn:"";var A=X.clientHeight/2,M=X.clientWidth;Er(P,M,M),zq(P,0,A-M-_,M,M),J=Bb(P),Gl(J,0,0,1),x.rotation=-$,nk(J,p,0,0,M,M),J.restore(),Er(d,M,M),zq(d,0,A+_,M,M),J=Bb(d),Gl(J,0,0,1),x.rotation=$,nk(J,p,0,0,M,M),J.restore()}else{if(j>l&&(j=l),m===Rj)if(1===o)var w=c(v,l),r=S(0,l-j-w);else-1===o?(r=c(-v,l),w=S(0,l-j-r)):(w=Q((l-j)*v),r=S(0,l-j-w));else"cl"===m?(w=0,r=S(0,l-j)):"cr"===m&&(r=0,w=S(0,l-j));O&&zq(O,0,0,e,w),i&&zq(i,0,w+j,e,r),zq(X,0,w,e,j),C._22o=w,R&&(zq(R,0,j/2-V/2,e,V),R.style.cursor=H?Qi:""),G.cursor=H?Qi:"";var b=X.clientWidth/2,M=X.clientHeight;Er(P,M,M),zq(P,b-M-_,0,M,M),J=Bb(P),Gl(J,0,0,1),x.rotation=0,nk(J,p,0,0,M,M),J.restore(),Er(d,M,M),zq(d,b+_,0,M,M),J=Bb(d),Gl(J,0,0,1),x.rotation=I,nk(J,p,0,0,M,M),J.restore()}G.background=E}});var Yp=function(t){this.sv=t,this.addListeners()};js(Yp,h,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(I){var e=this,X=e.sv,k=X._dividerDiv,u=X._60O,E=X._61O,C=X._status,L=I.target;if(L===u)C===Rj?X.setStatus("cl"):"cr"===C&&X.setStatus(Rj);else if(L===E)C===Rj?X.setStatus("cr"):"cl"===C&&X.setStatus(Rj);else if(Zg(I)&&(L===k||L===X._coverDiv)&&(pm(I),X.isDraggable())){X.getLeftView(),X.getRightView();var M=e.maskDiv=cd();if(M.style.left=0,M.style.top=0,M.style.width=X.getWidth()+"px",M.style.height=X.getHeight()+"px",X.getView().appendChild(M),!X.isContinuousLayout()){var $=e.resizeDiv=cd();$.style.left=k.style.left,$.style.top=k.style.top,$.style.width=k.style.width,$.style.height=k.style.height,$.style.opacity=X.getDragOpacity(),$.style.background=X.getDividerBackground(),tf(e.getView(),$)}e._lastAbsPosition=X._22o,e._86o=Tq(X)?Ao(I).x:Ao(I).y,Vk(e,I)}},handleWindowTouchMove:function(p){Zg(p)&&this.update(p,this.sv.isContinuousLayout())},handleWindowTouchEnd:function(m){var G=this;G.update(m,!0),G.sv.setStatus(Rj),G.maskDiv&&Aq(G.maskDiv),G.resizeDiv&&Aq(G.resizeDiv),G.maskDiv=G.resizeDiv=J},handle_mousedown:function(f){Dp(f)&&this.handle_touchstart(f)},handleWindowMouseMove:function(p){this.handleWindowTouchMove(p)},handleWindowMouseUp:function($){this.handleWindowTouchEnd($)},update:function(_,P){var s=this,q=s.sv,N=Tq(q)?q.getWidth():q.getHeight(),z=q._dividerSize,H=s._lastAbsPosition-s._86o;Tq(q)?(H+=Ao(_).x,H>N-z&&(H=N-z),0>H&&(H=0),s.resizeDiv&&(s.resizeDiv.style.left=H+dm)):(H+=Ao(_).y,H>N-z&&(H=N-z),0>H&&(H=0),s.resizeDiv&&(s.resizeDiv.style.top=H+dm)),P&&N!==z&&(1===q._82O?q.setPosition(H,1):-1===q._82O?q.setPosition(H-N+z,1):q.setPosition(H/(N-z),1))}}),Ke.TabView=function(){var m=this,G=m._view=Eq(1,m),Z=m._91O=cd(1),_=m._tabModel=new hd,k=_.sm(),e=m.invalidate;m._7o=new Cq,m._canvas=Rk(Z),tf(G,Z),tf(G,m._92O=cd(1)),k.setSelectionMode(ip),k.ms(e,m),_.mm(e,m),_.md(e,m),_.mh(e,m),new wh(m),m.iv()},qe("TabView",h,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",Cn,fi,"tabBackground","selectWidth",Od,"moveBackground","insertColor"],_tabPosition:Wc,_tabHeight:Uk,_tabGap:r.tabViewTabGap,_labelColor:r.tabViewLabelColor,_labelFont:r.tabViewLabelFont,_tabBackground:r.tabViewTabBackground,_selectWidth:r.tabViewSelectWidth,_selectBackground:r.tabViewSelectBackground,_moveBackground:r.tabViewMoveBackground,_insertColor:r.tabViewInsertColor,_movable:!0,getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(L,t,O){var k=new Fi,i=this._tabModel;return k.setName(L),k.setView(t),i.add(k),O&&i.sm().ss(k),k},getLabel:function(U){return U.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(I){this._23o=I,this.iv()},get:function(e){var a=this,d=a._tabModel;if(On(e))return d._roots.get(e);if(se(e)){var n;return d.each(function(V){e===a.getLabel(V)&&(n=V)}),n}return e instanceof Fi?e:J},select:function(o){this._tabModel.sm().ss(this.get(o))},remove:function(I){var w=this;if(I=w.get(I)){var F=w._tabModel,m=F._roots.indexOf(I);w._tabModel.remove(I),w._12Q(--m)}},getCurrentTab:function(){return this._8o},hideTabView:function(J,N){N.parentNode===this._92O&&(_q(N)?(N.style.display=_m,N._tab_=J):Aq(N),ns())},showTabView:function(b,i){_q(i)&&(i.style.display="block",i._tab_=b),i.parentNode!==this._92O&&(tf(this._92O,i),ns())},_24o:function(){var q,H=this,U=H._8o,Y=H._9o,b=H._tabModel.sm().ld();b&&(q=bf(b.getView())),q!==Y&&(Y&&(U.getView()&&U.getView().endEditing&&U.getView().endEditing(),H.hideTabView(U,Y)),q&&H.showTabView(b,q)),H._8o=b,H._9o=q,U!==b&&H.onTabChanged(U,b)},onTabClosing:function(){return!0},onTabChanged:function(){},onTabClosed:function(t,j){this._12Q(--j)},_12Q:function(r){var y=this,i=y._tabModel,G=i.size();if(G&&!i.sm().ld()){r==J&&(r=0),r>=G&&(r=G-1),0>r&&(r=0);for(var e=r;e>=0;e--){var D=y.get(e);if(!D.isDisabled())return y.select(D),D}for(e=r+1;G>e;e++)if(D=y.get(e),!D.isDisabled())return y.select(D),D}},getTabWidth:function(m){var H=4,q=$l(m.getIcon());q&&(H+=Sf(q,m)+4);var x=this.getLabel(m);return x&&(H+=cf(this.getLabelFont(m),x).width+4),m.isClosable()&&(H+=10),H},drawTab:function(R,Z,E,J,M,p,r){var H,B=this,t=B._tabPosition,n=E+4,h=B._selectWidth,c=$l(Z.getIcon()),X=Z.isDisabled(),a=B.getLabelColor(Z),k=B.getLabelFont(Z),T=B.getLabel(Z),w=B._selectBackground,U=t===fh+"-vertical",S=t===um+"-vertical";(U||S)&&(n=J+4),X&&(R.globalAlpha=Vi),Wl(R,E,J,M,p,r),Z===B._8o&&h&&(t===Wc?Wl(R,E,J+p-h,M,h,w):t===fh?Wl(R,E+M-h,J,h,p,w):t===um?Wl(R,E,J,h,p,w):U?Wl(R,E+M-h,J,h,p,w):S?Wl(R,E,J,h,p,w):Wl(R,E,J,M,h,w));var W=M/2;if(U&&(zs(R,W,J+p/2),so(R,I),zs(R,-W,-J-p/2)),c){var d=tk(c,Z),f=Sf(c,Z);if(U||S){var K=E+M/2,Q=n+d/2;zs(R,K,Q),so(R,$),zs(R,-K,-Q),Mf(R,c,E+M/2,n+d/2,Z,B),zs(R,K,Q),so(R,-$),zs(R,-K,-Q),n+=d+4}else Mf(R,c,n+f/2,J+p/2,Z,B),n+=f+4}return U||S?(zs(R,M/2,n+M/2),so(R,$),zs(R,-M/2,-n-M/2),yc(R,T,k,a,E,n,p,M),zs(R,M/2,n+M/2),so(R,-$),zs(R,-M/2,-n-M/2)):yc(R,T,k,a,n,J,M,p),U&&(zs(R,W,J+p/2),so(R,-I),zs(R,-W,-J-p/2)),Z.isClosable()&&(H=S?{x:E+M-12,y:J+p-12,width:12,height:12}:{x:E+M-12,y:J+2,width:12,height:12},this.drawCloseIcon(Z,R,a,H)),X&&(R.globalAlpha=1),H},drawCloseIcon:function(W,G,a,i){var m=i.x,Y=i.y;G.strokeStyle=a,G.lineWidth=1,G.beginPath(),G.moveTo(m+2,Y+8),G.lineTo(m+8,Y+2),G.moveTo(m+8,Y+8),G.lineTo(m+2,Y+2),G.stroke()},validateImpl:function(){var u=this;u._24o();var A,J=u._canvas,x=u._tabPosition,j=u._91O,U=u._92O,T=u._tabModel,l=u.getWidth(),w=u.getHeight(),b=u._tabHeight,d=u._7o,X=u._tabGap,B=x===Wc,s=x===fh,N=x===um,e=x===fh+"-vertical",Z=x===um+"-vertical",_=u._23o,O=0;if((s||N)&&T._roots.each(function(m){O=S(u.getTabWidth(m),O)}),B?(zq(j,0,0,l,b),A={x:0,y:b,width:l,height:S(0,w-b)}):s?(zq(j,0,0,O,w),A={x:O,y:0,width:S(0,l-O),height:w}):N?(zq(j,l-O,0,O,w),A={x:0,y:0,width:S(0,l-O),height:w}):e?(zq(j,0,0,b,w),A={x:b,y:0,width:S(0,l-b),height:w}):Z?(zq(j,l-b,0,b,w),A={x:0,y:0,width:S(0,l-b),height:w}):(zq(j,0,w-b,l,b),A={x:0,y:0,width:l,height:S(0,w-b)}),zq(U,A),e||Z){u._9o&&(A.x=0,zq(u._8o.getView(),A)),Er(J,b,w);var Q=Bb(J),K=0;if(Gl(Q,0,u.ty(),1),Q.clearRect(0,0,b,w),d.clear(),T._roots.each(function(L){var e,T=u.getTabWidth(L);_&&_.tab===L||(e=u.drawTab(Q,L,0,K,b,T,u._tabBackground)),d.add({_75o:e,tab:L,startY:K,endY:K+T,height:T}),K+=T+X}),u._23Q=S(0,K-X),_){var k=_.position;u.drawTab(Q,_.tab,0,_.startY,b,_.height,u._moveBackground),Wl(Q,0,k,b,1,u._insertColor)}Q.restore(),u.ty(u.ty())}else if(s||N){u._9o&&(A.x=0,zq(u._8o.getView(),A)),Er(J,O,w);var Q=Bb(J),K=0;if(Gl(Q,0,u.ty(),1),Q.clearRect(0,0,O,w),d.clear(),T._roots.each(function(v){var g;_&&_.tab===v||(g=u.drawTab(Q,v,0,K,O,b,u._tabBackground)),d.add({_75o:g,tab:v,startY:K,endY:K+b,height:b}),K+=b+X}),u._23Q=S(0,K-X),_){var k=_.position;u.drawTab(Q,_.tab,0,_.startY,O,_.height,u._moveBackground),Wl(Q,0,k,O,1,u._insertColor)}Q.restore(),u.ty(u.ty())}else{u._9o&&(A.y=0,zq(u._8o.getView(),A)),Er(J,l,b);var Q=Bb(J),E=0;if(Gl(Q,u.tx(),0,1),Q.clearRect(0,0,l,b),d.clear(),T._roots.each(function(a){var H,G=u.getTabWidth(a);_&&_.tab===a||(H=u.drawTab(Q,a,E,0,G,b,u._tabBackground)),d.add({_75o:H,tab:a,startX:E,endX:E+G,width:G}),E+=G+X}),u._64I=S(0,E-X),_){var k=_.position;u.drawTab(Q,_.tab,_.startX,0,_.width,b,u._moveBackground),Tj(Q,u._insertColor,k,0,b)}Q.restore(),u.tx(u.tx())}for(var g=[],D=U.children,i=0;i<D.length;i++){var a=D[i],r=a._tab_;r&&!T.contains(r)&&g.push(a)}g.forEach(function(T){U.removeChild(T)})}});var wh=function(V){this.tv=V,this.addListeners()};js(wh,h,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(K){this.handleScroll(K,10*(K.wheelDelta/40))},handle_DOMMouseScroll:function(z){this.handleScroll(z,10*-z.detail)},handleScroll:function(r,n){pm(r);var E=this.tv,N=E._tabPosition;!E._40o()||N!==Wc&&N!==Wb||E.tx(this.tv.tx()+n),!E._41o()||N!==fh&&N!==um&&N!==fh+"-vertical"&&N!==um+"-vertical"||E.ty(this.tv.ty()+n)},_8Q:function(V){var O,G,a=this.tv,o=a._tabPosition,x=a._7o;if(o===Wc||o===Wb){var c=a.lp(V).x;for(O=0;O<x.size();O++)if(G=x.get(O),G.startX<=c&&c<=G.endX)return G}else if(o===fh||o===um||o===fh+"-vertical"||o===um+"-vertical"){var k=a.lp(V).y;for(O=0;O<x.size();O++)if(G=x.get(O),G.startY<=k&&k<=G.endY)return G}return J},isClickable:function(s){var x=this.tv,Y=x._tabPosition,h=this._73o=this._8Q(s);return!x._40o()||Y!==Wc&&Y!==Wb?!x._41o()||Y!==fh&&Y!==um&&Y!==fh+"-vertical"&&Y!==um+"-vertical"?h&&(!h.tab.isDisabled()||x.isMovable()):!0:!0},handle_mousemove:function(m){var i=this;to?i._74o=i._8Q(m):i.getView().style.cursor=i.isClickable(m)?oi:""},handle_mousedown:function(s){this.handle_mousemove(s),this.handle_touchstart(s)},handle_touchstart:function(A){var D=this,c=D.tv,k=c._tabPosition;pm(A),Dp(A)&&D.isClickable(A)&&(k===Wc||k===Wb?(D.x=Ao(A).x,D.lp=c.lp(A),D.tx=c.tx()):(D.y=Ao(A).y,D.lp=c.lp(A),D.ty=c.ty()),Vk(D,A))},handleWindowMouseMove:function(H){this.handleWindowTouchMove(H)},handleWindowTouchMove:function(I){var $,e=this,K=e.tv,r=K._tabPosition,Z=e._73o;if(r===Wc||r===Wb){if($=Ao(I).x-e.x,!e._25o&&!e.moving&&k($)>2&&(K._40o()&&!dh(I)?e._25o=1:Z&&K.isMovable()&&(e.moving=1)),e._25o)K.tx(e.tx+$);else if(e.moving){var X=e.lp.x+$,d=K._tabGap/2;K._7o.each(function(F){var i=F.endX,H=X-F.startX<i-X;X>=F.startX&&i>=X&&K._7Q({tab:Z.tab,startX:Z.startX+$,width:Z.width,front:H,insertTab:F.tab,position:H?S(0,F.startX-d):c(K._64I,i+d)})})}}else if($=Ao(I).y-e.y,!e._25o&&!e.moving&&k($)>2&&(K._41o()&&!dh(I)?e._25o=1:Z&&K.isMovable()&&(e.moving=1)),e._25o)K.ty(e.ty+$);else if(e.moving){var u=e.lp.y+$,d=K._tabGap/2;K._7o.each(function(P){var Q=P.endY,s=u-P.startY<Q-u;u>=P.startY&&Q>=u&&K._7Q({tab:Z.tab,startY:Z.startY+$,height:Z.height,front:s,insertTab:P.tab,position:s?S(0,P.startY-d):c(K._23Q,Q+d)})})}},handleWindowMouseUp:function(U){this.handleWindowTouchEnd(U)},handleWindowTouchEnd:function(){var U=this,p=U.tv,M=p._tabPosition,d=p.getTabModel(),b=d._roots,N=U._73o;if(U.moving){var i=p._23o;if(i&&i.insertTab!==i.tab){var m=i.tab,$=b.remove(m),_=b.indexOf(i.insertTab);_>=0&&(i.front||_++,_<=b.size()&&(b.add(m,_),d._38I(m,$,_)))}p._7Q(J),delete U.moving}else if(!U._25o&&N){m=N.tab;var e=U._74o;if(!e||e.tab===m)if(!m.isDisabled()&&Pm(N._75o,U.lp)){var Z=function(){var V=b.indexOf(m);d.remove(m),p.onTabClosed(m,V)};p.onTabClosing(m,Z)&&Z()}else m.isDisabled()||p._8o===m||d.sm().ss(m)}U._25o=U._73o=U._74o=M===Wc||M===Wb?U.x=U.lp=U.tx=J:U.y=U.lp=U.ty=J}}),Ke.PropertyView=function(H){var A=this;A._view=Eq(1,A),A._canvas=Rk(A._view),tf(A._view,A._79O=cd()),A._rows=new Cq,A._28o=new Cq,A._26o={},A._26Q={};var E=A._propertyModel=new hd,O=A.ivm;E.mm(O,A),E.md(O,A),E.mh(O,A),A.dm(H?H:new hd),new Wq(A)},qe("PropertyView",h,{ms_ac:[Cn,pb,fi,Tp,il,"categorizable",oe,th,go,ro,Gi,Br,jl,vb,"selectRowIndex",Od,"background",us,si,Yl,Qm,jr],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:Rd,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:Tn,_background:r.propertyViewBackground,_expandIcon:r.propertyViewExpandIcon,_collapseIcon:r.propertyViewCollapseIcon,_scrollBarColor:ql,_scrollBarSize:sp,_autoHideScrollBar:dd,_selectBackground:r.propertyViewSelectBackground,_rowHeight:Nr,_rowLineVisible:r.propertyViewRowLineVisible,_rowLineColor:r.propertyViewRowLineColor,_10I:.5,_columnLineVisible:r.propertyViewColumnLineVisible,_columnLineColor:r.propertyViewColumnLineColor,_labelColor:r.propertyViewLabelColor,_labelSelectColor:r.propertyViewLabelSelectColor,_labelFont:r.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(i){0>i&&(i=0),i>1&&(i=1);var $=this,C=$._10I;$._10I=i,$.fp("columnPosition",C,i)},getPropertyName:function(V){return V.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(F,c,Q){return Q===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(Y,v){return v===this._selectRowIndex?this._labelSelectColor:Y.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(h){var B=this.getHeight()-this._59I;return B>h&&(h=B),h>0?0:Q(h)},isExpanded:function(X){if(!X)return!0;var P=this._26o[X];return P?P.isExpanded:!(this._26Q[X]===!1)},toggle:function(h){var I=this;I.isExpanded(h)?I.collapse(h):I.expand(h)},expandAll:function(){this.validate();for(var D in this._26o)this.expand(D)},expand:function(t){if(t&&t!==_m){var T=this,w=T._26o[t];w&&!w.isExpanded&&(w.isExpanded=!0,T.onExpanded(t),T.ivm())}},onExpanded:function(){},collapseAll:function(){this.validate();for(var w in this._26o)this.collapse(w)},collapse:function(k){if(k&&k!==_m){var c=this,j=c._26o[k];j&&j.isExpanded&&(j.isExpanded=!1,c.onCollapsed(k),c.ivm())}},onCollapsed:function(){},getCategoryName:function(Y){if(!this.isCategorizable())return _m;var I=Y.getCategoryName();return I?I:_m},getPropertyModel:function(){return this._propertyModel},handleSelectionChange:function(){this.ivm()},setDataModel:function(y){var w=this,T=w._dataModel;T!==y&&(T&&(T.umd(w.handlePropertyChange,w),w._selectionModel||T.sm().ums(w.handleSelectionChange,w)),w._dataModel=y,y.md(w.handlePropertyChange,w),w._selectionModel?w._selectionModel._21I(y):y.sm().ms(w.handleSelectionChange,w),w.fp(Rc,T,y))},isVisible:function(c){return this._visibleFunc?this._visibleFunc(c):!0},onPropertyChanged:function(C){var o=this,f=C.property;Mm[f]?o.ivm():o.iv(),f===Cf&&o._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:Bo},handlePropertyChange:function(X){this._27o===X.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){var W=this;W._96I||(W.setSelectRowIndex(-1),W._96I=1,W.iv())},redraw:function(){this.iv()},validateModel:function(){var w=this,n=w._rows,m=w._28o,A={},z=new Cq,y=w._27o;w.updateCurrentData(),y!==w._27o&&w.endEditing(),n.clear(),m.clear(),w.getRawProperties().each(function(d){if(w.isVisible(d)){z.add(d);var M=w.getCategoryName(d);A[M]||(m.add(M,M===_m?0:e),A[M]={isExpanded:w.isExpanded(M),properties:new Cq})}}),w._sortFunc&&z.sort(w._sortFunc);for(var L in w._26o)w._26Q[L]=w.isExpanded(L);w._26o=A,m.each(function(I){I!==_m&&n.add(I);var Z=A[I];Z.isExpanded&&z.each(function(r){w.getCategoryName(r)===I&&(Z.properties.add(r),n.add({property:r,data:w._27o}))},w)})},validateImpl:function(){var q=this;q._76o(),q._96I&&(q.validateModel(),delete q._96I);var D=q._canvas,G=q.getWidth(),r=q.getHeight(),I=-q.ty(),k=q._rowHeight,p=q._indent,y=G-p,i=q._rows,g=i.size(),E=q._9I=p+y*q._10I,R=q._59I=g*k;Er(D,G,r),q._29I={x:0,y:I,width:G,height:r},q._31I=N(I/k),q._14I=o((I+r)/k),q._31I<0&&(q._31I=0),q._14I>g&&(q._14I=g);var u,b=Bb(D),H=q._background;Gl(b,0,-I,1),b.beginPath(),b.rect(0,I,G,r),b.clip(),b.clearRect(0,I,G,r),q._93db(b),H&&Wl(b,0,0,p,R,H);for(var w=q._31I;w<q._14I;w++){var c=i.get(w),I=k*w;if(se(c))H&&Wl(b,p,I,y,k,H),u=$l(q.isExpanded(c)?q._expandIcon:q._collapseIcon),u&&Ck(b,u,Re,0,I,p,k),b.save(),b.beginPath(),b.rect(p,I,y,k),b.clip(),q.drawCategoryName(b,c,w,p,I,y,k),b.restore();else{var j=c.property,F=c.data,u=$l(j.getIcon()),Y=q._selectRowIndex===w?q.getSelectBackground():J;if(u&&Ck(b,u,Re,0,I,p,k),Y&&Wl(b,p,I,y,k,Y),b.save(),b.beginPath(),b.rect(p,I,E-p,k),b.clip(),q.drawPropertyName(b,j,w,p,I,E-p,k),b.restore(),!q.isEditing(F,j)){var _=E+1,P=G-E-1;b.save(),b.beginPath(),b.rect(_,I,P,k),b.clip(),q._87o(q.drawPropertyValue(b,j,q.getValue(F,j),w,_,I,P,k,F),w,_,I,P,k),b.restore()}}q._rowLineVisible&&Wl(b,p,I+k-1,y,1,q._rowLineColor)}q._columnLineVisible&&(Wl(b,E,0,1,R,q._columnLineColor),Wl(b,G-1,0,1,R)),q._92db(b),q._93I(),b.restore(),q.ty(q.ty())},drawCategoryName:function(L,I,b,E,X,H,V){yc(L,I,this.getCategoryFont(I),this.getCategoryColor(I),E,X,H,V)},drawPropertyName:function(Y,w,H,L,F,R,O){return w.drawPropertyName?(w.drawPropertyName(Y,w,H,L,F,R,O,this),void 0):(yc(Y,this.getPropertyName(w),this.getPropertyFont(w,H),this.getPropertyColor(w,H),L,F,R,O),void 0)},drawPropertyValue:function(o,f,J,D,u,t,X,L,G){return f.drawPropertyValue?f.drawPropertyValue(o,f,J,D,u,t,X,L,G,this):(Fb(o,J,f,this.getLabelFont(f,J,D),this.getLabelColor(f,J,D),u,t,X,L,G,this),void 0)},isPropertyEditable:function(d){return d.isEditable()&&this.isEditable()},setProperties:function(O){this._propertyModel.clear(),this.addProperties(O)},addProperties:function(y){if(y){var B=this._propertyModel;y.forEach(function(k){if(!(k instanceof pi)){var E=tr(k.className);k=xi(E?E:pi,k)}B.add(k)})}},getRowIndexAt:function(k){var m=this,r=N(m.lp(k).y/m._rowHeight);return r>=0&&r<m._rows.size()?r:-1},getPropertyAt:function(u){var e=this,_=e.getRowIndexAt(u);return _>=0?e._rows.get(_).property:J},getToolTip:function(n){var j=this,w=j.getPropertyAt(n),L=j._27o;return w&&L?w.getToolTip(L,j._9I<j.lp(n).x,j):J}});var Wq=function(E){this.pv=E,this.addListeners()};js(Wq,h,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(p){this.getView().style.cursor=p},clear:function(){var Z=this;Z._62O=Z.cp=Z.ty=Z.p=J,Z.setCursor(oq)},handle_mousedown:function(Z){this.handle_touchstart(Z)},handle_touchstart:function(r){var P=this,V=P.pv;pm(r),V.setFocus(r)&&(Dp(r)?(P.cp=Ao(r),P.ty=V.ty(),P.p=V.getColumnPosition(),P.handle_touchmove(r)):V.setSelectRowIndex(V.getRowIndexAt(r)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(C){this.handle_touchend(C)},handle_touchend:function(n){var k=this;if(k.cp&&!k._62O){var l=k.pv,r=l.lp(n),y=r.x,g=r.y,T=l._indent,R=l.getRowIndexAt(n),Z=l._9I;if(R>=0){var K=l._rowHeight,B=K*R,Y=l._rows.get(R),H=Y.property;if(se(Y))$l(l.isExpanded(Y)?l._expandIcon:l._collapseIcon)&&y>=0&&T>=y&&g>=B&&B+K>=g?l.toggle(Y):qi(n)&&l.toggle(Y);else if(y>Z&&l.isPropertyEditable(H,n)){var t={x:Z+1,y:B,width:l.getWidth()-Z-1,height:K},o={x:t.x+l.tx(),y:t.y+l.ty(),width:t.width,height:t.height},f=0,q=l._29I;t.y<q.y?f=t.y-q.y:t.y+K>q.y+q.height&&(f=t.y+K-q.y-q.height),f&&(l.ty(l.ty()-f),o.y-=f),l.beginEditing({data:Y.data,property:H,value:l.getValue(Y.data,H),event:n,rect:t,editorRect:o,view:l})}}l.setSelectRowIndex(R)}k.clear()},handleWindowMouseMove:function(m){this.handleWindowTouchMove(m)},handleWindowTouchMove:function(H){var b=this,p=b.pv,E=b.ty,X=b.cp,d=Ao(H),m=b._62O;if("p"===m)p.setTranslateY(E+d.y-X.y);else if("c"===m){var M=p.getWidth()-p._indent;if(M>16){var C=b.p-(X.x-d.x)/M,$=16/M;$>C&&(C=$),C>1-$&&(C=1-$),p.setColumnPosition(C)}}else"s"===m&&p.setTranslateY(E+(X.y-d.y)*p._59I/p._29I.height)},handle_mousemove:function(N){this.handle_touchmove(N)},handle_touchmove:function(g){if(!to&&Dp(g)){var Q=this,C=Q.pv,R=k(C.lp(g).x-C._9I)<=(s?8:3);Q.cp?Q._62O||(R?(Q._62O="c",Vk(Q)):k(Ao(g).y-Q.cp.y)>=2&&(Q._62O=Q.isV(g)?"s":"p",Vk(Q))):(R?Q.setCursor(Dn):Q.setCursor(oq),Q.isV(g)&&C._43o())}},isV:function(I){var t=this.pv,O=t._29I;return t._41o()&&O.x+O.width-t.lp(I).x<Hq},handle_mousewheel:function(g){this.handleScroll(g,g.wheelDelta/40)},handle_DOMMouseScroll:function(P){2===P.axis&&this.handleScroll(P,-P.detail)},handleScroll:function(R,g){var m=this.pv;pm(R),m.endEditing(),m.translate(0,g*m.getRowHeight())},handle_keydown:function($){var i=this.pv,w=i._rows.size(),O=i._selectRowIndex+(mk($)?-1:1);(mk($)||Vn($))&&(0>O&&(O=0),O>=w&&(O=w-1),i.setSelectRowIndex(O))}}),Ke.ListView=function(f){this._5o(f),new Jj(this)},qe("ListView",h,{ms_ac:[Cn,pb,fi,us,oe,si,Yl,th,go,Br,jl,vb,Kn,Od],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:Tn,_rowHeight:Nr,_rowLineVisible:r.listViewRowLineVisible,_rowLineColor:r.listViewRowLineColor,_scrollBarColor:ql,_scrollBarSize:sp,_autoMakeVisible:lq,_autoHideScrollBar:dd,_selectBackground:r.listViewSelectBackground,_labelColor:r.listViewLabelColor,_labelSelectColor:r.listViewLabelSelectColor,_labelFont:r.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(d){var l=this,Y=l._checkMode;l._checkMode=d,l.fp(yq,Y,d)},drawRow:function(J,Y,B,l,S,T,k){var p=this,V=0,$=p._indent,Z=p.getIconWidth(Y);p.drawRowBackground(J,Y,B,l,S,T,k),p._checkMode&&(Mf(J,$l(p.getCheckIcon(Y)),V+$/2,S+k/2,Y,p),V+=$),p.drawIcon(J,Y,V,S,Z,k),p.drawLabel(J,Y,V+Z,S,k)}});var Jj=function(n){this.list=n,this._lastSelectDataTime=mj(),this.addListeners()};js(Jj,h,{ms_listener:1,getView:function(){return this.list._view},clear:function(f){var I=this,L=I.list;f&&"d"===I._62O&&!I.dragCancel&&L.handleDragAndDrop(f,"end"),L.draggingData&&(L.draggingData=null,L.redraw()),I.dragCancel=I._62O=I._isV=I._isH=I.cp=I.tx=I.ty=J},handle_mousedown:function(d){this.handle_touchstart(d)},handle_touchstart:function(U){var s=this,Z=s.list;if(pm(U),Z.setFocus(U)){var N=Z.getDataAt(U);s.cp=Ao(U),s.tx=Z.tx(),s.ty=Z.ty(),Dp(U)?N&&Z.handleDragAndDrop&&!s.isV(U)&&!s.isH(U)&&(Z.draggingData=N,Z.redraw(),Z.handleDragAndDrop(U,"prepare")):(N&&s._33o(U,N),s.clear(U))}},handleWindowMouseUp:function(N){this.clear(N)},handleWindowTouchEnd:function(c){this.clear(c)},handle_mouseup:function(n){this.handle_touchend(n)},handle_touchend:function(x){var v=this,M=v.list;if(!v._isV&&!v._isH&&v.cp&&!v._62O){var f=M.getDataAt(x);f?(M.isCheckMode()?v._34o(x,f):v._33o(x,f),qi(x)?M.onDataDoubleClicked(f,x):M.onDataClicked(f,x)):M.handleBackgroundClick(x)}v.clear(x)},handleWindowMouseMove:function(K){this.handleWindowTouchMove(K)},handleWindowTouchMove:function(A){var m=this,Q=m.list,S=m._62O,o=m.tx,e=m.ty,D=m.cp,g=Ao(A),I=Q._29I;"p"===S?Q.setTranslate(o+g.x-D.x,e+g.y-D.y):"v"===S?Q.ty(e+(D.y-g.y)*Q._59I/I.height):"h"===S?Q.tx(o+(D.x-g.x)*Q._91I/I.width):"d"===S&&(m.dragCancel||Q.handleDragAndDrop(A,"between"))},handle_mousemove:function(X){this.handle_touchmove(X)},handle_touchmove:function(e){if(!to&&Dp(e)){var L=this,O=L.list;if(L._isV=L.isV(e),L._isH=L.isH(e),L.cp){if(!L._62O){if(ii(Ao(e),L.cp)<2)return;L._isV?L._62O="v":L._isH?L._62O="h":O.draggingData&&!this.dragCancel?(L._62O="d",O.handleDragAndDrop(e,"begin")):L._62O="p",L._62O&&"d"!==L._62O&&O.draggingData&&(O.draggingData=null,O.redraw()),Vk(L)}}else L._isV&&O._43o(),L._isH&&O._42o()}},isV:function(v){var u=this.list,t=u._29I;return u._41o()&&t.x+t.width-u.lp(v).x<Hq},isH:function(G){var C=this.list,b=C._29I;return C._40o()&&b.y+b.height-C.lp(G).y<Hq},handle_mousewheel:function(S){this.handleScroll(S,S.wheelDelta/40,S.wheelDelta!==S.wheelDeltaX)},handle_DOMMouseScroll:function(_){this.handleScroll(_,-_.detail,1)},handleScroll:function(K,U,g){var d=this.list;pm(K),d.endEditing&&d.endEditing(),g&&d._41o()?d.translate(0,U*d.getRowHeight()):d._40o()&&d.translate(10*U,0)},handle_keydown:function(q){if(!r.isInput(q.target)){var Y,f=this.list,T=f.sm(),s=f._rows,C=s.size();if(Eh(q))f.selectAll();else if(As(q))f.handleDelete&&f.handleDelete(q);else if(no(q))"d"!==this._62O||this.dragCancel||(f.handleDragAndDrop(q,"cancel"),this.dragCancel=!0);else if(_d(q))f.isCheckMode()&&(Y=f.getFocusData(),Y&&f.checkData(Y));else if(mk(q)||Vn(q)){var c=f.isCheckMode();if(Y=c?f.getFocusData():T.ld()){var M=f.getRowIndex(Y);M>=0&&(mk(q)?0!==M&&(Y=s.get(M-1),c?f.setFocusData(Y):T.ss(Y)):M!==C-1&&(Y=s.get(M+1),c?f.setFocusData(Y):T.ss(Y)))}else C>0&&(Y=s.get(0),c?f.setFocusData(Y):T.ss(Y))}}},_34o:function(b,H){var i=this.list,v=i.lp(b).x;return v>=0&&v<=i._indent?(i.checkData(H),void 0):(i.setFocusData(H),void 0)},_33o:function(h,j){var r=this.list,O=r.sm(),b=O.ld();if(dh(h))r.isSelected(j)?O.rs(j):O.as(j);else if(Cm(h))if(b)for(var w=r.getRowIndex(b),u=r.getRowIndex(j);w!==u;)w+=u>w?1:-1,O.as(r._rows.get(w));else O.ss(j);else if(Dp(h)){var a=mj();if(O.contains(j)){var P=a-this._lastSelectDataTime;r.handleDataDoubleSelect&&P>500&&1500>P&&r.handleDataDoubleSelect(h,j)}O.ss(j),this._lastSelectDataTime=a}else O.contains(j)||O.ss(j)}}),Ke.TreeView=function($){var i=this;i._35o(),i._5o($),new Pb(i)},qe("TreeView",h,{ms_ac:[Cn,pb,fi,"rootVisible",yq,"rootData",th,go,Br,jl,vb,oe,us,si,Yl,ro,Gi,Kn,Od,"loader","doubleClickToToggle"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:J,_indent:Tn,_rowHeight:Nr,_rowLineVisible:r.treeViewRowLineVisible,_rowLineColor:r.treeViewRowLineColor,_scrollBarColor:ql,_scrollBarSize:sp,_autoHideScrollBar:dd,_expandIcon:r.treeViewExpandIcon,_collapseIcon:r.treeViewCollapseIcon,_autoMakeVisible:lq,_selectBackground:r.treeViewSelectBackground,_labelColor:r.treeViewLabelColor,_labelSelectColor:r.treeViewLabelSelectColor,_labelFont:r.treeViewLabelFont,_doubleClickToToggle:r.treeViewDoubleClickToToggle,drawRow:function(K,c,O,J,n,W,x){var E=this;E.drawRowBackground(K,c,O,J,n,W,x),E._97I(K,c,O,0,n,W,x)},isOnToggleIcon:function(O){var f=this.getDataAt(O);if(f){var o=this.getIndent(),e=this.lp(O).x;if($l(this.getToggleIcon(f))){var H=o*this.getLevel(f);if(e>=H&&H+o>=e)return!0}}return!1}});var Pb=function(t){Vp(Pb,this,[t])};js(Pb,Jj,{toggle:function(K,r,q,Y){var D=this.list,F=D.lp(K).x;if($l(D.getToggleIcon(r))){var B=q*Y;if(F>=B&&B+q>=F)return D.toggle(r),!0}return D.isDoubleClickToToggle()&&qi(K)?(D.toggle(r),!0):!1},_34o:function(T,d){var z=this.list,W=z.lp(T).x,f=z._levelMap[d._id],t=z._indent,x=t*(f+1);return W>=x&&x+t>=W?(z.checkData(d),void 0):(this.toggle(T,d,t,f)||z.setFocusData(d),void 0)},_33o:function(D,R){var w=this,Z=w.list;w.toggle(D,R,Z._indent,Z.getLevel(R))||Pb.superClass._33o.call(w,D,R)},handle_keydown:function(y){if(Jf(y)||Yk(y)){var r=this.list,e=r._rows,j=r.isCheckMode(),V=r.sm(),S=j?r.getFocusData():V.ld();S?S.hasChildren()&&(Jf(y)?r.collapse(S):r.expand(S)):e.size()>0&&(S=e.get(0),j?r.setFocusData(S):V.ss(S))}else Pb.superClass.handle_keydown.call(this,y)}});var gd=Ke.TableView=function(I){this._98I(),this._5o(I),new Ci(this)};qe("TableView",h,{ms_ac:[Cn,pb,fi,"sortMode",Tp,il,us,si,Yl,Qm,jr,"sortColumn",th,go,Br,jl,vb,Kn,Od],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:Dl,_editable:!0,_batchEditable:!1,_rowHeight:Nr,_rowLineVisible:r.tableViewRowLineVisible,_rowLineColor:r.tableViewRowLineColor,_columnLineVisible:r.tableViewColumnLineVisible,_columnLineColor:r.tableViewColumnLineColor,_scrollBarColor:ql,_scrollBarSize:sp,_autoHideScrollBar:dd,_autoMakeVisible:lq,_selectBackground:r.tableViewSelectBackground,_labelColor:r.tableViewLabelColor,_labelSelectColor:r.tableViewLabelSelectColor,_labelFont:r.tableViewLabelFont,getCheckColumn:function(){var i=this;if(!i._31o){var l=i._31o=new gr;l.setEditable(!0),l.setWidth(40),l.getValue=i.getCheckColumValue,l.drawCell=i.drawCheckColumnCell}return i._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(t){var C=this,g=C._39o,T=C.getCheckColumn();t!==C.isCheckMode()&&(t?g.add(T,0):g.remove(T),C.fp(yq,!t,t))},getCheckColumValue:function(u,H,s){return s.isSelected(u)},drawCheckColumnCell:function(J,u,E,F,K,w,Z,n,p){Mf(J,p.getCheckIcon(u),K+Z/2,w+n/2,u,p)}});var Ci=function(K){Vp(Ci,this,[K])};js(Ci,Jj,{_34o:function(n,I){var y=this.list,X=y._31o;if(y.isCellEditable(I,X,n)){var e=y._3Q(X),J=y.lp(n).x;if(e&&J>=e.startX&&J<e.startX+X.getWidth())return y.checkData(I),void 0}y._37O(I,n),y.setFocusData(I)},_33o:function(n,U){this.list._37O(U,n),Ci.superClass._33o.apply(this,arguments)
}});var Cd=Ke.TreeTableView=function(n){var k=this,I=k._4o=new gr;k._35o(),k._98I(),k._5o(n),I.setDisplayName("Name"),I.setEditable(!0),I.setWidth(180),I.drawCell=en,I.getValue=Fo,k._39o.add(I),new ko(k)},en=function(a,k,l,Z,G,B,v,z,p){p._97I(a,k,l,G,B,v,z)},Fo=function(x,f,A){return A.getLabel(x)};qe("TreeTableView",h,{ms_ac:[Cn,pb,fi,"sortMode",Tp,il,oe,yq,"rootData","rootVisible",th,go,"sortColumn",ro,Gi,Br,jl,vb,Kn,Yl,us,si,Qm,jr,Od,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:Dl,_checkMode:J,_editable:!0,_batchEditable:!1,_indent:Tn,_rowHeight:Nr,_rowLineVisible:r.treeTableViewRowLineVisible,_rowLineColor:r.treeTableViewRowLineColor,_columnLineVisible:r.treeTableViewColumnLineVisible,_columnLineColor:r.treeTableViewColumnLineColor,_expandIcon:r.treeTableViewExpandIcon,_collapseIcon:r.treeTableViewCollapseIcon,_scrollBarColor:ql,_scrollBarSize:sp,_autoHideScrollBar:dd,_autoMakeVisible:lq,_selectBackground:r.treeTableViewSelectBackground,_labelColor:r.treeTableViewLabelColor,_labelSelectColor:r.treeTableViewLabelSelectColor,_labelFont:r.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}});var ko=function(r){Vp(ko,this,[r])};js(ko,Jj,{_34o:function(D,n){var b=this.list,G=b._4o,M=b._3Q(G),O=b.lp(D).x;if(M){var B=b._indent,o=M.startX+B*b.getLevel(n);if($l(b.getToggleIcon(n))&&O>=o&&o+B>=O)return b.toggle(n),void 0;if(b.isCellEditable(n,G)&&(o+=B,O>=o&&o+B>=O))return b.checkData(n),void 0}b._37O(n,D),b.setFocusData(n)},_33o:function(S,v){var V=this.list,g=V.lp(S).x;if($l(V.getToggleIcon(v))){var J=V._3Q(V._4o);if(J){var x=V._indent,O=J.startX+x*V.getLevel(v);if(g>=O&&O+x>=g)return V.toggle(v),void 0}}V._37O(v,S),ko.superClass._33o.apply(this,arguments)}});var gn=Ke.TableHeader=function(p){var u=this,R=u._view=Eq(1,u),o=u._39o=p.getColumnModel(),Q=u.iv;u.tv=u._tableView=p,u._60I=new Cq,u._canvas=Rk(R),R.style.background=r.tableHeaderBackground||"",R.style.height=af+dm,o.mm(Q,u),o.md(Q,u),o.mh(Q,u),p.mp(function(m){Yc[m.property]&&u.iv()},u),new lm(u),u.iv()};qe("TableHeader",h,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",Cn,fi,oe,"moveBackground","insertColor",Qm,jr,"resizable","movable"],_checkIcon:Xq,_movable:!0,_resizable:!0,_labelColor:r.tableHeaderLabelColor,_labelFont:r.tableHeaderLabelFont,_columnLineColor:r.tableHeaderColumnLineColor,_columnLineVisible:r.tableHeaderColumnLineVisible,_sortDescIcon:r.tableHeaderSortDescIcon,_sortAscIcon:r.tableHeaderSortAscIcon,_moveBackground:r.tableHeaderMoveBackground,_insertColor:r.tableHeaderInsertColor,_indent:Tn,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(v){return v.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(X){return X.getColor()||this._labelColor},getLabelAlign:function(f){return f._align},onPropertyChanged:function(){this.iv()},_5Q:function(A){this._61I=A,this.iv()},getLogicalPoint:function(v){return es(v,this._canvas,this.tv.tx())},validateImpl:function(){var v=this,K=v._canvas,S=v.getWidth(),E=v.getHeight(),l=v.tv,r=v._60I,o=v._61I,q=-l.tx(),w=0;(S!==K.clientWidth||E!==K.clientHeight)&&Er(K,S,E),r.clear(),v._39o._roots.each(function(i){if(i.isVisible()){var x=w+i.getWidth();q+S>=w&&x>=q&&r.add({column:i,startX:w}),w=x}});var s=Bb(K);if(Gl(s,-q,0,1),s.beginPath(),s.rect(q,0,S,E),s.clip(),s.clearRect(q,0,S,E),r.each(function(h){var O=h.column,n=h.startX,X=O.getWidth();X>0&&(s.save(),s.beginPath(),s.rect(n,0,X,E),s.clip(),o&&o.column===O||v.drawColumn(s,O,n,0,X,E),v._columnLineVisible&&Wl(s,n+X-1,0,1,E,v._columnLineColor),s.restore())}),o){var t=o.column,w=o.startX,U=o.position,x=t.getWidth();s.save(),s.beginPath(),s.rect(w,0,x,E),s.clip(),s.fillStyle=v._moveBackground,s.fill(),v.drawColumn(s,t,w,0,x,E),s.restore(),Tj(s,v._insertColor,U,0,E)}s.restore()},_6Q:function(I){var m=this.tv;return m._31o===I&&m.sm().getSelectionMode()===bk},drawColumn:function(j,K,L,g,Y,q){var w=this,X=w.tv,u=$l(K.getIcon()),l=w.getLabelAlign(K);if(w._6Q(K)){var z=$l(w._checkIcon);Mf(j,z,L+Y/2,g+q/2,K,w)}else{var M=w.getLabel(K),D=w.getLabelFont(K),n=w.getLabelColor(K),S=cf(D,M).width,i=u?w._indent:0;l===fh?(u&&Ck(j,u,Re,L,g,i,q),yc(j,M,D,n,L+i,g,Y,q,fh)):l===um?(u&&Ck(j,u,Re,L+Y-S-i,g,i,q),yc(j,M,D,n,L,g,Y,q,um)):(u&&Ck(j,u,Re,L+(Y-S-i)/2,g,i,q),yc(j,M,D,n,L+(Y-S+i)/2,g,0,q,fh))}if(K.isSortable()&&X.getSortColumn()===K&&(u=$l(K.getSortOrder()===sf?w._sortAscIcon:w._sortDescIcon))){var F=Sf(u,K)/2+2;Mf(j,u,l===um?L+F:L+Y-F,g+q/2,K,X)}}});var lm=function(j){var e=this;e.th=j,e.tv=j._tableView,e.addListeners()};js(lm,h,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(n){this.getView().style.cursor=n},handle_mousemove:function(P){if(!to){var t=this;delete t._29o,t.setCursor(oq);for(var X=t.th,W=X._60I,H=X.lp(P).x,u=W.size()-1;u>=0;u--){var C=W.get(u),f=C.column,b=C.startX+f.getWidth();if(X.isResizable()&&k(b-H)<=(s?10:3))return t._29o=C,t.setCursor(Dn),void 0;H>C.startX&&b>H&&(t._29o=C),(f.isClickable()||f.isSortable()||X.isMovable()||t.tv.getCheckColumn&&f===t.tv.getCheckColumn())&&H>C.startX&&b>H&&t.setCursor(oi)}}},handle_mousedown:function(n){this.handle_touchstart(n)},handle_touchstart:function(a){var D=this;pm(a),D.tv.endEditing(),D.handle_mousemove(a),D._29o&&(D.x=Ao(a).x,D.lx=D.th.lp(a).x,D.w=D._29o.column.getWidth(),Vk(D,a))},handleWindowMouseMove:function(D){this.handleWindowTouchMove(D)},handleWindowTouchMove:function(N){var u=this,I=u.th,f=u.getView().style.cursor,m=u._29o,c=Ao(N).x-u.x;if(u.resizing||u.moving||(f===Dn?u.resizing=1:I.isMovable()&&f===oi&&k(c)>2&&(u.moving=1)),u.resizing)m.column.setWidth(u.w+c);else if(u.moving){var X=u.lx+c;I._60I.each(function(l){var n=l.startX,Q=n+l.column.getWidth();if(X>=n&&Q>=X){var y={column:m.column,startX:m.startX+c,front:Q-X>X-n,insertColumn:l.column};y.position=y.front?n:Q,I._5Q(y)}})}},_16Q:function(X,Y){var Q=this,O=Q.tv,g=Q.th,N=g._checkIcon;if(g._6Q(X)){var f=$l(N),r=Q.lx,d=X.getWidth(),n=Sf(f,X);if(r>=Y+d/2-n&&Y+d/2+n>=r){g.setCheckIcon(N===Dd?Xq:Dd);var x=O.sm(),P=O._rows;return N===Dd?x.rs(P):x.ss(P),O.onCheckColumnClicked(X),!0}}return!1},handleWindowMouseUp:function(_){this.handleWindowTouchEnd(_)},handleWindowTouchEnd:function(Q){var b=this,f=b.tv,M=b.th,u=b._29o;if(b.moving){var R=M._61I;if(R&&R.insertColumn!==R.column){var x=R.column,w=f.getColumnModel()._roots,F=w.remove(x),o=w.indexOf(R.insertColumn);o>=0&&(R.front||o++,o<=w.size()&&(w.add(x,o),f.getColumnModel()._38I(x,F,o)))}M._5Q(J),delete b.moving}else if(!b.resizing&&u){x=u.column;var P=M.lp(Q).x,O=u.startX,m=!0;if(M.onColumnClicked){var E=M.onColumnClicked(x,Q,O);E===!1&&(m=!1)}if(m&&P>=O&&P<=O+x.getWidth()&&!b._16Q(x,O)){if(x.isSortable()){var r=f.getSortMode(),i=x.getSortOrder();r===Dl?f.getSortColumn()===x?(i===np&&f.setSortColumn(J),x.setSortOrder(i===sf?np:sf)):f.setSortColumn(x):"bistate"===r&&(f.getSortColumn()===x?x.setSortOrder(i===sf?np:sf):f.setSortColumn(x))}f.onColumnClicked(x,Q,O)}}b._29o=b.resizing=b.x=b.lx=b.w=J}}),Ke.TablePane=function(e){this.init(new gd(e))},qe("TablePane",h,{ms_v:1,_44o:1}),Ke.TreeTablePane=function(D){this.init(new Cd(D))},qe("TreeTablePane",h,{ms_v:1,_44o:1}),Ke.Toolbar=function(m){var n=this,q=n._view=Eq(1,n),u=q.style;u.background=r.toolbarBackground||"",u.height=Uk+dm,n._canvas=Rk(q),n._30o=new Cq,n._90I=new Cq,n.setItems(m||[]),q.handleGroupSelectedChanged=function(g){if(g.isSelected()){var y=g.getGroupId();null!=y&&n._items.forEach(function(p){var I=p.element;I&&I!==g&&I.setSelected&&I.getGroupId&&I.getGroupId()===y&&I.setSelected(!1)})}},new Uc(n)},qe("Toolbar",h,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[Qq,Cn,fi,pb,Od,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:r.toolbarLabelColor,_labelSelectColor:r.toolbarLabelSelectColor,_labelFont:r.toolbarLabelFont,_selectBackground:r.toolbarSelectBackground,_itemGap:r.toolbarItemGap,_separatorColor:r.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(c){var $=this.getItemInfoAt(c);return $?$.item.toolTip:J},getLabelColor:function(f){return f&&f.selected&&f.type!==Dd&&f.type!==bs?this._labelSelectColor:this._labelColor},onPropertyChanged:function(G){this.iv(),G.property===Qq&&this._items.forEach(function(K){qg(K)})},redraw:function(){this.iv()},addItem:function(P,n){var f=this._items;n==J?f.push(P):f.splice(n,0,P),this.fp(Qq,J,f)},removeItem:function($){if($)for(var o=this._items,y=0;y<o.length;y++)$===o[y]&&(o.splice(y,1),this.fp(Qq,J,o))},removeItemById:function(d){if(d!=J)for(var Y=this._items,k=0;k<Y.length;k++)if(d===Y[k].id){var B=Y.splice(k,1)[0];return this.fp(Qq,J,Y),B}},getItemById:function(Z){if(Z!=J)for(var R=this._items,M=0;M<R.length;M++){var O=R[M];if(Z===O.id)return O}},setItemVisible:function(z,q){var h=this.getItemById(z);h&&(h.visible=q)},getItemInfos:function(){return this._30o},getItemInfoAt:function(z){var H=this,K=0,E=H._30o,I=H.lp(z),g=I.x,$=I.y;if($>=0&&$<=H.getHeight())for(;K<E.size();K++){var e=E.get(K);if(e.startX<=g&&g<=e.endX)return e}return J},drawItem:function(b,z,N,j,X){if(z.visible===!1)return 0;if(jo(z.visible)&&!z.visible())return 0;var L=this,S=z.disabled;S&&(b.globalAlpha=Vi);var f=L.drawItemImpl(b,z,N,j,X),w=L._itemGap;return S&&(b.globalAlpha=1),this._currentItem!==z||"separator"===z||z.separator===!0||z.unfocusable||Uj(b,L._separatorColor,N-w/2,0,f+w,j),f},drawItemImpl:function($,C,P,q,z){var B=this,d=B._view,L=B._itemGap,H=q/2,w=C.type,f=C.element,e=C.label;se(f)&&(e=f,f=J);var Q,b=B.getLabelFont(C),Z=B.getLabelColor(C),D=C.selected,x=$l(C.icon),i=Sf(x,C),r=0,X=i+(e?cf(b,e).width:0);if("separator"===C||C.separator===!0)return Tj($,B._separatorColor,P,q/4,H),1;if(f){x&&Mf($,x,P+i/2,H,C,B),yc($,e,b,Z,P+i,0,0,q);var v=bf(f);z||B._90I.add(v),v.parentNode!==d&&tf(d,v),f.iv&&f.iv(),f.validate&&f.validate();var Y=v.getBoundingClientRect(),y=Y.width,S=v.style;return He(v),S.left=B.tx()+P+X+dm,S.top=(q-Y.height)/2+dm,X+y}return w===bs?Q=$l(D?ti:Ok):w===Dd&&(Q=$l(D?Dd:Xq)),Q?(r=Sf(Q,C),Mf($,Q,P+r/2,H,C,B),P+=r,X+=r):D&&Wl($,P-L/2,0,X+L,q,B.getSelectBackground(C)),x&&Mf($,x,P+i/2,H,C,B),yc($,e,b,Z,P+i,0,0,q),X},validateImpl:function(){var A=this,X=A._canvas,E=A.getWidth(),m=A.getHeight(),q=A._30o,B=A._items;Er(X,E,m);var $=Bb(X),U=A._itemGap,z=U/2;Gl($,A.tx(),0,1),$.clearRect(0,0,E,m);var _=A._90I;A._90I=new Cq,q.clear(),B.forEach(function(k){var p=A.drawItem($,k,z,m);q.add({item:k,startX:z,endX:z+p,width:p}),p&&(z+=p+U)}),_.each(function(U){A._90I.contains(U)||Aq(U)});var D=A._64I;A._64I=S(0,z),$.restore(),A._stickToRight?(A._65O=0,$=Bb(X),z=E-A._64I+U,Gl($,0,0,1),$.clearRect(0,0,E,m),q.clear(),B.forEach(function(x){var g=A.drawItem($,x,z,m,!0);q.add({item:x,startX:z,endX:z+g,width:g}),g&&(z+=g+U)}),$.restore()):A.tx(A.tx()),D!==A._64I&&A.onSumWidthChanged(D,A._64I)},onSumWidthChanged:function(){},handleClick:function(c,R){var q=this,i=c.type,z=c.action,X=c.groupId,P=c.selected;c.disabled||(X!=J?P||(c.selected=!0,this._items.forEach(function(I){I.groupId===X&&c!==I&&(I.selected=!1)}),z&&c.action(c,q,R)):i===Dd||"toggle"===i?(c.selected=!P,z&&c.action(c,q,R)):z&&c.action(c,q,R)),ns(),q.iv()}});var Uc=function(L){this.tb=L,this.addListeners()};js(Uc,h,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(u){this.handleScroll(u,10*(u.wheelDelta/40))},handle_DOMMouseScroll:function(I){this.handleScroll(I,10*-I.detail)},handleScroll:function(A,_){pm(A);var u=this.tb;u.isScrollable()&&!u._stickToRight&&(u.tx(u.tx()+_),$q())},handle_mousemove:function(l){var y=this;to||y.setItem(l)},handle_mouseout:function(k){var W=this;k.target===W.getView()?W.tb.setCurrentItem(J):W.handle_mousemove(k)},handle_mousedown:function(R){this.handle_mousemove(R),this.handle_touchstart(R)},handle_touchstart:function(G){var c=this,s=c.tb,K=G.target;Dp(G)&&(K===c.getView()||K===s._canvas)&&(pm(G),s.setFocus(G)&&(this.setItem(G,!0),(s.isScrollable()||c.info&&!c.info.item.disabled)&&(c.x=Ao(G).x,c.tx=s.tx(),Vk(c,G))))},handleWindowMouseMove:function(L){this.handleWindowTouchMove(L)},handleWindowTouchMove:function(Z){var d=this,f=d.tb;if(!f._stickToRight){var g=Ao(Z).x-d.x;!d._25o&&k(g)>2&&f.isScrollable()&&(d._25o=1),d._25o&&f.tx(d.tx+g)}},handleWindowMouseUp:function(L){this.handleWindowTouchEnd(L)},handleWindowTouchEnd:function(u){var d=this,X=d.tb,V=d.info,I=d.tb.getItemInfoAt(u);if(!d._25o&&V){var w=V.item;I&&I.item===w&&X.handleClick(w,u)}d._25o=d.x=d.tx=J,d.setItem()},setItem:function(d,I){var v=this,E=v.tb,$=v.info=d?E.getItemInfoAt(d):J,y=$?$.item:J;E.setCurrentItem(y),I&&y&&jo(y.onDown)&&y.onDown(d)}}),Ke.BorderPane=function(){this._view=Eq(1,this),this.iv()},qe("BorderPane",h,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(x,I){this._12o("leftView",x),I!=J&&this.setLeftWidth(I)},getRightView:function(){return this._rightView},setRightView:function(q,o){this._12o("rightView",q),o!=J&&this.setRightWidth(o)},getTopView:function(){return this._topView},setTopView:function(g,e){this._12o("topView",g),e!=J&&this.setTopHeight(e)},getBottomView:function(){return this._bottomView},setBottomView:function(a,p){this._12o("bottomView",a),p!=J&&this.setBottomHeight(p)},getCenterView:function(){return this._centerView},setCenterView:function(B){this._12o("centerView",B)},_12o:function(S,f){var N=this,O="_"+S,M=N._view,V=N[O];V!==f&&(V&&(V.getView?Aq(V.getView()):Aq(V)),N[O]=f,f&&(f.getView?tf(M,f.getView(),1):tf(M,f,1)),N.fp(S,V,f))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var C=this,F=C._topView,L=C._bottomView,E=C._leftView,P=C._rightView,Z=C._centerView,U=C.getWidth(),q=C.getHeight(),v=0,W=0,$=U,g=q,m=0,d=0,K=0,H=0;F&&(m=C._topHeight==J?vq(F):C._topHeight,W=m),L&&(d=C._bottomHeight==J?vq(L):C._bottomHeight,g=q-d),E&&(K=C._leftWidth==J?Ve(E):C._leftWidth,v=K),P&&(H=C._rightWidth==J?Ve(P):C._rightWidth,$=U-H);var A=S(0,$-v),V=S(0,g-W);F&&zq(F,0,0,U,m),L&&zq(L,0,g,U,d),E&&zq(E,0,W,K,V),P&&zq(P,$,W,H,V),Z&&zq(Z,v,W,A,V)}})}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
