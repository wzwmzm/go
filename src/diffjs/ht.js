n._movableFunc?n._movableFunc(f):!0:!1},isSizeEditable:function(t){return Bf(t)?this._sizeEditableFunc?this._sizeEditableFunc(t):!0:!1},isRotationEditable:function(E){return Bf(E)&&E.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(E):!0:!1},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(b){this.setZoom(Ro,b)},zoomOut:function(E){this.setZoom(1/Ro,E)},setZoom:function(d,D){if(1!==d){var $=this;if($._ortho)return $.setOrthoZoom(d,D),void 0;$._14o&&$._14o.stop(!0);var e=1/d,z=$._eye,I=$._center,o=I[0]+(z[0]-I[0])*e-z[0],l=I[1]+(z[1]-I[1])*e-z[1],C=I[2]+(z[2]-I[2])*e-z[2];if(!(ti(z,I)<$._moveStep&&1>e)){if(D=Cd(D)){var Y=ik(z);return D.action=function(Z){$.fi({kind:$._zooming?"betweenZoom":"beginZoom"}),$._zooming=1,z[0]=Y[0]+o*Z,z[1]=Y[1]+l*Z,z[2]=Y[2]+C*Z,$.fp(An,p,z)},D._37o=function(){delete $._14o,delete $._zooming,$.fi({kind:"endZoom"}),$.onZoomEnded()},$._14o=ne(D)}z[0]+=o,z[1]+=l,z[2]+=C,$.fp(An,p,z)}}},setOrthoZoom:function(g,A){if(1!==g){var P=this;P._14o&&P._14o.stop(!0);var i=P._orthoWidth,c=i/g-i;if(!(i<P._moveStep&&g>1))return(A=Cd(A))?(A.action=function(F){P.fi({kind:P._zooming?"betweenZoom":"beginZoom"}),P._zooming=1,P.setOrthoWidth(i+c*F)},A._37o=function(){delete P._14o,delete P._zooming,P.fi({kind:"endZoom"}),P.onZoomEnded()},P._14o=ne(A)):(P.setOrthoWidth(i/g),void 0)}},getPositionInfo:function(d){var E=this,j=E._eye,$=E._center,p=E.getAspect(),P=d?xb(fg($,j,!0),fg(d,j)):ti(j,$);if(E._ortho){var Z=E._orthoWidth;return{length:P,height:Z/p,width:Z}}var S=2*t(E._fovy/2)*P;return{length:P,height:S,width:S*p}},getCenterInfo:function(){var $=this;return $._81O||($._81O=$.getPositionInfo()),ik($._81O)},rotate:function(C,b,R,q){var x=this;if(C||b){q==p&&(q=x._firstPersonMode),x._88O&&x._88O.stop(!0);var D=x._center,y=x._eye,J=x.getCenterInfo().length,e=q?D:y,n=q?y:D,O=fg(e,n),w=z(O[0],O[2]),i=z(M(O[0]*O[0]+O[2]*O[2]),O[1]),P=q?Qc:An;return q&&(b=-b),(R=Cd(R))?(R.action=function(c){x.fi({kind:x._rotating?"betweenRotate":"beginRotate"}),x._rotating=1;var _=w+C*c,R=i+b*c;R=em(R),O[0]=J*S(R)*S(_),O[1]=J*X(R),O[2]=J*S(R)*X(_),e[0]=n[0]+O[0],e[1]=n[1]+O[1],e[2]=n[2]+O[2],x.fp(P,p,e)},R._37o=function(){delete x._88O,delete x._rotating,x.fi({kind:"endRotate"}),x.onRotateEnded()},x._88O=ne(R)):(w+=C,i+=b,i=em(i),O[0]=J*S(i)*S(w),O[1]=J*X(i),O[2]=J*S(i)*X(w),e[0]=n[0]+O[0],e[1]=n[1]+O[1],e[2]=n[2]+O[2],x.fp(P,p,e),void 0)}},pan:function(s,w,y,i){if(s||w){var L=this;i==p&&(i=L._firstPersonMode),L._89O&&L._89O.stop(!0);var T=Sr(L),j=[T[0]*s,T[4]*s,T[8]*s],S=[T[1]*w,T[5]*w,T[9]*w],X=j[0]+S[0],q=j[1]+S[1],B=j[2]+S[2],n=L._center,U=L._eye;if(i){var J=lj(L.getBoundaries(),U[0],U[2],U[0]+X,U[2]+B,M(X*X+B*B));X=J[0],B=J[1]}if(y=Cd(y)){var x=ik(U),C=ik(n);return y.action=function(l){L.fi({kind:L._panning?"betweenPan":"beginPan"}),L._panning=1,n[0]=C[0]+X*l,n[1]=C[1]+q*l,n[2]=C[2]+B*l,U[0]=x[0]+X*l,U[1]=x[1]+q*l,U[2]=x[2]+B*l,L.fp(An,p,U),L.fp(Qc,p,n)},y._37o=function(){delete L._89O,delete L._panning,L.fi({kind:"endPan"}),L.onPanEnded()},L._89O=ne(y)}n[0]+=X,n[1]+=q,n[2]+=B,U[0]+=X,U[1]+=q,U[2]+=B,L.fp(An,p,U),L.fp(Qc,p,n)}},walk:function(H,I,O){if(H){var R=this;O==p&&(O=R._firstPersonMode),R._90O&&R._90O.stop(!0);var M=R._center,l=R._eye,k=fg(M,l,!0);if(O){var L=lj(R.getBoundaries(),l[0],l[2],l[0]+k[0]*H,l[2]+k[2]*H,B(H));if(H=ti(L),!H)return;k=[L[0]/H,0,L[1]/H]}if(I=Cd(I)){var w=ik(l),d=ik(M);return I.action=function(_){R.fi({kind:R._walking?"betweenWalk":"beginWalk"}),R._walking=1;var F=H*_;l[0]=w[0]+k[0]*F,l[1]=w[1]+k[1]*F,l[2]=w[2]+k[2]*F,M[0]=d[0]+k[0]*F,M[1]=d[1]+k[1]*F,M[2]=d[2]+k[2]*F,R.fp(An,p,l),R.fp(Qc,p,M)},I._37o=function(){delete R._90O,delete R._walking,R.fi({kind:"endWalk"}),R.onWalkEnded()},R._90O=ne(I)}l[0]+=k[0]*H,l[1]+=k[1]*H,l[2]+=k[2]*H,M[0]+=k[0]*H,M[1]+=k[1]*H,M[2]+=k[2]*H,R.fp(An,p,l),R.fp(Qc,p,M)}},handleScroll:function(y,d){y.preventDefault();var p=this,s=p._moveStep;p.isFirstPersonMode()?p.isPannable()&&p.pan(0,d>0?s:-s):p.isZoomable()&&p.setZoom(0>d?1/di:di)},handlePinch:function(s,d){this.isZoomable()&&this.setZoom(d>s?1/Lm:Lm)},reset:function(){this.setCenter(U.graph3dViewCenter),this.setEye(U.graph3dViewEye),this.setUp(U.graph3dViewUp)},moveSelection:function(g,H,D){var J=this;J.dm().beginTransaction(),Fq(this.sm().toSelection(this.isMovable,this),g,H,D),J.dm().endTransaction()},getMoveMode:function(P,j){var u=j.s("3d.move.mode");if(u)return u;var K="88",V="89",l="90";return Ar(P)||qg[K]&&qg[V]&&qg[l]?"xyz":qg[K]&&qg[V]?"xy":qg[K]&&qg[l]?"xz":qg[V]&&qg[l]?"yz":qg[K]?"x":qg[V]?"y":qg[l]?"z":"xz"},handleTick:function(){var z=this,F=!1,J=z._moveStep,b=J,U=!1,d=!0,V=z._rotateStep*(d?-1:1);if(z.isWalkable()||(b=0),z.isPannable()||(J=0),z.isRotatable()||(V=0),z._32Q){var A=(Io()-z._32Q)/50;b*=A,J*=A,V*=A}z._31Q&&(bq(z._31Q),delete z._31Q,delete z._32Q),lm()&&(F=!0,z.pan(-J,0,U,d)),je()&&(F=!0,z.pan(J,0,U,d)),Xf()&&(F=!0,Ar()?z.pan(0,J,U,d):z.walk(b,U,d)),bs()&&(F=!0,Ar()?z.pan(0,-J,U,d):z.walk(-b,U,d)),hb()&&(F=!0,z.rotate(-V,0,U,d)),mq()&&(F=!0,z.rotate(V,0,U,d)),Xk()&&(F=!0,z.rotate(0,-V/2,U,d)),gd()&&(F=!0,z.rotate(0,V/2,U,d)),F&&(z._32Q=Io(),z._31Q=tf(z.handleTick,z))},handleKeyDown:function(z){var N=this;!ok(z)&&ci[z.keyCode]?N.handleTick():Fm(z)?N.selectAll():po(z)?N.handleDelete(z):Le(z)&&this.isResettable()&&N.reset()},checkDoubleClickOnNote:function(Z,X,u){var B=this;if(u===Ir){if(X.s("note.toggleable"))return X.s(Hj,!X.s(Hj)),B.fi({kind:"toggleNote",event:Z,data:X,part:u}),!0}else if(u===kb&&X.s("note2.toggleable"))return X.s(kg,!X.s(kg)),B.fi({kind:"toggleNote2",event:Z,data:X,part:u}),!0;return!1},checkDoubleClickOnRotation:function(s,k,r){return r===ac?(k.setRotationX(0),!0):r===sc?(k.setRotationY(0),!0):r===$c?(k.setRotationZ(0),!0):!1},onRotateEnded:function(){},onWalkEnded:function(){},toViewPosition:function(C){var G=this,i=G.getWidth()/2,k=G.getHeight()/2,j=G._18Q;return j&&j._wh===i/k||(j=cf(G),G._18Q=jg(j,j,Sr(G)),G._18Q._wh!==i/k),C=en([C[0],C[1],C[2],1],j),{x:i+i*C[0]/C[3],y:k-k*C[1]/C[3]}},getHitPosition:function(S,D,X){var c=this,T=c.getWidth(),$=c.getHeight(),h=S.target?c.lp(S):S,k=h.x-T/2,z=h.y-$/2,G=c.getCenterInfo(),v=Sr(c);D=D?D:[0,0,0],X=X?X:[0,1,0],k=k/T*G.width,z=-1*z/$*G.height;var H=[v[0]*k,v[4]*k,v[8]*k],A=[v[1]*z,v[5]*z,v[9]*z],y=[H[0]+A[0],H[1]+A[1],H[2]+A[2]],Q=c.getCenter(),j=Zb(c,D,X,[y[0]+Q[0],y[1]+Q[1],y[2]+Q[2]]);return j?j:[0,0,0]},getLineLength:function(w){this.validate();var p=this.getData3dUI(w);if(p&&p.getCache){var x=p.getCache();if(x)return x[x.length-1].length}return 0},getLineOffset:function(g,q){var f=this.getData3dUI(g);if(f&&f.getCache){var b=f.getCache();if(b)return zk(b,q)}return p},isLabelVisible:function(){return!0},isNoteVisible:function(){return!0}});var ae=Wf.Interactor=function(q){this.gv=q};qp("Interactor",h,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()}});var Lq=Wf.DefaultInteractor=function(S){td(Lq,this,[S])};qp("DefaultInteractor",ae,{handle_contextmenu:function(B){gj(B)},handle_mousewheel:function(p){this.gv.handleScroll(p,p.wheelDelta/40)},handle_DOMMouseScroll:function(a){2===a.axis&&this.gv.handleScroll(a,-a.detail)},handle_keydown:function(K){this.gv.handleKeyDown(K)},handle_mousedown:function(M){this.handle_touchstart(M)},handle_touchstart:function(l){gj(l);var N=this,C=N.gv,Q=xm(l),T=C.getDataInfoAt(l),m=T?T.data:p,U=T?T.part:p,A=C.sm(),M=Ae(l),G=cp(l);C.setFocus(l)&&(N._62O=p,N._57I=p,m?ok(l)?A.co(m)?A.rs(m):A.as(m):A.co(m)||A.ss(m):Q&&(ok(l)?C.isRectSelectable()&&(N._62O=mp):N._57I=kq(l)),N._31Q&&(bq(N._31Q),delete N._31Q,delete N._32Q),N._62O||(C.isFirstPersonMode()&&(Ar(l)||G>2?N._62O="pan":C.isMouseRoamable()||_?(N._62O="roaming",N.foward=M&&xm(l),N._32Q=Io(),N._31Q=tf(N.tick,N)):Q||(N._62O="roaming")),N._62O||(Q&&M&&Ec[U]?(N._62O=U,N.p3=m.p3()):Q&&M&&Bf(m)&&C.isSelected(m)&&C.isMovable(m)?(N._62O="move",N.p3=m.p3(),N.movedata=m):_&&(G>2?N._62O="pan":2===G&&(N.dist=Rp(l),N._62O="pinch")))),N.point=C.lp(l),Kc(N,l),dl(l)?C.handleDoubleClick(l,m,U):C.handleClick(l,m,U))},tick:function(){var g=this,A=g.gv,q=A._moveStep;g.point&&A.isWalkable()&&(g._32Q&&(q*=(Io()-g._32Q)/50),A.walk(g.foward?q:-q),g._32Q=Io(),g._31Q=tf(g.tick,g))},handle_mouseup:function(x){this.handle_touchend(x)},handle_touchend:function(H){var N=this._57I;N&&(ti(N,kq(H))<=1&&this.gv.sm().cs(),this._57I=p)},handleWindowMouseMove:function(o){this.handleWindowTouchMove(o)},handleWindowTouchMove:function(H){var E,j,v=this,Z=v.gv,N=v._62O,m=v.point,l=Z.dm(),n=Z.lp(H),d=n.x-m.x,h=n.y-m.y,g=-x*d/Z.getWidth(),a=-x*h/Z.getHeight();if("roaming"===N)v.rotate(H,g/2,a/2);else if(N===ac||N===sc||N===$c)Z._86O||l.beginTransaction(),Z.fi({kind:Z._86O?"betweenEditRotation":"beginEditRotation",event:H}),Z._86O=1,Z.sm().each(function(c){if(Bf(c)&&Z.isRotationEditable(c)){var J=B(g)>B(a)?g:a;N===ac?c.setRotationX(c.getRotationX()+J):N===sc?c.setRotationY(c.getRotationY()+J):N===$c&&c.setRotationZ(c.getRotationZ()+J)}});else if("move"===N||Ec[N]){N===eh||N===Ph||N===gc?(Z._87O||l.beginTransaction(),Z.fi({kind:Z._87O?"betweenEditSize":"beginEditSize",event:H}),Z._87O=1):(Z._moving||l.beginTransaction(),Z.fi({kind:Z._moving?"betweenMove":"beginMove",event:H}),Z._moving=1);var _,D=v.p3,O=Z.getPositionInfo(D),J=Sr(Z);_=N===Gk?"x":N===Nk?"y":N===ol?"z":N===eh?"sx":N===Ph?"sy":N===gc?"sz":Z.getMoveMode(H,v.movedata),d=d/Z.getWidth()*O.width,h=-1*h/Z.getHeight()*O.height;var R,q,w=[J[0]*d,J[4]*d,J[8]*d],t=[J[1]*h,J[5]*h,J[9]*h],S=w[0]+t[0],A=w[1]+t[1],U=w[2]+t[2],F=[D[0]+S,D[1]+A,D[2]+U],$=fg(Z.getEye(),F,!0);if("xyz"===_?(R=F,Z.moveSelection(S,A,U)):"xz"===_?(R=Zb(Z,D,[0,1,0],F),R&&Z.moveSelection(R[0]-D[0],0,R[2]-D[2])):"xy"===_?(R=Zb(Z,D,[0,0,1],F),R&&Z.moveSelection(R[0]-D[0],R[1]-D[1],0)):"yz"===_?(R=Zb(Z,D,[1,0,0],F),R&&Z.moveSelection(0,R[1]-D[1],R[2]-D[2])):"x"===_||"sx"===_?($[0]=0,R=Zb(Z,D,$,F),R&&(q=R[0]-D[0],"x"===_?Z.moveSelection(q,0,0):Z.sm().each(function(t){Bf(t)&&Z.isSizeEditable(t)&&(E=Q(Sd,t.getWidth()+q),j=E/t.getWidth(),t.setWidth(E),Ar(H)&&(t.setHeight(t.getHeight()*j),t.setTall(t.getTall()*j)))}))):"y"===_||"sy"===_?($[1]=0,R=Zb(Z,D,$,F),R&&(q=R[1]-D[1],"y"===_?Z.moveSelection(0,q,0):Z.sm().each(function(n){Bf(n)&&Z.isSizeEditable(n)&&(E=Q(Sd,n.getTall()+q),j=E/n.getTall(),n.setTall(E),Ar(H)&&(n.setHeight(n.getHeight()*j),n.setWidth(n.getWidth()*j)))}))):("z"===_||"sz"===_)&&($[2]=0,R=Zb(Z,D,$,F),R&&(q=R[2]-D[2],"z"===_?Z.moveSelection(0,0,q):Z.sm().each(function(n){Bf(n)&&Z.isSizeEditable(n)&&(E=Q(Sd,n.getHeight()+q),j=E/n.getHeight(),n.setHeight(E),Ar(H)&&(n.setTall(n.getTall()*j),n.setWidth(n.getWidth()*j)))}))),!R)return;v.p3=R}else if(N===mp){var C=v.div;C||(C=v.div=yb(),rj(v.getView(),C),C.op=m,C.style.background=Z.getRectSelectBackground()),Z.fi({kind:Z._rectSelecting?"betweenRectSelect":"beginRectSelect",event:H}),Z._rectSelecting=1,C.rect=Ui(C.op,n),Eb(C,C.rect)}else if("pinch"===N&&2===cp(H)){Z.fi({kind:Z._pinching?"betweenPinch":"beginPinch",event:H}),Z._pinching=1;var q=Rp(H);Z.handlePinch(q,v.dist),v.dist=q}else"pan"===N||Ar(H)?v.pan(H,d,h):Z.isFirstPersonMode()||(xm(H)?v.rotate(H,g,a):(v.pan(H,d,0),Z.isWalkable()&&(Z.fi({kind:Z._walking?"betweenWalk":"beginWalk",event:H}),Z._walking=1,Z.walk(h/Z.getHeight()*Z.getCenterInfo().height))));v.point=n},pan:function(R,q,B){var e=this.gv;if(e.isPannable()){var O=e.getCenterInfo(),v=q/e.getWidth()*O.width,h=-1*B/e.getHeight()*O.height;e.fi({kind:e._panning?"betweenPan":"beginPan",event:R}),e._panning=1,e.pan(-v,-h)}},rotate:function(M,U,P){var o=this.gv;o.isRotatable()&&(o.fi({kind:o._rotating?"betweenRotate":"beginRotate",event:M}),o._rotating=1,o.rotate(U,P))},handleWindowMouseUp:function(q){this.handleWindowTouchEnd(q)},handleWindowTouchEnd:function(g){var $=this,G=$.gv,c=G.dm(),J=$.div;if(J){var m=G.getDatasInRect(J.rect);if(!m.isEmpty()){var s=G.sm(),D=s.toSelection();m.each(function(W){s.co(W)?D.remove(W):D.add(W)}),s.ss(D)}_k(J)}G._moving&&(delete G._moving,G.fi({kind:"endMove",event:g}),G.onMoveEnded(),c.endTransaction()),G._panning&&(delete G._panning,G.fi({kind:"endPan",event:g}),G.onPanEnded()),G._rotating&&(delete G._rotating,G.fi({kind:"endRotate",event:g}),G.onRotateEnded()),G._86O&&(delete G._86O,G.fi({kind:"endEditRotation",event:g}),c.endTransaction()),G._87O&&(delete G._87O,G.fi({kind:"endEditSize",event:g}),c.endTransaction()),G._pinching&&(delete G._pinching,G.fi({kind:"endPinch",event:g}),G.onPinchEnded()),G._rectSelecting&&(delete G._rectSelecting,G.fi({kind:"endRectSelect",event:g}),G.onRectSelectEnded()),G._walking&&(delete G._walking,G.fi({kind:"endWalk",event:g}),G.onWalkEnded()),$.dist=$.point=$._62O=$.p3=$.movedata=$.div=$._57I=$._32Q=$._31Q=$.foward=p}});var oo=function(z){this.gv=z};bd(oo,h,{_iv:!0,iv:function(){this._iv=!0},face:function(y,X){var t=this,H=t.gv.getGL();if(!H||!Bf(y))return p;var J=X.x,V=X.width,E=X.height,D=t.height-X.y-E,$=Z(V/2),U=new Uint8Array(4*V*E),S=0;for(t.iv(),t.validate(y),xp(H,t.frame),H.readPixels(J,D,V,E,H.RGBA,H.UNSIGNED_BYTE,U),xp(H,p),t.iv();$>=S;S++)for(var z=$-S,I=$+S,g=z;I>=g;g++)for(var q=z;I>=q;q++)if(g===z||g===I||q===z||q===I){var i=Dp.m[U[4*(g*V+q)]];if(i)return i}},get:function(t,m){this.validate();var V=this,c=V.gv.getGL();if(!c)return p;var o,n,T=t.x,C=t.width,S=t.height,w=V.height-t.y-S,e=Z(C/2),k=new Uint8Array(4*C*S),F=0,H=k.length,f=m?p:new uh,l=m?p:{};if(xp(c,V.frame),c.readPixels(T,w,C,S,c.RGBA,c.UNSIGNED_BYTE,k),xp(c,p),m){for(;e>=F;F++)for(var O=e-F,K=e+F,s=O;K>=s;s++)for(var v=O;K>=v;v++)if((s===O||s===K||v===O||v===K)&&(o=V.info(k,4*(s*C+v))))return o}else for(;H>F;F+=4)o=V.info(k,F),o&&(n=o.data,l[n._id]||(f.add(n),l[n._id]=n));return f},info:function(Y,J){return this.colorMap[(Y[J]<<16)+(Y[J+1]<<8)+Y[J+2]+((127&Y[J+3])<<24)]},validate:function(A){var C=this,U=C.gv,i=U.getGL();if(i){var q=U.getWidth(),e=U.getHeight(),g=i.RGBA,w=i.TEXTURE_2D,R=i.RENDERBUFFER,M=i.FRAMEBUFFER;C.texture||(C.texture=Hr(i),C.render=i.createRenderbuffer(),C.frame=i.createFramebuffer()),(C.width!==q||C.height!==e)&&(yk(i,C.texture),i.texImage2D(w,0,g,q,e,0,g,i.UNSIGNED_BYTE,p),tr(i,i.TEXTURE_MIN_FILTER,i.LINEAR),i.bindRenderbuffer(R,C.render),i.renderbufferStorage(R,i.DEPTH_COMPONENT16,q,e),xp(i,C.frame),i.framebufferTexture2D(M,i.COLOR_ATTACHMENT0,w,C.texture,0),i.framebufferRenderbuffer(M,i.DEPTH_ATTACHMENT,R,C.render),yk(i,p),i.bindRenderbuffer(R,p),xp(i,p),C.width=q,C.height=e),C._iv&&(C._iv=!1,xp(i,C.frame),U._42(A||(C.colorMap={}),1),xp(i,p))}}});var _j=function(g){this.gv=g};bd(_j,h,{gap:0,size:0,_42:function(B,t){var w=this,n=w.gv,F=n._gridGap,C=n._gridSize;if(n._gridVisible){if(w.gap!==F||w.size!==C){for(var l=[],j=n._gridSize/2,U=F*j,y=0;2*j+1>y;y++){var N=6*y,X=6*(2*j+1)+N;l[N]=-U,l[N+1]=0,l[N+2]=-U+y*F,l[N+3]=U,l[N+4]=0,l[N+5]=-U+y*F,l[X]=-U+y*F,l[X+1]=0,l[X+2]=-U,l[X+3]=-U+y*F,l[X+4]=0,l[X+5]=U}w.vs=new Oe(l),w.gap=F,w.size=C}Wj(n),Mp(B,t),Fc(B),$l(B,t,1,n._gridColor,n._buffer.vs,w.vs),yj(B,0,w.vs.length/3,B.LINES),kr(B),qh(B,t)}else w.vs=w.gap=w.size=p}});var Mc=function(R){this.gv=R};bd(Mc,h,{_42:function(m,y){var a=this.gv,c=a._buffer.vs,P=a._axisXColor,R=a._axisYColor,J=a._axisZColor,H=a._originAxisVisible,L=a._centerAxisVisible;if(H||L){var K=I?m.TRIANGLES:m.TRIANGLE_FAN,s=m.LINES;if(Wj(a),Mp(m,y),Fc(m),H){var f=a.getCenterInfo(),w=j(f.width,f.height)/5,X=.8*w,U=.05*w;$l(m,y,1.5,P,c,new Oe([0,0,0,w,0,0,X,U,0,X,0,U,X,-U,0,X,0,-U,X,U,0,0,0,0,0,w,0,U,X,0,0,X,U,-U,X,0,0,X,-U,U,X,0,0,0,0,0,0,w,U,0,X,0,U,X,-U,0,X,0,-U,X,U,0,X])),yj(m,0,2,s),yj(m,1,6,K),$l(m,y,p,R),yj(m,7,2,s),yj(m,8,6,K),$l(m,y,p,J),yj(m,14,2,s),yj(m,15,6,K)}if(L){var n=a._center,g=n[0],x=n[1],C=n[2],f=a.getPositionInfo(n);w=j(f.width,f.height)/20,$l(m,y,1.5,P,c,new Oe([g,x,C,g+w,x,C,g,x,C,g,x+w,C,g,x,C,g,x,C+w])),yj(m,0,2,s),$l(m,y,p,R),yj(m,2,2,s),$l(m,y,p,J),yj(m,4,2,s)}kr(m),qh(m,y)}}});var so=function(U){this.gv=U},Gk="edit_tx",Nk="edit_ty",ol="edit_tz",ac="edit_rx",sc="edit_ry",$c="edit_rz",eh="edit_sx",Ph="edit_sy",gc="edit_sz",Ec={};Ec[Gk]=1,Ec[Nk]=1,Ec[ol]=1,Ec[ac]=1,Ec[sc]=1,Ec[$c]=1,Ec[eh]=1,Ec[Ph]=1,Ec[gc]=1,bd(so,h,{_42:function(t,V,E){var Z=this,M=Z.gv,m=M.sm().ld();if(M.isEditable(m)&&!M.isEditHelperDisabled()&&Bf(m)&&(!M.isFirstPersonMode()||!M.isMouseRoamable()&&!_)){Wj(M);var c,R,b=M.isMovable(m),Q=M.isRotationEditable(m),h=M.isSizeEditable(m),J=M._axisXColor,P=M._axisYColor,l=M._axisZColor,i=M._editSizeColor,v=M.getCenterInfo(),Y=j(v.width,v.height)/10,C=Y/(E?5:10),g=.7*Y,D=.4*g,U=m.p3(),F=U[0],L=U[1],$=U[2];c=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],b&&Z._17O(t,V,m,E,Gk,J,c,[F,L-C,$,F+g,L-C,$,F+g,L,$,F+g,L,$,F,L,$,F,L-C,$,F,L-C,$+C,F+g,L-C,$+C,F+g,L-C,$,F+g,L-C,$,F,L-C,$,F,L-C,$+C]),R=F+g,h&&Z._17O(t,V,m,E,eh,i,c,[R,L-C,$,R+D,L-C,$,R+D,L,$,R+D,L,$,R,L,$,R,L-C,$,R,L-C,$+C,R+D,L-C,$+C,R+D,L-C,$,R+D,L-C,$,R,L-C,$,R,L-C,$+C]),R+=D,Q&&Z._17O(t,V,m,E,ac,J,c,[R,L-C,$,R+D,L-C,$,R+D,L,$,R+D,L,$,R,L,$,R,L-C,$,R,L-C,$+C,R+D,L-C,$+C,R+D,L-C,$,R+D,L-C,$,R,L-C,$,R,L-C,$+C]),c=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],b&&Z._17O(t,V,m,E,Nk,P,c,[F,L,$,F,L+g,$,F-C,L+g,$,F-C,L+g,$,F-C,L,$,F,L,$,F,L,$,F,L,$-C,F,L+g,$-C,F,L+g,$-C,F,L+g,$,F,L,$]),R=L+g,h&&Z._17O(t,V,m,E,Ph,i,c,[F,R,$,F,R+D,$,F-C,R+D,$,F-C,R+D,$,F-C,R,$,F,R,$,F,R,$,F,R,$-C,F,R+D,$-C,F,R+D,$-C,F,R+D,$,F,R,$]),R+=D,Q&&Z._17O(t,V,m,E,sc,P,c,[F,R,$,F,R+D,$,F-C,R+D,$,F-C,R+D,$,F-C,R,$,F,R,$,F,R,$,F,R,$-C,F,R+D,$-C,F,R+D,$-C,F,R+D,$,F,R,$]),c=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],b&&Z._17O(t,V,m,E,ol,l,c,[F,L,$,F,L,$+g,F,L-C,$+g,F,L-C,$+g,F,L-C,$,F,L,$,F,L-C,$,F-C,L-C,$,F-C,L-C,$+g,F-C,L-C,$+g,F,L-C,$+g,F,L-C,$]),R=$+g,h&&Z._17O(t,V,m,E,gc,i,c,[F,L,R,F,L,R+D,F,L-C,R+D,F,L-C,R+D,F,L-C,R,F,L,R,F,L-C,R,F-C,L-C,R,F-C,L-C,R+D,F-C,L-C,R+D,F,L-C,R+D,F,L-C,R]),R+=D,Q&&Z._17O(t,V,m,E,$c,l,c,[F,L,R,F,L,R+D,F,L-C,R+D,F,L-C,R+D,F,L-C,R,F,L,R,F,L-C,R,F-C,L-C,R,F-C,L-C,R+D,F-C,L-C,R+D,F,L-C,R+D,F,L-C,R])}},_17O:function(e,g,S,q,i,E,P,M){var x=this.gv._buffer;ge(e,g,q,!0,S,i),cg(e,g,p,!0,p,!0,p,!1),gp(e,g.uDiffuse,E),ls(e,x.vs,new Oe(M),g.aPosition),ls(e,x.ns,new Oe(P),g.aNormal),Fc(e),yj(e,0,12),kr(e),ul(e,g)}});var ah=function(y,u){this.gv=y,this.s=function(B,m,t){return m==p&&(m=t),m==p?u.getStyle(B):$n(m,u,y)},this.data=u};bd(ah,h,{I3d:!0,ms_icons:1,_iv:!0,iv:function(){this._iv=!0},_42:function(k,L,h,I){var m=this,y=m.data;if(!(y instanceof Zl)){var G,d,v,W,P,Z,D,A=m.gv,T=y._id,E=m.s("shape3d.alwaysOnTop")?null:m.s("batch"),l=A._batchIndexMap,e=A._batchModelMap,$=A.isSelectable(y),M=A.getBrightness(y),b=M!=p&&1!==M;if(m.needValidate(k)){if(v=Ee(l,e,y,E),m.validate(v,E?pe[E]||Vh:p),v&&(W=l[T],P=W.size=v.vs.length/3-W.begin,D=v.rs))for(M=b?M:1,Z=0;P>Z;Z++)D.push(M);if(Bf(y)){var N=A.getWireframeGeometry(y);if(N)Yb(A,y,N);else{var j=A.getWireframe(y);j&&Yb(A,y,j)}}m.labelInfo=m.label2Info=m.noteInfo=m.note2Info=m._38o=p,m._24O(Ql,"getLabel"),m._24O(Mn,"getLabel2"),m._26O(Ir,"getNote"),m._26O(kb,"getNote2"),m._15O(),m._iv=!1}b&&gp(k,L.uBrightness,M),gp(k,L.uAlphaTest,m.s("alphaTest")),d=ge(k,L,h,$,y,qr),d&&(Pg(d,l[T],e),Pg(d,A._polylineIndexMap[T],A._polylineModelMap),Pg(d,A._wireframeIndexMap[T],A._wireframeModelMap)),l[T]||m._80o(k,L,I),A.isLabelVisible(y)&&((G=m.labelInfo)&&(ge(k,L,h,$,y,Ql),m._28O(G,Ql,I)),(G=m.label2Info)&&(ge(k,L,h,$,y,Mn),m._28O(G,Mn,I))),A.isNoteVisible(y)&&((G=m.noteInfo)&&(ge(k,L,h,$,y,Ir),m._29O(G,Ir,I)),(G=m.note2Info)&&(ge(k,L,h,$,y,kb),m._29O(G,kb,I))),(G=m._38o)&&m._99O(k,L,G,h,$,I),b&&gp(k,L.uBrightness,1)}},needValidate:function(){return this._iv},validate:function(){},_16O:function(){return Ak},_80o:function(){},dispose:function(){},_calcAnchorMat:function(n){if(n.hasOwnProperty("_anchor")||n.hasOwnProperty("_anchorElevation")){var Z=n.getAnchor3d(),r={x:Z.x-.5,y:Z.y-.5,z:Z.z-.5},C=Cm();return xc(C,[-r.x,-r.y,-r.z]),C}},getBodyColor:function(f){var z=this.data,P=this.gv.getBodyColor(z);return P?P:f?z.getStyle(f):p},_24O:function(b,C){var y=this,E=y.data,R=y.gv,W=y.s,Z=R[C](E);if(Z!=p){var O=W(b+".scale"),e=W(b+".max"),Y=y[b+"Info"]={label:Z,textureScale:W(b+".texture.scale"),color:R[C+"Color"](E),font:W(b+".font"),align:W(b+".align"),background:R[C+"Background"](E)},r=Y.rect=bk(Y,Z);e>0&&e<r.width&&(Y.labelWidth=r.width,r.width=e),r.x=r.y=0,r.width*=O,r.height*=O,Y.mat=y._16O(W(b+".autorotate"),W(b+".position"),r,W(b+".face"),W(b+".t3"),W(b+".r3"),W(b+".rotationMode"));var G=r.width/2,D=r.height/2;Y.vs=new Oe([-G,D,0,-G,-D,0,G,-D,0,G,D,0]),r.width/=O,r.height/=O}},_26O:function($,l){var Y=this,o=Y.data,r=Y.gv,y=Y.s,i=r[l](o);if(i!=p){var O=y($+".scale"),m=this[$+"Info"]={note:i,textureScale:y($+".texture.scale"),expanded:y($+".expanded"),font:y($+".font"),color:y($+".color"),align:y($+".align"),borderWidth:y($+".border.width"),borderColor:y($+".border.color"),background:r[l+"Background"](o)};if(m.expanded){var P=y($+".max"),x=bk(m,i);x.width+=6,x.height+=2,P>0&&P<x.width&&(m.labelWidth=x.width,x.width=P);var F={x:-x.width/2,y:-8-x.height,width:x.width,height:x.height+8}}else F={x:-6,y:-18,width:12,height:18};m.mat=Y._16O(y($+".autorotate"),y($+".position"),p,y($+".face"),y($+".t3"),y($+".r3"),y($+".rotationMode")),m.rect=F,1!==O&&(F=ik(F),F.x*=O,F.height*=O,F.y=-F.height,F.width*=O);var W=F.x,M=F.y,b=F.width,d=F.height;m.vs=new Oe([W,-M,0,W,-M-d,0,W+b,-M-d,0,W+b,-M,0])}},_28O:function(l,s,U){if(U(this.s(s+".transparent"))){var p=l.rect,V=l.textureScale,E=p.width*V,t=p.height*V;if(E>=1&&t>=1){var x=Hp(E,t);1!==V&&(x.translate(x,p.x,p.y),x.scale(V,V),x.translate(x,-p.x,-p.y)),Yp(x,l),x.restore(),Ur(this,s,l.mat,l.vs,!0)}}},_29O:function(L,k,X){if(X(this.s(k+".transparent"))){var u=L.rect,v=L.textureScale,O=u.x,g=u.y,s=u.width*v,J=u.height*v;if(s>=1&&J>=1){u.x=u.y=0;var A=Hp(s,J);1!==v&&A.scale(v,v),Nf(A,L),A.restore(),u.x=O,u.y=g,Ur(this,k,L.mat,L.vs,!1)}}},_99O:function(U,y,P,Q,i,s){if(P){var X=this,g=X.gv,M=X.data,v=g._buffer,a=g._1O,k=P.icons;for(var B in k){var E=k[B],o=P.rects[B];if(o&&s($n(E.transparent,M,g))){ge(U,y,Q,i,M,B);var R=$n(E.shape3d,M,g),m=R?[R]:$n(E.names,M,g),G=m?m.length:0,H=$n(E.textureScale,M,g)||1,x=$n(E.light,M,g);x==p&&(x=R?!0:!1),cg(U,y,$n(E.blend,M,g),x,$n(E.opacity,M,g),$n(E.reverseFlip,M,g),$n(E.reverseColor,M,g),$n(E.reverseCull,M,g));for(var Y=0;G>Y;Y++){var w=m[Y],C=o[Y];if(oh(X,C.mat),R)lc(g,M,Te(X,R),X);else{var I=Tm(w);if(I){var q=C.width*H,_=C.height*H;if(q>=1&&_>=1){var f=Hp(q,_);Xl(f,I,$n(E.stretch,M,g),0,0,q,_,M,g),f.restore(),Hr(U,jq,a),Fc(U,y,a,$n(E.discardSelectable,M,g),v.uv,ue),ls(U,v.vs,C.vs,y.aPosition),Gc(U,v.ns,lo,y.aNormal),Lh(U,v.is,ic),Pe(U,0,ic.length),kr(U,y,a)}}}We(g)}ul(U,y)}}}}});var Hc=function(A,O){td(Hc,this,[A,O])};bd(Hc,ah,{_16O:function(V,n,s,u,U,Z,P,I,x){var X=this.data,E=X.getFinalScale3d(),r=ms(n,E,s,u,I,x);if(X.hasOwnProperty("_anchor")||X.hasOwnProperty("_anchorElevation")){var h=X.getAnchor3d();r[0]-=(h.x-.5)*E[0],r[1]-=(h.y-.5)*E[1],r[2]-=(h.z-.5)*E[2]}return _q(Cm(),r,X.p3(),u,U,Z,P,V,X.r3(),X.getRotationMode())},clear:function(){var $=this;$.faceMat=$.mat=$.shapeModel=$.left=$.right=$.front=$.back=$.top=$.bottom=$.csg=p},needValidate:function(L){if(this._iv)return this._validateFrameId=L._renderInfo.frame,!0;if(this.s("shape3d.autorotate")||this.s("shape3d.fixSizeOnScreen")||this.s("hide.overlapping.group")){var X=L._renderInfo.frame;if(this._validateFrameId!==X)return this._validateFrameId=X,!0}return!1},validate:function(O,u){var _=this,K=_.gv,l=_.data,d=Te(_);_._updateAutoRotation(),_._updateFixSize2d(),_._updateOverlapping(),(this.s("shape3d.autorotate")||this.s("shape3d.fixSizeOnScreen"))&&(iq(K,l,"_wireframeModelMap","_wireframeIndexMap"),iq(K,l,"_wireframeModelMapSwap","_wireframeIndexMapSwap"));var D=Rb(l,K.getMat(l),d?_.s("shape3d.scaleable"):!0),t=_._calcAnchorMat(l);if(t&&jg(D,D,t),_.clear(),O){var v=[];d?pp(K,l,d,_,_.getBodyColor(),[D],O,v):(kf(K,l,O,u,D,Aj,v,Lb),kf(K,l,O,u,D,ig,v,rr),kf(K,l,O,u,D,ko,v,Yd),kf(K,l,O,u,D,eg,v,Od),kf(K,l,O,u,D,Ap,v,He),kf(K,l,O,u,D,Kq,v,rc)),v.length&&(xg(O.vs,v),xg(O.ns,$m(v)))}else _.mat=D,(_.shapeModel=d)||(_._cubeUvs=null,_.vf(Aj,0),_.vf(ig,16),_.vf(Ap,8),_.vf(Kq,24),_.vf(ko,32),_.vf(eg,40))},_updateAutoRotation:function(){var u=this,P=u.s("shape3d.autorotate");if(P){var T,N=u.gv,V=u.data;T="string"==typeof P?[P.indexOf("x")<0?N._eye[0]:N._center[0],P.indexOf("y")<0?N._eye[1]:N._center[1],P.indexOf("z")<0?N._eye[2]:N._center[2]]:N._eye;var w=N._center,I=[T[0]-w[0],T[1]-w[1],T[2]-w[2]],c=V.p3(),b=Mb([c[0]+I[0],c[1]+I[1],c[2]+I[2]],c,N._up),i=V.r3(),A=nc(b,V.getRotationMode());Math.abs(i[0]-A[0])<1e-5&&Math.abs(i[1]-A[1])<1e-5&&Math.abs(i[2]-A[2])<1e-5||V.r3(A)}},_updateFixSize2d:function(){var f=this,I=f.data,M=f.s("shape3d.fixSizeOnScreen");if(!M)return I._dynamicScale3d&&delete I._dynamicScale3d,void 0;var j=f.gv;I.getFinalScale3d();var e=Rb(I,j.getMat(I)),r=pk([0,0,0],e),A=j.toViewPosition(r);if(!isNaN(A.x)&&!isNaN(A.y)){var u=pk([1,0,0],e),B=j.toViewPosition(u),w=pk([0,1,0],e),p=j.toViewPosition(w),h=B.x-A.x,T=p.y-A.y,G=I._dynamicScale3d||[1,1,1],W=Tm(I.s("shape3d.image")),E=M[0]>0?M[0]:W?rl(W,f):20,Y=M[1]>0?M[1]:W?ws(W,f):20,Z=Math.abs(h/E),O=Math.abs(T/Y);Math.abs(Z-1)<.001&&Math.abs(O-1)<.001||(I._dynamicScale3d=[G[0]/Z,G[1]/O,G[2]])}},_updateOverlapping:function(){var N=this,t=N.s("hide.overlapping.group");if(!t)return N._rectOverlapping&&(N._rectOverlapping=R),void 0;var H,Z,e,Y=N.gv,K=N.data,f=Rb(K,Y.getMat(K)),M=1/0,E=1/0,h=-1/0,G=-1/0,P=K.getAnchor3d(),L=P.x,n=P.y,D=P.z;for(H=0;8>H;H++){if(Z=pk([(H>>2)-L,(1&H>>1)-n,(1&H)-D],f),e=Y.toViewPosition(Z),isNaN(e.x)||isNaN(e.y))return;M=Math.min(M,e.x),h=Math.max(h,e.x),E=Math.min(E,e.y),G=Math.max(G,e.y)}var g={x:M,y:E,w:h-M,h:G-E};N._rectOverlapping=Y.overlappingBox.isOverlapping(t,g)},vf:function(h,A){var n=this;if(n.gv.getFaceVisible(n.data,h)){var l=Jn(n,h);l.mat&&(n.faceMat=!0);var s=l.uv;if(s){var u=n._cubeUvs;u||(u=n._cubeUvs=new Oe([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]));for(var M=0;8>M;M++)u[A+M]=s[M]}return l}},_80o:function(w,L,j){var Y=this;if(Y._rectOverlapping)return!0;var v=Y.gv,T=Y.data,Z=v._cube,G=Y.shapeModel;Wj(v,Y.mat),G?lc(v,T,G,Y,Y.getBodyColor(),j):(ls(w,Z.vs,p,L.aPosition),ls(w,Z.ns,p,L.aNormal),Mg(w,Z.is),Y._18O(w,L,Y.left,0,j),Y._18O(w,L,Y.front,6,j),Y._18O(w,L,Y.right,12,j),Y._18O(w,L,Y.back,18,j),Y._18O(w,L,Y.top,24,j),Y._18O(w,L,Y.bottom,30,j)),We(v),Y.faceMat&&(Y._18O(w,L,Y.left,0,j,!0),Y._18O(w,L,Y.front,6,j,!0),Y._18O(w,L,Y.right,12,j,!0),Y._18O(w,L,Y.back,18,j,!0),Y._18O(w,L,Y.top,24,j,!0),Y._18O(w,L,Y.bottom,30,j,!0))},_18O:function(d,E,L,o,m,Y){if(L){if(!m(L.transparent))return;if(Y&&!L.mat||!Y&&L.mat)return;Y&&Wj(this.gv,L.mat);var y=this,M=y.data,f=y.gv,S=f.getTexture(L.texture,M),x=L.uv,v=L.uvScale,X=L.uvOffset,a=L.discardSelectable;S?x?Fc(d,E,S,a,f._buffer.uv,y._cubeUvs,X,v):Fc(d,E,S,a,f._cube.uv,p,X,v):Fc(d),cg(d,E,L.blend,L.light,L.opacity,L.reverseFlip,L.reverseColor,L.reverseCull),gp(d,E.uDiffuse,L.color),Pe(d,o,6),ul(d,E),kr(d,E,S),Y&&We(f)}}});var Id=function(Z,N){td(Id,this,[Z,N])};bd(Id,ah,{_25Q:1,validate:function(L){var s=this,W=s.gv,i=s.data,c=s.s,d=c("edge.width"),J=i._40I,I=i._41I;if(s.shapeModel=s.info=p,J&&I){var O,x,w,_,v,S,n,R,m,k,M=i.isLooped(),C=c(Bq),N=U.getEdgeType(C);if(N){var T=N(i,kh(s,W,i,M,C),W,s._19Q);if(!T.points||T.points.isEmpty())return;S=s.info={},n=T.segments,v=T.points,R=v.size();for(var V=J.getElevation(),g=I.getElevation(),G=0;R>G;G++){var H=v.get(G);H.e==p&&(H.e=V+(g-V)*G/(R-1))}m=Qj(v.get(0)),k=Qj(v.get(R-1));var A=R%2;0===A?(S.c1=Qj(v.get(R/2-1)),S.c2=Qj(v.get(R/2))):S.p3=Qj(v.get((R-A)/2)),S.s1=m,S.s2=Qj(v.get(1)),S.t1=Qj(v.get(R-2)),S.t2=k}else{v=new uh,S=s.info={};var P=c("edge.offset"),K=c("edge.center"),F=c("edge.source.t3"),f=c("edge.target.t3"),q=J.p3(),Z=I.p3();if(F&&(q[0]+=F[0],q[1]+=F[1],q[2]+=F[2]),f&&(Z[0]+=f[0],Z[1]+=f[1],Z[2]+=f[2]),C===oi){n=c("edge.segments");var X=S.points=c(ds)||Jg;if(R=X.size()){m=Qj(X.get(0)),k=Qj(X.get(R-1)),!K&&P&&(w=fg(m,q,!0),P=j(P,ti(q,m)),q=[q[0]+w[0]*P,q[1]+w[1]*P,q[2]+w[2]*P],w=fg(Z,k,!0),P=j(P,ti(k,Z)),Z=[Z[0]-w[0]*P,Z[1]-w[1]*P,Z[2]-w[2]*P]);var A=R%2;0===A?(O=Qj(X.get(R/2-1)),x=Qj(X.get(R/2))):S.p3=Qj(X.get((R-A)/2)),S.s1=q,S.s2=m,S.t1=k,S.t2=Z}else!K&&P&&(w=fg(Z,q,!0),_=ti(q,Z),P=Mk(P,_),q=[q[0]+w[0]*P,q[1]+w[1]*P,q[2]+w[2]*P],Z=[Z[0]-w[0]*P,Z[1]-w[1]*P,Z[2]-w[2]*P]),O=q,x=Z;v.add({x:q[0],y:q[2],e:q[1]}),v.addAll(X),v.add({x:Z[0],y:Z[2],e:Z[1]})}else{var t=kh(s,W,i,M,C);if(s._19Q||(t=-t),M){var r=q[0],e=q[1],z=q[2],u=J.getTall()/2+t;O=[r-t,e+u,z],x=[r+t,e+u,z],v.add({x:r-t,y:z,e:e}),v.add({x:r-t,y:z,e:e+u}),v.add({x:r+t,y:z,e:e+u}),v.add({x:r+t,y:z,e:e})}else{w=fg(Z,q,!0),_=ti(q,Z);var Y={x:q[0],y:q[2]},o={x:Z[0],y:Z[2]},y=Ik(p,Y,o,t),Q=y.x-Y.x,D=y.y-Y.y;P=Mk(P,_),w[0]*=P,w[1]*=P,w[2]*=P,O=[q[0]+w[0]+Q,q[1]+w[1],q[2]+w[2]+D],x=[Z[0]-w[0]+Q,Z[1]-w[1],Z[2]-w[2]+D],K?(v.add({x:q[0],y:q[2],e:q[1]}),v.add({x:O[0],y:O[2],e:O[1]}),v.add({x:x[0],y:x[2],e:x[1]}),v.add({x:Z[0],y:Z[2],e:Z[1]})):(v.add({x:O[0],y:O[2],e:O[1]}),v.add({x:x[0],y:x[2],e:x[1]}))}}S.c1=O,S.c2=x}S.list=c(hg)===dd?s.createTubeModel(v,n,d/2,L):s.createLineModel(v,n,d,"edge","edge.dash")}}});var qb=function(J,D){td(qb,this,[J,D])};bd(qb,Hc,{_80o:function(s,h,G){var l=this,L=l.gv,Y=l.shapeModel;Wj(L,l.mat),Y?lc(L,l.data,Y,l,l.getBodyColor(),G):(yn(l,s,h,l.left,G),yn(l,s,h,l.front,G),yn(l,s,h,l.right,G),yn(l,s,h,l.back,G),yn(l,s,h,l.top,G),yn(l,s,h,l.bottom,G)),We(L)
},validate:function(i,r){var k,C,s=this,b=s.s,u=s.data,U=u.p3(),Q=u._thickness/2,t=u.isClosePath(),O=u.getPoints(),g=u.getSegments(),c=b(ai),S=i&&i.uv;if(s.clear(),0>Q)C=s.shapeModel=lk(O,g,b(ro),b(rm),c,b(Oo),u.getTall(),u.getShapeElevation(),t),b(In)?b("shape3d.image")||delete C.uv:(delete C.vs,delete C.ns,delete C.uv),b("shape3d.top.image")||delete C.top_uv,b("shape3d.bottom.image")||delete C.bottom_uv;else if(b(hg)===dd)k=gk(O,g,c,t),C=s.shapeModel={vs:[]},b("shape3d.image")&&(C.uv=[],C.sum=b(Oo)||rd(k)||1,C.len=0),b(ro)&&!t&&(C.top_vs=[],b("shape3d.top.image")&&(C.top_uv=[])),b(rm)&&!t&&(C.bottom_vs=[],b("shape3d.bottom.image")&&(C.bottom_uv=[])),s._12O(k,Q);else{var y,I,j,A,D,H,T,K,B,x;if(k=gk(O,g,c,t),D=s.vf(Ap,S,!1,r),Q&&(H=s.vf(Kq,S,!1,r),T=t?p:s.vf(Aj,S,!1,r),K=t?p:s.vf(ig,S,!1,r),B=s.vf(ko,S,!1,r),x=s.vf(eg,S,!1,r)),Q){for(var l=0,P=k.length;P>l;l++)k[l]=s._tryRemoveBezierPoints(k[l],Q);s._12O(k,Q)}else D&&k.forEach(function(C){if(A=C.length,A>0)for(y=C[0],j=1;A>j;j++)I=C[j],s.addV(D.vs,y,I),y=I});s._20Q(k),i||(D&&(D.ns=$m(D.vs),yc(D,"vs"),yc(D,Tg)),Q&&(H&&(H.ns=$m(H.vs),yc(H,"vs"),yc(H,Tg)),T&&(T.ns=$m(T.vs),yc(T,"vs"),yc(T,Tg)),K&&(K.ns=$m(K.vs),yc(K,"vs"),yc(K,Tg)),B&&(B.ns=$m(B.vs),yc(B,"vs"),yc(B,Tg)),x&&(x.ns=$m(x.vs),yc(x,"vs"),yc(x,Tg))))}var X=s.mat=Cm();xc(X,U),Oj(X,u.r3(),u.getRotationMode());var z=u.getScale3d(),J=u._dynamicScale3d;J&&(z[0]*=J[0],z[1]*=J[1],z[2]*=J[2]),bf(X,z),xc(X,pi(U)),i&&(Jq(s,X,i,C),s.clear())},_20Q:function(D){var E,R,c,o,q,O,f,y=this,N=y.front,M=y.back,b=y.top,n=y.bottom,e=N?N.tuv:p,F=M?M.tuv:p,j=b?b.tuv:p,K=n?n.tuv:p,L=0;(e||F||j||K)&&(E=y.s(Oo)||rd(D)||1,D.forEach(function(z){if(R=z.length,R>0)for(O=z[0],c=1;R>c;c++)f=z[c],o=L/E,L+=ti(O,f),q=L/E,y._14O(N,o,q),y._14O(M,1-q,1-o),y._14O(b,o,q),y._14O(n,o,q),O=f}))},_14O:function(z,k,B){if(z){var q=z.uv,s=z.tuv;if(s){if(q)var U=q[0]+(q[6]-q[0])*k,F=q[1]+(q[7]-q[1])*k,A=q[2]+(q[4]-q[2])*k,e=q[3]+(q[5]-q[3])*k,r=q[2]+(q[4]-q[2])*B,D=q[3]+(q[5]-q[3])*B,y=q[0]+(q[6]-q[0])*B,P=q[1]+(q[7]-q[1])*B;else U=k,F=0,A=k,e=1,r=B,D=1,y=B,P=0;s.push(A,e,r,D,y,P,y,P,U,F,A,e)}}},_13O:function(X){var H=X.uv,F=X.tuv;F&&(H?F.push(H[2],H[3],H[4],H[5],H[6],H[7],H[6],H[7],H[0],H[1],H[2],H[3]):F.push(0,1,1,1,1,0,1,0,0,0,0,1))},_tryRemoveBezierPoints:function(W,N){var D=W.length;if(4>D)return W;var X,c,w,e,i,m,n=!1,x=function(k){return W[k]},g=function(M){return W[D-1-M]};for(i=0;1>=i;i++)for(m=i?g:x,c=m(0),w=m(1),X=2;D-1>X;X++)if(e=m(X),!e.remove)if(e.b){var P=Ik(c,w,e,N);P.adjust?(e.remove=!0,n=!0):(c=w,w=e)}else c=w,w=e;if(!n)return W;var E=[];for(X=0;D>X;X++)W[X].remove||E.push(W[X]);return E},_12O:function(L,G){var e,i,V,Y,J,f=this;L.forEach(function($){if(J=$.length,J>0)for(e={p:$[0],n:!0},Y=1;J>Y;Y++)i=$[Y],V=J-1>Y?$[Y+1]:p,f.addPoint(e,i,V,G,$)})},addPoint:function(s,X,c,N,d){var V,I,K,S,y,b,P,r,U,C=this,Z=s.p,e=s.f,t=s.b,q=C.s("shape3d.side")||ao,g=C.s("shape3d.start.angle"),m=C.s("shape3d.sweep.angle"),l=C.shapeModel,O=C.data.isClosePath();if(s.n&&(s.n=!1,e=O&&d.length>2?Ik(d[d.length-2],Z,X,N):Ik(p,Z,X,N),t=En(Z,e),l?l.top_vs&&C._10O(t,e,q,g,m,l.top_vs,l.top_uv):(V=C.left)&&(C.addV(V.vs,t,e),C._13O(V))),I=c?Ik(Z,X,c,N):O&&d.length>2?Ik(Z,X,d[1],N):Ik(Z,X,p,N),K=En(X,I),l){var z,_,D=l.vs,v=l.uv,j=l.sum;for(v&&(z=l.len/j,l.len+=ti(Z,X),_=l.len/j),b=C._9O(t,e,q,g,m),P=C._9O(K,I,q,g,m),r=0;q>r;r++)U=r+1,xg(D,b[U]),xg(D,P[r]),xg(D,b[r]),xg(D,P[r]),xg(D,b[U]),xg(D,P[U]),v&&(S=r/q,y=U/q,v.push(z,y,_,S,z,S,_,S,z,y,_,y));!c&&l.bottom_vs&&C._10O(K,I,q,g,m,l.bottom_vs,l.bottom_uv,!0)}else!c&&(V=C.right)&&(C.addV(V.vs,I,K),C._13O(V)),(V=C.front)&&C.addV(V.vs,e,I),(V=C.back)&&C.addV(V.vs,K,t),(V=C.top)&&C.addH(V.vs,e,I,K,t,!0),(V=C.bottom)&&C.addH(V.vs,t,K,I,e);s.p=X,s.f=I,s.b=K},_10O:function(J,F,f,i,b,r,q,n){var R,Q,y=this,G=y.data,s=y._9O(J,F,f,i,b),w=(J.x+F.x)/2,T=(J.y+F.y)/2,z=G.getShapeElevation(),A=0;for(A=0;f>A;A++)n?(xg(r,s[A]),xg(r,s[A+1])):(xg(r,s[A+1]),xg(r,s[A])),xg(r,[w,z,T]),q&&(n?(R=x*(A+1)/f+i,Q=x*A/f+i):(R=x*A/f+i,Q=x*(A+1)/f+i),q.push(.5-.5*X(Q),.5-.5*S(Q),.5-.5*X(R),.5-.5*S(R),.5,.5))},_9O:function(m,V,q,o,c){var N,k,I=this,n=I.data,R=[],d=(m.x+V.x)/2,l=(m.y+V.y)/2,j=n.getTall()/2,A=n.getShapeElevation(),C=0;for(c=c||x;q>=C;C++)N=c*C/q+o,k=X(N),R.push([d+(m.x-d)*k,A+j*S(N),l+(m.y-l)*k]);return R},addV:function(p,N,O){var t=N.x,P=N.y,L=O.x,M=O.y,F=this.data,T=F.getShapeElevation(),G=F.getTall()/2;p.push(t,T-G,P,L,T-G,M,L,T+G,M,L,T+G,M,t,T+G,P,t,T-G,P)},addH:function(B,l,$,z,I,E){var M=this.data,P=M.getTall()/2,j=M.getShapeElevation()+(E?P:-P);B.push(l.x,j,l.y,$.x,j,$.y,z.x,j,z.y,z.x,j,z.y,I.x,j,I.y,l.x,j,l.y)},vf:function(b,q,A,o){var O,$=this,Y=$.gv.getFaceVisible($.data,b);return(A||Y)&&(O=Jn($,b,o),O.vs=[],O.tuv=Y&&(O.texture||q)?[]:p,O.visible=Y),O}});var op=function(W,m){td(op,this,[W,m])};bd(op,ah,{_25Q:1,validate:function(O){var s=this,_=s.data,I=s.s,j=_.getPoints(),q=j.size();if(s.shapeModel=s.info=p,q>1){var U=s.info={},W=_.getSegments(),V=_.getThickness(),r=Qj(j.get(0)),D=Qj(j.get(q-1)),z=q%2;0===z?(U.c1=Qj(j.get(q/2-1)),U.c2=Qj(j.get(q/2))):U.p3=Qj(j.get((q-z)/2)),U.s1=r,U.s2=Qj(j.get(1)),U.t1=Qj(j.get(q-2)),U.t2=D,U.list=I(hg)===dd?s.createTubeModel(j,W,V/2,O):s.createLineModel(j,W,V,"shape.border","shape.dash")}var x=_.p3(),N=s.mat=Cm();xc(N,x),Oj(N,_.r3(),_.getRotationMode());var n=_.getScale3d(),w=_._dynamicScale3d;w&&(n[0]*=w[0],n[1]*=w[1],n[2]*=w[2]),bf(N,n),xc(N,pi(x))},_80o:function(U,F,I){var z=this,p=z.shapeModel;if(p){var Y=z.gv;Wj(Y,z.mat),lc(Y,z.data,p,z,z.getBodyColor(),I),We(Y)}}}),Gp(U,{accordionViewExpandIcon:Ll(Dd),accordionViewCollapseIcon:Ll(Dd,!0),accordionViewLabelColor:nj,accordionViewLabelFont:cc,accordionViewTitleBackground:Pd,accordionViewSelectBackground:Un,accordionViewSelectWidth:3,accordionViewSeparatorColor:R,splitViewDividerSize:1,splitViewDividerBackground:Pd,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:Rr,rect:[2,2,12,12],background:Dd}]},propertyViewLabelColor:Bd,propertyViewLabelSelectColor:nj,propertyViewLabelFont:cc,propertyViewExpandIcon:Ll(Gi),propertyViewCollapseIcon:Ll(Gi,!0),propertyViewBackground:zj,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:bh,propertyViewColumnLineColor:bh,propertyViewSelectBackground:Un,listViewLabelColor:Bd,listViewLabelSelectColor:nj,listViewLabelFont:cc,listViewRowLineVisible:!1,listViewRowLineColor:bh,listViewSelectBackground:Un,treeViewLabelColor:Bd,treeViewLabelSelectColor:nj,treeViewLabelFont:cc,treeViewExpandIcon:Ll(Ao),treeViewCollapseIcon:Ll(Ao,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:bh,treeViewSelectBackground:Un,treeViewDoubleClickToToggle:!0,tableViewLabelColor:Bd,tableViewLabelSelectColor:nj,tableViewLabelFont:cc,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:bh,tableViewColumnLineColor:bh,tableViewSelectBackground:Un,treeTableViewLabelColor:Bd,treeTableViewLabelSelectColor:nj,treeTableViewLabelFont:cc,treeTableViewExpandIcon:Ll(Ao),treeTableViewCollapseIcon:Ll(Ao,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:bh,treeTableViewColumnLineColor:bh,treeTableViewSelectBackground:Un,tableHeaderLabelColor:Bd,tableHeaderLabelFont:cc,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:hi,tableHeaderBackground:zj,tableHeaderMoveBackground:ii,tableHeaderInsertColor:Un,tableHeaderSortDescIcon:dp(Gi,!0),tableHeaderSortAscIcon:dp(Gi),tabViewTabGap:1,tabViewLabelColor:nj,tabViewLabelFont:cc,tabViewTabBackground:Pd,tabViewSelectWidth:3,tabViewSelectBackground:Un,tabViewMoveBackground:ii,tabViewInsertColor:Un,toolbarLabelColor:Bd,toolbarLabelSelectColor:nj,toolbarLabelFont:cc,toolbarBackground:zj,toolbarSelectBackground:Un,toolbarItemGap:8,toolbarSeparatorColor:pc},!0);var Lc={translateX:1,sortColumn:1},fj={sortable:1,sortOrder:1,sortFunc:1},Ko={focusData:1},Vn={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},Jp={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},Kp=function($,e){e.add($),$.hasChildren()&&$.eachChild(function(I){Kp(I,e)})},Uo=function(R,c,y,h,d,T,K,_,A,t,S){var B,$=y.getValueType(t),M=y.getAlign(t);if(y.getEnumValues(t)){var Y=y.toEnumLabel(c,t),N=_f||0,V=0,I=T,X=U.getTextSize(h,Y).width;return B=Tm(y.toEnumIcon(c,t)),B&&(V=T+_f/2,"center"===M?V+=(_-(N+X))/2:"right"===M&&(V=V+_-(N+X)),Pq(R,B,V,K+A/2,t,S),I=V+_f/2),Y!=p&&(B?Sn(R,Y,h,d,I,K,_-(I-T),A):Sn(R,Y,h,d,T,K,_,A,M)),void 0}return c=y.formatValue(c),c!=p?$===ym?(le(R,T,K,_,A,c),void 0):$===Um||!$&&sq(c)?(B=Tm(c?_h:bn),Pq(R,B,T+_/2,K+A/2,t,S),void 0):(Sn(R,c,h,d,T,K,_,A,M),void 0):void 0},vj=function(G,J){var z=J.view,Q=Gn(G),j=J.column||J.property;z.getDataModel().beginTransaction(),J.editor=G,G.info=J,z.setCurrentEditor(G),z.getView().insertBefore(Q,z._79O),Eb(G,J.editorRect),G.setFocus?G.setFocus():rb(G),G.commitValue=function(){G._17Q&&(G=G._17Q),z.setValue(J.data,j,G.getValue?G.getValue():G.value),G.close&&G.close(),_k(Q)},j.onEditorCreated&&j.onEditorCreated(J)},zs=function(M,G,C,W,g){var x=Vb(M,C),k=G.value,L=G.view,e=g.getValueType(G.data);return x.onblur=x.onchange=function(){L.endEditing()},"input"===M?(k=g.formatValue(k),k!=p&&(x.value=k),x.onkeydown=function(J){Oi(J)&&L.endEditing()},(e===ui||e===oe)&&x.addEventListener(Zn,U.numberListener,!1)):M===mp&&W.forEach(function(K){var A=i.createElement("option");A.innerHTML=g.toEnumLabel(K),A.value=K,g.isEnumEqual(k,K)&&(A.selected=!0),rj(x,A)}),vj(x,G),x},Tp=D.widget={},jr=function($,F,q){bd(l+".widget."+$,F,q)};Gp(Po,{ms_value:function(e){e.getValue=function(S){var K=this.getItemById(S),L=K.element;return Op(L)?L:L?L.getValue?L.getValue():L.value:K.selected},e.setValue=function(G,t){var W=this.getItemById(G),o=W.element;o&&!Op(o)?o.setValue?o.setValue(t):o.value=t:sq(t)?(W.selected=t,this.iv()):(W.element=t,this.iv())},e.v=function(p,C){var l=this;if(2===arguments.length)l.setValue(p,C);else{if(!Dh(p))return l.getValue(p);for(var h in p)l.setValue(h,p[h])}return l}},_46o:function(E){E._icon=p,E._accessType=p,E._valueType=p,E._editable=!1,E._batchEditable=!0,E._align=Aj,E._nullable=!0,E._emptiable=!1,E.setParent=ff,E.formatValue=function(d){var y=this,E=y._valueType;return y.getEnumValues()?y.toEnumLabel(d):E===Um?!!d:d!=p&&E===ui?o(d):d},E.setEnum=function(Z,f,K,n,g,Y,e){var k=this;Z&&!vi(Z)&&Z.values&&(n=Z.editable,K=Z.icons,f=Z.labels,g=Z.strict,Y=Z.maxHeight,e=Z.dropDownWidth,Z=Z.values),nk(Z)&&(Z=Z._as),nk(f)&&(f=f._as),nk(K)&&(K=K._as),k._enumValues=Z,k._enumLabels=f,k._enumIcons=K,k._enumEditable=n,k._enumStrict=g==p?!0:g,k._enumMaxHeight=Y,k._enumDropDownWidth=e,Z&&Z.length&&Tq(Z[0])&&(k._valueType=oe),k.fp("enum",!1,!0)},E.getEnumDropDownWidth=function(){return this._enumDropDownWidth},E.getEnumMaxHeight=function(){return this._enumMaxHeight},E.isEnumEditable=function(){return this._enumEditable},E.getEnumValues=function(){return this._enumValues},E.getEnumLabels=function(){return this._enumLabels},E.getEnumIcons=function(){return this._enumIcons},E.isEnumStrict=function(){return this._enumStrict},E.isEnumEqual=function(z,Q){return this._enumStrict?z===Q:z==Q},E.toEnumLabel=function(t,T){var P=this,s=P.getEnumValues(T),f=P.getEnumLabels(T);if(s&&f)for(var E=0;E<s.length;E++)if(P.isEnumEqual(t,s[E]))return f[E];return t},E.toEnumIcon=function(j,I){var n=this,$=n.getEnumValues(I),p=n.getEnumIcons(I);if($&&p)for(var c=0;c<$.length;c++)if(n.isEnumEqual(j,$[c]))return p[c];return R}},_45o:function(j){j._87o=function(L,v,e,d,w,N){if(L){var Q=this,K=Q._90I,a=yb(1);Q._columnLineVisible&&(w-=1),Q._rowLineVisible&&(N-=1),0>=w||0>=N||(Q._90I||(K=Q._90I={}),K[v]||(K[v]=new uh),Eb(a,Q.tx()+e,Q.ty()+d,w,N),rj(a,L),Q._view.insertBefore(a,Q._79O),L.onParentAdded&&L.onParentAdded(a),K[v].add(a))}},j._76o=function(){var x=this,Y=x._90I;if(Y){for(var e in Y)Y[e].each(function(O){_k(O)});delete x._90I}},j._77o=function(l){var L=this;if(L._90I){var I=L._90I[l];I&&(I.each(function(X){_k(X)}),delete L._90I[l])}}},_47o:function(t){t.getValue=function(e,R){return R.getValue?R.getValue(e,R,this):Kg(e,R.getAccessType(),R.getName())},t.setValue=function(u,O,t){if(O.isEmptiable(u)||""!==t||(t=R),O.isNullable(u)||t!=p){var m=this,g=O.getName(u),B=O.getAccessType(u),x=O.getValueType(u);x===ui&&Op(t)?t=f(t):x===oe&&Op(t)?t=parseFloat(t):x===Um&&Op(t)&&(t="true"===t),m._batchEditable&&O._batchEditable&&m.isSelected(u)?m.sm().each(function(V){O.setValue?O.setValue(V,O,t,m):re(V,B,g,t)}):O.setValue?O.setValue(u,O,t,m):re(u,B,g,t)}},t.setCurrentEditor=function(a){this.endEditing(),this._currentEditor=a,this.redraw()},t.isEditing=function(b,H){var u=this,j=u._currentEditor;if(!j)return!1;if(H){var h=j.info;return h?(h.column||h.property)===H&&h.data===b:!1}return!0},t.endEditing=function(){var u=this,f=u._currentEditor;f&&(delete u._currentEditor,f.commitValue&&f.commitValue(f.info),u.redraw(),u.getDataModel().endTransaction())},t.beginEditing=function(S){this.endEditing();var B=this,q=S.column||S.property;if(q.beginEditing)q.beginEditing(S);else{var r=S.data,t=S.value,o=B.getSelectBackground(r),l=q.getEnumValues(r),C=q.getSlider(r),y=q.getColorPicker(r);if(C){var Q=Wg(Tp.Slider,C);return Q.setValue(t),Q.getView().onblur=function(){B.endEditing()},Q.isInstant()&&(Q.onValueChanged=function(){B.setValue(r,q,Q.getValue())}),vj(Q,S),void 0}if(y||q.getValueType(r)===ym){var z=Wg(Tp.ColorPicker,y);return z.setValue(t),z.onClosed=function(){B.endEditing()},z.isInstant()&&(z.onValueChanged=function(T,N){B.setValue(r,q,N)}),vj(z,S),z.open(),void 0}if(l){if(Tp.ComboBox){var $=new Tp.ComboBox;$.setValue(t),$.setValues(l),$.setLabels(q.getEnumLabels(r)),$.setIcons(q.getEnumIcons(r)),$.setEditable(q.isEnumEditable(r)),$.setStrict(q.isEnumStrict(r)),$.setMaxHeight(q.getEnumMaxHeight(r)),$.setDropDownWidth(q.getEnumDropDownWidth(r)),$.onClosed=function(){B.endEditing()},vj($,S),$.open()}else zs(mp,S,o,l,q);return}var R=q.getValueType(r);if(R===Um||sq(t))return B.setValue(r,q,!t),void 0;if(q.getItemEditor(r)){var u=og(q.getItemEditor(r)),K=new u(r,q,B,S),Z=K.getView();return Z._17Q=K,K.setValue(t),Pf(Z),vj(Z,S),K.editBeginning&&K.editBeginning(),void 0}zs("input",S,o,p,q)}}},_44o:function(U){U.init=function(R){var N=this,D=N.th=new Jj(R),X=N._view=Yf(1,N);N.tv=N._tableView=R,rj(X,D.getView()),rj(X,R.getView()),D.mp(function(I){I.property===ye&&N.iv()}),N.iv()},U.getTableView=function(){return this.tv},U.getTableHeader=function(){return this.th},U.getDataModel=function(){return this.tv.dm()},U.getColumnModel=function(){return this.tv.getColumnModel()},U.setColumns=function(z){this.tv.setColumns(z)},U.addColumns=function(p){this.tv.addColumns(p)},U.endEditing=function(){this.tv.endEditing()},U.validateImpl=function(){var o=this,d=o.th,m=Hh(d),i={x:0,y:0,width:o.getWidth(),height:m};Eb(d,i),i.y=m,i.height=Q(0,o.getHeight()-m),Eb(o.tv,i)}},ms_vs:function(B){B._41o=function(){return this._29I.height<this._59I},B._43o=function(){var U=this;U._41o()&&(U._58I||(A(function(){U._94O()},uq),U.iv()),U._58I=new Date)},B._94O=function(){var l=this;if(l._58I){var t=new Date;t.getTime()-l._58I.getTime()>=uq?(delete l._58I,l.iv()):A(function(){l._94O()},uq)}},B._93I=function(){var k=this,Y=k._27I;if(k._58I||!k._autoHideScrollBar){Y||rj(k._79O,Y=k._27I=yb());var f=k._29I,n=f.height,M=k._59I,V=k.getScrollBarSize(),L=f.width-V-2,P=n*(-k.ty()/M),X=n*(n/M),i=Y.style;M>n?(zf>X&&(P=P+X/2-zf/2,0>P&&(P=0),P+zf>n&&(P=n-zf),X=zf),i.visibility=ks,i.background=k.getScrollBarColor(),i.borderRadius=V/2+Vj,Eb(Y,L,P,V,X)):i.visibility=yd}else Y&&(Y.style.visibility=yd)}},ms_hs:function(f){f._40o=function(){return this._29I.width<this._91I},f._42o=function(){var q=this;q._40o()&&(q._95O||(A(function(){q._94I()},uq),q.iv()),q._95O=new Date)},f._94I=function(){var p=this;if(p._95O){var C=new Date;C.getTime()-p._95O.getTime()>=uq?(delete p._95O,p.iv()):A(function(){p._94I()},uq)}},f._92I=function(){var A=this,e=A._28I;if(A._95O||!A._autoHideScrollBar){e||rj(A._79O,e=A._28I=yb());var t=A._29I,N=t.width,j=A._91I,Z=A.getScrollBarSize(),w=t.height-Z-2,V=N*(-A.tx()/j),$=N*(N/j),g=e.style;j>N?(zf>$&&(V=V+$/2-zf/2,0>V&&(V=0),V+zf>N&&(V=N-zf),$=zf),g.visibility=ks,g.background=A.getScrollBarColor(),g.borderRadius=Z/2+Vj,Eb(e,V,w,$,Z)):g.visibility=yd}else e&&(e.style.visibility=yd)}}}),kc(_h,on(16,16,[{type:li,rect:[1,1,14,14],background:Un},{type:yi,rect:[1,1,14,14],width:1,color:Ii},{type:jp,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),kc(bn,on(16,16,{type:yi,rect:[1,1,14,14],width:1,color:Ii})),kc(as,on(16,16,[{type:On,rect:[2,2,12,12],borderWidth:1,borderColor:Ii,background:"#FFF"},{type:On,rect:[4,4,8,8],background:Un}])),kc(mh,on(16,16,{type:On,rect:[2,2,12,12],borderWidth:1,borderColor:Ii})),Po._15Q=function(e){e._29I=Am,e._59I=0,e._91I=0,e._5o=function(I){var H=this;H._30I=new uh,H._rows=new uh,H._rowMap={},H._31I=0,H._14I=0,H._view=Yf(1,H),H._canvas=Ne(H._view),rj(H._view,H._79O=yb()),H.dm(I?I:new ke)},e.getCheckIcon=function(S){var q=this.sm(),B=q.co(S);return q.sg()?Tm(B?as:mh):Tm(B?_h:bn)},e.checkData=function(N){var L=this.sm(),j=L.co(N);L.sg()&&j||(this._32o=1,j?L.rs(N):L.as(N),delete this._32o)},e.getDataAt=function(G){G.target&&(G=this.lp(G));var f=Z(G.y/this._rowHeight),Y=this._rows;return 0>f||f>=Y.size()?p:Y.get(f)},e.onDataDoubleClicked=function(){},e.onDataClicked=function(){},e.adjustTranslateX=function(){return 0},e.adjustTranslateY=function(f){var T=this.getHeight()-this._59I;return T>f&&(f=T),f>0?0:o(f)},e.onPropertyChanged=function(B){var T=this,m=B.property;Vn[m]?T.ivm():Ko[m]||T.redraw(),m===Gj?T._42o():m===Cn&&T._43o()},e.getLabel=function(K){return K.toLabel()},e.getLabelFont=function(){return this._labelFont},e.getLabelColor=function(A){var _=this;if(_.isCheckMode()){if(_._focusData===A)return _._labelSelectColor}else if(_.isSelected(A))return _._labelSelectColor;return _._labelColor},e.getStartRowIndex=function(){return this._31I},e.getEndRowIndex=function(){return this._14I},e.getRowDatas=function(){return this._rows},e.getRowIndex=function(C){return this._rowMap[C._id]},e.getRowSize=function(){return this._rows.size()},e.getViewRect=function(){return ik(this._29I)},e.isVisible=function(x){return this._visibleFunc?this._visibleFunc(x):!0},e.getCurrentSortFunc=function(){return this._sortFunc},e.setDataModel=function(K){var V=this,i=V._dataModel,A=V._selectionModel;i!==K&&(i&&(i.umm(V.handleDataModelChange,V),i.umd(V.handleDataPropertyChange,V),i.umh(V.handleHierarchyChange,V),A||i.sm().ums(V.handleSelectionChange,V)),V._dataModel=K,K.mm(V.handleDataModelChange,V),K.md(V.handleDataPropertyChange,V),K.mh(V.handleHierarchyChange,V),A?A._21I(K):K.sm().ms(V.handleSelectionChange,V),V.fp("dataModel",i,K))},e.validateModel=function(){var b=this;b._rows.clear(),b._rowMap={},b.buildChildren(b._dataModel._roots);var s=b._rows=b._rows.toList(b.isVisible,b),N=0,F=b.getCurrentSortFunc(),j=s.size();for(F&&s.sort(F);j>N;N++)b._rowMap[s.get(N)._id]=N},e.buildChildren=function(Z){var w=this;Z.each(function(G){w._rows.add(G),w.buildChildren(G._children)})},e.handleDataModelChange=function(){this.ivm()},e.handleDataPropertyChange=function(w){"parent"===w.property?this.ivm():this.invalidateData(w.data)},e.handleHierarchyChange=function(){this.ivm()},e.handleSelectionChange=function(I){I.datas.each(this.invalidateData,this),this.onSelectionChanged(I)},e.onSelectionChanged=function(L){var l=this,P=l.sm();!l.isAutoMakeVisible()||1!==P.size()||"set"!==L.kind&&"append"!==L.kind||l._32o||l.makeVisible(P.ld())},e.handleBackgroundClick=function(b){xm(b)&&!this.isCheckMode()&&this.sm().cs()},e.makeVisible=function(n){n&&(this._23I=n,this.iv())},e.scrollToIndex=function(v){var s=this,P=s._29I,b=P.height,B=s._rowHeight,x=B*v;v>=0&&v<s._rows.size()&&b>0&&(x+B>P.y+b?s.ty(-x+b-B):x<P.y&&s.ty(-x))},e.autoScroll=function(W,c){var H=this,J=H._rowHeight,r=J,I=J/4,G=H._29I,n=H.lp(W),P={x:H.tx(),y:H.ty()};return J>0&&G&&(n.x-G.x<r?H.translate(I,0):G.x+G.width-n.x<r&&H.translate(-I,0),n.y-G.y<r?H.translate(0,I):G.y+G.height-n.y<r&&H.translate(0,-I)),P.x=H.tx()-P.x,P.y=H.ty()-P.y,c&&(c.x+=P.x,c.y+=P.y),P},e.getTopRowOrderSelection=function(){var R=this.sm().getTopSelection(),V={},o=new uh;return R.each(function(w){V[w._id]=w}),this._rows.each(function(D){V[D._id]&&o.add(D)}),o},e.getRowOrderSelection=function(){var I=new uh;return this._rows.each(function(S){this.isSelected(S)&&I.add(S)},this),I},e.ivm=function(){this.invalidateModel()},e.invalidateModel=function(){var k=this;k._96I||(k._96I=1,k._32I=1,delete k._24I),k.iv()},e.redraw=function(){var s=this;s._32I||(s._32I=1,delete s._24I,s.iv())},e.invalidateData=function(C){var Z=this;N?Z.redraw():Z._32I||(Z._24I||(Z._24I={}),Z._24I[C._id]=C,Z.iv())},e.getFocusData=function(){return this._focusData},e.setFocusDataById=function(k){this.setFocusData(this.dm().getDataById(k))},e.setFocusData=function(u){var s=this,a=s._focusData;a!==u&&(s._focusData=u,s.fp("focusData",a,u),a&&s.invalidateData(a),u&&(s.invalidateData(u),s.isAutoMakeVisible()&&s.makeVisible(u)))},e.drawRowBackground=function(D,L,f,H,g,t,Z){var J=this,S=J.isCheckMode();(L===J._focusData&&S||f&&!S)&&le(D,H,g,t,Z,J.getSelectBackground(L))},e.drawData=function(e,L,P){var M=this,Q=M._rowHeight,_=Q*P,K=M._29I,r=K.x,B=K.width;e.save(),e.beginPath(),e.rect(r,_,B,Q),e.clip(),M._87o(M.drawRow(e,L,M.isSelected(L),r,_,B,Q),P,r,_,B,Q),e.restore(),M._rowLineVisible&&le(e,r,_+Q-1,B,1,M._rowLineColor)},e._12I=function(c){var p=this,v=p._31I,C=p._29I,E=C.x,N=C.y,m=C.width,D=C.height;for(c.beginPath(),c.rect(E,N,m,D),c.clip(),c.clearRect(E,N,m,D),p._76o(),p._93db(c);v<p._14I;v++)p.drawData(c,p._rows.get(v),v);p._92db(c)},e._13I=function(t){for(var l,j=this,I=j._rowHeight,P=j._29I,T=P.x,i=P.width,U=j._31I,Q=j._30I;U<j._14I;U++)l=j._rows.get(U),j._24I[l._id]&&Q.add({data:l,index:U});Q.isEmpty()||(t.beginPath(),Q.each(function(w){t.rect(T,w.index*I,i,I)}),t.clip(),Q.each(function(k){t.clearRect(T,k.index*I,i,I)}),Q.each(function(U){j._77o(U.index)}),j._93db(t),Q.each(function(n){j.drawData(t,n.data,n.index)}),j._92db(t),Q.clear())},e.validateImpl=function(){var N=this,$=N._canvas,s=N.getWidth(),l=N.getHeight(),Y=N._rowHeight,c=N._32I;(s!==$.clientWidth||l!==$.clientHeight)&&(Yc($,s,l),c=1);var x=W&&!d;N._96I&&!x&&N.validateModel();var m=N._29I,H={x:-N.tx(),y:-N.ty(),width:s,height:l},R=N._rows.size(),J=Xh($),g=N._23I;c||Kl(H,m)||(c=1),N._29I=H,N._59I=R*Y,N._31I=Z(H.y/Y),N._14I=E((H.y+H.height)/Y),N._31I<0&&(N._31I=0),N._14I>R&&(N._14I=R),N._99I&&c&&N._99I(),Co(J,N.tx(),N.ty(),1),c?N._12I(J):N._24I&&N._13I(J),N._93I(),N._92I(),J.restore(),N._32I=N._24I=N._96I=p,g&&(N.scrollToIndex(N.getRowIndex(g)),delete N._23I),N.tx(N.tx()),N.ty(N.ty())}},Po._48o=function($){$._rootVisible=!0,$._rootData=p,$._35o=function(){this._expandMap={},this._levelMap={}},$.validateModel=function(){var D=this,M=D._rootData;D._rows.clear(),D._levelMap={},D._rowMap={},D._currentLevel=0,M?D._rootVisible?D.isVisible(M)&&D.buildData(M):D.buildChildren(M):D.buildChildren(),delete D._currentLevel},$.buildData=function(P){var x=this,Y=P._id,o=x._rows;x._rowMap[Y]=o.size(),o.add(P),x._levelMap[Y]=x._currentLevel,x.isExpanded(P)&&(x._currentLevel++,x.buildChildren(P),x._currentLevel--)},$.buildChildren=function(Y){var d=this,g=Y?Y._children:d._dataModel._roots,p=d.getCurrentSortFunc();p&&d.isChildrenSortable(Y)?g.toList(d.isVisible,d).sort(p).each(d.buildData,d):g.each(function(s){d.isVisible(s)&&d.buildData(s)})},$.getLevel=function(m){return this._levelMap[m._id]},$.getToggleIcon=function(C){var c=this,e=c._loader,O=c._collapseIcon;return e&&!e.isLoaded(C)?O:C.hasChildren()?c.isExpanded(C)?c._expandIcon:O:p},$.isCheckMode=function(){return this._checkMode!=p},$.isChildrenSortable=function(){return!0},$.handleDataModelChange=function(N){var c=this;N.kind===Hi?delete c._expandMap[N.data._id]:N.kind===Zi&&(c._expandMap={}),c.ivm()},$.toggle=function(E){var O=this;O.isExpanded(E)?O.collapse(E):O.expand(E)},$.isExpanded=function(V){return 1===this._expandMap[V._id]},$.expand=function(M){var L=this,b=L._loader;L.isExpanded(M)||(b&&!b.isLoaded(M)&&b.load(M),L._expandMap[M._id]=1,L.ivm(),L.onExpanded(M))},$.onExpanded=function(){},$.collapse=function(U){var B=this;B.isExpanded(U)&&(delete B._expandMap[U._id],B.ivm(),B.onCollapsed(U))},$.onCollapsed=function(){},$.expandAll=function(Q){if(Q)this.expand(Q),Q.eachChild(function(_){this.expandAll(_)},this);else{var P=this;P._dataModel.each(function(m){m.hasChildren()&&(P._expandMap[m._id]=1)}),P.ivm()}},$.collapseAll=function(){this._expandMap={},this.ivm()},$.makeVisible=function($){if($){var q=this;if(!q._rootData||$.isDescendantOf(q._rootData)){for(var z=$._parent;z;)q.expand(z),z=z._parent;q._23I=$,q.iv()}}},$.checkData=function(R){var g,p=this,G=p._checkMode,t=p.sm(),k=t.co(R);if(!t.sg()||!k){if(p._32o=1,G===Wb)k?t.rs(R):t.as(R);else if(G===bi)g=new uh(R),g.addAll(R._children);else if("descendant"===G)g=new uh,Kp(R,g);else if("all"===G&&(g=new uh,Kp(R,g),!k))for(var A=R._parent;A;)g.add(A),A=A._parent;g&&(k?t.rs(g):t.as(g)),delete p._32o}},$._97I=function(N,d,A,m,Z,W,w){var C=this,h=C._indent,g=C._levelMap[d._id],o=C.getIconWidth(d),l=Tm(C.getToggleIcon(d));l?(m+=h*g,Pq(N,l,m+h/2,Z+w/2,d,C),m+=h):m+=h*(g+1),C._checkMode&&(Pq(N,C.getCheckIcon(d),m+h/2,Z+w/2,d,C),m+=h),C.drawIcon(N,d,m,Z,o,w),C.drawLabel(N,d,m+o,Z,w)}},Po._14Q=function(Z){Z.getIcon=function(d){return d.getIcon()},Z.getIconWidth=function(w){return this.getIcon(w)?this._indent:0},Z.drawIcon=function(d,z,X,c,R,V){if(R){var o=this,B=o.getBodyColor(z),Y=Tm(o.getIcon(z),B);Y&&(V-=o.isRowLineVisible()?1:0,Xl(d,Y,As,X,c,R,V,z,o,B),gg(d,o.getBorderColor(z),X,c,R,V))}},Z.drawLabel=function(z,W,A,Z,f){var U=this;Sn(z,U.getLabel(W),U.getLabelFont(W),U.getLabelColor(W),A,Z,0,f)}},Po._50o=function(O){O._98I=function(){var N=this,v=N._39o=new ke;N._60I=new uh,v.mm(N._17o,N),v.md(N._18o,N),v.mh(N._19o,N)},O.setColumns=function(h){this._39o.clear(),this.addColumns(h)},O.addColumns=function(j){var I=this._39o;j.forEach(function(J){if(!(J instanceof Tr)){var b=og(J.className);J=Wg(b?b:Tr,J)}I.add(J)})},O.onColumnClicked=function(){},O.onCheckColumnClicked=function(){},O._3Q=function(Y){for(var m,K=0,x=this._60I,v=x.size();v>K;K++)if(m=x.get(K),m.column===Y)return m;return p},O.getColumnAt=function(T){var O=this._4Q(T);return O?O.column:p},O._4Q=function(t){for(var A=this,I=t.target?A.lp(t).x:t.x,N=A._60I,q=0;q<N.size();q++){var L=N.get(q),b=L.startX;if(I>=b&&I<b+L.column.getWidth())return L}return p},O.getToolTip=function(_){var f=this,R=f.getDataAt(_),P=f.getColumnAt(_);return R&&P?P.getToolTip(R,f):p},O.adjustTranslateX=function(Y){var e=this.getWidth()-this._91I;return e>Y&&(Y=e),Y>0?0:o(Y)},O._99I=function(){var $=this,l=$._29I,U=$._60I;U.clear(),$._91I=0,$._39o._roots.each(function(x){if(x.isVisible()){var u=$._91I+x.getWidth();$._91I<=l.x+l.width&&u>=l.x&&U.add({column:x,startX:$._91I}),$._91I=u}})},O.drawData=function(I,F,M){var x=this,J=x._rowHeight,S=J*M,m=x.isSelected(F),v=x._29I,y=v.x,V=v.width;x.drawRowBackground(I,F,m,y,S,V,J),x._60I.each(function(U){var u=U.column,r=U.startX,c=u.getWidth();c>0&&!x.isEditing(F,u)&&(I.save(),I.beginPath(),I.rect(r,S,c,J),I.clip(),x._87o(x.drawCell(I,F,m,u,r,S,c,J),M,r,S,c,J),x._columnLineVisible&&le(I,r+c-1,S,1,J,x._columnLineColor),I.restore())}),x._rowLineVisible&&le(I,y,S+J-1,V,1,x._rowLineColor)},O.drawCell=function(c,A,a,s,i,Z,Q,B){var K=this;if(s.drawCell)return s.drawCell(c,A,a,s,i,Z,Q,B,K);var e=K.getValue(A,s);Uo(c,e,s,K.getLabelFont(A,s,e),K.getLabelColor(A,s,e),i,Z,Q,B,A,K)},O.getColumnModel=function(){return this._39o},O._17o=function(){this.redraw()},O._18o=function(G){var b=this;G.data===b._sortColumn&&fj[G.property]?b.ivm():(b._42o(),b.redraw())},O._19o=function(){this.redraw()},O.getCurrentSortFunc=function(){var I=this,w=I._sortColumn;if(w&&w.isSortable()){var P=w.getSortFunc(),T=Ug===w.getSortOrder()?1:-1;return P||(P=Md),function(S,l){return P.call(I,I.getValue(S,w),I.getValue(l,w),S,l)*T}}return I._sortFunc},O.isCellEditable=function(k,g){return!this.isCheckMode()&&this.isSelected(k)||this.isCheckMode()&&k===this._focusData?g.isEditable()&&this.isEditable():!1},O._37O=function(t,n){if(xm(n))for(var Y=this,H=Y.lp(n),S=Y._60I,Q=Y._rowHeight,U=Y._29I,f=U.x,d=U.y,s=U.width,J=U.height,v=0;v<S.size();v++){var M=S.get(v),z=M.startX,G=M.column,N=G.getWidth();if(G!==Y._31o&&G!==Y._4o&&Y.isCellEditable(t,G,n)&&H.x>=z&&H.x<z+N){var Z={x:z,y:Y.getRowIndex(t)*Q,width:N,height:Q},m={x:Z.x+Y.tx(),y:Z.y+Y.ty(),width:Z.width,height:Z.height},y=0,x=0;return Z.x<f?y=Z.x-f:Z.x+Z.width>f+s&&(y=Z.x+Z.width-f-s),y&&(Y.tx(Y.tx()-y),m.x-=y),Z.y<d?x=Z.y-d:Z.y+Q>d+J&&(x=Z.y+Q-d-J),x&&(Y.ty(Y.ty()-x),m.y-=x),Y.beginEditing({data:t,column:G,value:Y.getValue(t,G),event:n,rect:Z,editorRect:m,view:Y}),void 0}}}},Tp.BaseItemEditor=function(k,l,z,o){this._data=k,this._column=l,this._master=z,this._editInfo=o},jr("BaseItemEditor",h,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var $h=D.Tab=function(){td($h,this)};fe("Tab",Mo,{ms_ac:["view","closable","disabled"],_icon:p,_closable:!1,_disabled:!1,setParent:ff});var Tr=D.Column=function(){td(Tr,this)};fe("Column",Mo,{_46o:1,ms_ac:["accessType","valueType",ks,vp,Eo,Mh,"align",ym,"sortOrder",Cc,"sortable","clickable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:Ug,_sortFunc:p,_sortable:!0,_clickable:!0,setWidth:function(y){16>y&&(y=16);var c=this._width;this._width=y,this.fp(Mh,c,y)},getToolTip:function(B,Q){return this.formatValue(Q.getValue(B,this))}});var bc=D.Property=function(){td(bc,this)};fe("Property",Mo,{_46o:1,ms_ac:["accessType","valueType",vp,Eo,"categoryName",ym,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:p,getToolTip:function(b,V,U){var W=this;return V?W.formatValue(U.getValue(b,W)):U.getPropertyName(W)}}),Tp.AccordionView=function(){var M=this;M._20o={},M._21o=new uh,M._10o=p,M._9o=p,M._11o=p,M._view=Yf(0,M),M.iv()},jr("AccordionView",h,{ms_v:1,ms_fire:1,ms_ac:[_l,Nn,"titleHeight",Sl,$q,"titleBackground","selectWidth",ri,"orientation","separatorColor"],_expandIcon:U.accordionViewExpandIcon,_collapseIcon:U.accordionViewCollapseIcon,_titleHeight:Ze,_labelColor:U.accordionViewLabelColor,_labelFont:U.accordionViewLabelFont,_titleBackground:U.accordionViewTitleBackground,_selectBackground:U.accordionViewSelectBackground,_selectWidth:U.accordionViewSelectWidth,_orientation:"v",_separatorColor:U.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(Y,j,r,K){var n=this,A=yb();if(n._20o[Y])throw Y+" already exists";A.onmousedown=gj,A.style.cursor=Kn,A.addEventListener(_?yh:Fh,function(l){gj(l)},!1),A.addEventListener(_?Lj:Wc,function(c){gj(c),xm(c)&&(n._10o===Y?n.collapse():n.expand(Y))},!1),rj(n._view,A),n._20o[Y]={content:j,div:A,canvas:Ne(A),icon:K},n._21o.add(Y),r&&n.expand(Y),n.iv()},remove:function(t){var i=this,u=i._20o[t];u&&(_k(u.div),delete i._20o[t],i._21o.remove(t),i.iv())},clear:function(){var q=this;q._20o={},q._21o.clear(),q.iv()},isExpanded:function(c){return this._10o===c},expand:function(C){var A=this;A._20o[C]&&A._10o!==C&&(A._10o=C,A.onExpanded(C),A.iv())},onExpanded:function(){},collapse:function(){var K=this;K._10o&&(K.onCollapsed(K._10o),delete K._10o,K.iv())},onCollapsed:function(){},initCanvas:function(i,x,s){Yc(i,x,s);var H=Xh(i);return Co(H,0,0,1),H.clearRect(0,0,x,s),H},drawTitle:function(C,D,_,H,c){var g=this,S=Tm(c.icon),M=g.isExpanded(D),X=g._titleHeight,F=g._titleBackground,i=g._selectWidth,v=g._separatorColor,W=Tm(M?g._expandIcon:g._collapseIcon),q=i+4;le(C,0,0,_,H,F),M&&i&&le(C,0,0,i,H,g._selectBackground),(M||g._21o.get(g._21o.size()-1)!==D)&&le(C,0,H-1,_,1,v?v:Wr(F)),S&&(Pq(C,S,q+rl(S)/2,X/2),q+=rl(S)+2),Sn(C,D,g.getLabelFont(D),g.getLabelColor(D),q,0,0,X),W&&Pq(C,W,_-rl(W)/2-4,X/2)},validateImpl:function(){var s=this,i=s._view,r=0,v=0,g=s.getWidth(),E=s.getHeight(),W=s._titleHeight,H=s._21o.size()*W,h=s._11o,l=s._9o;
delete s._11o,delete s._9o,s._21o.each(function(w){var t,o,T=s._20o[w],I=T.content,p=s._10o===w;ld(s)?(Eb(T.div,r,0,W,E),t=s.initCanvas(T.canvas,W,E),Up(t,0,E),nd(t,-u),s.drawTitle(t,w,E,W,T),t.restore(),p?(o=Q(0,g-H),I&&(s._11o=I,s._9o=Gn(I),Eb(I,r+W,0,o,E)),r+=W+o):r+=W):(Eb(T.div,0,v,g,W),t=s.initCanvas(T.canvas,g,W),s.drawTitle(t,w,g,W,T),t.restore(),p?(o=Q(0,E-H),I&&(s._11o=I,s._9o=Gn(I),Eb(I,0,v+W,g,o)),v+=W+o):v+=W)});var L=s._9o;h&&h!==s._11o&&h.endEditing&&h.endEditing(),L&&L!==l&&rj(i,L),l&&l!==L&&_k(l)}}),Tp.SplitView=function(h,M,r,E){var z=this,C=z._dividerDiv=yb(),V=z._60O=Ne(),G=z._61O=Ne(),S=V.style,B=G.style;z._view=Yf(1,z),rj(z._view,C),S.msTouchAction=fl,S.pointerEvents=fl,S.cursor=Kn,B.msTouchAction=fl,B.pointerEvents=fl,B.cursor=Kn,h&&z.setLeftView(h),M&&z.setRightView(M),r&&z.setOrientation(r),E!=p&&z.setPosition(E),z.setStatus(of),new No(z)},jr("SplitView",h,{ms_v:1,ms_fire:1,ms_ac:["continuousLayout","dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_continuousLayout:!1,_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:U.splitViewDividerSize,_dividerBackground:U.splitViewDividerBackground,_dragOpacity:U.splitViewDragOpacity,_toggleIcon:U.splitViewToggleIcon,onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(e,r){var z=this,g=z._position;isNaN(e)||(r||(z._82O=0>e?-1:e>1?1:0),z._position=e,z.fp(tk,g,e))},getLeftView:function(){return this._leftView},setLeftView:function(j){var m=this,A=m._leftView,b=m._view;if(m._leftView!==j){if(A&&A!==m._rightView){var i=Gn(A);i.parentNode===b&&_k(i)}if(m._leftView=j,j){var V=Gn(j);V.parentNode!==b&&b.insertBefore(V,m._dividerDiv)}m.fp("leftView",A,j)}},getRightView:function(){return this._rightView},setRightView:function(B){var p=this,u=p._rightView,h=p._view;if(p._rightView!==B){if(u&&u!==p._leftView){var X=Gn(u);X.parentNode===h&&_k(X)}if(p._rightView=B,B){var E=Gn(B);E.parentNode!==h&&h.insertBefore(E,p._dividerDiv)}p.fp("rightView",u,B)}},validateImpl:function(){var G=this,a=G._draggable,D=G._position,y=G.getWidth(),T=G.getHeight(),Z=G._dividerSize,X=G._dividerBackground,i=_?18:8,h=G._dividerDiv,C=G._82O,t=G._60O,P=G._61O,v=G._toggleIcon,z=G._status,N=h.style,R=null,e=_?20:4,g=v.comps[0];Z>=i||0===Z?G._coverDiv&&(_k(G._coverDiv),delete G._coverDiv):G._coverDiv||(G._coverDiv=yb(),I&&(G._coverDiv.style.background=Lk),rj(h,G._coverDiv)),G._togglable?t.parentNode||(rj(h,t),rj(h,P)):(_k(t),_k(P));var E=G._coverDiv,m=G._leftView,J=G._rightView;if(ld(G)){if(Z>y&&(Z=y),z===of)if(1===C)var r=j(D,y),U=Q(0,y-Z-r);else-1===C?(U=j(-D,y),r=Q(0,y-Z-U)):(r=o((y-Z)*D),U=Q(0,y-Z-r));else"cl"===z?(r=0,U=Q(0,y-Z)):"cr"===z&&(U=0,r=Q(0,y-Z));m&&Eb(m,0,0,r,T),J&&Eb(J,r+Z,0,U,T),Eb(h,r,0,Z,T),G._22o=r,E&&(Eb(E,Z/2-i/2,0,i,T),E.style.cursor=a?Ie:""),h.style.cursor=a?Ie:"";var H=h.clientHeight/2,f=h.clientWidth;Yc(t,f,f),Eb(t,0,H-f-e,f,f),R=Xh(t),Co(R,0,0,1),g.rotation=-u,yf(R,v,0,0,f,f),R.restore(),Yc(P,f,f),Eb(P,0,H+e,f,f),R=Xh(P),Co(R,0,0,1),g.rotation=u,yf(R,v,0,0,f,f),R.restore()}else{if(Z>T&&(Z=T),z===of)if(1===C)var O=j(D,T),S=Q(0,T-Z-O);else-1===C?(S=j(-D,T),O=Q(0,T-Z-S)):(O=o((T-Z)*D),S=Q(0,T-Z-O));else"cl"===z?(O=0,S=Q(0,T-Z)):"cr"===z&&(S=0,O=Q(0,T-Z));m&&Eb(m,0,0,y,O),J&&Eb(J,0,O+Z,y,S),Eb(h,0,O,y,Z),G._22o=O,E&&(Eb(E,0,Z/2-i/2,y,i),E.style.cursor=a?dg:""),N.cursor=a?dg:"";var W=h.clientWidth/2,f=h.clientHeight;Yc(t,f,f),Eb(t,W-f-e,0,f,f),R=Xh(t),Co(R,0,0,1),g.rotation=0,yf(R,v,0,0,f,f),R.restore(),Yc(P,f,f),Eb(P,W+e,0,f,f),R=Xh(P),Co(R,0,0,1),g.rotation=V,yf(R,v,0,0,f,f),R.restore()}N.background=X}});var No=function(W){this.sv=W,this.addListeners()};bd(No,h,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(u){var R=this,F=R.sv,z=F._dividerDiv,m=F._60O,D=F._61O,I=F._status,N=u.target;if(N===m)I===of?F.setStatus("cl"):"cr"===I&&F.setStatus(of);else if(N===D)I===of?F.setStatus("cr"):"cl"===I&&F.setStatus(of);else if(Ae(u)&&(N===z||N===F._coverDiv)&&(gj(u),F.isDraggable())){F.getLeftView(),F.getRightView();var f=R.maskDiv=yb();if(f.style.left=0,f.style.top=0,f.style.width=F.getWidth()+"px",f.style.height=F.getHeight()+"px",F.getView().appendChild(f),!F.isContinuousLayout()){var k=R.resizeDiv=yb();k.style.left=z.style.left,k.style.top=z.style.top,k.style.width=z.style.width,k.style.height=z.style.height,k.style.opacity=F.getDragOpacity(),k.style.background=F.getDividerBackground(),rj(R.getView(),k)}R._lastAbsPosition=F._22o,R._86o=ld(F)?kq(u).x:kq(u).y,Kc(R,u)}},handleWindowTouchMove:function(u){Ae(u)&&this.update(u,this.sv.isContinuousLayout())},handleWindowTouchEnd:function(S){var y=this;y.update(S,!0),y.sv.setStatus(of),y.maskDiv&&_k(y.maskDiv),y.resizeDiv&&_k(y.resizeDiv),y.maskDiv=y.resizeDiv=p},handle_mousedown:function(P){xm(P)&&this.handle_touchstart(P)},handleWindowMouseMove:function(C){this.handleWindowTouchMove(C)},handleWindowMouseUp:function(w){this.handleWindowTouchEnd(w)},update:function(E,u){var l=this,N=l.sv,f=ld(N)?N.getWidth():N.getHeight(),C=N._dividerSize,c=l._lastAbsPosition-l._86o;ld(N)?(c+=kq(E).x,c>f-C&&(c=f-C),0>c&&(c=0),l.resizeDiv&&(l.resizeDiv.style.left=c+Vj)):(c+=kq(E).y,c>f-C&&(c=f-C),0>c&&(c=0),l.resizeDiv&&(l.resizeDiv.style.top=c+Vj)),u&&f!==C&&(1===N._82O?N.setPosition(c,1):-1===N._82O?N.setPosition(c-f+C,1):N.setPosition(c/(f-C),1))}}),Tp.TabView=function(){var L=this,j=L._view=Yf(1,L),e=L._91O=yb(1),$=L._tabModel=new ke,c=$.sm(),Y=L.invalidate;L._7o=new uh,L._canvas=Ne(e),rj(j,e),rj(j,L._92O=yb(1)),c.setSelectionMode(Mr),c.ms(Y,L),$.mm(Y,L),$.md(Y,L),$.mh(Y,L),new Bo(L),L.iv()},jr("TabView",h,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",Sl,$q,"tabBackground","selectWidth",ri,"moveBackground","insertColor"],_tabPosition:ko,_tabHeight:Ze,_tabGap:U.tabViewTabGap,_labelColor:U.tabViewLabelColor,_labelFont:U.tabViewLabelFont,_tabBackground:U.tabViewTabBackground,_selectWidth:U.tabViewSelectWidth,_selectBackground:U.tabViewSelectBackground,_moveBackground:U.tabViewMoveBackground,_insertColor:U.tabViewInsertColor,_movable:!0,getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(C,W,s){var E=new $h,H=this._tabModel;return E.setName(C),E.setView(W),H.add(E),s&&H.sm().ss(E),E},getLabel:function(y){return y.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(W){this._23o=W,this.iv()},get:function(k){var N=this,Y=N._tabModel;if(Tq(k))return Y._roots.get(k);if(Op(k)){var d;return Y.each(function(h){k===N.getLabel(h)&&(d=h)}),d}return k instanceof $h?k:p},select:function(M){this._tabModel.sm().ss(this.get(M))},remove:function(x){var X=this;if(x=X.get(x)){var F=X._tabModel,n=F._roots.indexOf(x);X._tabModel.remove(x),X._12Q(--n)}},getCurrentTab:function(){return this._8o},hideTabView:function(j,C){C.parentNode===this._92O&&(Bg(C)?(C.style.display=nl,C._tab_=j):_k(C),mk())},showTabView:function(Z,I){Bg(I)&&(I.style.display="block",I._tab_=Z),I.parentNode!==this._92O&&(rj(this._92O,I),mk())},_24o:function(){var t,a=this,w=a._8o,S=a._9o,P=a._tabModel.sm().ld();P&&(t=Gn(P.getView())),t!==S&&(S&&(w.getView()&&w.getView().endEditing&&w.getView().endEditing(),a.hideTabView(w,S)),t&&a.showTabView(P,t)),a._8o=P,a._9o=t,w!==P&&a.onTabChanged(w,P)},onTabClosing:function(){return!0},onTabChanged:function(){},onTabClosed:function(n,d){this._12Q(--d)},_12Q:function(Z){var m=this,k=m._tabModel,h=k.size();if(h&&!k.sm().ld()){Z==p&&(Z=0),Z>=h&&(Z=h-1),0>Z&&(Z=0);for(var e=Z;e>=0;e--){var l=m.get(e);if(!l.isDisabled())return m.select(l),l}for(e=Z+1;h>e;e++)if(l=m.get(e),!l.isDisabled())return m.select(l),l}},getTabWidth:function(R){var W=4,x=Tm(R.getIcon());x&&(W+=rl(x,R)+4);var u=this.getLabel(R);return u&&(W+=sk(this.getLabelFont(R),u).width+4),R.isClosable()&&(W+=10),W},drawTab:function(f,B,w,H,o,d,F){var A,M=this,v=M._tabPosition,P=w+4,K=M._selectWidth,i=Tm(B.getIcon()),_=B.isDisabled(),h=M.getLabelColor(B),D=M.getLabelFont(B),t=M.getLabel(B),k=M._selectBackground,T=v===Aj+"-vertical",U=v===ig+"-vertical";(T||U)&&(P=H+4),_&&(f.globalAlpha=cn),le(f,w,H,o,d,F),B===M._8o&&K&&(v===ko?le(f,w,H+d-K,o,K,k):v===Aj?le(f,w+o-K,H,K,d,k):v===ig?le(f,w,H,K,d,k):T?le(f,w+o-K,H,K,d,k):U?le(f,w,H,K,d,k):le(f,w,H,o,K,k));var R=o/2;if(T&&(Up(f,R,H+d/2),nd(f,V),Up(f,-R,-H-d/2)),i){var E=ws(i,B),g=rl(i,B);if(T||U){var c=w+o/2,Y=P+E/2;Up(f,c,Y),nd(f,u),Up(f,-c,-Y),Pq(f,i,w+o/2,P+E/2,B,M),Up(f,c,Y),nd(f,-u),Up(f,-c,-Y),P+=E+4}else Pq(f,i,P+g/2,H+d/2,B,M),P+=g+4}return T||U?(Up(f,o/2,P+o/2),nd(f,u),Up(f,-o/2,-P-o/2),Sn(f,t,D,h,w,P,d,o),Up(f,o/2,P+o/2),nd(f,-u),Up(f,-o/2,-P-o/2)):Sn(f,t,D,h,P,H,o,d),T&&(Up(f,R,H+d/2),nd(f,-V),Up(f,-R,-H-d/2)),B.isClosable()&&(A=U?{x:w+o-12,y:H+d-12,width:12,height:12}:{x:w+o-12,y:H+2,width:12,height:12},this.drawCloseIcon(B,f,h,A)),_&&(f.globalAlpha=1),A},drawCloseIcon:function(h,Q,T,w){var v=w.x,r=w.y;Q.strokeStyle=T,Q.lineWidth=1,Q.beginPath(),Q.moveTo(v+2,r+8),Q.lineTo(v+8,r+2),Q.moveTo(v+8,r+8),Q.lineTo(v+2,r+2),Q.stroke()},validateImpl:function(){var y=this;y._24o();var j,e=y._canvas,X=y._tabPosition,t=y._91O,I=y._92O,u=y._tabModel,Y=y.getWidth(),$=y.getHeight(),K=y._tabHeight,d=y._7o,o=y._tabGap,Z=X===ko,R=X===Aj,B=X===ig,U=X===Aj+"-vertical",_=X===ig+"-vertical",r=y._23o,V=0;if((R||B)&&u._roots.each(function(r){V=Q(y.getTabWidth(r),V)}),Z?(Eb(t,0,0,Y,K),j={x:0,y:K,width:Y,height:Q(0,$-K)}):R?(Eb(t,0,0,V,$),j={x:V,y:0,width:Q(0,Y-V),height:$}):B?(Eb(t,Y-V,0,V,$),j={x:0,y:0,width:Q(0,Y-V),height:$}):U?(Eb(t,0,0,K,$),j={x:K,y:0,width:Q(0,Y-K),height:$}):_?(Eb(t,Y-K,0,K,$),j={x:0,y:0,width:Q(0,Y-K),height:$}):(Eb(t,0,$-K,Y,K),j={x:0,y:0,width:Y,height:Q(0,$-K)}),Eb(I,j),U||_){y._9o&&(j.x=0,Eb(y._8o.getView(),j)),Yc(e,K,$);var C=Xh(e),x=0;if(Co(C,0,y.ty(),1),C.clearRect(0,0,K,$),d.clear(),u._roots.each(function(Y){var B,X=y.getTabWidth(Y);r&&r.tab===Y||(B=y.drawTab(C,Y,0,x,K,X,y._tabBackground)),d.add({_75o:B,tab:Y,startY:x,endY:x+X,height:X}),x+=X+o}),y._23Q=Q(0,x-o),r){var E=r.position;y.drawTab(C,r.tab,0,r.startY,K,r.height,y._moveBackground),le(C,0,E,K,1,y._insertColor)}C.restore(),y.ty(y.ty())}else if(R||B){y._9o&&(j.x=0,Eb(y._8o.getView(),j)),Yc(e,V,$);var C=Xh(e),x=0;if(Co(C,0,y.ty(),1),C.clearRect(0,0,V,$),d.clear(),u._roots.each(function($){var P;r&&r.tab===$||(P=y.drawTab(C,$,0,x,V,K,y._tabBackground)),d.add({_75o:P,tab:$,startY:x,endY:x+K,height:K}),x+=K+o}),y._23Q=Q(0,x-o),r){var E=r.position;y.drawTab(C,r.tab,0,r.startY,V,r.height,y._moveBackground),le(C,0,E,V,1,y._insertColor)}C.restore(),y.ty(y.ty())}else{y._9o&&(j.y=0,Eb(y._8o.getView(),j)),Yc(e,Y,K);var C=Xh(e),H=0;if(Co(C,y.tx(),0,1),C.clearRect(0,0,Y,K),d.clear(),u._roots.each(function(V){var p,W=y.getTabWidth(V);r&&r.tab===V||(p=y.drawTab(C,V,H,0,W,K,y._tabBackground)),d.add({_75o:p,tab:V,startX:H,endX:H+W,width:W}),H+=W+o}),y._64I=Q(0,H-o),r){var E=r.position;y.drawTab(C,r.tab,r.startX,0,r.width,K,y._moveBackground),ve(C,y._insertColor,E,0,K)}C.restore(),y.tx(y.tx())}for(var N=[],n=I.children,g=0;g<n.length;g++){var f=n[g],a=f._tab_;a&&!u.contains(a)&&N.push(f)}N.forEach(function(l){I.removeChild(l)})}});var Bo=function(p){this.tv=p,this.addListeners()};bd(Bo,h,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(N){this.handleScroll(N,10*(N.wheelDelta/40))},handle_DOMMouseScroll:function(Z){this.handleScroll(Z,10*-Z.detail)},handleScroll:function(W,O){gj(W);var P=this.tv,B=P._tabPosition;!P._40o()||B!==ko&&B!==eg||P.tx(this.tv.tx()+O),!P._41o()||B!==Aj&&B!==ig&&B!==Aj+"-vertical"&&B!==ig+"-vertical"||P.ty(this.tv.ty()+O)},_8Q:function(u){var L,I,$=this.tv,P=$._tabPosition,E=$._7o;if(P===ko||P===eg){var o=$.lp(u).x;for(L=0;L<E.size();L++)if(I=E.get(L),I.startX<=o&&o<=I.endX)return I}else if(P===Aj||P===ig||P===Aj+"-vertical"||P===ig+"-vertical"){var V=$.lp(u).y;for(L=0;L<E.size();L++)if(I=E.get(L),I.startY<=V&&V<=I.endY)return I}return p},isClickable:function(r){var H=this.tv,Q=H._tabPosition,T=this._73o=this._8Q(r);return!H._40o()||Q!==ko&&Q!==eg?!H._41o()||Q!==Aj&&Q!==ig&&Q!==Aj+"-vertical"&&Q!==ig+"-vertical"?T&&(!T.tab.isDisabled()||H.isMovable()):!0:!0},handle_mousemove:function(X){var o=this;cj?o._74o=o._8Q(X):o.getView().style.cursor=o.isClickable(X)?Kn:""},handle_mousedown:function(w){this.handle_mousemove(w),this.handle_touchstart(w)},handle_touchstart:function(H){var Y=this,F=Y.tv,t=F._tabPosition;gj(H),xm(H)&&Y.isClickable(H)&&(t===ko||t===eg?(Y.x=kq(H).x,Y.lp=F.lp(H),Y.tx=F.tx()):(Y.y=kq(H).y,Y.lp=F.lp(H),Y.ty=F.ty()),Kc(Y,H))},handleWindowMouseMove:function(s){this.handleWindowTouchMove(s)},handleWindowTouchMove:function(C){var m,q=this,L=q.tv,f=L._tabPosition,S=q._73o;if(f===ko||f===eg){if(m=kq(C).x-q.x,!q._25o&&!q.moving&&B(m)>2&&(L._40o()&&!ok(C)?q._25o=1:S&&L.isMovable()&&(q.moving=1)),q._25o)L.tx(q.tx+m);else if(q.moving){var t=q.lp.x+m,e=L._tabGap/2;L._7o.each(function(n){var K=n.endX,d=t-n.startX<K-t;t>=n.startX&&K>=t&&L._7Q({tab:S.tab,startX:S.startX+m,width:S.width,front:d,insertTab:n.tab,position:d?Q(0,n.startX-e):j(L._64I,K+e)})})}}else if(m=kq(C).y-q.y,!q._25o&&!q.moving&&B(m)>2&&(L._41o()&&!ok(C)?q._25o=1:S&&L.isMovable()&&(q.moving=1)),q._25o)L.ty(q.ty+m);else if(q.moving){var z=q.lp.y+m,e=L._tabGap/2;L._7o.each(function(u){var I=u.endY,Z=z-u.startY<I-z;z>=u.startY&&I>=z&&L._7Q({tab:S.tab,startY:S.startY+m,height:S.height,front:Z,insertTab:u.tab,position:Z?Q(0,u.startY-e):j(L._23Q,I+e)})})}},handleWindowMouseUp:function(x){this.handleWindowTouchEnd(x)},handleWindowTouchEnd:function(){var G=this,k=G.tv,i=k._tabPosition,I=k.getTabModel(),h=I._roots,U=G._73o;if(G.moving){var K=k._23o;if(K&&K.insertTab!==K.tab){var A=K.tab,l=h.remove(A),W=h.indexOf(K.insertTab);W>=0&&(K.front||W++,W<=h.size()&&(h.add(A,W),I._38I(A,l,W)))}k._7Q(p),delete G.moving}else if(!G._25o&&U){A=U.tab;var b=G._74o;if(!b||b.tab===A)if(!A.isDisabled()&&$f(U._75o,G.lp)){var Q=function(){var n=h.indexOf(A);I.remove(A),k.onTabClosed(A,n)};k.onTabClosing(A,Q)&&Q()}else A.isDisabled()||k._8o===A||I.sm().ss(A)}G._25o=G._73o=G._74o=i===ko||i===eg?G.x=G.lp=G.tx=p:G.y=G.lp=G.ty=p}}),Tp.PropertyView=function(T){var c=this;c._view=Yf(1,c),c._canvas=Ne(c._view),rj(c._view,c._79O=yb()),c._rows=new uh,c._28o=new uh,c._26o={},c._26Q={};var k=c._propertyModel=new ke,b=c.ivm;k.mm(b,c),k.md(b,c),k.mh(b,c),c.dm(T?T:new ke),new Xo(c)},jr("PropertyView",h,{ms_ac:[Sl,Tc,$q,vp,Eo,"categorizable",qe,Cc,lr,_l,Nn,Dg,Se,Zd,"selectRowIndex",ri,"background",Fj,Vl,Df,Zj,Bs],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:Am,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:_f,_background:U.propertyViewBackground,_expandIcon:U.propertyViewExpandIcon,_collapseIcon:U.propertyViewCollapseIcon,_scrollBarColor:Hb,_scrollBarSize:Db,_autoHideScrollBar:Eg,_selectBackground:U.propertyViewSelectBackground,_rowHeight:El,_rowLineVisible:U.propertyViewRowLineVisible,_rowLineColor:U.propertyViewRowLineColor,_10I:.5,_columnLineVisible:U.propertyViewColumnLineVisible,_columnLineColor:U.propertyViewColumnLineColor,_labelColor:U.propertyViewLabelColor,_labelSelectColor:U.propertyViewLabelSelectColor,_labelFont:U.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(k){0>k&&(k=0),k>1&&(k=1);var X=this,j=X._10I;X._10I=k,X.fp("columnPosition",j,k)},getPropertyName:function($){return $.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(O,D,s){return s===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(R,H){return H===this._selectRowIndex?this._labelSelectColor:R.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(w){var E=this.getHeight()-this._59I;return E>w&&(w=E),w>0?0:o(w)},isExpanded:function(f){if(!f)return!0;var j=this._26o[f];return j?j.isExpanded:!(this._26Q[f]===!1)},toggle:function(g){var X=this;X.isExpanded(g)?X.collapse(g):X.expand(g)},expandAll:function(){this.validate();for(var b in this._26o)this.expand(b)},expand:function(B){if(B&&B!==nl){var Z=this,A=Z._26o[B];A&&!A.isExpanded&&(A.isExpanded=!0,Z.onExpanded(B),Z.ivm())}},onExpanded:function(){},collapseAll:function(){this.validate();for(var J in this._26o)this.collapse(J)},collapse:function(q){if(q&&q!==nl){var Z=this,Q=Z._26o[q];Q&&Q.isExpanded&&(Q.isExpanded=!1,Z.onCollapsed(q),Z.ivm())}},onCollapsed:function(){},getCategoryName:function(G){if(!this.isCategorizable())return nl;var q=G.getCategoryName();return q?q:nl},getPropertyModel:function(){return this._propertyModel},handleSelectionChange:function(){this.ivm()},setDataModel:function(i){var I=this,U=I._dataModel;U!==i&&(U&&(U.umd(I.handlePropertyChange,I),I._selectionModel||U.sm().ums(I.handleSelectionChange,I)),I._dataModel=i,i.md(I.handlePropertyChange,I),I._selectionModel?I._selectionModel._21I(i):i.sm().ms(I.handleSelectionChange,I),I.fp(Il,U,i))},isVisible:function(P){return this._visibleFunc?this._visibleFunc(P):!0},onPropertyChanged:function(F){var V=this,m=F.property;Jp[m]?V.ivm():V.iv(),m===Cn&&V._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:Jg},handlePropertyChange:function(U){this._27o===U.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){var L=this;L._96I||(L.setSelectRowIndex(-1),L._96I=1,L.iv())},redraw:function(){this.iv()},validateModel:function(){var F=this,J=F._rows,e=F._28o,f={},p=new uh,Z=F._27o;F.updateCurrentData(),Z!==F._27o&&F.endEditing(),J.clear(),e.clear(),F.getRawProperties().each(function(g){if(F.isVisible(g)){p.add(g);var G=F.getCategoryName(g);f[G]||(e.add(G,G===nl?0:R),f[G]={isExpanded:F.isExpanded(G),properties:new uh})}}),F._sortFunc&&p.sort(F._sortFunc);for(var j in F._26o)F._26Q[j]=F.isExpanded(j);F._26o=f,e.each(function(N){N!==nl&&J.add(N);var U=f[N];U.isExpanded&&p.each(function(v){F.getCategoryName(v)===N&&(U.properties.add(v),J.add({property:v,data:F._27o}))},F)})},validateImpl:function(){var o=this;o._76o(),o._96I&&(o.validateModel(),delete o._96I);var h=o._canvas,i=o.getWidth(),$=o.getHeight(),O=-o.ty(),e=o._rowHeight,l=o._indent,k=i-l,n=o._rows,z=n.size(),W=o._9I=l+k*o._10I,w=o._59I=z*e;Yc(h,i,$),o._29I={x:0,y:O,width:i,height:$},o._31I=Z(O/e),o._14I=E((O+$)/e),o._31I<0&&(o._31I=0),o._14I>z&&(o._14I=z);var H,P=Xh(h),r=o._background;Co(P,0,-O,1),P.beginPath(),P.rect(0,O,i,$),P.clip(),P.clearRect(0,O,i,$),o._93db(P),r&&le(P,0,0,l,w,r);for(var B=o._31I;B<o._14I;B++){var g=n.get(B),O=e*B;if(Op(g))r&&le(P,l,O,k,e,r),H=Tm(o.isExpanded(g)?o._expandIcon:o._collapseIcon),H&&Xl(P,H,As,0,O,l,e),P.save(),P.beginPath(),P.rect(l,O,k,e),P.clip(),o.drawCategoryName(P,g,B,l,O,k,e),P.restore();else{var m=g.property,C=g.data,H=Tm(m.getIcon()),D=o._selectRowIndex===B?o.getSelectBackground():p;if(H&&Xl(P,H,As,0,O,l,e),D&&le(P,l,O,k,e,D),P.save(),P.beginPath(),P.rect(l,O,W-l,e),P.clip(),o.drawPropertyName(P,m,B,l,O,W-l,e),P.restore(),!o.isEditing(C,m)){var M=W+1,J=i-W-1;P.save(),P.beginPath(),P.rect(M,O,J,e),P.clip(),o._87o(o.drawPropertyValue(P,m,o.getValue(C,m),B,M,O,J,e,C),B,M,O,J,e),P.restore()}}o._rowLineVisible&&le(P,l,O+e-1,k,1,o._rowLineColor)}o._columnLineVisible&&(le(P,W,0,1,w,o._columnLineColor),le(P,i-1,0,1,w)),o._92db(P),o._93I(),P.restore(),o.ty(o.ty())},drawCategoryName:function(p,X,m,c,J,s,O){Sn(p,X,this.getCategoryFont(X),this.getCategoryColor(X),c,J,s,O)},drawPropertyName:function(f,c,w,n,J,j,$){return c.drawPropertyName?(c.drawPropertyName(f,c,w,n,J,j,$,this),void 0):(Sn(f,this.getPropertyName(c),this.getPropertyFont(c,w),this.getPropertyColor(c,w),n,J,j,$),void 0)},drawPropertyValue:function(U,e,f,n,m,h,F,K,M){return e.drawPropertyValue?e.drawPropertyValue(U,e,f,n,m,h,F,K,M,this):(Uo(U,f,e,this.getLabelFont(e,f,n),this.getLabelColor(e,f,n),m,h,F,K,M,this),void 0)},isPropertyEditable:function(t){return t.isEditable()&&this.isEditable()},setProperties:function(p){this._propertyModel.clear(),this.addProperties(p)},addProperties:function(K){if(K){var s=this._propertyModel;K.forEach(function(p){if(!(p instanceof bc)){var C=og(p.className);p=Wg(C?C:bc,p)}s.add(p)})}},getRowIndexAt:function(c){var B=this,H=Z(B.lp(c).y/B._rowHeight);return H>=0&&H<B._rows.size()?H:-1},getPropertyAt:function(D){var O=this,c=O.getRowIndexAt(D);return c>=0?O._rows.get(c).property:p},getToolTip:function(N){var j=this,B=j.getPropertyAt(N),e=j._27o;return B&&e?B.getToolTip(e,j._9I<j.lp(N).x,j):p}});var Xo=function(K){this.pv=K,this.addListeners()};bd(Xo,h,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(g){this.getView().style.cursor=g},clear:function(){var G=this;G._62O=G.cp=G.ty=G.p=p,G.setCursor(Wb)},handle_mousedown:function(f){this.handle_touchstart(f)},handle_touchstart:function(J){var U=this,L=U.pv;gj(J),L.setFocus(J)&&(xm(J)?(U.cp=kq(J),U.ty=L.ty(),U.p=L.getColumnPosition(),U.handle_touchmove(J)):L.setSelectRowIndex(L.getRowIndexAt(J)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(G){this.handle_touchend(G)},handle_touchend:function(B){var v=this;if(v.cp&&!v._62O){var Y=v.pv,n=Y.lp(B),g=n.x,P=n.y,l=Y._indent,m=Y.getRowIndexAt(B),U=Y._9I;if(m>=0){var s=Y._rowHeight,Q=s*m,C=Y._rows.get(m),V=C.property;if(Op(C))Tm(Y.isExpanded(C)?Y._expandIcon:Y._collapseIcon)&&g>=0&&l>=g&&P>=Q&&Q+s>=P?Y.toggle(C):dl(B)&&Y.toggle(C);else if(g>U&&Y.isPropertyEditable(V,B)){var W={x:U+1,y:Q,width:Y.getWidth()-U-1,height:s},E={x:W.x+Y.tx(),y:W.y+Y.ty(),width:W.width,height:W.height},S=0,R=Y._29I;W.y<R.y?S=W.y-R.y:W.y+s>R.y+R.height&&(S=W.y+s-R.y-R.height),S&&(Y.ty(Y.ty()-S),E.y-=S),Y.beginEditing({data:C.data,property:V,value:Y.getValue(C.data,V),event:B,rect:W,editorRect:E,view:Y})}}Y.setSelectRowIndex(m)}v.clear()},handleWindowMouseMove:function(i){this.handleWindowTouchMove(i)},handleWindowTouchMove:function(G){var P=this,X=P.pv,I=P.ty,Y=P.cp,Z=kq(G),S=P._62O;if("p"===S)X.setTranslateY(I+Z.y-Y.y);else if("c"===S){var N=X.getWidth()-X._indent;if(N>16){var z=P.p-(Y.x-Z.x)/N,W=16/N;W>z&&(z=W),z>1-W&&(z=1-W),X.setColumnPosition(z)}}else"s"===S&&X.setTranslateY(I+(Y.y-Z.y)*X._59I/X._29I.height)},handle_mousemove:function(I){this.handle_touchmove(I)},handle_touchmove:function(y){if(!cj&&xm(y)){var k=this,u=k.pv,n=B(u.lp(y).x-u._9I)<=(_?8:3);k.cp?k._62O||(n?(k._62O="c",Kc(k)):B(kq(y).y-k.cp.y)>=2&&(k._62O=k.isV(y)?"s":"p",Kc(k))):(n?k.setCursor(Ie):k.setCursor(Wb),k.isV(y)&&u._43o())}},isV:function(d){var k=this.pv,c=k._29I;return k._41o()&&c.x+c.width-k.lp(d).x<zr},handle_mousewheel:function(Q){this.handleScroll(Q,Q.wheelDelta/40)},handle_DOMMouseScroll:function(s){2===s.axis&&this.handleScroll(s,-s.detail)},handleScroll:function(z,W){var D=this.pv;gj(z),D.endEditing(),D.translate(0,W*D.getRowHeight())},handle_keydown:function(p){var v=this.pv,J=v._rows.size(),B=v._selectRowIndex+(Xk(p)?-1:1);(Xk(p)||gd(p))&&(0>B&&(B=0),B>=J&&(B=J-1),v.setSelectRowIndex(B))}}),Tp.ListView=function(U){this._5o(U),new vm(this)},jr("ListView",h,{ms_ac:[Sl,Tc,$q,Fj,qe,Vl,Df,Cc,lr,Dg,Se,Zd,Jf,ri],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:_f,_rowHeight:El,_rowLineVisible:U.listViewRowLineVisible,_rowLineColor:U.listViewRowLineColor,_scrollBarColor:Hb,_scrollBarSize:Db,_autoMakeVisible:tl,_autoHideScrollBar:Eg,_selectBackground:U.listViewSelectBackground,_labelColor:U.listViewLabelColor,_labelSelectColor:U.listViewLabelSelectColor,_labelFont:U.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(L){var s=this,p=s._checkMode;s._checkMode=L,s.fp(Pk,p,L)},drawRow:function(f,h,b,V,Z,U,d){var e=this,X=0,G=e._indent,E=e.getIconWidth(h);e.drawRowBackground(f,h,b,V,Z,U,d),e._checkMode&&(Pq(f,Tm(e.getCheckIcon(h)),X+G/2,Z+d/2,h,e),X+=G),e.drawIcon(f,h,X,Z,E,d),e.drawLabel(f,h,X+E,Z,d)}});var vm=function(N){this.list=N,this._lastSelectDataTime=Io(),this.addListeners()};bd(vm,h,{ms_listener:1,getView:function(){return this.list._view},clear:function(Z){var N=this,G=N.list;Z&&"d"===N._62O&&!N.dragCancel&&G.handleDragAndDrop(Z,"end"),G.draggingData&&(G.draggingData=null,G.redraw()),N.dragCancel=N._62O=N._isV=N._isH=N.cp=N.tx=N.ty=p},handle_mousedown:function(H){this.handle_touchstart(H)},handle_touchstart:function(e){var J=this,r=J.list;if(gj(e),r.setFocus(e)){var v=r.getDataAt(e);J.cp=kq(e),J.tx=r.tx(),J.ty=r.ty(),xm(e)?v&&r.handleDragAndDrop&&!J.isV(e)&&!J.isH(e)&&(r.draggingData=v,r.redraw(),r.handleDragAndDrop(e,"prepare")):(v&&J._33o(e,v),J.clear(e))}},handleWindowMouseUp:function(b){this.clear(b)},handleWindowTouchEnd:function(W){this.clear(W)},handle_mouseup:function(B){this.handle_touchend(B)},handle_touchend:function(I){var R=this,w=R.list;if(!R._isV&&!R._isH&&R.cp&&!R._62O){var C=w.getDataAt(I);C?(w.isCheckMode()?R._34o(I,C):R._33o(I,C),dl(I)?w.onDataDoubleClicked(C,I):w.onDataClicked(C,I)):w.handleBackgroundClick(I)}R.clear(I)},handleWindowMouseMove:function(B){this.handleWindowTouchMove(B)},handleWindowTouchMove:function(s){var e=this,T=e.list,j=e._62O,p=e.tx,$=e.ty,u=e.cp,h=kq(s),L=T._29I;"p"===j?T.setTranslate(p+h.x-u.x,$+h.y-u.y):"v"===j?T.ty($+(u.y-h.y)*T._59I/L.height):"h"===j?T.tx(p+(u.x-h.x)*T._91I/L.width):"d"===j&&(e.dragCancel||T.handleDragAndDrop(s,"between"))},handle_mousemove:function(S){this.handle_touchmove(S)},handle_touchmove:function(t){if(!cj&&xm(t)){var o=this,X=o.list;if(o._isV=o.isV(t),o._isH=o.isH(t),o.cp){if(!o._62O){if(ti(kq(t),o.cp)<2)return;o._isV?o._62O="v":o._isH?o._62O="h":X.draggingData&&!this.dragCancel?(o._62O="d",X.handleDragAndDrop(t,"begin")):o._62O="p",o._62O&&"d"!==o._62O&&X.draggingData&&(X.draggingData=null,X.redraw()),Kc(o)}}else o._isV&&X._43o(),o._isH&&X._42o()}},isV:function($){var l=this.list,c=l._29I;return l._41o()&&c.x+c.width-l.lp($).x<zr},isH:function(y){var r=this.list,M=r._29I;return r._40o()&&M.y+M.height-r.lp(y).y<zr},handle_mousewheel:function(s){this.handleScroll(s,s.wheelDelta/40,s.wheelDelta!==s.wheelDeltaX)},handle_DOMMouseScroll:function(c){this.handleScroll(c,-c.detail,1)},handleScroll:function(p,y,B){var h=this.list;gj(p),h.endEditing&&h.endEditing(),B&&h._41o()?h.translate(0,y*h.getRowHeight()):h._40o()&&h.translate(10*y,0)},handle_keydown:function(u){if(!U.isInput(u.target)){var c,g=this.list,T=g.sm(),Z=g._rows,k=Z.size();if(Fm(u))g.selectAll();else if(po(u))g.handleDelete&&g.handleDelete(u);else if(xq(u))"d"!==this._62O||this.dragCancel||(g.handleDragAndDrop(u,"cancel"),this.dragCancel=!0);else if(Le(u))g.isCheckMode()&&(c=g.getFocusData(),c&&g.checkData(c));else if(Xk(u)||gd(u)){var t=g.isCheckMode();if(c=t?g.getFocusData():T.ld()){var f=g.getRowIndex(c);f>=0&&(Xk(u)?0!==f&&(c=Z.get(f-1),t?g.setFocusData(c):T.ss(c)):f!==k-1&&(c=Z.get(f+1),t?g.setFocusData(c):T.ss(c)))}else k>0&&(c=Z.get(0),t?g.setFocusData(c):T.ss(c))}}},_34o:function(f,v){var I=this.list,k=I.lp(f).x;return k>=0&&k<=I._indent?(I.checkData(v),void 0):(I.setFocusData(v),void 0)},_33o:function(i,H){var P=this.list,L=P.sm(),r=L.ld();if(ok(i))P.isSelected(H)?L.rs(H):L.as(H);else if(Ar(i))if(r)for(var s=P.getRowIndex(r),m=P.getRowIndex(H);s!==m;)s+=m>s?1:-1,L.as(P._rows.get(s));else L.ss(H);else if(xm(i)){var G=Io();if(L.contains(H)){var U=G-this._lastSelectDataTime;P.handleDataDoubleSelect&&U>500&&1500>U&&P.handleDataDoubleSelect(i,H)}L.ss(H),this._lastSelectDataTime=G}else L.contains(H)||L.ss(H)}}),Tp.TreeView=function(u){var c=this;c._35o(),c._5o(u),new ts(c)},jr("TreeView",h,{ms_ac:[Sl,Tc,$q,"rootVisible",Pk,"rootData",Cc,lr,Dg,Se,Zd,qe,Fj,Vl,Df,_l,Nn,Jf,ri,"loader","doubleClickToToggle"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:p,_indent:_f,_rowHeight:El,_rowLineVisible:U.treeViewRowLineVisible,_rowLineColor:U.treeViewRowLineColor,_scrollBarColor:Hb,_scrollBarSize:Db,_autoHideScrollBar:Eg,_expandIcon:U.treeViewExpandIcon,_collapseIcon:U.treeViewCollapseIcon,_autoMakeVisible:tl,_selectBackground:U.treeViewSelectBackground,_labelColor:U.treeViewLabelColor,_labelSelectColor:U.treeViewLabelSelectColor,_labelFont:U.treeViewLabelFont,_doubleClickToToggle:U.treeViewDoubleClickToToggle,drawRow:function(s,C,J,S,a,v,I){var i=this;i.drawRowBackground(s,C,J,S,a,v,I),i._97I(s,C,J,0,a,v,I)},isOnToggleIcon:function(K){var r=this.getDataAt(K);if(r){var A=this.getIndent(),O=this.lp(K).x;if(Tm(this.getToggleIcon(r))){var E=A*this.getLevel(r);if(O>=E&&E+A>=O)return!0}}return!1}});var ts=function(w){td(ts,this,[w])};bd(ts,vm,{toggle:function(c,y,R,d){var s=this.list,N=s.lp(c).x;if(Tm(s.getToggleIcon(y))){var Q=R*d;if(N>=Q&&Q+R>=N)return s.toggle(y),!0}return s.isDoubleClickToToggle()&&dl(c)?(s.toggle(y),!0):!1},_34o:function(k,x){var $=this.list,d=$.lp(k).x,A=$._levelMap[x._id],P=$._indent,T=P*(A+1);return d>=T&&T+P>=d?($.checkData(x),void 0):(this.toggle(k,x,P,A)||$.setFocusData(x),void 0)},_33o:function(d,Z){var t=this,T=t.list;t.toggle(d,Z,T._indent,T.getLevel(Z))||ts.superClass._33o.call(t,d,Z)},handle_keydown:function(B){if(hb(B)||mq(B)){var k=this.list,o=k._rows,P=k.isCheckMode(),H=k.sm(),F=P?k.getFocusData():H.ld();F?F.hasChildren()&&(hb(B)?k.collapse(F):k.expand(F)):o.size()>0&&(F=o.get(0),P?k.setFocusData(F):H.ss(F))}else ts.superClass.handle_keydown.call(this,B)}});var jf=Tp.TableView=function(S){this._98I(),this._5o(S),new Xj(this)};jr("TableView",h,{ms_ac:[Sl,Tc,$q,"sortMode",vp,Eo,Fj,Vl,Df,Zj,Bs,"sortColumn",Cc,lr,Dg,Se,Zd,Jf,ri],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:Aq,_editable:!0,_batchEditable:!1,_rowHeight:El,_rowLineVisible:U.tableViewRowLineVisible,_rowLineColor:U.tableViewRowLineColor,_columnLineVisible:U.tableViewColumnLineVisible,_columnLineColor:U.tableViewColumnLineColor,_scrollBarColor:Hb,_scrollBarSize:Db,_autoHideScrollBar:Eg,_autoMakeVisible:tl,_selectBackground:U.tableViewSelectBackground,_labelColor:U.tableViewLabelColor,_labelSelectColor:U.tableViewLabelSelectColor,_labelFont:U.tableViewLabelFont,getCheckColumn:function(){var W=this;if(!W._31o){var b=W._31o=new Tr;b.setEditable(!0),b.setWidth(40),b.getValue=W.getCheckColumValue,b.drawCell=W.drawCheckColumnCell}return W._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(w){var M=this,v=M._39o,J=M.getCheckColumn();w!==M.isCheckMode()&&(w?v.add(J,0):v.remove(J),M.fp(Pk,!w,w))},getCheckColumValue:function(W,N,p){return p.isSelected(W)},drawCheckColumnCell:function(Y,q,Z,O,m,H,b,a,o){Pq(Y,o.getCheckIcon(q),m+b/2,H+a/2,q,o)}});var Xj=function(Q){td(Xj,this,[Q])};bd(Xj,vm,{_34o:function(k,T){var R=this.list,L=R._31o;if(R.isCellEditable(T,L,k)){var m=R._3Q(L),H=R.lp(k).x;if(m&&H>=m.startX&&H<m.startX+L.getWidth())return R.checkData(T),void 0}R._37O(T,k),R.setFocusData(T)},_33o:function(f,M){this.list._37O(M,f),Xj.superClass._33o.apply(this,arguments)}});var Gl=Tp.TreeTableView=function(H){var T=this,J=T._4o=new Tr;T._35o(),T._98I(),T._5o(H),J.setDisplayName("Name"),J.setEditable(!0),J.setWidth(180),J.drawCell=Xr,J.getValue=fn,T._39o.add(J),new Fe(T)},Xr=function(Q,F,$,s,c,N,o,H,p){p._97I(Q,F,$,c,N,o,H)},fn=function(X,h,R){return R.getLabel(X)};jr("TreeTableView",h,{ms_ac:[Sl,Tc,$q,"sortMode",vp,Eo,qe,Pk,"rootData","rootVisible",Cc,lr,"sortColumn",_l,Nn,Dg,Se,Zd,Jf,Df,Fj,Vl,Zj,Bs,ri,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:Aq,_checkMode:p,_editable:!0,_batchEditable:!1,_indent:_f,_rowHeight:El,_rowLineVisible:U.treeTableViewRowLineVisible,_rowLineColor:U.treeTableViewRowLineColor,_columnLineVisible:U.treeTableViewColumnLineVisible,_columnLineColor:U.treeTableViewColumnLineColor,_expandIcon:U.treeTableViewExpandIcon,_collapseIcon:U.treeTableViewCollapseIcon,_scrollBarColor:Hb,_scrollBarSize:Db,_autoHideScrollBar:Eg,_autoMakeVisible:tl,_selectBackground:U.treeTableViewSelectBackground,_labelColor:U.treeTableViewLabelColor,_labelSelectColor:U.treeTableViewLabelSelectColor,_labelFont:U.treeTableViewLabelFont,getTreeColumn:function(){return this._4o
}});var Fe=function(G){td(Fe,this,[G])};bd(Fe,vm,{_34o:function(J,s){var p=this.list,y=p._4o,C=p._3Q(y),I=p.lp(J).x;if(C){var V=p._indent,j=C.startX+V*p.getLevel(s);if(Tm(p.getToggleIcon(s))&&I>=j&&j+V>=I)return p.toggle(s),void 0;if(p.isCellEditable(s,y)&&(j+=V,I>=j&&j+V>=I))return p.checkData(s),void 0}p._37O(s,J),p.setFocusData(s)},_33o:function(R,n){var p=this.list,i=p.lp(R).x;if(Tm(p.getToggleIcon(n))){var g=p._3Q(p._4o);if(g){var F=p._indent,U=g.startX+F*p.getLevel(n);if(i>=U&&U+F>=i)return p.toggle(n),void 0}}p._37O(n,R),Fe.superClass._33o.apply(this,arguments)}});var Jj=Tp.TableHeader=function(k){var r=this,e=r._view=Yf(1,r),h=r._39o=k.getColumnModel(),W=r.iv;r.tv=r._tableView=k,r._60I=new uh,r._canvas=Ne(e),e.style.background=U.tableHeaderBackground||"",e.style.height=Hm+Vj,h.mm(W,r),h.md(W,r),h.mh(W,r),k.mp(function(_){Lc[_.property]&&r.iv()},r),new wc(r),r.iv()};jr("TableHeader",h,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",Sl,$q,qe,"moveBackground","insertColor",Zj,Bs,"resizable","movable"],_checkIcon:bn,_movable:!0,_resizable:!0,_labelColor:U.tableHeaderLabelColor,_labelFont:U.tableHeaderLabelFont,_columnLineColor:U.tableHeaderColumnLineColor,_columnLineVisible:U.tableHeaderColumnLineVisible,_sortDescIcon:U.tableHeaderSortDescIcon,_sortAscIcon:U.tableHeaderSortAscIcon,_moveBackground:U.tableHeaderMoveBackground,_insertColor:U.tableHeaderInsertColor,_indent:_f,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(O){return O.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(g){return g.getColor()||this._labelColor},getLabelAlign:function(k){return k._align},onPropertyChanged:function(){this.iv()},_5Q:function(q){this._61I=q,this.iv()},getLogicalPoint:function(j){return wd(j,this._canvas,this.tv.tx())},validateImpl:function(){var M=this,d=M._canvas,p=M.getWidth(),o=M.getHeight(),H=M.tv,h=M._60I,z=M._61I,A=-H.tx(),N=0;(p!==d.clientWidth||o!==d.clientHeight)&&Yc(d,p,o),h.clear(),M._39o._roots.each(function(Z){if(Z.isVisible()){var z=N+Z.getWidth();A+p>=N&&z>=A&&h.add({column:Z,startX:N}),N=z}});var E=Xh(d);if(Co(E,-A,0,1),E.beginPath(),E.rect(A,0,p,o),E.clip(),E.clearRect(A,0,p,o),h.each(function(R){var f=R.column,u=R.startX,q=f.getWidth();q>0&&(E.save(),E.beginPath(),E.rect(u,0,q,o),E.clip(),z&&z.column===f||M.drawColumn(E,f,u,0,q,o),M._columnLineVisible&&le(E,u+q-1,0,1,o,M._columnLineColor),E.restore())}),z){var g=z.column,N=z.startX,l=z.position,e=g.getWidth();E.save(),E.beginPath(),E.rect(N,0,e,o),E.clip(),E.fillStyle=M._moveBackground,E.fill(),M.drawColumn(E,g,N,0,e,o),E.restore(),ve(E,M._insertColor,l,0,o)}E.restore()},_6Q:function(r){var p=this.tv;return p._31o===r&&p.sm().getSelectionMode()===jn},drawColumn:function(L,j,w,f,l,$){var b=this,M=b.tv,g=Tm(j.getIcon()),X=b.getLabelAlign(j);if(b._6Q(j)){var P=Tm(b._checkIcon);Pq(L,P,w+l/2,f+$/2,j,b)}else{var G=b.getLabel(j),q=b.getLabelFont(j),H=b.getLabelColor(j),U=sk(q,G).width,y=g?b._indent:0;X===Aj?(g&&Xl(L,g,As,w,f,y,$),Sn(L,G,q,H,w+y,f,l,$,Aj)):X===ig?(g&&Xl(L,g,As,w+l-U-y,f,y,$),Sn(L,G,q,H,w,f,l,$,ig)):(g&&Xl(L,g,As,w+(l-U-y)/2,f,y,$),Sn(L,G,q,H,w+(l-U+y)/2,f,0,$,Aj))}if(j.isSortable()&&M.getSortColumn()===j&&(g=Tm(j.getSortOrder()===Ug?b._sortAscIcon:b._sortDescIcon))){var T=rl(g,j)/2+2;Pq(L,g,X===ig?w+T:w+l-T,f+$/2,j,M)}}});var wc=function(k){var F=this;F.th=k,F.tv=k._tableView,F.addListeners()};bd(wc,h,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(D){this.getView().style.cursor=D},handle_mousemove:function(y){if(!cj){var t=this;delete t._29o,t.setCursor(Wb);for(var H=t.th,J=H._60I,g=H.lp(y).x,D=J.size()-1;D>=0;D--){var O=J.get(D),i=O.column,I=O.startX+i.getWidth();if(H.isResizable()&&B(I-g)<=(_?10:3))return t._29o=O,t.setCursor(Ie),void 0;g>O.startX&&I>g&&(t._29o=O),(i.isClickable()||i.isSortable()||H.isMovable()||t.tv.getCheckColumn&&i===t.tv.getCheckColumn())&&g>O.startX&&I>g&&t.setCursor(Kn)}}},handle_mousedown:function(F){this.handle_touchstart(F)},handle_touchstart:function(b){var t=this;gj(b),t.tv.endEditing(),t.handle_mousemove(b),t._29o&&(t.x=kq(b).x,t.lx=t.th.lp(b).x,t.w=t._29o.column.getWidth(),Kc(t,b))},handleWindowMouseMove:function(b){this.handleWindowTouchMove(b)},handleWindowTouchMove:function(_){var N=this,C=N.th,A=N.getView().style.cursor,V=N._29o,s=kq(_).x-N.x;if(N.resizing||N.moving||(A===Ie?N.resizing=1:C.isMovable()&&A===Kn&&B(s)>2&&(N.moving=1)),N.resizing)V.column.setWidth(N.w+s);else if(N.moving){var q=N.lx+s;C._60I.each(function(n){var U=n.startX,A=U+n.column.getWidth();if(q>=U&&A>=q){var f={column:V.column,startX:V.startX+s,front:A-q>q-U,insertColumn:n.column};f.position=f.front?U:A,C._5Q(f)}})}},_16Q:function(F,g){var p=this,W=p.tv,f=p.th,E=f._checkIcon;if(f._6Q(F)){var R=Tm(E),o=p.lx,Z=F.getWidth(),G=rl(R,F);if(o>=g+Z/2-G&&g+Z/2+G>=o){f.setCheckIcon(E===_h?bn:_h);var J=W.sm(),K=W._rows;return E===_h?J.rs(K):J.ss(K),W.onCheckColumnClicked(F),!0}}return!1},handleWindowMouseUp:function(i){this.handleWindowTouchEnd(i)},handleWindowTouchEnd:function(y){var Y=this,v=Y.tv,N=Y.th,r=Y._29o;if(Y.moving){var i=N._61I;if(i&&i.insertColumn!==i.column){var L=i.column,O=v.getColumnModel()._roots,q=O.remove(L),m=O.indexOf(i.insertColumn);m>=0&&(i.front||m++,m<=O.size()&&(O.add(L,m),v.getColumnModel()._38I(L,q,m)))}N._5Q(p),delete Y.moving}else if(!Y.resizing&&r){L=r.column;var M=N.lp(y).x,g=r.startX,A=!0;if(N.onColumnClicked){var x=N.onColumnClicked(L,y,g);x===!1&&(A=!1)}if(A&&M>=g&&M<=g+L.getWidth()&&!Y._16Q(L,g)){if(L.isSortable()){var D=v.getSortMode(),u=L.getSortOrder();D===Aq?v.getSortColumn()===L?(u===qi&&v.setSortColumn(p),L.setSortOrder(u===Ug?qi:Ug)):v.setSortColumn(L):"bistate"===D&&(v.getSortColumn()===L?L.setSortOrder(u===Ug?qi:Ug):v.setSortColumn(L))}v.onColumnClicked(L,y,g)}}Y._29o=Y.resizing=Y.x=Y.lx=Y.w=p}}),Tp.TablePane=function(R){this.init(new jf(R))},jr("TablePane",h,{ms_v:1,_44o:1}),Tp.TreeTablePane=function(w){this.init(new Gl(w))},jr("TreeTablePane",h,{ms_v:1,_44o:1}),Tp.Toolbar=function(S){var N=this,i=N._view=Yf(1,N),e=i.style;e.background=U.toolbarBackground||"",e.height=Ze+Vj,N._canvas=Ne(i),N._30o=new uh,N._90I=new uh,N.setItems(S||[]),i.handleGroupSelectedChanged=function(z){if(z.isSelected()){var Y=z.getGroupId();null!=Y&&N._items.forEach(function(k){var W=k.element;W&&W!==z&&W.setSelected&&W.getGroupId&&W.getGroupId()===Y&&W.setSelected(!1)})}},new vf(N)},jr("Toolbar",h,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[dh,Sl,$q,Tc,ri,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:U.toolbarLabelColor,_labelSelectColor:U.toolbarLabelSelectColor,_labelFont:U.toolbarLabelFont,_selectBackground:U.toolbarSelectBackground,_itemGap:U.toolbarItemGap,_separatorColor:U.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(V){var N=this.getItemInfoAt(V);return N?N.item.toolTip:p},getLabelColor:function(Z){return Z&&Z.selected&&Z.type!==_h&&Z.type!==qo?this._labelSelectColor:this._labelColor},onPropertyChanged:function(z){this.iv(),z.property===dh&&this._items.forEach(function(C){jm(C)})},redraw:function(){this.iv()},addItem:function(l,F){var z=this._items;F==p?z.push(l):z.splice(F,0,l),this.fp(dh,p,z)},removeItem:function(o){if(o)for(var K=this._items,l=0;l<K.length;l++)o===K[l]&&(K.splice(l,1),this.fp(dh,p,K))},removeItemById:function(O){if(O!=p)for(var F=this._items,a=0;a<F.length;a++)if(O===F[a].id){var J=F.splice(a,1)[0];return this.fp(dh,p,F),J}},getItemById:function(s){if(s!=p)for(var M=this._items,T=0;T<M.length;T++){var $=M[T];if(s===$.id)return $}},setItemVisible:function(c,S){var n=this.getItemById(c);n&&(n.visible=S)},getItemInfos:function(){return this._30o},getItemInfoAt:function(U){var i=this,t=0,J=i._30o,H=i.lp(U),Y=H.x,c=H.y;if(c>=0&&c<=i.getHeight())for(;t<J.size();t++){var l=J.get(t);if(l.startX<=Y&&Y<=l.endX)return l}return p},drawItem:function(o,k,y,D,f){if(k.visible===!1)return 0;if(vk(k.visible)&&!k.visible())return 0;var V=this,c=k.disabled;c&&(o.globalAlpha=cn);var U=V.drawItemImpl(o,k,y,D,f),x=V._itemGap;return c&&(o.globalAlpha=1),this._currentItem!==k||"separator"===k||k.separator===!0||k.unfocusable||gg(o,V._separatorColor,y-x/2,0,U+x,D),U},drawItemImpl:function(W,H,X,m,T){var s=this,O=s._view,u=s._itemGap,i=m/2,E=H.type,I=H.element,h=H.label;Op(I)&&(h=I,I=p);var N,A=s.getLabelFont(H),P=s.getLabelColor(H),t=H.selected,f=Tm(H.icon),B=rl(f,H),Z=0,C=B+(h?sk(A,h).width:0);if("separator"===H||H.separator===!0)return ve(W,s._separatorColor,X,m/4,i),1;if(I){f&&Pq(W,f,X+B/2,i,H,s),Sn(W,h,A,P,X+B,0,0,m);var w=Gn(I);T||s._90I.add(w),w.parentNode!==O&&rj(O,w),I.iv&&I.iv(),I.validate&&I.validate();var b=w.getBoundingClientRect(),o=b.width,y=w.style;return Pf(w),y.left=s.tx()+X+C+Vj,y.top=(m-b.height)/2+Vj,C+o}return E===qo?N=Tm(t?as:mh):E===_h&&(N=Tm(t?_h:bn)),N?(Z=rl(N,H),Pq(W,N,X+Z/2,i,H,s),X+=Z,C+=Z):t&&le(W,X-u/2,0,C+u,m,s.getSelectBackground(H)),f&&Pq(W,f,X+B/2,i,H,s),Sn(W,h,A,P,X+B,0,0,m),C},validateImpl:function(){var l=this,L=l._canvas,R=l.getWidth(),m=l.getHeight(),r=l._30o,f=l._items;Yc(L,R,m);var v=Xh(L),b=l._itemGap,P=b/2;Co(v,l.tx(),0,1),v.clearRect(0,0,R,m);var $=l._90I;l._90I=new uh,r.clear(),f.forEach(function(C){var q=l.drawItem(v,C,P,m);r.add({item:C,startX:P,endX:P+q,width:q}),q&&(P+=q+b)}),$.each(function(t){l._90I.contains(t)||_k(t)});var U=l._64I;l._64I=Q(0,P),v.restore(),l._stickToRight?(l._65O=0,v=Xh(L),P=R-l._64I+b,Co(v,0,0,1),v.clearRect(0,0,R,m),r.clear(),f.forEach(function(f){var K=l.drawItem(v,f,P,m,!0);r.add({item:f,startX:P,endX:P+K,width:K}),K&&(P+=K+b)}),v.restore()):l.tx(l.tx()),U!==l._64I&&l.onSumWidthChanged(U,l._64I)},onSumWidthChanged:function(){},handleClick:function(h,k){var l=this,B=h.type,c=h.action,C=h.groupId,g=h.selected;h.disabled||(C!=p?g||(h.selected=!0,this._items.forEach(function(s){s.groupId===C&&h!==s&&(s.selected=!1)}),c&&h.action(h,l,k)):B===_h||"toggle"===B?(h.selected=!g,c&&h.action(h,l,k)):c&&h.action(h,l,k)),mk(),l.iv()}});var vf=function(t){this.tb=t,this.addListeners()};bd(vf,h,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(G){this.handleScroll(G,10*(G.wheelDelta/40))},handle_DOMMouseScroll:function(J){this.handleScroll(J,10*-J.detail)},handleScroll:function(h,m){gj(h);var k=this.tb;k.isScrollable()&&!k._stickToRight&&(k.tx(k.tx()+m),al())},handle_mousemove:function(V){var i=this;cj||i.setItem(V)},handle_mouseout:function(x){var c=this;x.target===c.getView()?c.tb.setCurrentItem(p):c.handle_mousemove(x)},handle_mousedown:function(T){this.handle_mousemove(T),this.handle_touchstart(T)},handle_touchstart:function(d){var g=this,B=g.tb,G=d.target;xm(d)&&(G===g.getView()||G===B._canvas)&&(gj(d),B.setFocus(d)&&(this.setItem(d,!0),(B.isScrollable()||g.info&&!g.info.item.disabled)&&(g.x=kq(d).x,g.tx=B.tx(),Kc(g,d))))},handleWindowMouseMove:function($){this.handleWindowTouchMove($)},handleWindowTouchMove:function(k){var P=this,m=P.tb;if(!m._stickToRight){var C=kq(k).x-P.x;!P._25o&&B(C)>2&&m.isScrollable()&&(P._25o=1),P._25o&&m.tx(P.tx+C)}},handleWindowMouseUp:function(D){this.handleWindowTouchEnd(D)},handleWindowTouchEnd:function(M){var z=this,Z=z.tb,C=z.info,A=z.tb.getItemInfoAt(M);if(!z._25o&&C){var d=C.item;A&&A.item===d&&Z.handleClick(d,M)}z._25o=z.x=z.tx=p,z.setItem()},setItem:function(s,A){var V=this,c=V.tb,_=V.info=s?c.getItemInfoAt(s):p,z=_?_.item:p;c.setCurrentItem(z),A&&z&&vk(z.onDown)&&z.onDown(s)}}),Tp.BorderPane=function(){this._view=Yf(1,this),this.iv()},jr("BorderPane",h,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(j,b){this._12o("leftView",j),b!=p&&this.setLeftWidth(b)},getRightView:function(){return this._rightView},setRightView:function(a,g){this._12o("rightView",a),g!=p&&this.setRightWidth(g)},getTopView:function(){return this._topView},setTopView:function(Z,K){this._12o("topView",Z),K!=p&&this.setTopHeight(K)},getBottomView:function(){return this._bottomView},setBottomView:function(U,v){this._12o("bottomView",U),v!=p&&this.setBottomHeight(v)},getCenterView:function(){return this._centerView},setCenterView:function(P){this._12o("centerView",P)},_12o:function(v,Y){var L=this,w="_"+v,T=L._view,c=L[w];c!==Y&&(c&&(c.getView?_k(c.getView()):_k(c)),L[w]=Y,Y&&(Y.getView?rj(T,Y.getView(),1):rj(T,Y,1)),L.fp(v,c,Y))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var U=this,N=U._topView,f=U._bottomView,R=U._leftView,i=U._rightView,x=U._centerView,K=U.getWidth(),I=U.getHeight(),u=0,B=0,q=K,T=I,$=0,w=0,G=0,O=0;N&&($=U._topHeight==p?Hh(N):U._topHeight,B=$),f&&(w=U._bottomHeight==p?Hh(f):U._bottomHeight,T=I-w),R&&(G=U._leftWidth==p?Rd(R):U._leftWidth,u=G),i&&(O=U._rightWidth==p?Rd(i):U._rightWidth,q=K-O);var W=Q(0,q-u),s=Q(0,T-B);N&&Eb(N,0,0,K,$),f&&Eb(f,0,T,K,w),R&&Eb(R,0,B,G,s),i&&Eb(i,q,B,O,s),x&&Eb(x,u,B,W,s)}})}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
